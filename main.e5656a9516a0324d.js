"use strict";var zF=Object.defineProperty,qF=Object.defineProperties,WF=Object.getOwnPropertyDescriptors,lR=Object.getOwnPropertySymbols,KF=Object.prototype.hasOwnProperty,ZF=Object.prototype.propertyIsEnumerable,cR=(Xe,we,O)=>we in Xe?zF(Xe,we,{enumerable:!0,configurable:!0,writable:!0,value:O}):Xe[we]=O,dR=(Xe,we)=>{for(var O in we||(we={}))KF.call(we,O)&&cR(Xe,O,we[O]);if(lR)for(var O of lR(we))ZF.call(we,O)&&cR(Xe,O,we[O]);return Xe},hR=(Xe,we)=>qF(Xe,WF(we));(self.webpackChunkHACKATON=self.webpackChunkHACKATON||[]).push([[179],{2011:(Xe,we,O)=>{O.d(we,{hO:()=>ze,xv:()=>de,Dh:()=>oe,GT:()=>ge,cc:()=>Me,on:()=>$,pX:()=>re});var f=O(5e3),X=O(127),P=O(5813);Xe=O.hmd(Xe);const ue=["ngOnDestroy"],re=(Ce,qe,Ye,Te={})=>new Proxy(Ce,{get:(Ee,Ie)=>Ye.runOutsideAngular(()=>{var He;if(Ce[Ie])return(null===(He=null==Te?void 0:Te.spy)||void 0===He?void 0:He.get)&&Te.spy.get(Ie,Ce[Ie]),Ce[Ie];if(ue.indexOf(Ie)>-1)return()=>{};const $e=qe.toPromise().then(j=>{const ve=j&&j[Ie];return"function"==typeof ve?ve.bind(j):ve&&ve.then?ve.then(K=>Ye.run(()=>K)):Ye.run(()=>ve)});return new Proxy(()=>{},{get:(j,ve)=>$e[ve],apply:(j,ve,K)=>$e.then(ie=>{var ee;const ye=ie&&ie(...K);return(null===(ee=null==Te?void 0:Te.spy)||void 0===ee?void 0:ee.apply)&&Te.spy.apply(Ie,K,ye),ye})})})}),ge=(Ce,qe)=>{qe.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Te=>{Object.defineProperty(Ce.prototype,Te,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Te))})})};class le{constructor(qe){return qe}}const oe=new f.OlP("angularfire2.app.options"),de=new f.OlP("angularfire2.app.name");function $(Ce,qe,Ye){const Ee="object"==typeof Ye&&Ye||{};Ee.name=Ee.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const He=X.Z.apps.filter($e=>$e&&$e.name===Ee.name)[0]||qe.runOutsideAngular(()=>X.Z.initializeApp(Ce,Ee));try{JSON.stringify(Ce)!==JSON.stringify(He.options)&&B("error",`${He.name} Firebase App already initialized with different options${Xe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new le(He)}const B=(Ce,...qe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ce](...qe)},te={provide:le,useFactory:$,deps:[oe,f.R0b,[new f.FiY,de]]};let ze=(()=>{class Ce{constructor(Ye){X.Z.registerVersion("angularfire",P.q4.full,"core"),X.Z.registerVersion("angularfire",P.q4.full,"app-compat"),X.Z.registerVersion("angular",f.q4F.full,Ye.toString())}static initializeApp(Ye,Te){return{ngModule:Ce,providers:[{provide:oe,useValue:Ye},{provide:de,useValue:Te}]}}}return Ce.\u0275fac=function(Ye){return new(Ye||Ce)(f.LFG(f.Lbi))},Ce.\u0275mod=f.oAB({type:Ce}),Ce.\u0275inj=f.cJS({providers:[te]}),Ce})();function Me(Ce,qe,Ye,Te,Ee){const[,Ie,He]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Ce)||[];if(Ie)return function Oe(Ce,qe){try{return Ce.toString()===qe.toString()}catch(Ye){return Ce===qe}}(Ee,He)||(fe("error",`${qe} was already initialized on the ${Ye} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:Ee,was:He})),Ie;{const $e=Te();return globalThis.\u0275AngularfireInstanceCache.push([Ce,$e,Ee]),$e}}const je=!!Xe.hot,fe=(Ce,...qe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ce](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Xe,we,O)=>{O.d(we,{q4:()=>uo,iC:()=>Qo,HU:()=>pd,vb:()=>fd,JM:()=>Jp});var f=O(5e3),X=O(5867),P=O(5861),ue=O(9681),re=O(2090),ge=O(4859),le=O(1877),oe=O(8766);const de="@firebase/installations",$="0.5.9",te=`w:${$}`,ze="FIS_v2",qe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Te({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ee(D){return{token:D.token,requestStatus:2,expiresIn:ie(D.expiresIn),creationTime:Date.now()}}function Ie(D,C){return He.apply(this,arguments)}function He(){return(He=(0,P.Z)(function*(D,C){const F=(yield C.json()).error;return qe.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function $e({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function j(D,{refreshToken:C}){const N=$e(D);return N.append("Authorization",function ee(D){return`${ze} ${D}`}(C)),N}function ve(D){return K.apply(this,arguments)}function K(){return(K=(0,P.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function ie(D){return Number(D.replace("s","000"))}function ye(D,C){return ae.apply(this,arguments)}function ae(){return(ae=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:N}){const F=Te(D),Y=$e(D),ne=C.getImmediate({optional:!0});if(ne){const dt=yield ne.getHeartbeatsHeader();dt&&Y.append("x-firebase-client",dt)}const Ve={method:"POST",headers:Y,body:JSON.stringify({fid:N,authVersion:ze,appId:D.appId,sdkVersion:te})},Ct=yield ve(()=>fetch(F,Ve));if(Ct.ok){const dt=yield Ct.json();return{fid:dt.fid||N,registrationStatus:2,refreshToken:dt.refreshToken,authToken:Ee(dt.authToken)}}throw yield Ie("Create Installation",Ct)})).apply(this,arguments)}function Pe(D){return new Promise(C=>{setTimeout(C,D)})}const Ht=/^[cdef][\w-]{21}$/;function Qe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const N=function Jt(D){return function ut(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Ht.test(N)?N:""}catch(D){return""}}function Tn(D){return`${D.appName}!${D.appId}`}const nn=new Map;function Yt(D,C){const N=Tn(D);kt(N,C),function Ji(D,C){const N=function lr(){return!Wr&&"BroadcastChannel"in self&&(Wr=new BroadcastChannel("[Firebase] FID Change"),Wr.onmessage=D=>{kt(D.data.key,D.data.fid)}),Wr}();N&&N.postMessage({key:D,fid:C}),function Dr(){0===nn.size&&Wr&&(Wr.close(),Wr=null)}()}(N,C)}function kt(D,C){const N=nn.get(D);if(N)for(const F of N)F(C)}let Wr=null;const Kr="firebase-installations-store";let Mi=null;function mt(){return Mi||(Mi=(0,oe.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Kr)}})),Mi}function Zr(D,C){return vn.apply(this,arguments)}function vn(){return(vn=(0,P.Z)(function*(D,C){const N=Tn(D),Y=(yield mt()).transaction(Kr,"readwrite"),ne=Y.objectStore(Kr),me=yield ne.get(N);return yield ne.put(C,N),yield Y.done,(!me||me.fid!==C.fid)&&Yt(D,C.fid),C})).apply(this,arguments)}function An(D){return qs.apply(this,arguments)}function qs(){return(qs=(0,P.Z)(function*(D){const C=Tn(D),F=(yield mt()).transaction(Kr,"readwrite");yield F.objectStore(Kr).delete(C),yield F.done})).apply(this,arguments)}function Yr(D,C){return $n.apply(this,arguments)}function $n(){return($n=(0,P.Z)(function*(D,C){const N=Tn(D),Y=(yield mt()).transaction(Kr,"readwrite"),ne=Y.objectStore(Kr),me=yield ne.get(N),Ve=C(me);return void 0===Ve?yield ne.delete(N):yield ne.put(Ve,N),yield Y.done,Ve&&(!me||me.fid!==Ve.fid)&&Yt(D,Ve.fid),Ve})).apply(this,arguments)}function Nn(D){return mi.apply(this,arguments)}function mi(){return(mi=(0,P.Z)(function*(D){let C;const N=yield Yr(D.appConfig,F=>{const Y=To(F),ne=Gt(D,Y);return C=ne.registrationPromise,ne.installationEntry});return""===N.fid?{installationEntry:yield C}:{installationEntry:N,registrationPromise:C}})).apply(this,arguments)}function To(D){return Ws(D||{fid:Qe(),registrationStatus:0})}function Gt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(qe.create("app-offline"))};const N={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(D,C){return vt.apply(this,arguments)}(D,N);return{installationEntry:N,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:cr(D)}:{installationEntry:C}}function vt(){return(vt=(0,P.Z)(function*(D,C){try{const N=yield ye(D,C);return Zr(D.appConfig,N)}catch(N){throw Ye(N)&&409===N.customData.serverCode?yield An(D.appConfig):yield Zr(D.appConfig,{fid:C.fid,registrationStatus:0}),N}})).apply(this,arguments)}function cr(D){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,P.Z)(function*(D){let C=yield Vt(D.appConfig);for(;1===C.registrationStatus;)yield Pe(100),C=yield Vt(D.appConfig);if(0===C.registrationStatus){const{installationEntry:N,registrationPromise:F}=yield Nn(D);return F||N}return C})).apply(this,arguments)}function Vt(D){return Yr(D,C=>{if(!C)throw qe.create("installation-not-found");return Ws(C)})}function Ws(D){return function dr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function hr(D,C){return V.apply(this,arguments)}function V(){return(V=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},N){const F=G(D,N),Y=j(D,N),ne=C.getImmediate({optional:!0});if(ne){const dt=yield ne.getHeartbeatsHeader();dt&&Y.append("x-firebase-client",dt)}const Ve={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:te,appId:D.appId}})},Ct=yield ve(()=>fetch(F,Ve));if(Ct.ok)return Ee(yield Ct.json());throw yield Ie("Generate Auth Token",Ct)})).apply(this,arguments)}function G(D,{fid:C}){return`${Te(D)}/${C}/authTokens:generate`}function z(D){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(D,C=!1){let N;const F=yield Yr(D.appConfig,ne=>{if(!Dt(ne))throw qe.create("not-registered");const me=ne.authToken;if(!C&&cn(me))return ne;if(1===me.requestStatus)return N=H(D,C),ne;{if(!navigator.onLine)throw qe.create("app-offline");const Ve=Fn(ne);return N=Je(D,Ve),Ve}});return N?yield N:F.authToken})).apply(this,arguments)}function H(D,C){return J.apply(this,arguments)}function J(){return(J=(0,P.Z)(function*(D,C){let N=yield Ne(D.appConfig);for(;1===N.authToken.requestStatus;)yield Pe(100),N=yield Ne(D.appConfig);const F=N.authToken;return 0===F.requestStatus?z(D,C):F})).apply(this,arguments)}function Ne(D){return Yr(D,C=>{if(!Dt(C))throw qe.create("not-registered");return function Cr(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Je(D,C){return ht.apply(this,arguments)}function ht(){return(ht=(0,P.Z)(function*(D,C){try{const N=yield hr(D,C),F=Object.assign(Object.assign({},C),{authToken:N});return yield Zr(D.appConfig,F),N}catch(N){if(!Ye(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Zr(D.appConfig,F)}else yield An(D.appConfig);throw N}})).apply(this,arguments)}function Dt(D){return void 0!==D&&2===D.registrationStatus}function cn(D){return 2===D.requestStatus&&!function Et(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function Fn(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function Ea(){return(Ea=(0,P.Z)(function*(D){const C=D,{installationEntry:N,registrationPromise:F}=yield Nn(C);return F?F.catch(console.error):z(C).catch(console.error),N.fid})).apply(this,arguments)}function wa(){return(wa=(0,P.Z)(function*(D,C=!1){const N=D;return yield Ln(N),(yield z(N,C)).token})).apply(this,arguments)}function Ln(D){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,P.Z)(function*(D){const{registrationPromise:C}=yield Nn(D);C&&(yield C)})).apply(this,arguments)}function Ao(D){return qe.create("missing-app-config-values",{valueName:D})}const Vr="installations",ot=D=>{const C=D.getProvider("app").getImmediate(),N=function Qn(D){if(!D||!D.options)throw Ao("App Configuration");if(!D.name)throw Ao("App Name");const C=["projectId","apiKey","appId"];for(const N of C)if(!D.options[N])throw Ao(N);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:N,heartbeatServiceProvider:(0,ue._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Xt=D=>{const C=D.getProvider("app").getImmediate(),N=(0,ue._getProvider)(C,Vr).getImmediate();return{getId:()=>function gu(D){return Ea.apply(this,arguments)}(N),getToken:Y=>function mu(D){return wa.apply(this,arguments)}(N,Y)}};(function Ur(){(0,ue._registerComponent)(new ge.wA(Vr,ot,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("installations-internal",Xt,"PRIVATE"))})(),(0,ue.registerVersion)(de,$),(0,ue.registerVersion)(de,$,"esm2017");const xi="@firebase/remote-config",Sn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class jp{constructor(C,N,F,Y){this.client=C,this.storage=N,this.storageCache=F,this.logger=Y}isCachedDataFresh(C,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-N,Y=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Y}.`),Y}fetch(C){var N=this;return(0,P.Z)(function*(){const[F,Y]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(Y&&N.isCachedDataFresh(C.cacheMaxAgeMillis,F))return Y;C.eTag=Y&&Y.eTag;const ne=yield N.client.fetch(C),me=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&me.push(N.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(me),ne})()}}function Wc(D=navigator){return D.languages&&D.languages[0]||D.language}class fr{constructor(C,N,F,Y,ne,me){this.firebaseInstallations=C,this.sdkVersion=N,this.namespace=F,this.projectId=Y,this.apiKey=ne,this.appId=me}fetch(C){var N=this;return(0,P.Z)(function*(){const[F,Y]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Ve={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Ct={sdk_version:N.sdkVersion,app_instance_id:F,app_instance_id_token:Y,app_id:N.appId,language_code:Wc()},dt={method:"POST",headers:Ve,body:JSON.stringify(Ct)},Ut=fetch(me,dt),wt=new Promise((si,oi)=>{C.signal.addEventListener(()=>{const Lu=new Error("The operation was aborted.");Lu.name="AbortError",oi(Lu)})});let gr;try{yield Promise.race([Ut,wt]),gr=yield Ut}catch(si){let oi="fetch-client-network";throw"AbortError"===si.name&&(oi="fetch-timeout"),Sn.create(oi,{originalErrorMessage:si.message})}let qn=gr.status;const as=gr.headers.get("ETag")||void 0;let Gr,ii;if(200===gr.status){let si;try{si=yield gr.json()}catch(oi){throw Sn.create("fetch-client-parse",{originalErrorMessage:oi.message})}Gr=si.entries,ii=si.state}if("INSTANCE_STATE_UNSPECIFIED"===ii?qn=500:"NO_CHANGE"===ii?qn=304:("NO_TEMPLATE"===ii||"EMPTY_CONFIG"===ii)&&(Gr={}),304!==qn&&200!==qn)throw Sn.create("fetch-status",{httpStatus:qn});return{status:qn,eTag:as,config:Gr}})()}}class $p{constructor(C,N){this.client=C,this.storage=N}fetch(C){var N=this;return(0,P.Z)(function*(){const F=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:N,backoffCount:F}){var Y=this;return(0,P.Z)(function*(){yield function Ss(D,C){return new Promise((N,F)=>{const Y=Math.max(C-Date.now(),0),ne=setTimeout(N,Y);D.addEventListener(()=>{clearTimeout(ne),F(Sn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,N);try{const ne=yield Y.client.fetch(C);return yield Y.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function Kc(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ne))throw ne;const me={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(me),Y.attemptFetch(C,me)}})()}}class Zc{constructor(C,N,F,Y,ne){this.app=C,this._client=N,this._storageCache=F,this._storage=Y,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sl(D,C){const N=D.target.error||void 0;return Sn.create(C,{originalErrorMessage:N&&N.message})}const Ms="app_namespace_store";class zp{constructor(C,N,F,Y=function Gp(){return new Promise((D,C)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=F=>{C(Sl(F,"storage-open"))},N.onsuccess=F=>{D(F.target.result)},N.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ms,{keyPath:"compositeKey"})}}catch(N){C(Sn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=C,this.appName=N,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var N=this;return(0,P.Z)(function*(){const F=yield N.openDbPromise;return new Promise((Y,ne)=>{const Ve=F.transaction([Ms],"readonly").objectStore(Ms),Ct=N.createCompositeKey(C);try{const dt=Ve.get(Ct);dt.onerror=Ut=>{ne(Sl(Ut,"storage-get"))},dt.onsuccess=Ut=>{const wt=Ut.target.result;Y(wt?wt.value:void 0)}}catch(dt){ne(Sn.create("storage-get",{originalErrorMessage:dt&&dt.message}))}})})()}set(C,N){var F=this;return(0,P.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((ne,me)=>{const Ct=Y.transaction([Ms],"readwrite").objectStore(Ms),dt=F.createCompositeKey(C);try{const Ut=Ct.put({compositeKey:dt,value:N});Ut.onerror=wt=>{me(Sl(wt,"storage-set"))},Ut.onsuccess=()=>{ne()}}catch(Ut){me(Sn.create("storage-set",{originalErrorMessage:Ut&&Ut.message}))}})})()}delete(C){var N=this;return(0,P.Z)(function*(){const F=yield N.openDbPromise;return new Promise((Y,ne)=>{const Ve=F.transaction([Ms],"readwrite").objectStore(Ms),Ct=N.createCompositeKey(C);try{const dt=Ve.delete(Ct);dt.onerror=Ut=>{ne(Sl(Ut,"storage-delete"))},dt.onsuccess=()=>{Y()}}catch(dt){ne(Sn.create("storage-delete",{originalErrorMessage:dt&&dt.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Qc{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const N=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),Y=C.storage.getActiveConfig(),ne=yield N;ne&&(C.lastFetchStatus=ne);const me=yield F;me&&(C.lastSuccessfulFetchTimestampMillis=me);const Ve=yield Y;Ve&&(C.activeConfig=Ve)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Eu(){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,P.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}!function So(){(0,ue._registerComponent)(new ge.wA("remote-config",function D(C,{instanceIdentifier:N}){const F=C.getProvider("app").getImmediate(),Y=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Sn.create("registration-window");if(!(0,re.hl)())throw Sn.create("indexed-db-unavailable");const{projectId:ne,apiKey:me,appId:Ve}=F.options;if(!ne)throw Sn.create("registration-project-id");if(!me)throw Sn.create("registration-api-key");if(!Ve)throw Sn.create("registration-app-id");const Ct=new zp(Ve,F.name,N=N||"firebase"),dt=new Qc(Ct),Ut=new le.Yd(xi);Ut.logLevel=le.in.ERROR;const wt=new fr(Y,ue.SDK_VERSION,N,ne,me,Ve),gr=new $p(wt,Ct),qn=new jp(gr,Ct,dt,Ut),as=new Zc(F,qn,dt,Ct,Ut);return function rn(D){const C=(0,re.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(as),as},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(xi,"0.3.8"),(0,ue.registerVersion)(xi,"0.3.8","esm2017")}();const Xc="/firebase-messaging-sw.js",pr="/firebase-cloud-messaging-push-scope",Ys="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Mo="google.c.a.c_id",ed="google.c.a.c_l",Ph="google.c.a.ts",Ar="google.c.a.e";var xo=(()=>{return(D=xo||(xo={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",xo;var D})();function Sr(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function td(D){const N=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(N),Y=new Uint8Array(F.length);for(let ne=0;ne<F.length;++ne)Y[ne]=F.charCodeAt(ne);return Y}const Mr="fcm_token_details_db",Jr="fcm_token_object_Store";function Ml(D){return nd.apply(this,arguments)}function nd(){return nd=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Mr))return null;let C=null;return(yield(0,oe.X3)(Mr,5,{upgrade:(F=(0,P.Z)(function*(Y,ne,me,Ve){var Ct;if(ne<2||!Y.objectStoreNames.contains(Jr))return;const dt=Ve.objectStore(Jr),Ut=yield dt.index("fcmSenderId").get(D);if(yield dt.clear(),Ut)if(2===ne){const wt=Ut;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;C={token:wt.fcmToken,createTime:null!==(Ct=wt.createTime)&&void 0!==Ct?Ct:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:Sr(wt.vapidKey)}}}else if(3===ne){const wt=Ut;C={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Sr(wt.auth),p256dh:Sr(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Sr(wt.vapidKey)}}}else if(4===ne){const wt=Ut;C={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Sr(wt.auth),p256dh:Sr(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Sr(wt.vapidKey)}}}}),function(ne,me,Ve,Ct){return F.apply(this,arguments)})})).close(),yield(0,oe.Lj)(Mr),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),xl(C)?C:null;var F}),nd.apply(this,arguments)}function xl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Fi="firebase-messaging-store";let kh=null;function sn(){return kh||(kh=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Fi)}})),kh}function Ta(D){return Js.apply(this,arguments)}function Js(){return(Js=(0,P.Z)(function*(D){const C=Xn(D),F=yield(yield sn()).transaction(Fi).objectStore(Fi).get(C);if(F)return F;{const Y=yield Ml(D.appConfig.senderId);if(Y)return yield Qt(D,Y),Y}})).apply(this,arguments)}function Qt(D,C){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,P.Z)(function*(D,C){const N=Xn(D),Y=(yield sn()).transaction(Fi,"readwrite");return yield Y.objectStore(Fi).put(C,N),yield Y.done,C})).apply(this,arguments)}function wu(D){return xs.apply(this,arguments)}function xs(){return(xs=(0,P.Z)(function*(D){const C=Xn(D),F=(yield sn()).transaction(Fi,"readwrite");yield F.objectStore(Fi).delete(C),yield F.done})).apply(this,arguments)}function Xn({appConfig:D}){return D.appId}const pn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Li(D,C){return er.apply(this,arguments)}function er(){return(er=(0,P.Z)(function*(D,C){const N=yield Oo(D),F=Po(C),Y={method:"POST",headers:N,body:JSON.stringify(F)};let ne;try{ne=yield(yield fetch(Vi(D.appConfig),Y)).json()}catch(me){throw pn.create("token-subscribe-failed",{errorInfo:me})}if(ne.error)throw pn.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw pn.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function Xs(D,C){return ts.apply(this,arguments)}function ts(){return(ts=(0,P.Z)(function*(D,C){const N=yield Oo(D),F=Po(C.subscriptionOptions),Y={method:"PATCH",headers:N,body:JSON.stringify(F)};let ne;try{ne=yield(yield fetch(`${Vi(D.appConfig)}/${C.token}`,Y)).json()}catch(me){throw pn.create("token-update-failed",{errorInfo:me})}if(ne.error)throw pn.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw pn.create("token-update-no-token");return ne.token})).apply(this,arguments)}function Sa(D,C){return _i.apply(this,arguments)}function _i(){return(_i=(0,P.Z)(function*(D,C){const F={method:"DELETE",headers:yield Oo(D)};try{const ne=yield(yield fetch(`${Vi(D.appConfig)}/${C}`,F)).json();if(ne.error)throw pn.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Y){throw pn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function Vi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Oo(D){return ft.apply(this,arguments)}function ft(){return(ft=(0,P.Z)(function*({appConfig:D,installations:C}){const N=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Po({p256dh:D,auth:C,endpoint:N,vapidKey:F}){const Y={web:{endpoint:N,auth:C,p256dh:D}};return F!==Ys&&(Y.web.applicationPubKey=F),Y}const bu=6048e5;function Ma(D){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,P.Z)(function*(D){const C=yield hn(D.swRegistration,D.vapidKey),N={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:Sr(C.getKey("auth")),p256dh:Sr(C.getKey("p256dh"))},F=yield Ta(D.firebaseDependencies);if(F){if(eo(F.subscriptionOptions,N))return Date.now()>=F.createTime+bu?kl(D,{token:F.token,createTime:Date.now(),subscriptionOptions:N}):F.token;try{yield Sa(D.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return Pt(D.firebaseDependencies,N)}return Pt(D.firebaseDependencies,N)})).apply(this,arguments)}function xa(D){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,P.Z)(function*(D){const C=yield Ta(D.firebaseDependencies);C&&(yield Sa(D.firebaseDependencies,C.token),yield wu(D.firebaseDependencies));const N=yield D.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function kl(D,C){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,P.Z)(function*(D,C){try{const N=yield Xs(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:N,createTime:Date.now()});return yield Qt(D.firebaseDependencies,F),N}catch(N){throw yield xa(D),N}})).apply(this,arguments)}function Pt(D,C){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,P.Z)(function*(D,C){const F={token:yield Li(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Qt(D,F),F.token})).apply(this,arguments)}function hn(D,C){return ko.apply(this,arguments)}function ko(){return(ko=(0,P.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:td(C)})})).apply(this,arguments)}function eo(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function Xr(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Na(D,C){if(!C.notification)return;D.notification={};const N=C.notification.title;N&&(D.notification.title=N);const F=C.notification.body;F&&(D.notification.body=F);const Y=C.notification.image;Y&&(D.notification.image=Y)}(C,D),function Ll(D,C){!C.data||(D.data=C.data)}(C,D),function qp(D,C){if(!C.fcmOptions)return;D.fcmOptions={};const N=C.fcmOptions.link;N&&(D.fcmOptions.link=N);const F=C.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(C,D),C}function Iu(D){return"object"==typeof D&&!!D&&Mo in D}function Ra(D,C){const N=[];for(let F=0;F<D.length;F++)N.push(D.charAt(F)),F<C.length&&N.push(C.charAt(F));return N.join("")}function Mn(D){return pn.create("missing-app-config-values",{valueName:D})}Ra("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ra("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ns{constructor(C,N,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Du(D){if(!D||!D.options)throw Mn("App Configuration Object");if(!D.name)throw Mn("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:N}=D;for(const F of C)if(!N[F])throw Mn(F);return{appName:D.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Y,installations:N,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Oa(D){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,P.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(Xc,{scope:pr}),D.swRegistration.update().catch(()=>{})}catch(C){throw pn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function vi(D,C){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,P.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Oa(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw pn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Cu(D,C){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,P.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Ys)})).apply(this,arguments)}function Pa(){return(Pa=(0,P.Z)(function*(D,C){if(!navigator)throw pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw pn.create("permission-blocked");return yield Cu(D,null==C?void 0:C.vapidKey),yield vi(D,null==C?void 0:C.serviceWorkerRegistration),Ma(D)})).apply(this,arguments)}function Fo(D,C,N){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,P.Z)(function*(D,C,N){const F=ka(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:N[Mo],message_name:N[ed],message_time:N[Ph],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ka(D){switch(D){case xo.NOTIFICATION_CLICKED:return"notification_open";case xo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function jl(){return(jl=(0,P.Z)(function*(D,C){const N=C.data;if(!N.isFirebaseMessaging)return;D.onMessageHandler&&N.messageType===xo.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Xr(N)):D.onMessageHandler.next(Xr(N)));const F=N.data;Iu(F)&&"1"===F[Ar]&&(yield Fo(D,N.messageType,F))})).apply(this,arguments)}const Lo="@firebase/messaging",rd=D=>{const C=new ns(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Wp(D,C){return jl.apply(this,arguments)}(C,N)),C},Vo=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function Tu(D,C){return Pa.apply(this,arguments)}(C,F)}};function Uo(){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,P.Z)(function*(){try{yield(0,re.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function id(){(0,ue._registerComponent)(new ge.wA("messaging",rd,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("messaging-internal",Vo,"PRIVATE")),(0,ue.registerVersion)(Lo,"0.9.13"),(0,ue.registerVersion)(Lo,"0.9.13","esm2017")}();const sd="analytics",Kp="firebase_id",rs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bo="https://www.googletagmanager.com/gtag/js",Gn=new le.Yd("@firebase/analytics");function Vh(D){return Promise.all(D.map(C=>C.catch(N=>N)))}function to(D,C){const N=document.createElement("script");N.src=`${Bo}?l=${D}&id=${C}`,N.async=!0,document.head.appendChild(N)}function ad(D,C,N,F,Y,ne){return Su.apply(this,arguments)}function Su(){return(Su=(0,P.Z)(function*(D,C,N,F,Y,ne){const me=F[Y];try{if(me)yield C[me];else{const Ct=(yield Vh(N)).find(dt=>dt.measurementId===Y);Ct&&(yield C[Ct.appId])}}catch(Ve){Gn.error(Ve)}D("config",Y,ne)})).apply(this,arguments)}function Mu(D,C,N,F,Y){return no.apply(this,arguments)}function no(){return(no=(0,P.Z)(function*(D,C,N,F,Y){try{let ne=[];if(Y&&Y.send_to){let me=Y.send_to;Array.isArray(me)||(me=[me]);const Ve=yield Vh(N);for(const Ct of me){const dt=Ve.find(wt=>wt.measurementId===Ct),Ut=dt&&C[dt.appId];if(!Ut){ne=[];break}ne.push(Ut)}}0===ne.length&&(ne=Object.values(C)),yield Promise.all(ne),D("event",F,Y||{})}catch(ne){Gn.error(ne)}})).apply(this,arguments)}function gn(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(Bo))return C;return null}const et=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),$l=new class On{constructor(C={},N=1e3){this.throttleMetadata=C,this.intervalMillis=N}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,N){this.throttleMetadata[C]=N}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function ld(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function ji(D){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,P.Z)(function*(D){var C;const{appId:N,apiKey:F}=D,Y={method:"GET",headers:ld(F)},ne=rs.replace("{app-id}",N),me=yield fetch(ne,Y);if(200!==me.status&&304!==me.status){let Ve="";try{const Ct=yield me.json();(null===(C=Ct.error)||void 0===C?void 0:C.message)&&(Ve=Ct.error.message)}catch(Ct){}throw et.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Ve})}return me.json()})).apply(this,arguments)}function un(D){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,P.Z)(function*(D,C=$l,N){const{appId:F,apiKey:Y,measurementId:ne}=D.options;if(!F)throw et.create("no-app-id");if(!Y){if(ne)return{measurementId:ne,appId:F};throw et.create("no-api-key")}const me=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new dd;return setTimeout((0,P.Z)(function*(){Ve.abort()}),void 0!==N?N:6e4),Ei({appId:F,apiKey:Y,measurementId:ne},me,Ve,C)})).apply(this,arguments)}function Ei(D,C,N){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,P.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:N},F,Y=$l){const{appId:ne,measurementId:me}=D;try{yield xu(F,C)}catch(Ve){if(me)return Gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${me} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ne,measurementId:me};throw Ve}try{const Ve=yield ji(D);return Y.deleteThrottleMetadata(ne),Ve}catch(Ve){if(!cd(Ve)){if(Y.deleteThrottleMetadata(ne),me)return Gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${me} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ne,measurementId:me};throw Ve}const Ct=503===Number(Ve.customData.httpStatus)?(0,re.$s)(N,Y.intervalMillis,30):(0,re.$s)(N,Y.intervalMillis),dt={throttleEndTimeMillis:Date.now()+Ct,backoffCount:N+1};return Y.setThrottleMetadata(ne,dt),Gn.debug(`Calling attemptFetch again in ${Ct} millis`),Ei(D,dt,F,Y)}})).apply(this,arguments)}function xu(D,C){return new Promise((N,F)=>{const Y=Math.max(C-Date.now(),0),ne=setTimeout(N,Y);D.addEventListener(()=>{clearTimeout(ne),F(et.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function cd(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class dd{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function Gl(){return xn.apply(this,arguments)}function xn(){return(xn=(0,P.Z)(function*(){if(!(0,re.hl)())return Gn.warn(et.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return Gn.warn(et.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function $o(){return($o=(0,P.Z)(function*(D,C,N,F,Y,ne,me){var Ve;const Ct=un(D);Ct.then(qn=>{N[qn.measurementId]=qn.appId,D.options.measurementId&&qn.measurementId!==D.options.measurementId&&Gn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${qn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(qn=>Gn.error(qn)),C.push(Ct);const dt=Gl().then(qn=>{if(qn)return F.getId()}),[Ut,wt]=yield Promise.all([Ct,dt]);gn()||to(ne,Ut.measurementId),Y("js",new Date);const gr=null!==(Ve=null==me?void 0:me.config)&&void 0!==Ve?Ve:{};return gr.origin="firebase",gr.update=!0,null!=wt&&(gr[Kp]=wt),Y("config",Ut.measurementId,gr),Ut.measurementId})).apply(this,arguments)}class Rs{constructor(C){this.app=C}_delete(){return delete tr[this.app.options.appId],Promise.resolve()}}let tr={},Nu=[];const is={};let Go,ro,Ho="dataLayer",zo=!1;function Ba(D,C,N){!function Wo(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),N=et.create("invalid-analytics-context",{errorInfo:C});Gn.warn(N.message)}}();const F=D.options.appId;if(!F)throw et.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw et.create("no-api-key");Gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=tr[F])throw et.create("already-exists",{id:F});if(!zo){!function Au(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Ho);const{wrappedGtag:ne,gtagCore:me}=function Zp(D,C,N,F,Y){let ne=function(...me){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ne=window[Y]),window[Y]=function ud(D,C,N,F){function ne(){return(ne=(0,P.Z)(function*(me,Ve,Ct){try{"event"===me?yield Mu(D,C,N,Ve,Ct):"config"===me?yield ad(D,C,N,F,Ve,Ct):D("set",Ve)}catch(dt){Gn.error(dt)}})).apply(this,arguments)}return function Y(me,Ve,Ct){return ne.apply(this,arguments)}}(ne,D,C,N),{gtagCore:ne,wrappedGtag:window[Y]}}(tr,Nu,is,Ho,"gtag");ro=ne,Go=me,zo=!0}return tr[F]=function jo(D,C,N,F,Y,ne,me){return $o.apply(this,arguments)}(D,Nu,is,C,Go,Ho,N),new Rs(D)}function nr(){return(nr=(0,P.Z)(function*(D,C,N,F,Y){if(Y&&Y.global)D("event",N,F);else{const ne=yield C;D("event",N,Object.assign(Object.assign({},F),{send_to:ne}))}})).apply(this,arguments)}function Ou(){return ja.apply(this,arguments)}function ja(){return(ja=(0,P.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}const Hr="@firebase/analytics";!function ks(){(0,ue._registerComponent)(new ge.wA(sd,(C,{options:N})=>Ba(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ue._registerComponent)(new ge.wA("analytics-internal",function D(C){try{const N=C.getProvider(sd).getImmediate();return{logEvent:(F,Y,ne)=>function Ko(D,C,N,F){D=(0,re.m9)(D),function Ps(D,C,N,F,Y){return nr.apply(this,arguments)}(ro,tr[D.app.options.appId],C,N,F).catch(Y=>Gn.error(Y))}(N,F,Y,ne)}}catch(N){throw et.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ue.registerVersion)(Hr,"0.7.9"),(0,ue.registerVersion)(Hr,"0.7.9","esm2017")}();var oo=O(4408),mn=O(7565);const ao=new class zl extends mn.v{}(class Pu extends oo.o{constructor(C,N){super(C,N),this.scheduler=C,this.work=N}schedule(C,N=0){return N>0?super.schedule(C,N):(this.delay=N,this.state=C,this.scheduler.flush(this),this)}execute(C,N){return N>0||this.closed?super.execute(C,N):this._execute(C,N)}requestAsyncId(C,N,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,N,F):C.flush(this)}});var ql=O(4986),ni=O(8505),ri=O(9468),Zo=O(5363);const uo=new f.GfV("7.3.0"),lo="__angularfire_symbol__analyticsIsSupportedValue",Yo="__angularfire_symbol__analyticsIsSupported",co="__angularfire_symbol__remoteConfigIsSupportedValue",os="__angularfire_symbol__remoteConfigIsSupported",$a="__angularfire_symbol__messagingIsSupportedValue",Rt="__angularfire_symbol__messagingIsSupported";function Jp(D,C,N){if(C){if(1===C.length)return C[0];const ne=C.filter(me=>me.app===N);if(1===ne.length)return ne[0]}return N.container.getProvider(D).getImmediate({optional:!0})}globalThis[Yo]||(globalThis[Yo]=Ou().then(D=>globalThis[lo]=D).catch(()=>globalThis[lo]=!1)),globalThis[Rt]||(globalThis[Rt]=Uo().then(D=>globalThis[$a]=D).catch(()=>globalThis[$a]=!1)),globalThis[os]||(globalThis[os]=Eu().then(D=>globalThis[co]=D).catch(()=>globalThis[co]=!1));const fd=(D,C)=>{const N=C?[C]:(0,X.C6)(),F=[];return N.forEach(Y=>{Y.container.getProvider(D).instances.forEach(me=>{F.includes(me)||F.push(me)})}),F};function Ls(){}class wi{constructor(C,N=ao){this.zone=C,this.delegate=N}now(){return this.delegate.now()}schedule(C,N,F){const Y=this.zone;return this.delegate.schedule(function(me){Y.runGuarded(()=>{C.apply(this,[me])})},N,F)}}class Fu{constructor(C){this.zone=C,this.task=null}call(C,N){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ls,{},Ls,Ls)),N.pipe((0,ni.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let pd=(()=>{class D{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new wi(Zone.current)),this.insideAngular=N.run(()=>new wi(Zone.current,ql.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(N){return new(N||D)(f.LFG(f.R0b))},D.\u0275prov=f.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Gi(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Qo(D){return Gi(),function Jo(D){return function(N){return(N=N.lift(new Fu(D.ngZone))).pipe((0,ri.R)(D.outsideAngular),(0,Zo.Q)(D.insideAngular))}}(Gi())(D)}},2090:(Xe,we,O)=>{O.d(we,{BH:()=>ze,LL:()=>ae,ZR:()=>ye,zI:()=>K,US:()=>ge,tV:()=>de,L:()=>oe,$s:()=>Vt,r3:()=>Ir,Sg:()=>Me,ne:()=>Mi,vZ:()=>Wr,ZB:()=>B,pd:()=>Is,m9:()=>hr,z$:()=>Oe,jU:()=>Ce,ru:()=>qe,d:()=>Te,xb:()=>kt,w1:()=>Ee,hl:()=>j,uI:()=>je,UG:()=>fe,b$:()=>Ye,G6:()=>$e,Mn:()=>Ie,xO:()=>Dr,zd:()=>Si,eu:()=>ve});const ue=function(V){const G=[];let z=0;for(let De=0;De<V.length;De++){let H=V.charCodeAt(De);H<128?G[z++]=H:H<2048?(G[z++]=H>>6|192,G[z++]=63&H|128):55296==(64512&H)&&De+1<V.length&&56320==(64512&V.charCodeAt(De+1))?(H=65536+((1023&H)<<10)+(1023&V.charCodeAt(++De)),G[z++]=H>>18|240,G[z++]=H>>12&63|128,G[z++]=H>>6&63|128,G[z++]=63&H|128):(G[z++]=H>>12|224,G[z++]=H>>6&63|128,G[z++]=63&H|128)}return G},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,G){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let H=0;H<V.length;H+=3){const J=V[H],Ne=H+1<V.length,Je=Ne?V[H+1]:0,ht=H+2<V.length,Dt=ht?V[H+2]:0;let Fn=(15&Je)<<2|Dt>>6,Cr=63&Dt;ht||(Cr=64,Ne||(Fn=64)),De.push(z[J>>2],z[(3&J)<<4|Je>>4],z[Fn],z[Cr])}return De.join("")},encodeString(V,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(V):this.encodeByteArray(ue(V),G)},decodeString(V,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(V):function(V){const G=[];let z=0,De=0;for(;z<V.length;){const H=V[z++];if(H<128)G[De++]=String.fromCharCode(H);else if(H>191&&H<224){const J=V[z++];G[De++]=String.fromCharCode((31&H)<<6|63&J)}else if(H>239&&H<365){const ht=((7&H)<<18|(63&V[z++])<<12|(63&V[z++])<<6|63&V[z++])-65536;G[De++]=String.fromCharCode(55296+(ht>>10)),G[De++]=String.fromCharCode(56320+(1023&ht))}else{const J=V[z++],Ne=V[z++];G[De++]=String.fromCharCode((15&H)<<12|(63&J)<<6|63&Ne)}}return G.join("")}(this.decodeStringToByteArray(V,G))},decodeStringToByteArray(V,G){this.init_();const z=G?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let H=0;H<V.length;){const J=z[V.charAt(H++)],Je=H<V.length?z[V.charAt(H)]:0;++H;const Dt=H<V.length?z[V.charAt(H)]:64;++H;const Et=H<V.length?z[V.charAt(H)]:64;if(++H,null==J||null==Je||null==Dt||null==Et)throw Error();De.push(J<<2|Je>>4),64!==Dt&&(De.push(Je<<4&240|Dt>>2),64!==Et&&De.push(Dt<<6&192|Et))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}},oe=function(V){return function(V){const G=ue(V);return ge.encodeByteArray(G,!0)}(V).replace(/\./g,"")},de=function(V){try{return ge.decodeString(V,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function B(V,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return G}for(const z in G)!G.hasOwnProperty(z)||!te(z)||(V[z]=B(V[z],G[z]));return V}function te(V){return"__proto__"!==V}class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,z)=>{this.resolve=G,this.reject=z})}wrapCallback(G){return(z,De)=>{z?this.reject(z):this.resolve(De),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(z):G(z,De))}}}function Me(V,G){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=G||"demo-project",H=V.iat||0,J=V.sub||V.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:H,exp:H+3600,auth_time:H,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},V);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(Ne)),""].join(".")}function Oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function fe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(V){return!1}}function Ce(){return"object"==typeof self&&self.self===self}function qe(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){return Oe().indexOf("Electron/")>=0}function Ee(){const V=Oe();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Ie(){return Oe().indexOf("MSAppHost/")>=0}function $e(){return!fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){return"object"==typeof indexedDB}function ve(){return new Promise((V,G)=>{try{let z=!0;const De="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(De);H.onsuccess=()=>{H.result.close(),z||self.indexedDB.deleteDatabase(De),V(!0)},H.onupgradeneeded=()=>{z=!1},H.onerror=()=>{var J;G((null===(J=H.error)||void 0===J?void 0:J.message)||"")}}catch(z){G(z)}})}function K(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ye extends Error{constructor(G,z,De){super(z),this.code=G,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,ye.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ae.prototype.create)}}class ae{constructor(G,z,De){this.service=G,this.serviceName=z,this.errors=De}create(G,...z){const De=z[0]||{},H=`${this.service}/${G}`,J=this.errors[G],Ne=J?function Pe(V,G){return V.replace(ut,(z,De)=>{const H=G[De];return null!=H?String(H):`<${De}?>`})}(J,De):"Error";return new ye(H,`${this.serviceName}: ${Ne} (${H}).`,De)}}const ut=/\{\$([^}]+)}/g;function Ir(V,G){return Object.prototype.hasOwnProperty.call(V,G)}function kt(V){for(const G in V)if(Object.prototype.hasOwnProperty.call(V,G))return!1;return!0}function Wr(V,G){if(V===G)return!0;const z=Object.keys(V),De=Object.keys(G);for(const H of z){if(!De.includes(H))return!1;const J=V[H],Ne=G[H];if(lr(J)&&lr(Ne)){if(!Wr(J,Ne))return!1}else if(J!==Ne)return!1}for(const H of De)if(!z.includes(H))return!1;return!0}function lr(V){return null!==V&&"object"==typeof V}function Dr(V){const G=[];for(const[z,De]of Object.entries(V))Array.isArray(De)?De.forEach(H=>{G.push(encodeURIComponent(z)+"="+encodeURIComponent(H))}):G.push(encodeURIComponent(z)+"="+encodeURIComponent(De));return G.length?"&"+G.join("&"):""}function Si(V){const G={};return V.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[H,J]=De.split("=");G[decodeURIComponent(H)]=decodeURIComponent(J)}}),G}function Is(V){const G=V.indexOf("?");if(!G)return"";const z=V.indexOf("#",G);return V.substring(G,z>0?z:void 0)}function Mi(V,G){const z=new mt(V,G);return z.subscribe.bind(z)}class mt{constructor(G,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{G(this)}).catch(De=>{this.error(De)})}next(G){this.forEachObserver(z=>{z.next(G)})}error(G){this.forEachObserver(z=>{z.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,z,De){let H;if(void 0===G&&void 0===z&&void 0===De)throw new Error("Missing Observer.");H=function vn(V,G){if("object"!=typeof V||null===V)return!1;for(const z of G)if(z in V&&"function"==typeof V[z])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:z,complete:De},void 0===H.next&&(H.next=An),void 0===H.error&&(H.error=An),void 0===H.complete&&(H.complete=An);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(Ne){}}),this.observers.push(H),J}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,G)}sendOne(G,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{z(this.observers[G])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function An(){}function Vt(V,G=1e3,z=2){const De=G*Math.pow(z,V),H=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+H)}function hr(V){return V&&V._delegate?V._delegate:V}},3723:(Xe,we,O)=>{var f=O(5e3);let X=null;function P(){return X}const le=new f.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function de(){return(0,f.LFG)(B)}()},providedIn:"platform"}),n})();const $=new f.OlP("Location Initialized");let B=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){te()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){te()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ze(){return new B((0,f.LFG)(le))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,f.LFG)(le).location;return new Ye((0,f.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new f.OlP("appBaseHref");let Ye=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+je(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const c=this.prepareExternalUrl(s+je(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){const c=this.prepareExternalUrl(s+je(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe),f.LFG(qe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let c=this.prepareExternalUrl(s+je(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){let c=this.prepareExternalUrl(s+je(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe),f.LFG(qe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe($e(s)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+je(r))}normalize(t){return n.stripTrailingSlash(function He(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=je,n.joinWithSlash=Me,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(oe))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ie(){return new Ee((0,f.LFG)(fe),(0,f.LFG)(oe))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}class Ts{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Un=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,c)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Ts(s.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,c),Zs(g,s)}});for(let s=0,u=r.length;s<u;s++){const g=r.get(s).context;g.index=s,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Zs(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Zs(n,e){n.context.$implicit=e.item}let Jn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new rn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_u("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_u("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class rn{constructor(){this.$implicit=null,this.ngIf=null}}function _u(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}class Ss{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Kc{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const $p=new Kc,es=new Ss;let Al=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return $p;if((0,f.F4k)(t))return es;throw function fr(n,e){return new f.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1}),n})(),Ar=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function No(n){return"server"===n}let xl=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Ro((0,f.LFG)(le),window)}),n})();class Ro{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Fi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Nl(this.window.history)||Nl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Nl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Js extends class Ta extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){X||(X=n)}(new Js)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Aa(){return Qt=Qt||document.querySelector("base"),Qt?Qt.getAttribute("href"):null}();return null==t?null:function xs(n){wu=wu||document.createElement("a"),wu.setAttribute("href",n);const e=wu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Qt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ia(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let wu,Qt=null;const Xn=new f.OlP("TRANSITION_ID"),pn=[{provide:f.ip1,useFactory:function Rl(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=P(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Xn,le,f.zs3],multi:!0}];class Li{static init(){(0,f.VLi)(new Li)}addToWindow(e){f.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const s=f.dqk.getAllAngularTestabilities();let u=s.length,c=!1;const g=function(v){c=c||v,u--,0==u&&r(c)};s.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let er=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Xs=new f.OlP("EventManagerPlugins");let ts=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const c=s[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xs),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Sa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=P().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let _i=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Vi=(()=>{class n extends _i{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,s.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Oo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Oo))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Oo(n){P().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Po=/%COMP%/g;function Ae(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Ae(n,s,t):(s=s.replace(Po,n),t.push(s))}return t}function Pt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let hn=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new ko(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new Na(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case f.ifc.ShadowDom:return new Ll(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Ae(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ts),f.LFG(Vi),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class ko{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=ft[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=ft[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,s&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Pt(r)):this.eventManager.addEventListener(e,t,Pt(r))}}class Na extends ko{constructor(e,t,r,s){super(e),this.component=r;const u=Ae(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Pl(n){return"_ngcontent-%COMP%".replace(Po,n)}(s+"-"+r.id),this.hostAttr=function kl(n){return"_nghost-%COMP%".replace(Po,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ll extends ko{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ae(s.id,s.styles,[]);for(let c=0;c<u.length;c++){const g=document.createElement("style");g.textContent=u[c],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let qp=(()=>{class n extends Sa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Iu=["alt","control","meta","shift"],Du={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ns={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Oa=(()=>{class n extends Sa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let c="";if(Iu.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),c+=v+".")}),c+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=s,g.fullKey=c,g}static getEventFullKey(t){let r="",s=function Ns(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Mn.hasOwnProperty(e)&&(e=Mn[e]))}return Du[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Iu.forEach(u=>{u!=s&&ns[u](t)&&(r+=u+".")}),r+=s,r}static eventCallback(t,r,s){return u=>{n.getEventFullKey(u)===t&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Tu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function vi(){Js.makeCurrent(),Li.init()},multi:!0},{provide:le,useFactory:function Cu(){return(0,f.RDi)(document),document},deps:[]}]),Pa=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Vl(){return new f.qLn},deps:[]},{provide:Xs,useClass:qp,multi:!0,deps:[le,f.R0b,f.Lbi]},{provide:Xs,useClass:Oa,multi:!0,deps:[le]},{provide:hn,useClass:hn,deps:[ts,Vi,f.AFp]},{provide:f.FYo,useExisting:hn},{provide:_i,useExisting:Vi},{provide:Vi,useClass:Vi,deps:[le]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:ts,useClass:ts,deps:[Xs,f.R0b]},{provide:class sn{},useClass:er,deps:[]}];let Fo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Xn,useExisting:f.AFp},pn]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Pa,imports:[Ar,f.hGG]}),n})();"undefined"!=typeof window&&window;var gn=O(8996),Va=O(7669);function et(...n){const e=(0,Va.yG)(n);return(0,gn.D)(n,e)}var ei=O(7579);class jr extends ei.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var On=O(8306);const{isArray:$l}=Array,{getPrototypeOf:ld,prototype:ji,keys:Hl}=Object;function un(n){if(1===n.length){const e=n[0];if($l(e))return{args:e,keys:null};if(function Ua(n){return n&&"object"==typeof n&&ld(n)===ji}(e)){const t=Hl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ei=O(4671),Mt=O(4004);const{isArray:xu}=Array;function dd(n){return(0,Mt.U)(e=>function cd(n,e){return xu(e)?n(...e):n(e)}(n,e))}function Gl(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var xn=O(5403),jo=O(9672);function tr(n,e,t){n?(0,jo.f)(t,n,e):e()}var Nu=O(576);function is(n,e){const t=(0,Nu.m)(n)?n:()=>n,r=s=>s.error(t());return new On.y(e?s=>e.schedule(r,0,s):r)}const Os=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Go=O(8189);function zo(...n){return function ro(){return(0,Go.J)(1)}()((0,gn.D)(n,(0,Va.yG)(n)))}var qo=O(8421);function Wo(n){return new On.y(e=>{(0,qo.Xf)(n()).subscribe(e)})}var Ba=O(515),Ps=O(727),nr=O(4482);function io(){return(0,nr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,xn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ru extends On.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,nr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ps.w0;const t=this.getSubject();e.add(this.source.subscribe((0,xn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ps.w0.EMPTY)}return e}refCount(){return io()(this)}}function wn(n,e){return(0,nr.e)((t,r)=>{let s=null,u=0,c=!1;const g=()=>c&&!s&&r.complete();t.subscribe((0,xn.x)(r,v=>{null==s||s.unsubscribe();let b=0;const S=u++;(0,qo.Xf)(n(v,S)).subscribe(s=(0,xn.x)(r,x=>r.next(e?e(v,x,S,b++):x),()=>{s=null,g()}))},()=>{c=!0,g()}))})}var so=O(5698);function $i(...n){const e=(0,Va.yG)(n);return(0,nr.e)((t,r)=>{(e?zo(n,t,e):zo(n,t)).subscribe(r)})}function ss(n,e,t,r,s){return(u,c)=>{let g=t,v=e,b=0;u.subscribe((0,xn.x)(c,S=>{const x=b++;v=g?n(v,S,x):(g=!0,S),r&&c.next(v)},s&&(()=>{g&&c.next(v),c.complete()})))}}function Hi(n,e){return(0,nr.e)(ss(n,e,arguments.length>=2,!0))}function $r(n,e){return(0,nr.e)((t,r)=>{let s=0;t.subscribe((0,xn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}function ti(n){return(0,nr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,xn.x)(t,void 0,void 0,c=>{u=(0,qo.Xf)(n(c,ti(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}var bn=O(5577);function Ou(n,e){return(0,Nu.m)(e)?(0,bn.z)(n,e,1):(0,bn.z)(n,1)}function ja(n){return n<=0?()=>Ba.E:(0,nr.e)((e,t)=>{let r=[];e.subscribe((0,xn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function fn(n=Yp){return(0,nr.e)((e,t)=>{let r=!1;e.subscribe((0,xn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Yp(){return new Os}function Qp(n){return(0,nr.e)((e,t)=>{let r=!1;e.subscribe((0,xn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Ko(n,e){const t=arguments.length>=2;return r=>r.pipe(n?$r((s,u)=>n(s,u,r)):Ei.y,(0,so.q)(1),t?Qp(e):fn(()=>new Os))}var Hr=O(8505);class ks{constructor(e,t){this.id=e,this.url=t}}class oo extends ks{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pu extends ks{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mn extends ks{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zl extends ks{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ao extends ks{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xy extends ks{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ql extends ks{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ni extends ks{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ri extends ks{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zo{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class uo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class lo{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class co{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class os{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $a{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rt="primary";class ku{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function zn(n){return new ku(n)}const Ha="ngNavigationCancelingError";function Fs(n){const e=Error("NavigationCancelingError: "+n);return e[Ha]=!0,e}function fd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const c=r[u],g=n[u];if(c.startsWith(":"))s[c.substring(1)]=g;else if(c!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function wi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Fu(n[s],e[s]))return!1;return!0}function Fu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function pd(n){return Array.prototype.concat.apply([],n)}function Gi(n){return n.length>0?n[n.length-1]:null}function ln(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function rr(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,gn.D)(Promise.resolve(n)):et(n)}const Qo={exact:function D(n,e,t){if(!dt(n.segments,e.segments)||!Y(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!D(n.children[r],e.children[r],t))return!1;return!0},subset:N},Jo={exact:function gd(n,e){return wi(n,e)},subset:function C(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fu(n[t],e[t]))},ignored:()=>!0};function ho(n,e,t){return Qo[t.paths](n.root,e.root,t.matrixParams)&&Jo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function N(n,e,t){return F(n,e,e.segments,t)}function F(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!dt(s,t)||e.hasChildren()||!Y(s,t,r))}if(n.segments.length===t.length){if(!dt(n.segments,t)||!Y(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!N(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(dt(n.segments,s)&&Y(n.segments,s,r)&&n.children[Rt])&&F(n.children[Rt],e,u,r)}}function Y(n,e,t){return e.every((r,s)=>Jo[t](n[s].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return qn.serialize(this)}}class me{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ln(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return as(this)}}class Ve{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=zn(this.parameters)),this._parameterMap}toString(){return Uu(this)}}function dt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class wt{}class gr{parse(e){const t=new Oy(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Gr(e.root,!0)}`,r=function eg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${si(t)}=${si(s)}`).join("&"):`${si(t)}=${si(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function oi(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qn=new gr;function as(n){return n.segments.map(e=>Uu(e)).join("/")}function Gr(n,e){if(!n.hasChildren())return as(n);if(e){const t=n.children[Rt]?Gr(n.children[Rt],!1):"",r=[];return ln(n.children,(s,u)=>{u!==Rt&&r.push(`${u}:${Gr(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ut(n,e){let t=[];return ln(n.children,(r,s)=>{s===Rt&&(t=t.concat(e(r,s)))}),ln(n.children,(r,s)=>{s!==Rt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Rt?[Gr(n.children[Rt],!1)]:[`${s}:${Gr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Rt]?`${as(n)}/${t[0]}`:`${as(n)}/(${t.join("//")})`}}function ii(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function si(n){return ii(n).replace(/%3B/gi,";")}function Lu(n){return ii(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Vu(n){return decodeURIComponent(n)}function Kl(n){return Vu(n.replace(/\+/g,"%20"))}function Uu(n){return`${Lu(n.path)}${function Xp(n){return Object.keys(n).map(e=>`;${Lu(e)}=${Lu(n[e])}`).join("")}(n.parameters)}`}const Uh=/^[^\/()?;=#]+/;function fo(n){const e=n.match(Uh);return e?e[0]:""}const Zl=/^[^=?&#]+/,tg=/^[^&#]+/;class Oy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new me([],{}):new me([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Rt]=new me(e,t)),r}parseSegment(){const e=fo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ve(Vu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fo(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=fo(this.remaining);s&&(r=s,this.capture(r))}e[Vu(t)]=Vu(r)}parseQueryParam(e){const t=function Ry(n){const e=n.match(Zl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function ng(n){const e=n.match(tg);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const s=Kl(t),u=Kl(r);if(e.hasOwnProperty(s)){let c=e[s];Array.isArray(c)||(c=[c],e[s]=c),c.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fo(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Rt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Rt]:new me([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class rg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Bh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Bh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Bu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Bu(e,this._root).map(t=>t.value)}}function Bh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Bh(n,t);if(r)return r}return null}function Bu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Bu(n,t);if(r.length)return r.unshift(e),r}return[]}class po{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function go(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class md extends rg{constructor(e,t){super(e),this.snapshot=t,_d(this,e)}toString(){return this.snapshot.toString()}}function Ga(n,e){const t=function Py(n,e){const c=new Xo([],{},{},"",{},Rt,e,null,n.root,-1,{});return new jh("",new po(c,[]))}(n,e),r=new jr([new Ve("",{})]),s=new jr({}),u=new jr({}),c=new jr({}),g=new jr(""),v=new ju(r,s,c,g,u,Rt,e,t.root);return v.snapshot=t.root,new md(new po(v,[]),t)}class ju{constructor(e,t,r,s,u,c,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=g,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(e=>zn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(e=>zn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ky(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function yd(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Xo{constructor(e,t,r,s,u,c,g,v,b,S,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=g,this.routeConfig=v,this._urlSegment=b,this._lastPathIndex=S,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jh extends rg{constructor(e,t){super(t),this.url=e,_d(this,t)}toString(){return $h(this._root)}}function _d(n,e){e.value._routerState=n,e.children.forEach(t=>_d(n,t))}function $h(n){const e=n.children.length>0?` { ${n.children.map($h).join(", ")} } `:"";return`${n.value}${e}`}function vd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),wi(e.params,t.params)||n.params.next(t.params),function Ls(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),wi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Hh(n,e){const t=wi(n.params,e.params)&&function Ct(n,e){return dt(n,e)&&n.every((t,r)=>wi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Hh(n.parent,e.parent))}function Yl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Fy(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Yl(n,r,s);return Yl(n,r)})}(n,e,t);return new po(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(g=>Yl(n,g)),c}}const r=function Ly(n){return new ju(new jr(n.url),new jr(n.params),new jr(n.queryParams),new jr(n.fragment),new jr(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Yl(n,u));return new po(r,s)}}function Vs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ql(n){return"object"==typeof n&&null!=n&&n.outlets}function Ed(n,e,t,r,s){let u={};if(r&&ln(r,(g,v)=>{u[v]=Array.isArray(g)?g.map(b=>`${b}`):`${g}`}),n===e)return new ne(t,u,s);const c=Vy(n,e,t);return new ne(c,u,s)}function Vy(n,e,t){const r={};return ln(n.children,(s,u)=>{r[u]=s===e?t:Vy(s,e,t)}),new me(n.segments,r)}class sg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vs(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(Ql);if(s&&s!==Gi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function lg(n,e,t){if(n||(n=new me([],{})),0===n.segments.length&&n.hasChildren())return bd(n,e,t);const r=function c0(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const c=n.segments[s],g=t[r];if(Ql(g))break;const v=`${g}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===v)break;if(v&&b&&"object"==typeof b&&void 0===b.outlets){if(!us(v,b,c))return u;r+=2}else{if(!us(v,{},c))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new me(n.segments.slice(0,r.pathIndex),{});return u.children[Rt]=new me(n.segments.slice(r.pathIndex),n.children),bd(u,0,s)}return r.match&&0===s.length?new me(n.segments,{}):r.match&&!n.hasChildren()?cg(n,e,t):r.match?bd(n,0,s):cg(n,e,t)}function bd(n,e,t){if(0===t.length)return new me(n.segments,{});{const r=function ug(n){return Ql(n[0])?n[0].outlets:{[Rt]:n}}(t),s={};return ln(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[c]=lg(n.children[c],e,u))}),ln(n.children,(u,c)=>{void 0===r[c]&&(s[c]=u)}),new me(n.segments,s)}}function cg(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Ql(u)){const v=Us(u.outlets);return new me(r,v)}if(0===s&&Vs(t[0])){r.push(new Ve(n.segments[e].path,Gh(t[0]))),s++;continue}const c=Ql(u)?u.outlets[Rt]:`${u}`,g=s<t.length-1?t[s+1]:null;c&&g&&Vs(g)?(r.push(new Ve(c,Gh(g))),s+=2):(r.push(new Ve(c,{})),s++)}return new me(r,{})}function Us(n){const e={};return ln(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=cg(new me([],{}),0,t))}),e}function Gh(n){const e={};return ln(n,(t,r)=>e[r]=`${t}`),e}function us(n,e,t){return n==t.path&&wi(e,t.parameters)}class dg{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),vd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=go(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,s[c],r),delete s[c]}),ln(s,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const c=r.getContext(s.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=go(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);if(r&&r.outlet){const c=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=go(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=go(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new os(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Yo(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(vd(s),s===u)if(s.component){const c=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const c=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),c.children.onOutletReAttached(g.contexts),c.attachRef=g.componentRef,c.route=g.route.value,c.outlet&&c.outlet.attach(g.componentRef,g.route.value),vd(g.route.value),this.activateChildRoutes(e,null,c.children)}else{const g=function Id(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),v=g?g.module.componentFactoryResolver:null;c.attachRef=null,c.route=s,c.resolver=v,c.outlet&&c.outlet.activateWith(s,v),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Dd{constructor(e,t){this.routes=e,this.module=t}}function qa(n){return"function"==typeof n}function $u(n){return n instanceof ne}const Cd=Symbol("INITIAL_VALUE");function Hu(){return wn(n=>function $o(...n){const e=(0,Va.yG)(n),t=(0,Va.jO)(n),{args:r,keys:s}=un(n);if(0===r.length)return(0,gn.D)([],e);const u=new On.y(function Rs(n,e,t=Ei.y){return r=>{tr(e,()=>{const{length:s}=n,u=new Array(s);let c=s,g=s;for(let v=0;v<s;v++)tr(e,()=>{const b=(0,gn.D)(n[v],e);let S=!1;b.subscribe((0,xn.x)(r,x=>{u[v]=x,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,s?c=>Gl(s,c):Ei.y));return t?u.pipe(dd(t)):u}(n.map(e=>e.pipe((0,so.q)(1),$i(Cd)))).pipe(Hi((e,t)=>{let r=!1;return t.reduce((s,u,c)=>s!==Cd?s:(u===Cd&&(r=!0),r||!1!==u&&c!==t.length-1&&!$u(u)?s:u),e)},Cd),$r(e=>e!==Cd),(0,Mt.U)(e=>$u(e)?e:!0===e),(0,so.q)(1)))}class Uy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gu,this.attachRef=null}}class Gu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Uy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Xl=(()=>{class n{constructor(t,r,s,u,c){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||Rt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,v=new By(t,g,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Gu),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class By{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ju?this.route:e===Gu?this.childContexts:this.parent.get(e,t)}}let Wh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[Xl],encapsulation:2}),n})();function Wa(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Kh(r,Zh(e,r))}}function Kh(n,e){n.children&&Wa(n.children,e)}function Zh(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Yh(n){const e=n.children&&n.children.map(Yh),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Rt&&(t.component=Wh),t}function zt(n){return n.outlet||Rt}function fg(n,e){const t=n.filter(r=>zt(r)===e);return t.push(...n.filter(r=>zt(r)!==e)),t}const pg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},pg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||fd)(t,n,e);if(!u)return Object.assign({},pg);const c={};ln(u.posParams,(v,b)=>{c[b]=v.path});const g=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function qu(n,e,t,r,s="corrected"){if(t.length>0&&function Hy(n,e,t){return t.some(r=>Ka(n,e,r)&&zt(r)!==Rt)}(n,t,r)){const c=new me(e,function $y(n,e,t,r){const s={};s[Rt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&zt(u)!==Rt){const c=new me([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,s[zt(u)]=c}return s}(n,e,r,new me(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Gy(n,e,t){return t.some(r=>Ka(n,e,r))}(n,t,r)){const c=new me(n.segments,function jy(n,e,t,r,s,u){const c={};for(const g of r)if(Ka(n,t,g)&&!s[zt(g)]){const v=new me([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[zt(g)]=v}return Object.assign(Object.assign({},s),c)}(n,e,t,r,n.children,s));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new me(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ka(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function zy(n,e,t,r){return!!(zt(n)===r||r!==Rt&&Ka(e,t,n))&&("**"===n.path||zu(e,n,t).matched)}function gg(n,e,t){return 0===e.length&&!n.children[t]}class ta{constructor(e){this.segmentGroup=e||null}}class xr{constructor(e){this.urlTree=e}}function Za(n){return is(new ta(n))}function Qh(n){return is(new xr(n))}class Td{constructor(e,t,r,s,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=qu(this.urlTree.root,[],[],this.config).segmentGroup,t=new me(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Rt).pipe((0,Mt.U)(u=>this.createUrlTree(ec(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ti(u=>{if(u instanceof xr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ta?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Rt).pipe((0,Mt.U)(s=>this.createUrlTree(ec(s),e.queryParams,e.fragment))).pipe(ti(s=>{throw s instanceof ta?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new me([],{[Rt]:e}):e;return new ne(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Mt.U)(u=>new me([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,gn.D)(s).pipe(Ou(u=>{const c=r.children[u],g=fg(t,u);return this.expandSegmentGroup(e,g,c,u).pipe((0,Mt.U)(v=>({segment:v,outlet:u})))}),Hi((u,c)=>(u[c.outlet]=c.segment,u),{}),function My(n,e){const t=arguments.length>=2;return r=>r.pipe(n?$r((s,u)=>n(s,u,r)):Ei.y,ja(1),t?Qp(e):fn(()=>new Os))}())}expandSegment(e,t,r,s,u,c){return(0,gn.D)(r).pipe(Ou(g=>this.expandSegmentAgainstRoute(e,t,r,g,s,u,c).pipe(ti(b=>{if(b instanceof ta)return et(null);throw b}))),Ko(g=>!!g),ti((g,v)=>{if(g instanceof Os||"EmptyError"===g.name)return gg(t,s,u)?et(new me([],{})):Za(t);throw g}))}expandSegmentAgainstRoute(e,t,r,s,u,c,g){return zy(s,t,u,c)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,c):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c):Za(t):Za(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Qh(u):this.lineralizeSegments(r,u).pipe((0,bn.z)(c=>{const g=new me(c,{});return this.expandSegment(e,g,t,c,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){const{matched:g,consumedSegments:v,remainingSegments:b,positionalParamSegments:S}=zu(t,s,u);if(!g)return Za(t);const x=this.applyRedirectCommands(v,s.redirectTo,S);return s.redirectTo.startsWith("/")?Qh(x):this.lineralizeSegments(s,x).pipe((0,bn.z)(L=>this.expandSegment(e,t,r,L.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?et(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Mt.U)(x=>(r._loadedConfig=x,new me(s,{})))):et(new me(s,{}));const{matched:c,consumedSegments:g,remainingSegments:v}=zu(t,r,s);return c?this.getChildConfig(e,r,s).pipe((0,bn.z)(S=>{const x=S.module,L=S.routes,{segmentGroup:q,slicedSegments:Z}=qu(t,g,v,L),_e=new me(q.segments,q.children);if(0===Z.length&&_e.hasChildren())return this.expandChildren(x,L,_e).pipe((0,Mt.U)(bt=>new me(g,bt)));if(0===L.length&&0===Z.length)return et(new me(g,{}));const ke=zt(r)===u;return this.expandSegment(x,_e,L,Z,ke?Rt:u,!0).pipe((0,Mt.U)(gt=>new me(g.concat(gt.segments),gt.children)))})):Za(t)}getChildConfig(e,t,r){return t.children?et(new Dd(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?et(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,bn.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,Mt.U)(u=>(t._loadedConfig=u,u))):function ir(n){return is(Fs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):et(new Dd([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?et(s.map(c=>{const g=e.get(c);let v;if(function zh(n){return n&&qa(n.canLoad)}(g))v=g.canLoad(t,r);else{if(!qa(g))throw new Error("Invalid CanLoad guard");v=g(t,r)}return rr(v)})).pipe(Hu(),(0,Hr.b)(c=>{if(!$u(c))return;const g=Fs(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw g.url=c,g}),(0,Mt.U)(c=>!0===c)):et(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return et(r);if(s.numberOfChildren>1||!s.children[Rt])return is(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[Rt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new ne(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ln(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const g=s.substring(1);r[u]=t[g]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let c={};return ln(t.children,(g,v)=>{c[v]=this.createSegmentGroup(e,g,r,s)}),new me(u,c)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function ec(n){const e={};for(const r of Object.keys(n.children)){const u=ec(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function qy(n){if(1===n.numberOfChildren&&n.children[Rt]){const e=n.children[Rt];return new me(n.segments.concat(e.segments),e.children)}return n}(new me(n.segments,e))}class ai{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class mo{constructor(e,t){this.component=e,this.route=t}}function yg(n,e,t){const r=n._root;return Qa(r,e?e._root:null,t,[r.value])}function Wu(n,e,t){const r=function Xh(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Qa(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=go(e);return n.children.forEach(c=>{(function vg(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const v=function Wy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!dt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!dt(n.url,e.url)||!wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Hh(n,e)||!wi(n.queryParams,e.queryParams);default:return!Hh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);v?s.canActivateChecks.push(new ai(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Qa(n,e,u.component?g?g.children:null:t,r,s),v&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new mo(g.outlet.component,c))}else c&&ui(e,g,s),s.canActivateChecks.push(new ai(r)),Qa(n,null,u.component?g?g.children:null:t,r,s)})(c,u[c.value.outlet],t,r.concat([c.value]),s),delete u[c.value.outlet]}),ln(u,(c,g)=>ui(c,t.getContext(g),s)),s}function ui(n,e,t){const r=go(n),s=n.value;ln(r,(u,c)=>{ui(u,s.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new mo(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class bg{}function Bs(n){return new On.y(e=>e.error(n))}class Ig{constructor(e,t,r,s,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=qu(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Rt);if(null===t)return null;const r=new Xo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new po(r,t),u=new jh(this.url,s);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=ky(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],g=fg(e,u),v=this.processSegmentGroup(g,c,u);if(null===v)return null;r.push(...v)}const s=Cg(r);return function Dg(n){n.sort((e,t)=>e.value.outlet===Rt?-1:t.value.outlet===Rt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,s);if(null!==c)return c}return gg(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!zy(e,t,r,s))return null;let u,c=[],g=[];if("**"===e.path){const q=r.length>0?Gi(r).parameters:{};u=new Xo(r,q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),zt(e),e.component,e,Ja(t),ls(t)+r.length,h(e))}else{const q=zu(t,e,r);if(!q.matched)return null;c=q.consumedSegments,g=q.remainingSegments,u=new Xo(c,q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),zt(e),e.component,e,Ja(t),ls(t)+c.length,h(e))}const v=function Yy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:S}=qu(t,c,g,v.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution);if(0===S.length&&b.hasChildren()){const q=this.processChildren(v,b);return null===q?null:[new po(u,q)]}if(0===v.length&&0===S.length)return[new po(u,[])];const x=zt(e)===s,L=this.processSegment(v,b,S,x?Rt:s);return null===L?null:[new po(u,L)]}}function nf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Cg(n){const e=[],t=new Set;for(const r of n){if(!nf(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=Cg(r.children);e.push(new po(r.value,s))}return e.filter(r=>!t.has(r))}function Ja(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ls(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function h(n){return n.resolve||{}}function W(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Le(n){return wn(e=>{const t=n(e);return t?(0,gn.D)(t).pipe((0,Mt.U)(()=>e)):et(e)})}class lt extends class yt{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const In=new f.OlP("ROUTES");class ci{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,Mt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Dd(pd(c.injector.get(In,void 0,f.XFs.Self|f.XFs.Optional)).map(Yh),c)}),ti(u=>{throw t._loader$=void 0,u}));return t._loader$=new Ru(s,()=>new ei.x).pipe(io()),t._loader$}loadModuleFactory(e){return rr(e()).pipe((0,bn.z)(t=>t instanceof f.YKP?et(t):(0,gn.D)(this.compiler.compileModuleAsync(t))))}}class Qy{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function na(n){throw n}function Sd(n,e,t){return e.parse("/")}function Md(n,e){return et(null)}const rf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xd={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let di=(()=>{class n{constructor(t,r,s,u,c,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ei.x,this.errorHandler=na,this.malformedUriErrorHandler=Sd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Md,afterPreactivation:Md},this.urlHandlingStrategy=new Qy,this.routeReuseStrategy=new lt,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(f.h0i),this.console=c.get(f.c2e);const x=c.get(f.R0b);this.isNgZoneEnabled=x instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function Ny(){return new ne(new me([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ci(c,g,L=>this.triggerEvent(new Zo(L)),L=>this.triggerEvent(new uo(L))),this.routerState=Ga(this.currentUrlTree,this.rootComponentType),this.transitions=new jr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe($r(s=>0!==s.id),(0,Mt.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),wn(s=>{let u=!1,c=!1;return et(s).pipe((0,Hr.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),wn(g=>{const v=this.browserUrlTree.toString(),b=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return of(g.source)&&(this.browserUrlTree=g.extractedUrl),et(g).pipe(wn(x=>{const L=this.transitions.getValue();return r.next(new oo(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),L!==this.transitions.getValue()?Ba.E:Promise.resolve(x)}),function mg(n,e,t,r){return wn(s=>function Ya(n,e,t,r,s){return new Td(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,Mt.U)(u=>Object.assign(Object.assign({},s),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Hr.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function m(n,e,t,r,s){return(0,bn.z)(u=>function tc(n,e,t,r,s="emptyOnly",u="legacy"){try{const c=new Ig(n,e,t,r,s,u).recognize();return null===c?Bs(new bg):et(c)}catch(c){return Bs(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,s).pipe((0,Mt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Hr.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const q=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(q,x)}this.browserUrlTree=x.urlAfterRedirects}const L=new ao(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(L)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:q,source:Z,restoredState:_e,extras:ke}=g,pt=new oo(L,this.serializeUrl(q),Z,_e);r.next(pt);const gt=Ga(q,this.rootComponentType).snapshot;return et(Object.assign(Object.assign({},g),{targetSnapshot:gt,urlAfterRedirects:q,extras:Object.assign(Object.assign({},ke),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),Ba.E}),Le(g=>{const{targetSnapshot:v,id:b,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:L,replaceUrl:q}}=g;return this.hooks.beforePreactivation(v,{navigationId:b,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!L,replaceUrl:!!q})}),(0,Hr.b)(g=>{const v=new xy(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,Mt.U)(g=>Object.assign(Object.assign({},g),{guards:yg(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function Eg(n,e){return(0,bn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?et(Object.assign(Object.assign({},t),{guardsResult:!0})):function Ky(n,e,t,r){return(0,gn.D)(n).pipe((0,bn.z)(s=>function tf(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?et(u.map(g=>{const v=Wu(g,e,s);let b;if(function d0(n){return n&&qa(n.canDeactivate)}(v))b=rr(v.canDeactivate(n,e,t,r));else{if(!qa(v))throw new Error("Invalid CanDeactivate guard");b=rr(v(n,e,t,r))}return b.pipe(Ko())})).pipe(Hu()):et(!0)}(s.component,s.route,t,e,r)),Ko(s=>!0!==s,!0))}(c,r,s,n).pipe((0,bn.z)(g=>g&&function hg(n){return"boolean"==typeof n}(g)?function Ad(n,e,t,r){return(0,gn.D)(e).pipe(Ou(s=>zo(function wg(n,e){return null!==n&&e&&e(new lo(n)),et(!0)}(s.route.parent,r),function Zy(n,e){return null!==n&&e&&e(new co(n)),et(!0)}(s.route,r),function ef(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function _g(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Wo(()=>et(c.guards.map(v=>{const b=Wu(v,c.node,t);let S;if(function qh(n){return n&&qa(n.canActivateChild)}(b))S=rr(b.canActivateChild(r,n));else{if(!qa(b))throw new Error("Invalid CanActivateChild guard");S=rr(b(r,n))}return S.pipe(Ko())})).pipe(Hu())));return et(u).pipe(Hu())}(n,s.path,t),function li(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return et(!0);const s=r.map(u=>Wo(()=>{const c=Wu(u,e,t);let g;if(function Jl(n){return n&&qa(n.canActivate)}(c))g=rr(c.canActivate(e,n));else{if(!qa(c))throw new Error("Invalid CanActivate guard");g=rr(c(e,n))}return g.pipe(Ko())}));return et(s).pipe(Hu())}(n,s.route,t))),Ko(s=>!0!==s,!0))}(r,u,n,e):et(g)),(0,Mt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,Hr.b)(g=>{if($u(g.guardsResult)){const b=Fs(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw b.url=g.guardsResult,b}const v=new ql(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),$r(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),Le(g=>{if(g.guards.canActivateChecks.length)return et(g).pipe((0,Hr.b)(v=>{const b=new ni(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}),wn(v=>{let b=!1;return et(v).pipe(function E(n,e){return(0,bn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return et(t);let u=0;return(0,gn.D)(s).pipe(Ou(c=>function A(n,e,t,r){return function R(n,e,t,r){const s=W(n);if(0===s.length)return et({});const u={};return(0,gn.D)(s).pipe((0,bn.z)(c=>function pe(n,e,t,r){const s=Wu(n,e,r);return rr(s.resolve?s.resolve(e,t):s(e,t))}(n[c],e,t,r).pipe((0,Hr.b)(g=>{u[c]=g}))),ja(1),(0,bn.z)(()=>W(u).length===s.length?et(u):Ba.E))}(n._resolve,n,e,r).pipe((0,Mt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),ky(n,t).resolve),null)))}(c.route,r,n,e)),(0,Hr.b)(()=>u++),ja(1),(0,bn.z)(c=>u===s.length?et(t):Ba.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Hr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),(0,Hr.b)(v=>{const b=new ri(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}))}),Le(g=>{const{targetSnapshot:v,id:b,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:L,replaceUrl:q}}=g;return this.hooks.afterPreactivation(v,{navigationId:b,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!L,replaceUrl:!!q})}),(0,Mt.U)(g=>{const v=function ig(n,e,t){const r=Yl(n,e._root,t?t._root:void 0);return new md(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:v})}),(0,Hr.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,Mt.U)(r=>(new dg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,Hr.b)({next(){u=!0},complete(){u=!0}}),function hd(n){return(0,nr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;u||c||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===s.id&&(this.currentNavigation=null)}),ti(g=>{if(c=!0,function Jp(n){return n&&n[Ha]}(g)){const v=$u(g.url);v||(this.navigated=!0,this.restoreHistory(s,!0));const b=new mn(s.id,this.serializeUrl(s.extractedUrl),g.message);r.next(b),v?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),x={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||of(s.source)};this.scheduleNavigation(S,"imperative",null,x,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const v=new zl(s.id,this.serializeUrl(s.extractedUrl),g);r.next(v);try{s.resolve(this.errorHandler(g))}catch(b){s.reject(b)}}return Ba.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const u={replaceUrl:!0},c=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(c){const v=Object.assign({},c);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Wa(t),this.config=t.map(Yh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:c,queryParamsHandling:g,preserveFragment:v}=r,b=s||this.routerState.root,S=v?this.currentUrlTree.fragment:c;let x=null;switch(g){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function ea(n,e,t,r,s){if(0===t.length)return Ed(e.root,e.root,e.root,r,s);const u=function l0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new sg(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return ln(u.outlets,(v,b)=>{g[b]="string"==typeof v?v.split("/"):v}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===c?(u.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new sg(t,e,r)}(t);if(u.toRoot())return Ed(e.root,e.root,new me([],{}),r,s);const c=function og(n,e,t){if(n.isAbsolute)return new wd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new wd(u,u===e.root,0)}const r=Vs(n.commands[0])?0:1;return function ag(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new wd(r,!1,s-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),g=c.processChildren?bd(c.segmentGroup,c.index,u.commands):lg(c.segmentGroup,c.index,u.commands);return Ed(e.root,c.segmentGroup,g,r,s)}(b,this.currentUrlTree,t,x,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=$u(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function sf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},rf):!1===r?Object.assign({},xd):r,$u(t))return ho(this.currentUrlTree,t,s);const u=this.parseUrl(t);return ho(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Pu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,c){var g,v;if(this.disposed)return Promise.resolve(!1);let b,S,x;c?(b=c.resolve,S=c.reject,x=c.promise):x=new Promise((Z,_e)=>{b=Z,S=_e});const L=++this.navigationId;let q;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),q=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):q=0,this.setTransition({id:L,targetPageId:q,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:S,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(Z=>Promise.reject(Z))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){var s,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new mn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function of(n){return"imperative"!==n}let Ku=(()=>{class n{constructor(t,r,s,u,c){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new ei.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Zu(this.skipLocationChange),replaceUrl:Zu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(di),f.Y36(ju),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function Zu(n){return""===n||!!n}class Xy{}class p0{preload(e,t){return et(null)}}let g0=(()=>{class n{constructor(t,r,s,u){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=new ci(s,r,v=>t.triggerEvent(new Zo(v)),v=>t.triggerEvent(new uo(v)))}setUpPreloading(){this.subscription=this.router.events.pipe($r(t=>t instanceof Pu),Ou(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;s.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?s.push(this.preloadConfig(t,u)):u.children&&s.push(this.processRoutes(t,u.children));return(0,gn.D)(s).pipe((0,Go.J)(),(0,Mt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?et(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,bn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(di),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Xy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Tg=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof oo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof $a&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new $a(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const cs=new f.OlP("ROUTER_CONFIGURATION"),t_=new f.OlP("ROUTER_FORROOT_GUARD"),m0=[Ee,{provide:wt,useClass:gr},{provide:di,useFactory:function r_(n,e,t,r,s,u,c={},g,v){const b=new di(null,n,e,t,r,s,pd(u));return g&&(b.urlHandlingStrategy=g),v&&(b.routeReuseStrategy=v),function v0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(S=>{var x,L;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(L=console.groupEnd)||void 0===L||L.call(console)}),b},deps:[wt,Gu,Ee,f.zs3,f.Sil,In,cs,[class nc{},new f.FiY],[class Ze{},new f.FiY]]},Gu,{provide:ju,useFactory:function Ag(n){return n.routerState.root},deps:[di]},g0,p0,class e_{preload(e,t){return t().pipe(ti(()=>et(null)))}},{provide:cs,useValue:{enableTracing:!1}}];function ED(){return new f.PXZ("Router",di)}let zi=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[m0,n_(t),{provide:t_,useFactory:_0,deps:[[di,new f.FiY,new f.tp0]]},{provide:cs,useValue:r||{}},{provide:fe,useFactory:y0,deps:[oe,[new f.tBr(qe),new f.FiY],cs]},{provide:Tg,useFactory:wD,deps:[di,xl,cs]},{provide:Xy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:p0},{provide:f.PXZ,multi:!0,useFactory:ED},[Nd,{provide:f.ip1,multi:!0,useFactory:E0,deps:[Nd]},{provide:s_,useFactory:i_,deps:[Nd]},{provide:f.tb,multi:!0,useExisting:s_}]]}}static forChild(t){return{ngModule:n,providers:[n_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(t_,8),f.LFG(di,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function wD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Tg(n,e,t)}function y0(n,e,t={}){return t.useHash?new Te(n,e):new Ye(n,e)}function _0(n){return"guarded"}function n_(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:In,multi:!0,useValue:n}]}let Nd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ei.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(g=>r=g),u=this.injector.get(di),c=this.injector.get(cs);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?et(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(cs),s=this.injector.get(g0),u=this.injector.get(Tg),c=this.injector.get(di),g=this.injector.get(f.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),s.setUpPreloading(),u.init(),c.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function E0(n){return n.appInitializer.bind(n)}function i_(n){return n.bootstrapListener.bind(n)}const s_=new f.OlP("Router Initializer"),w0=new f.OlP("GETS_ALL_HERO_DTO");let b0=(()=>{class n{constructor(t){this._getsAllHeroDto=t,this.image$=this._getsAllHeroDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(w0))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-hero"]],decls:19,vars:0,consts:[[1,"center","container-fluid","scbackground"],[1,"container"],[1,"row"],[1,"col"],[1,"col","herotext"],[1,"fw-bold"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"br")(3,"br")(4,"br")(5,"br")(6,"br")(7,"br")(8,"br")(9,"br"),f.TgZ(10,"div",2),f._UZ(11,"div",3)(12,"div",3),f.TgZ(13,"div",4)(14,"h1")(15,"span",5),f._uU(16," STYLIST PICKS UP "),f._UZ(17,"br"),f._uU(18," THE HEAT"),f.qZA()()()()()())},encapsulation:2,changeDetection:0}),n})();const I0=new f.OlP("GETS_ALL_PRODUCT_DTO");function bD(n,e){if(1&n&&(f.TgZ(0,"div",5)(1,"div",6),f._UZ(2,"img",7),f.TgZ(3,"div",8)(4,"h5",9),f._uU(5),f.qZA(),f.TgZ(6,"p",10),f._uU(7),f.qZA(),f.TgZ(8,"button",11),f.O4$(),f.TgZ(9,"svg",12),f._UZ(10,"path",13),f.qZA(),f._uU(11," KUP "),f.qZA()()()()),2&n){const t=e.$implicit;f.xp6(2),f.s9C("src",t.imageUrl,f.LSH),f.Q6J("routerLink","details/"+t.id),f.xp6(3),f.Oqu(t.name),f.xp6(2),f.AsE(" ",t.description," ",t.price," "),f.xp6(1),f.Q6J("routerLink","./confirmation")}}let D0=(()=>{class n{constructor(t){this._getsAllProductDto=t,this.products$=this._getsAllProductDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(I0))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-product-list"]],decls:11,vars:3,consts:[[1,"col","herotext"],[1,"fw-bold"],[1,"container"],[1,"row"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card","background","text-white",2,"width","15rem"],[1,"card-img-top","background",3,"routerLink","src"],[1,"card-body"],[1,"card-title","navtext","fw-bold"],[1,"card-text","navtext"],["type","button",1,"background","navtext",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag-heart","text-white"],["fill-rule","evenodd","d","M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5Zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0ZM14 14V5H2v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1ZM8 7.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132Z"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h1")(2,"span",1),f._uU(3," DISCOVER OUR PRODUCTS"),f.qZA()(),f.TgZ(4,"h4"),f._uU(5,"THE LATEST FASHION OLNY"),f.qZA(),f._UZ(6,"br"),f.qZA(),f.TgZ(7,"div",2)(8,"div",3),f.YNc(9,bD,12,6,"div",4),f.ALo(10,"async"),f.qZA()()),2&t&&(f.xp6(9),f.Q6J("ngForOf",f.lcZ(10,1,r.products$)))},directives:[Un,Ku],pipes:[Al],encapsulation:2,changeDetection:0}),n})(),a_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home-page"]],decls:3,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-hero")(1,"br")(2,"lib-product-list")},directives:[b0,D0],encapsulation:2,changeDetection:0}),n})(),C0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar,zi]]}),n})();var sS=O(4986),Wn=O(5813);function u_(){return(0,nr.e)((n,e)=>{let t,r=!1;n.subscribe((0,xn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function ID(n,e){return n===e}var nt,js=O(2011),DD=(O(7092),O(3942)),be=O(5861),ic=O(9681),Mg=O(4859),Yu=O(1877),Bt=O(2090),A0="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xa={},l_=l_||{},Be=A0||self;function af(){}function xg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Rd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ds="closure_uid_"+(1e9*Math.random()>>>0),S0=0;function CD(n,e,t){return n.call.apply(n.bind,arguments)}function c_(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Dn(n,e,t){return(Dn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?CD:c_).apply(null,arguments)}function Od(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Nr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var c=Array(arguments.length-2),g=2;g<arguments.length;g++)c[g-2]=arguments[g];return e.prototype[s].apply(r,c)}}function ia(){this.s=this.s,this.o=this.o}var M0={};ia.prototype.s=!1,ia.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Ng(n){return Object.prototype.hasOwnProperty.call(n,ds)&&n[ds]||(n[ds]=++S0)}(this);delete M0[n]}},ia.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const TD=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},uf=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function Og(n){return Array.prototype.concat.apply([],arguments)}function lf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Pd(n){return/^[\s\xa0]*$/.test(n)}var Ii,AD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function bi(n,e){return-1!=n.indexOf(e)}function d_(n,e){return n<e?-1:n>e?1:0}e:{var x0=Be.navigator;if(x0){var h_=x0.userAgent;if(h_){Ii=h_;break e}}Ii=""}function N0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function R0(n){const e={};for(const t in n)e[t]=n[t];return e}var SD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function f_(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<SD.length;u++)t=SD[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Pg(n){return Pg[" "](n),n}Pg[" "]=af;var g_,n,p_=bi(Ii,"Opera"),cf=bi(Ii,"Trident")||bi(Ii,"MSIE"),xD=bi(Ii,"Edge"),O0=xD||cf,ND=bi(Ii,"Gecko")&&!(bi(Ii.toLowerCase(),"webkit")&&!bi(Ii,"Edge"))&&!(bi(Ii,"Trident")||bi(Ii,"MSIE"))&&!bi(Ii,"Edge"),aS=bi(Ii.toLowerCase(),"webkit")&&!bi(Ii,"Edge");function RD(){var n=Be.document;return n?n.documentMode:void 0}e:{var P0="",k0=(n=Ii,ND?/rv:([^\);]+)(\)|;)/.exec(n):xD?/Edge\/([\d\.]+)/.exec(n):cf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):aS?/WebKit\/(\S+)/.exec(n):p_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(k0&&(P0=k0?k0[1]:""),cf){var F0=RD();if(null!=F0&&F0>parseFloat(P0)){g_=String(F0);break e}}g_=P0}var Qu={};var v_=Be.document&&cf&&(RD()||parseInt(g_,10))||void 0,L0=function(){if(!Be.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Be.addEventListener("test",af,e),Be.removeEventListener("test",af,e)}catch(t){}return n}();function Rr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function df(n,e){if(Rr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ND){e:{try{Pg(e.nodeName);var s=!0;break e}catch(u){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Ju[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&df.Z.h.call(this)}}Rr.prototype.h=function(){this.defaultPrevented=!0},Nr(df,Rr);var Ju={2:"touch",3:"pen",4:"mouse"};df.prototype.h=function(){df.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var kd="closure_listenable_"+(1e6*Math.random()|0),OD=0;function E_(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++OD,this.ca=this.fa=!1}function kg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function hf(n){this.src=n,this.g={},this.h=0}function w_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=TD(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(kg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function b_(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}hf.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=b_(n,e,r,s);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new E_(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var sc="closure_lm_"+(1e6*Math.random()|0),Xu={};function Fg(n,e,t,r,s){if(r&&r.once)return ac(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Fg(n,e[u],t,r,s);return null}return t=Fd(t),n&&n[kd]?n.N(e,t,Rd(r)?!!r.capture:!!r,s):oc(n,e,t,!1,r,s)}function oc(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=Rd(s)?!!s.capture:!!s,g=pf(n);if(g||(n[sc]=g=new hf(n)),(t=g.add(e,t,r,c,u)).proxy)return t;if(r=function ff(){var e=D_;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)L0||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(I_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function ac(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)ac(n,e[u],t,r,s);return null}return t=Fd(t),n&&n[kd]?n.O(e,t,Rd(r)?!!r.capture:!!r,s):oc(n,e,t,!0,r,s)}function V0(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)V0(n,e[u],t,r,s);else r=Rd(r)?!!r.capture:!!r,t=Fd(t),n&&n[kd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=b_(u=n.g[e],t,r,s))&&(kg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=pf(n))&&(e=n.g[e.toString()],n=-1,e&&(n=b_(e,t,r,s)),(t=-1<n?e[n]:null)&&Lg(t))}function Lg(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[kd])w_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(I_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=pf(e))?(w_(t,n),0==t.h&&(t.src=null,e[sc]=null)):kg(n)}}}function I_(n){return n in Xu?Xu[n]:Xu[n]="on"+n}function D_(n,e){if(n.ca)n=!0;else{e=new df(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Lg(n),n=t.call(r,e)}return n}function pf(n){return(n=n[sc])instanceof hf?n:null}var Vg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fd(n){return"function"==typeof n?n:(n[Vg]||(n[Vg]=function(e){return n.handleEvent(e)}),n[Vg])}function Or(){ia.call(this),this.i=new hf(this),this.P=this,this.I=null}function Pr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Rr(e,n);else if(e instanceof Rr)e.target=e.target||n;else{var s=e;f_(e=new Rr(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=C_(c,r,!0,e)&&s}if(s=C_(c=e.g=n,r,!0,e)&&s,s=C_(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=C_(c=e.g=t[u],r,!1,e)&&s}function C_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var g=c.listener,v=c.ia||c.src;c.fa&&w_(n.i,c),s=!1!==g.call(v,r)&&s}}return s&&!r.defaultPrevented}Nr(Or,ia),Or.prototype[kd]=!0,Or.prototype.removeEventListener=function(n,e,t,r){V0(this,n,e,t,r)},Or.prototype.M=function(){if(Or.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)kg(t[r]);delete n.g[e],n.h--}}this.I=null},Or.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Or.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ug=Be.JSON.stringify;function U0(){var n=VD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var A_,T_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new kD,n=>n.reset());class kD{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function FD(n){Be.setTimeout(()=>{throw n},0)}function Di(n,e){A_||function LD(){var n=Be.Promise.resolve(void 0);A_=function(){n.then(j0)}}(),B0||(A_(),B0=!0),VD.add(n,e)}var B0=!1,VD=new class PD{constructor(){this.h=this.g=null}add(e,t){const r=T_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function j0(){for(var n;n=U0();){try{n.h.call(n.g)}catch(t){FD(t)}var e=T_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}B0=!1}function S_(n,e){Or.call(this),this.h=n||1,this.g=e||Be,this.j=Dn(this.kb,this),this.l=Date.now()}function M_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function gf(n,e,t){if("function"==typeof n)t&&(n=Dn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Dn(n.handleEvent,n)}return 2147483647<Number(e)?-1:Be.setTimeout(n,e||0)}function x_(n){n.g=gf(()=>{n.g=null,n.i&&(n.i=!1,x_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Nr(S_,Or),(nt=S_.prototype).da=!1,nt.S=null,nt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Pr(this,"tick"),this.da&&(M_(this),this.start()))}},nt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){S_.Z.M.call(this),M_(this),delete this.g};class UD extends ia{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:x_(this)}M(){super.M(),this.g&&(Be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mf(n){ia.call(this),this.h=n,this.g={}}Nr(mf,ia);var $0=[];function N_(n,e,t,r){Array.isArray(t)||(t&&($0[0]=t.toString()),t=$0);for(var s=0;s<t.length;s++){var u=Fg(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function H0(n){N0(n.g,function(e,t){this.g.hasOwnProperty(t)&&Lg(e)},n),n.g={}}function yf(){this.g=!0}function uc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function $D(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return Ug(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}mf.prototype.M=function(){mf.Z.M.call(this),H0(this)},mf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yf.prototype.Aa=function(){this.g=!1},yf.prototype.info=function(){};var hi={},Bg=null;function jg(){return Bg=Bg||new Or}function z0(n){Rr.call(this,hi.Ma,n)}function $g(n){const e=jg();Pr(e,new z0(e,n))}function R_(n,e){Rr.call(this,hi.STAT_EVENT,n),this.stat=e}function Ci(n){const e=jg();Pr(e,new R_(e,n))}function q0(n,e){Rr.call(this,hi.Na,n),this.size=e}function _f(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Be.setTimeout(function(){n()},e)}hi.Ma="serverreachability",Nr(z0,Rr),hi.STAT_EVENT="statevent",Nr(R_,Rr),hi.Na="timingevent",Nr(q0,Rr);var Ld={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},W0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function O_(){}function Hg(){}O_.prototype.h=null;var Gg,Ef={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function wf(){Rr.call(this,"d")}function bf(){Rr.call(this,"c")}function zg(){}function If(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new mf(this),this.P=uS,this.W=new S_(n=O0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new qg}function qg(){this.i=null,this.g="",this.h=!1}Nr(wf,Rr),Nr(bf,Rr),Nr(zg,O_),zg.prototype.g=function(){return new XMLHttpRequest},zg.prototype.i=function(){return{}},Gg=new zg;var uS=45e3,P_={},Df={};function Wg(n,e,t){n.K=1,n.v=Xg(yo(e)),n.s=t,n.U=!0,k_(n,null)}function k_(n,e){n.F=Date.now(),el(n),n.A=yo(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),tw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new qg,n.g=Z_(n.l,t?e:null,!n.s),0<n.O&&(n.L=new UD(Dn(n.Ia,n,n.g),n.O)),N_(n.V,n.g,"readystatechange",n.gb),e=n.H?R0(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),$g(1),function BD(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",g=u.split("&"),v=0;v<g.length;v++){var b=g[v].split("=");if(1<b.length){var S=b[0];b=b[1];var x=S.split("_");c=2<=x.length&&"type"==x[1]?c+(S+"=")+b+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function F_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function L_(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=eu(n,t),s==Df){4==e&&(n.o=4,Ci(14),r=!1),uc(n.j,n.m,null,"[Incomplete Response]");break}if(s==P_){n.o=4,Ci(15),uc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}uc(n.j,n.m,s,null),Yg(n,s)}F_(n)&&s!=Df&&s!=P_&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ci(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),rl(e),e.L=!0,Ci(11))):(uc(n.j,n.m,t,"[Invalid Chunked Response]"),tu(n),Zg(n))}function eu(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Df:(t=Number(e.substring(t,r)),isNaN(t)?P_:(r+=1)+t>e.length?Df:(e=e.substr(r,t),n.C=r+t,e))}function el(n){n.Y=Date.now()+n.P,K0(n,n.P)}function K0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=_f(Dn(n.eb,n),e)}function Kg(n){n.B&&(Be.clearTimeout(n.B),n.B=null)}function Zg(n){0==n.l.G||n.I||z_(n.l,n)}function tu(n){Kg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,M_(n.W),H0(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Yg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||iw(t.i,n)))if(t.I=n.N,!n.J&&iw(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0])e:if(t.u)t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=_f(Dn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;iu(t),sa(t)}nl(t),Ci(18)}if(1>=qD(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else il(t,11)}else if((n.J||t.g==n)&&iu(t),!Pd(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const S=b[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const x=b[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const L=b[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const Z=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var u=r.i;!u.g&&(bi(Z,"spdy")||bi(Z,"quic")||bi(Z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Mf(u,u.h),u.h=null))}if(r.D){const _e=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;_e&&(r.sa=_e,Cn(r.F,r.D,_e))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=K_(r,r.H?r.la:null,r.W),c.J){sw(r.i,c);var g=c,v=r.K;v&&g.setTimeout(v),g.B&&(Kg(g),el(g)),r.g=c}else pc(r);0<t.l.length&&zd(t)}else"stop"!=b[0]&&"close"!=b[0]||il(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?il(t,7):kr(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}$g(4)}catch(b){}}function lc(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(xg(n)||"string"==typeof n)uf(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(xg(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function V_(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(xg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function Vd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Vd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Cf(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];tl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)tl(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function tl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(nt=If.prototype).setTimeout=function(n){this.P=n},nt.gb=function(n){n=n.target;const e=this.L;e&&3==hs(n)?e.l():this.Ia(n)},nt.Ia=function(n){try{if(n==this.g)e:{const S=hs(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>S)&&(3!=S||O0||this.g&&(this.h.h||this.g.ga()||cw(this.g)))){this.I||4!=S||7==e||$g(8==e||0>=x?3:2),Kg(this);var t=this.g.ba();this.N=t;t:if(F_(this)){var r=cw(this.g);n="";var s=r.length,u=4==hs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tu(this),Zg(this);var c="";break t}this.h.i=new Be.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function jD(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Pd(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ci(12),tu(this),Zg(this);break e}uc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Yg(this,t)}this.U?(L_(this,S,c),O0&&this.i&&3==S&&(N_(this.V,this.W,"tick",this.fb),this.W.start())):(uc(this.j,this.m,c,null),Yg(this,c)),4==S&&tu(this),this.i&&!this.I&&(4==S?z_(this.l,this):(this.i=!1,el(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ci(12)):(this.o=0,Ci(13)),tu(this),Zg(this)}}}catch(S){}},nt.fb=function(){if(this.g){var n=hs(this.g),e=this.g.ga();this.C<e.length&&(Kg(this),L_(this,n,e),this.i&&4!=n&&el(this))}},nt.cancel=function(){this.I=!0,tu(this)},nt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function G0(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&($g(3),Ci(17)),tu(this),this.o=2,Zg(this)):K0(this,this.Y-n)},(nt=Vd.prototype).R=function(){Cf(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},nt.T=function(){return Cf(this),this.g.concat()},nt.get=function(n,e){return tl(this.h,n)?this.h[n]:e},nt.set=function(n,e){tl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},nt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var U_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof cc){this.g=void 0!==e?e:n.g,Qg(this,n.j),this.s=n.s,Jg(this,n.i),Tf(this,n.m),this.l=n.l,e=n.h;var t=new Bd;t.i=e.i,e.g&&(t.g=new Vd(e.g),t.h=e.h),dc(this,t),this.o=n.o}else n&&(t=String(n).match(U_))?(this.g=!!e,Qg(this,t[1]||"",!0),this.s=Af(t[2]||""),Jg(this,t[3]||"",!0),Tf(this,t[4]),this.l=Af(t[5]||"",!0),dc(this,t[6]||"",!0),this.o=Af(t[7]||"")):(this.g=!!e,this.h=new Bd(null,this.g))}function yo(n){return new cc(n)}function Qg(n,e,t){n.j=t?Af(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Jg(n,e,t){n.i=t?Af(e,!0):e}function Tf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function dc(n,e,t){e instanceof Bd?(n.h=e,function nw(n,e){e&&!n.j&&(nu(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(X0(this,r),tw(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Sf(e,Q0)),n.h=new Bd(e,n.g))}function Cn(n,e,t){n.h.set(e,t)}function Xg(n){return Cn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Af(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Sf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,GD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function GD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}cc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Sf(e,Y0,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Sf(e,Y0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Sf(t,"/"==t.charAt(0)?B_:_o,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Sf(t,J0)),n.join("")};var Y0=/[#\/\?@]/g,_o=/[#\?:]/g,B_=/[#\?]/g,Q0=/[#\?@]/g,J0=/#/g;function Bd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function nu(n){n.g||(n.g=new Vd,n.h=0,n.i&&function Z0(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function X0(n,e){nu(n),e=jd(n,e),tl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,tl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Cf(n)))}function ew(n,e){return nu(n),e=jd(n,e),tl(n.g.h,e)}function tw(n,e,t){X0(n,e),0<t.length&&(n.i=null,n.g.set(jd(n,e),lf(t)),n.h+=t.length)}function jd(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function j_(n){this.l=n||zD,n=Be.PerformanceNavigationTiming?0<(n=Be.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Be.g&&Be.g.Ea&&Be.g.Ea()&&Be.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=Bd.prototype).add=function(n,e){nu(this),this.i=null,n=jd(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){nu(this),this.g.forEach(function(t,r){uf(t,function(s){n.call(e,s,r,this)},this)},this)},nt.T=function(){nu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},nt.R=function(n){nu(this);var e=[];if("string"==typeof n)ew(this,n)&&(e=Og(e,this.g.get(jd(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Og(e,n[t])}return e},nt.set=function(n,e){return nu(this),this.i=null,ew(this,n=jd(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=s;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var zD=10;function rw(n){return!!n.h||!!n.g&&n.g.size>=n.j}function qD(n){return n.h?1:n.g?n.g.size:0}function iw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Mf(n,e){n.g?n.g.add(e):n.h=e}function sw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function $_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return lf(n.i)}function em(){}function cS(){this.g=new em}function vo(n,e,t){const r=t||"";try{lc(n,function(s,u){let c=s;Rd(s)&&(c=Ug(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function H_(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(u){}}function $d(n){this.l=n.$b||null,this.j=n.ib||!1}function xf(n,e){Or.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=tm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}j_.prototype.cancel=function(){if(this.i=$_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},em.prototype.stringify=function(n){return Be.JSON.stringify(n,void 0)},em.prototype.parse=function(n){return Be.JSON.parse(n,void 0)},Nr($d,O_),$d.prototype.g=function(){return new xf(this.l,this.j)},$d.prototype.i=function(n){return function(){return n}}({}),Nr(xf,Or);var tm=0;function ow(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function nm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Hd(n)}function Hd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=xf.prototype).open=function(n,e){if(this.readyState!=tm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Hd(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Be).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,nm(this)),this.readyState=tm},nt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Hd(this)),this.g&&(this.readyState=3,Hd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Be.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ow(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},nt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?nm(this):Hd(this),3==this.readyState&&ow(this)}},nt.Ua=function(n){this.g&&(this.response=this.responseText=n,nm(this))},nt.Ta=function(n){this.g&&(this.response=n,nm(this))},nt.ha=function(){this.g&&nm(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var G_=Be.JSON.parse;function sr(n){Or.call(this),this.headers=new Vd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rm,this.K=this.L=!1}Nr(sr,Or);var rm="",WD=/^https?$/i,KD=["POST","PUT"];function YD(n){return"content-type"==n.toLowerCase()}function aw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,uw(n),ru(n)}function uw(n){n.D||(n.D=!0,Pr(n,"complete"),Pr(n,"error"))}function Nf(n){if(n.h&&void 0!==l_&&(!n.C[1]||4!=hs(n)||2!=n.ba()))if(n.v&&4==hs(n))gf(n.Fa,0,n);else if(Pr(n,"readystatechange"),4==hs(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var s=String(n.H).match(U_)[1]||null;if(!s&&Be.self&&Be.self.location){var u=Be.self.location.protocol;s=u.substr(0,u.length-1)}r=!WD.test(s?s.toLowerCase():"")}t=r}if(t)Pr(n,"complete"),Pr(n,"success");else{n.m=6;try{var c=2<hs(n)?n.g.statusText:""}catch(v){c=""}n.j=c+" ["+n.ba()+"]",uw(n)}}finally{ru(n)}}}function ru(n,e){if(n.g){lw(n);const t=n.g,r=n.C[0]?af:null;n.g=null,n.C=null,e||Pr(n,"ready");try{t.onreadystatechange=r}catch(s){}}}function lw(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Be.clearTimeout(n.A),n.A=null)}function hs(n){return n.g?n.g.readyState:0}function cw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case rm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Rf(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function QD(n){let e="";return N0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Cn(n,e,t))}function qi(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Gd(n){this.za=0,this.l=[],this.h=new yf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=qi("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=qi("baseRetryDelayMs",5e3,n),this.$a=qi("retryDelaySeedMs",1e4,n),this.Ya=qi("forwardChannelMaxRetries",2,n),this.ra=qi("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new j_(n&&n.concurrentRequestLimit),this.Ca=new cS,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function kr(n){if(Of(n),3==n.G){var e=n.V++,t=yo(n.F);Cn(t,"SID",n.J),Cn(t,"RID",e),Cn(t,"TYPE","terminate"),oa(n,t),(e=new If(n,n.h,e,void 0)).K=2,e.v=Xg(yo(t)),t=!1,Be.navigator&&Be.navigator.sendBeacon&&(t=Be.navigator.sendBeacon(e.v.toString(),"")),!t&&Be.Image&&((new Image).src=e.v,t=!0),t||(e.g=Z_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),el(e)}W_(n)}function sa(n){n.g&&(rl(n),n.g.cancel(),n.g=null)}function Of(n){sa(n),n.u&&(Be.clearTimeout(n.u),n.u=null),iu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Be.clearTimeout(n.m),n.m=null)}function Wi(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&zd(n)}function zd(n){rw(n.i)||n.m||(n.m=!0,Di(n.Ha,n),n.C=0)}function hc(n,e){var t;t=e?e.m:n.V++;const r=yo(n.F);Cn(r,"SID",n.J),Cn(r,"RID",t),Cn(r,"AID",n.U),oa(n,r),n.o&&n.s&&Rf(r,n.o,n.s),t=new If(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=fc(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Mf(n.i,t),Wg(t,r,e)}function oa(n,e){n.j&&lc({},function(t,r){Cn(e,r,t)})}function fc(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Dn(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let g=!0;for(let v=0;v<t;v++){let b=s[v].h;const S=s[v].g;if(b-=u,0>b)u=Math.max(0,s[v].h-100),g=!1;else try{vo(S,c,"req"+b+"_")}catch(x){r&&r(S)}}if(g){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function pc(n){n.g||n.u||(n.Y=1,Di(n.Ga,n),n.A=0)}function nl(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=_f(Dn(n.Ga,n),q_(n,n.A)),n.A++,0))}function rl(n){null!=n.B&&(Be.clearTimeout(n.B),n.B=null)}function gc(n){n.g=new If(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=yo(n.oa);Cn(e,"RID","rpc"),Cn(e,"SID",n.J),Cn(e,"CI",n.N?"0":"1"),Cn(e,"AID",n.U),oa(n,e),Cn(e,"TYPE","xmlhttp"),n.o&&n.s&&Rf(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Xg(yo(e)),t.s=null,t.U=!0,k_(t,n)}function iu(n){null!=n.v&&(Be.clearTimeout(n.v),n.v=null)}function z_(n,e){var t=null;if(n.g==e){iu(n),rl(n),n.g=null;var r=2}else{if(!iw(n.i,e))return;t=e.D,sw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;Pr(r=jg(),new q0(r,t,e,s)),zd(n)}else pc(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function qd(n,e){return!(qD(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=_f(Dn(n.Ha,n,e),q_(n,n.C)),n.C++,0)))}(n,e)||2==r&&nl(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:il(n,5);break;case 4:il(n,10);break;case 3:il(n,6);break;default:il(n,2)}}function q_(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function il(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Dn(n.jb,n);t||(t=new cc("//www.google.com/images/cleardot.gif"),Be.location&&"http"==Be.location.protocol||Qg(t,"https"),Xg(t)),function dS(n,e){const t=new yf;if(Be.Image){const r=new Image;r.onload=Od(H_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Od(H_,t,r,"TestLoadImage: error",!1,e),r.onabort=Od(H_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Od(H_,t,r,"TestLoadImage: timeout",!1,e),Be.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ci(2);n.G=0,n.j&&n.j.va(e),W_(n),Of(n)}function W_(n){n.G=0,n.I=-1,n.j&&((0!=$_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,lf(n.l),n.l.length=0),n.j.ua())}function K_(n,e,t){let r=function HD(n){return n instanceof cc?yo(n):new cc(n,void 0)}(t);if(""!=r.i)e&&Jg(r,e+"."+r.i),Tf(r,r.m);else{const s=Be.location;r=function Ud(n,e,t,r){var s=new cc(null,void 0);return n&&Qg(s,n),e&&Jg(s,e),t&&Tf(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&N0(n.aa,function(s,u){Cn(r,u,s)}),t=n.sa,(e=n.D)&&t&&Cn(r,e,t),Cn(r,"VER",n.ma),oa(n,r),r}function Z_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new sr(t&&n.Ba&&!n.qa?new $d({ib:!0}):n.qa)).L=n.H,e}function Y_(){}function Pf(){if(cf&&!(10<=Number(v_)))throw Error("Environmental error: no available transport.")}function Ki(n,e){Or.call(this),this.g=new Gd(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Pd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Pd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Wd(this)}function dw(n){wf.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Q_(){bf.call(this),this.status=1}function Wd(n){this.g=n}(nt=sr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Gg.g(),this.C=function vf(n){return n.h||(n.h=n.i())}(this.u?this.u:Gg),this.g.onreadystatechange=Dn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void aw(this,u)}n=t||"";const s=new Vd(this.headers);r&&lc(r,function(u,c){s.set(c,u)}),r=function Rg(n){e:{var e=YD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=Be.FormData&&n instanceof Be.FormData,!(0<=TD(KD,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{lw(this),0<this.B&&((this.K=function ZD(n){return cf&&function m_(){return function MD(n){var e=Qu;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=AD(String(g_)).split("."),t=AD("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var s=e[c]||"",u=t[c]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=d_(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||d_(0==s[2].length,0==u[2].length)||d_(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dn(this.pa,this)):this.A=gf(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){aw(this,u)}},nt.pa=function(){void 0!==l_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pr(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Pr(this,"complete"),Pr(this,"abort"),ru(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ru(this,!0)),sr.Z.M.call(this)},nt.Fa=function(){this.s||(this.F||this.v||this.l?Nf(this):this.cb())},nt.cb=function(){Nf(this)},nt.ba=function(){try{return 2<hs(this)?this.g.status:-1}catch(n){return-1}},nt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},nt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),G_(e)}},nt.Da=function(){return this.m},nt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=Gd.prototype).ma=8,nt.G=1,nt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},nt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new If(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=R0(u),f_(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=fc(this,s,e),Cn(t=yo(this.F),"RID",n),Cn(t,"CVER",22),this.D&&Cn(t,"X-HTTP-Session-Id",this.D),oa(this,t),this.o&&u&&Rf(t,this.o,u),Mf(this.i,s),this.Ra&&Cn(t,"TYPE","init"),this.ja?(Cn(t,"$req",e),Cn(t,"SID","null"),s.$=!0,Wg(s,t,null)):Wg(s,t,e),this.G=2}}else 3==this.G&&(n?hc(this,n):0==this.l.length||rw(this.i)||hc(this))},nt.Ga=function(){if(this.u=null,gc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=_f(Dn(this.bb,this),n)}},nt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ci(10),sa(this),gc(this))},nt.ab=function(){null!=this.v&&(this.v=null,sa(this),nl(this),Ci(19))},nt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ci(2)):(this.h.info("Failed to ping google.com"),Ci(1))},(nt=Y_.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Oa=function(){},Pf.prototype.g=function(n,e){return new Ki(n,e)},Nr(Ki,Or),Ki.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Di(Dn(n.hb,n,e))),Ci(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=K_(n,null,n.W),zd(n)},Ki.prototype.close=function(){kr(this.g)},Ki.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Wi(this.g,e)}else this.v?((e={}).__data__=Ug(n),Wi(this.g,e)):Wi(this.g,n)},Ki.prototype.M=function(){this.g.j=null,delete this.j,kr(this.g),delete this.g,Ki.Z.M.call(this)},Nr(dw,wf),Nr(Q_,bf),Nr(Wd,Y_),Wd.prototype.xa=function(){Pr(this.g,"a")},Wd.prototype.wa=function(n){Pr(this.g,new dw(n))},Wd.prototype.va=function(n){Pr(this.g,new Q_(n))},Wd.prototype.ua=function(){Pr(this.g,"b")},Pf.prototype.createWebChannel=Pf.prototype.g,Ki.prototype.send=Ki.prototype.u,Ki.prototype.open=Ki.prototype.m,Ki.prototype.close=Ki.prototype.close,Ld.NO_ERROR=0,Ld.TIMEOUT=8,Ld.HTTP_ERROR=6,W0.COMPLETE="complete",Hg.EventType=Ef,Ef.OPEN="a",Ef.CLOSE="b",Ef.ERROR="c",Ef.MESSAGE="d",Or.prototype.listen=Or.prototype.N,sr.prototype.listenOnce=sr.prototype.O,sr.prototype.getLastError=sr.prototype.La,sr.prototype.getLastErrorCode=sr.prototype.Da,sr.prototype.getStatus=sr.prototype.ba,sr.prototype.getResponseJson=sr.prototype.Qa,sr.prototype.getResponseText=sr.prototype.ga,sr.prototype.send=sr.prototype.ea;var JD=Xa.createWebChannelTransport=function(){return new Pf},hw=Xa.getStatEventTarget=function(){return jg()},J_=Xa.ErrorCode=Ld,XD=Xa.EventType=W0,fw=Xa.Event=hi,pw=Xa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gw=Xa.FetchXmlHttpFactory=$d,im=Xa.WebChannel=Hg,eC=Xa.XhrIo=sr;const tC="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let sl="9.8.0";const aa=new Yu.Yd("@firebase/firestore");function X_(){return aa.logLevel}function Fe(n,...e){if(aa.logLevel<=Yu.in.DEBUG){const t=e.map(sm);aa.debug(`Firestore (${sl}): ${n}`,...t)}}function mr(n,...e){if(aa.logLevel<=Yu.in.ERROR){const t=e.map(sm);aa.error(`Firestore (${sl}): ${n}`,...t)}}function kf(n,...e){if(aa.logLevel<=Yu.in.WARN){const t=e.map(sm);aa.warn(`Firestore (${sl}): ${n}`,...t)}}function sm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${sl}) INTERNAL ASSERTION FAILED: `+n;throw mr(e),new Error(e)}function At(n,e){n||rt()}function Ke(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Bt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ff{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class mw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rC{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let c=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new yr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=c;e.enqueueRetryable((0,be.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},v=b=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>v(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new yr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At("string"==typeof r.accessToken),new Ff(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return At(null===e||"string"==typeof e),new zr(e)}}class iC{constructor(e,t,r){this.type="FirstParty",this.user=zr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class sC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new iC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?s(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(At("string"==typeof t.token),this.p=t.token,new yw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function _w(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}fs.A=-1;class ev{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=_w(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Nt(n,e){return n<e?-1:n>e?1:0}function Lf(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function om(n){return n+"\0"}class Kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Nt(this.nanoseconds,e.nanoseconds):Nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Kn(0,0))}static max(){return new Tt(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Zd(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ol(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function am(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mc{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kt extends mc{construct(e,t,r){return new Kt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}const um=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends mc{construct(e,t,r){return new Bn(e,t,r)}static isValidIdentifier(e){return um.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,s+=2}else"`"===g?(c=!c,s++):"."!==g||c?(r+=g,s++):(u(),s++)}if(u(),c)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(t)}static emptyPath(){return new Bn([])}}class al{constructor(e){this.fields=e,e.sort(Bn.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _r(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new _r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const tv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ua(n){if(At(!!n),"string"==typeof n){let e=0;const t=tv.exec(n);if(At(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pn(n.seconds),nanos:Pn(n.nanos)}}function Pn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function yc(n){return"string"==typeof n?_r.fromBase64String(n):_r.fromUint8Array(n)}function Vf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function nv(n){const e=n.mapValue.fields.__previous_value__;return Vf(e)?nv(e):e}function Yd(n){const e=ua(n.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}class rv{constructor(e,t,r,s,u,c,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class la{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new la("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}function Uf(n){return null==n}function Qd(n){return 0===n&&1/n==-1/0}function iv(n){return"number"==typeof n&&Number.isInteger(n)&&!Qd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Kt.fromString(e))}static fromName(e){return new Ge(Kt.fromString(e).popFirst(5))}static empty(){return new Ge(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Kt(e.slice()))}}const ul={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lm={nullValue:"NULL_VALUE"};function _c(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vf(n)?4:vw(n)?9007199254740991:10:rt()}function ca(n,e){if(n===e)return!0;const t=_c(n);if(t!==_c(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Yd(n).isEqual(Yd(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=ua(r.timestampValue),c=ua(s.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,yc(n.bytesValue).isEqual(yc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Pn(r.geoPointValue.latitude)===Pn(s.geoPointValue.latitude)&&Pn(r.geoPointValue.longitude)===Pn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Pn(r.integerValue)===Pn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Pn(r.doubleValue),c=Pn(s.doubleValue);return u===c?Qd(u)===Qd(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Lf(n.arrayValue.values||[],e.arrayValue.values||[],ca);case 10:return function(r,s){const u=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Zd(u)!==Zd(c))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===c[g]||!ca(u[g],c[g])))return!1;return!0}(n,e);default:return rt()}var s}function vc(n,e){return void 0!==(n.values||[]).find(t=>ca(t,e))}function da(n,e){if(n===e)return 0;const t=_c(n),r=_c(e);if(t!==r)return Nt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Nt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const c=Pn(s.integerValue||s.doubleValue),g=Pn(u.integerValue||u.doubleValue);return c<g?-1:c>g?1:c===g?0:isNaN(c)?isNaN(g)?0:-1:1}(n,e);case 3:return sv(n.timestampValue,e.timestampValue);case 4:return sv(Yd(n),Yd(e));case 5:return Nt(n.stringValue,e.stringValue);case 6:return function(s,u){const c=yc(s),g=yc(u);return c.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const c=s.split("/"),g=u.split("/");for(let v=0;v<c.length&&v<g.length;v++){const b=Nt(c[v],g[v]);if(0!==b)return b}return Nt(c.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const c=Nt(Pn(s.latitude),Pn(u.latitude));return 0!==c?c:Nt(Pn(s.longitude),Pn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const c=s.values||[],g=u.values||[];for(let v=0;v<c.length&&v<g.length;++v){const b=da(c[v],g[v]);if(b)return b}return Nt(c.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===ul.mapValue&&u===ul.mapValue)return 0;if(s===ul.mapValue)return 1;if(u===ul.mapValue)return-1;const c=s.fields||{},g=Object.keys(c),v=u.fields||{},b=Object.keys(v);g.sort(),b.sort();for(let S=0;S<g.length&&S<b.length;++S){const x=Nt(g[S],b[S]);if(0!==x)return x;const L=da(c[g[S]],v[b[S]]);if(0!==L)return L}return Nt(g.length,b.length)}(n.mapValue,e.mapValue);default:throw rt()}}function sv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Nt(n,e);const t=ua(n),r=ua(e),s=Nt(t.seconds,r.seconds);return 0!==s?s:Nt(t.nanos,r.nanos)}function Ec(n){return cm(n)}function cm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=ua(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?yc(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const c of r.values||[])u?u=!1:s+=",",s+=cm(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const g of s)c?c=!1:u+=",",u+=`${g}:${cm(r.fields[g])}`;return u+"}"}(n.mapValue):rt();var e}function ll(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dm(n){return!!n&&"integerValue"in n}function Jd(n){return!!n&&"arrayValue"in n}function ov(n){return!!n&&"nullValue"in n}function av(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function uv(n){return!!n&&"mapValue"in n}function Bf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ol(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Bf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ew(n){return"nullValue"in n?lm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ll(la.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function uC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ll(la.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ul:rt()}function or(n,e){const t=da(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function lv(n,e){const t=da(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!uv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bf(t)}setAll(e){let t=Bn.emptyPath(),r={},s=[];e.forEach((c,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,s),r={},s=[],t=g.popLast()}c?r[g.lastSegment()]=Bf(c):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());uv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];uv(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ol(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new fi(Bf(this.value))}}function ww(n){const e=[];return ol(n.fields,(t,r)=>{const s=new Bn([t]);if(uv(r)){const u=ww(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new al(e)}class yn{constructor(e,t,r,s,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=c}static newInvalidDocument(e){return new yn(e,0,Tt.min(),Tt.min(),fi.empty(),0)}static newFoundDocument(e,t,r){return new yn(e,1,t,Tt.min(),r,0)}static newNoDocument(e,t){return new yn(e,2,t,Tt.min(),fi.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,Tt.min(),fi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function fm(n){return n.fields.find(e=>2===e.kind)}function cl(n){return n.fields.filter(e=>2!==e.kind)}hm.UNKNOWN_ID=-1;class su{constructor(e,t){this.fieldPath=e,this.kind=t}}class jf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new jf(0,Eo.min())}}function bw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Tt.fromTimestamp(1e9===r?new Kn(t+1,0):new Kn(t,r));return new Eo(s,Ge.empty(),e)}function Iw(n){return new Eo(n.readTime,n.key,-1)}class Eo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Eo(Tt.min(),Ge.empty(),-1)}static max(){return new Eo(Tt.max(),Ge.empty(),-1)}}function cv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Nt(n.largestBatchId,e.largestBatchId))}class ar{constructor(e,t){this.comparator=e,this.root=t||vr.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vr.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $f(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $f(this.root,e,this.comparator,!1)}getReverseIterator(){return new $f(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $f(this.root,e,this.comparator,!0)}}class $f{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=null!=r?r:vr.RED,this.left=null!=s?s:vr.EMPTY,this.right=null!=u?u:vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new vr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return vr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}vr.EMPTY=null,vr.RED=!0,vr.BLACK=!1,vr.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new vr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wt{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dw(this.data.getIterator())}getIteratorFrom(e){return new Dw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wt(this.comparator);return t.data=e,t}}class Dw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Xd(n){return n.hasNext()?n.getNext():void 0}class ha{constructor(e,t=null,r=[],s=[],u=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=g,this.P=null}}function $s(n,e=null,t=[],r=[],s=null,u=null,c=null){return new ha(n,e,t,r,s,u,c)}function qr(n){const e=Ke(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+Ec(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Uf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ec(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ec(r)).join(",")),e.P=t}return e.P}function eh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!dv(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!ca(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ym(n.startAt,e.startAt)&&ym(n.endAt,e.endAt)}function pm(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function gm(n,e){return n.filters.filter(t=>t instanceof Er&&t.field.isEqual(e))}function Tw(n,e,t){let r=lm,s=!0;for(const u of gm(n,e)){let c=lm,g=!0;switch(u.op){case"<":case"<=":c=Ew(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,g=!1;break;case"!=":case"not-in":c=lm}or({value:r,inclusive:s},{value:c,inclusive:g})<0&&(r=c,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];or({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function Aw(n,e,t){let r=ul,s=!0;for(const u of gm(n,e)){let c=ul,g=!0;switch(u.op){case">=":case">":c=uC(u.value),g=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,g=!1;break;case"!=":case"not-in":c=ul}lv({value:r,inclusive:s},{value:c,inclusive:g})>0&&(r=c,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];lv({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class Er extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Hf(e,t,r):"array-contains"===t?new xw(e,r):"in"===t?new Nw(e,r):"not-in"===t?new mm(e,r):"array-contains-any"===t?new cC(e,r):new Er(e,t,r)}static V(e,t,r){return"in"===t?new lC(e,r):new Sw(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(da(t,this.value)):null!==t&&_c(this.value)===_c(t)&&this.v(da(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Hf extends Er{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.v(t)}}class lC extends Er{constructor(e,t){super(e,"in",t),this.keys=Mw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sw extends Er{constructor(e,t){super(e,"not-in",t),this.keys=Mw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Mw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class xw extends Er{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jd(t)&&vc(t.arrayValue,this.value)}}class Nw extends Er{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vc(this.value.arrayValue,t)}}class mm extends Er{constructor(e,t){super(e,"not-in",t)}matches(e){if(vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vc(this.value.arrayValue,t)}}class cC extends Er{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vc(this.value.arrayValue,r))}}class ou{constructor(e,t){this.position=e,this.inclusive=t}}class wc{constructor(e,t="asc"){this.field=e,this.dir=t}}function dv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Gf(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(c.referenceValue),t.key):da(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function ym(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ca(n.position[t],e.position[t]))return!1;return!0}class fa{constructor(e,t=null,r=[],s=[],u=null,c="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=g,this.endAt=v,this.D=null,this.C=null}}function hv(n,e,t,r,s,u,c,g){return new fa(n,e,t,r,s,u,c,g)}function bc(n){return new fa(n)}function _m(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function vm(n){for(const e of n.filters)if(e.S())return e.field;return null}function Em(n){return null!==n.collectionGroup}function th(n){const e=Ke(n);if(null===e.D){e.D=[];const t=vm(e),r=_m(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new wc(t)),e.D.push(new wc(Bn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new wc(Bn.keyField(),u))}}}return e.D}function Hs(n){const e=Ke(n);if(!e.C)if("F"===e.limitType)e.C=$s(e.path,e.collectionGroup,th(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of th(e))t.push(new wc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ou(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ou(e.startAt.position,e.startAt.inclusive):null;e.C=$s(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.C}function Ow(n,e,t){return new fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zf(n,e){return eh(Hs(n),Hs(e))&&n.limitType===e.limitType}function Pw(n){return`${qr(Hs(n))}|lt:${n.limitType}`}function fv(n){return`Query(target=${function Cw(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Ec(r.value)}`;var r}).join(", ")}]`),Uf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Ec(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Ec(t)).join(",")),`Target(${e})`}(Hs(n))}; limitType=${n.limitType})`}function pv(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ge.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,c){const g=Gf(s,u,c);return s.inclusive?g<=0:g<0}(t.startAt,th(t),r)||t.endAt&&!function(s,u,c){const g=Gf(s,u,c);return s.inclusive?g>=0:g>0}(t.endAt,th(t),r)));var t,r}function kw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Fw(n){return(e,t)=>{let r=!1;for(const s of th(n)){const u=dC(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function dC(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(s,u,c){const g=u.data.field(s),v=c.data.field(s);return null!==g&&null!==v?da(g,v):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function Lw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qd(e)?"-0":e}}function Vw(n){return{integerValue:""+n}}function Uw(n,e){return iv(e)?Vw(e):Lw(n,e)}class wm{constructor(){this._=void 0}}function hC(n,e,t){return n instanceof nh?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof dl?gv(n,e):n instanceof hl?mv(n,e):function(r,s){const u=Bw(r,s),c=yv(u)+yv(r.k);return dm(u)&&dm(r.k)?Vw(c):Lw(r.M,c)}(n,e)}function fC(n,e,t){return n instanceof dl?gv(n,e):n instanceof hl?mv(n,e):t}function Bw(n,e){return n instanceof Ic?dm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class nh extends wm{}class dl extends wm{constructor(e){super(),this.elements=e}}function gv(n,e){const t=_v(e);for(const r of n.elements)t.some(s=>ca(s,r))||t.push(r);return{arrayValue:{values:t}}}class hl extends wm{constructor(e){super(),this.elements=e}}function mv(n,e){let t=_v(e);for(const r of n.elements)t=t.filter(s=>!ca(s,r));return{arrayValue:{values:t}}}class Ic extends wm{constructor(e,t){super(),this.M=e,this.k=t}}function yv(n){return Pn(n.integerValue||n.doubleValue)}function _v(n){return Jd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class rh{constructor(e,t){this.field=e,this.transform=t}}class $w{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pa(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class bm{}function pC(n,e,t){n instanceof ih?function(r,s,u){const c=r.value.clone(),g=_t(r.fieldTransforms,s,u.transformResults);c.setAll(g),s.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof pl?function(r,s,u){if(!pa(r.precondition,s))return void s.convertToUnknownDocument(u.version);const c=_t(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(mC(r)),g.setAll(c),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function fl(n,e,t){var s;n instanceof ih?function(r,s,u){if(!pa(r.precondition,s))return;const c=r.value.clone(),g=Hw(r.fieldTransforms,u,s);c.setAll(g),s.convertToFoundDocument(gC(s),c).setHasLocalMutations()}(n,e,t):n instanceof pl?function(r,s,u){if(!pa(r.precondition,s))return;const c=Hw(r.fieldTransforms,u,s),g=s.data;g.setAll(mC(r)),g.setAll(c),s.convertToFoundDocument(gC(s),g).setHasLocalMutations()}(n,e,t):pa(n.precondition,s=e)&&s.convertToNoDocument(Tt.min())}function pS(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=Bw(r.transform,s||null);null!=u&&(null==t&&(t=fi.empty()),t.set(r.field,u))}return t||null}function Im(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Lf(t,r,(s,u)=>function jw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof dl&&r instanceof dl||t instanceof hl&&r instanceof hl?Lf(t.elements,r.elements,ca):t instanceof Ic&&r instanceof Ic?ca(t.k,r.k):t instanceof nh&&r instanceof nh);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function gC(n){return n.isFoundDocument()?n.version:Tt.min()}class ih extends bm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}}class pl extends bm{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}}function mC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _t(n,e,t){const r=new Map;At(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,g=e.data.field(u.field);r.set(u.field,fC(c,g,t[s]))}return r}function Hw(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,hC(u,c,e))}return r}class qf extends bm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class vv extends bm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Dm{constructor(e){this.count=e}}var ur,$t;function Wf(n){switch(n){default:return rt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function kn(n){if(void 0===n)return mr("GRPC error has no .code"),ce.UNKNOWN;switch(n){case ur.OK:return ce.OK;case ur.CANCELLED:return ce.CANCELLED;case ur.UNKNOWN:return ce.UNKNOWN;case ur.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case ur.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case ur.INTERNAL:return ce.INTERNAL;case ur.UNAVAILABLE:return ce.UNAVAILABLE;case ur.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case ur.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case ur.NOT_FOUND:return ce.NOT_FOUND;case ur.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case ur.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case ur.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case ur.ABORTED:return ce.ABORTED;case ur.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case ur.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case ur.DATA_LOSS:return ce.DATA_LOSS;default:return rt()}}($t=ur||(ur={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";class Dc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ol(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return am(this.inner)}size(){return this.innerSize}}const Gw=new ar(Ge.comparator);function Gs(){return Gw}const yC=new ar(Ge.comparator);function Cm(...n){let e=yC;for(const t of n)e=e.insert(t.key,t);return e}function sh(){return new Dc(n=>n.toString(),(n,e)=>n.isEqual(e))}const zw=new ar(Ge.comparator),qw=new Wt(Ge.comparator);function on(...n){let e=qw;for(const t of n)e=e.add(t);return e}const _C=new Wt(Nt);function Tm(){return _C}class au{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Kf.createSynthesizedTargetChangeForCurrentChange(e,t)),new au(Tt.min(),r,Tm(),Gs(),on())}}class Kf{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Kf(_r.EMPTY_BYTE_STRING,t,on(),on(),on())}}class Am{constructor(e,t,r,s){this.O=e,this.removedTargetIds=t,this.key=r,this.F=s}}class Ww{constructor(e,t){this.targetId=e,this.$=t}}class Zf{constructor(e,t,r=_r.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Ev{constructor(){this.B=0,this.L=Zw(),this.U=_r.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=on(),t=on(),r=on();return this.L.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:rt()}}),new Kf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Zw()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Kw{constructor(e){this.nt=e,this.st=new Map,this.it=Gs(),this.rt=wv(),this.ot=new Wt(Nt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,s)=>{this.ft(s)&&t(s)})}_t(e){const t=e.targetId,r=e.$.count,s=this.wt(t);if(s){const u=s.target;if(pm(u))if(0===r){const c=new Ge(u.path);this.ct(t,c,yn.newNoDocument(c,Tt.min()))}else At(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const g=this.wt(c);if(g){if(u.current&&pm(g.target)){const v=new Ge(g.target.path);null!==this.it.get(v)||this.It(c,v)||this.ct(c,v,yn.newNoDocument(v,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=on();this.rt.forEach((u,c)=>{let g=!0;c.forEachWhile(v=>{const b=this.wt(v);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const s=new au(e,t,this.ot,this.it,r);return this.it=Gs(),this.rt=wv(),this.ot=new Wt(Nt),s}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const s=this.lt(e);this.It(e,t)?s.Y(t,1):s.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Ev,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Wt(Nt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Ev),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function wv(){return new ar(Ge.comparator)}function Zw(){return new ar(Ge.comparator)}const Yf={asc:"ASCENDING",desc:"DESCENDING"},Qf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class vC{constructor(e,t){this.databaseId=e,this.N=t}}function Jf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Yw(n,e){return n.N?e.toBase64():e.toUint8Array()}function Qw(n,e){return Jf(n,e.toTimestamp())}function wr(n){return At(!!n),Tt.fromTimestamp(function(e){const t=ua(e);return new Kn(t.seconds,t.nanos)}(n))}function Sm(n,e){return(t=n,new Kt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Jw(n){const e=Kt.fromString(n);return At(Dv(e)),e}function oh(n,e){return Sm(n.databaseId,e.path)}function ga(n,e){const t=Jw(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(wC(t))}function bv(n,e){return Sm(n.databaseId,e)}function EC(n){const e=Jw(n);return 4===e.length?Kt.emptyPath():wC(e)}function Mm(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function wC(n){return At(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function bC(n,e,t){return{name:oh(n,e),fields:t.value.mapValue.fields}}function Iv(n,e,t){const r=ga(n,e.name),s=wr(e.updateTime),u=new fi({mapValue:{fields:e.fields}}),c=yn.newFoundDocument(r,s,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Xf(n,e){let t;if(e instanceof ih)t={update:bC(n,e.key,e.value)};else if(e instanceof qf)t={delete:oh(n,e.key)};else if(e instanceof pl)t={update:bC(n,e.key,e.data),updateMask:AC(e.fieldMask)};else{if(!(e instanceof vv))return rt();t={verify:oh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const c=u.transform;if(c instanceof nh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof dl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof hl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ic)return{fieldPath:u.field.canonicalString(),increment:c.k};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Qw(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:rt()),t;var s}function Nm(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Zn.updateTime(wr(s.updateTime)):void 0!==s.exists?Zn.exists(s.exists):Zn.none():Zn.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,c){let g=null;"setToServerValue"in c?(At("REQUEST_TIME"===c.setToServerValue),g=new nh):"appendMissingElements"in c?g=new dl(c.appendMissingElements.values||[]):"removeAllFromArray"in c?g=new hl(c.removeAllFromArray.values||[]):"increment"in c?g=new Ic(u,c.increment):rt();const v=Bn.fromServerFormat(c.fieldPath);return new rh(v,g)}(n,s)):[];var s;if(e.update){const s=ga(n,e.update.name),u=new fi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new al((e.updateMask.fieldPaths||[]).map(b=>Bn.fromServerFormat(b)));return new pl(s,u,c,t,r)}return new ih(s,u,t,r)}if(e.delete){const s=ga(n,e.delete);return new qf(s,t)}if(e.verify){const s=ga(n,e.verify);return new vv(s,t)}return rt()}function Xw(n,e){return{documents:[bv(n,e.path)]}}function eb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=bv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(v){if(0===v.length)return;const b=v.map(S=>function(x){if("=="===x.op){if(av(x.value))return{unaryFilter:{field:ah(x.field),op:"IS_NAN"}};if(ov(x.value))return{unaryFilter:{field:ah(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(av(x.value))return{unaryFilter:{field:ah(x.field),op:"IS_NOT_NAN"}};if(ov(x.value))return{unaryFilter:{field:ah(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ah(x.field),op:CC(x.op),value:x.value}}}(S));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(v){if(0!==v.length)return v.map(b=>{return{field:ah((S=b).field),direction:rb(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||Uf(b)?b:{value:b});var b,g,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function tb(n){let e=EC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){At(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=nb(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new wc(wo((x=S).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let g=null;t.limit&&(g=function(S){let x;return x="object"==typeof S?S.value:S,Uf(x)?null:x}(t.limit));let v=null;var S;t.startAt&&(v=new ou((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new ou(S.values||[],!S.before)}(t.endAt)),hv(e,s,c,u,g,"F",v,b)}function nb(n){return n?void 0!==n.unaryFilter?[ib(n)]:void 0!==n.fieldFilter?[TC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>nb(e)).reduce((e,t)=>e.concat(t)):rt():[]}function rb(n){return Yf[n]}function CC(n){return Qf[n]}function ah(n){return{fieldPath:n.canonicalString()}}function wo(n){return Bn.fromServerFormat(n.fieldPath)}function TC(n){return Er.create(wo(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function ib(n){switch(n.unaryFilter.op){case"IS_NAN":const e=wo(n.unaryFilter.field);return Er.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=wo(n.unaryFilter.field);return Er.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=wo(n.unaryFilter.field);return Er.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=wo(n.unaryFilter.field);return Er.create(s,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}function AC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Dv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ti(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ob(e)),e=sb(n.get(t),e);return ob(e)}function sb(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function ob(n){return n+"\x01\x01"}function zs(n){const e=n.length;if(At(e>=2),2===e)return At("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&rt(),n.charAt(c+1)){case"\x01":const g=n.substring(u,c);let v;0===s.length?v=g:(s+=g,v=s,s=""),r.push(v);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:rt()}u=c+2}return new Kt(r)}const ab=["userId","batchId"];function tp(n,e){return[n,Ti(e)]}function Cv(n,e,t){return[n,Ti(e),t]}const SC={},MC=["prefixPath","collectionGroup","readTime","documentId"],xC=["prefixPath","collectionGroup","documentId"],Tv=["collectionGroup","readTime","prefixPath","documentId"],NC=["canonicalId","targetId"],ub=["targetId","path"],RC=["path","targetId"],OC=["collectionId","parent"],PC=["indexId","uid"],kC=["uid","sequenceNumber"],FC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],LC=["indexId","uid","orderedDocumentKey"],VC=["userId","collectionPath","documentId"],UC=["userId","collectionPath","largestBatchId"],lb=["userId","collectionGroup","largestBatchId"],Av=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],BC=[...Av,"documentOverlays"],cb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],db=[...cb,"indexConfiguration","indexState","indexEntries"],hb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let s=0,u=0,c=!1;e.forEach(g=>{++s,g.next(()=>{++u,c&&u===s&&t()},v=>r(v))}),c=!0,u===s&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(s=>s?he.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}}class uh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new yr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Cc(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const s=Rm(r.target.error);this.At.reject(new Cc(e,s))}}static open(e,t,r,s){try{return new uh(t,e.transaction(s,r))}catch(u){throw new Cc(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new jC(t)}}class ps{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===ps.Vt((0,Bt.z$)())&&mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),uu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Bt.hl)())return!1;if(ps.St())return!0;const e=(0,Bt.z$)(),t=ps.Vt(e),r=0<t&&t<10,s=ps.Dt(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,be.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new Cc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const g=c.target.error;s("VersionError"===g.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Cc(e,g))},u.onupgradeneeded=c=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,be.Z)(function*(){const c="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.Nt(e);const v=uh.open(u.db,e,c?"readonly":"readwrite",r),b=s(v).next(S=>(v.bt(),S)).catch(S=>(v.abort(S),he.reject(S))).toPromise();return b.catch(()=>{}),yield v.Rt,b}catch(v){const b="FirebaseError"!==v.name&&g<3;if(Fe("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),u.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pb{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return uu(this.Ft.delete())}}class Cc extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Tc(n){return"IndexedDbTransactionError"===n.name}class jC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uu(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),uu(this.store.add(e))}get(e){return uu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),uu(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),uu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.Kt(s,(c,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new he((u,c)=>{s.onerror=g=>{c(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}Qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const s=this.cursor(r);return this.Kt(s,(u,c,g)=>g.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.Kt(s,t)}zt(e){const t=this.cursor({});return new he((r,s)=>{t.onerror=u=>{const c=Rm(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(g=>{g?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new he((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const g=c.target.result;if(!g)return void s();const v=new pb(g),b=t(g.primaryKey,g.value,v);if(b instanceof he){const S=b.catch(x=>(v.done(),he.reject(x)));r.push(S)}v.isDone?s():null===v.Lt?g.continue():g.continue(v.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uu(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Rm(r.target.error);t(s)}})}let gb=!1;function Rm(n){const e=ps.Vt((0,Bt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gb||(gb=!0,setTimeout(()=>{throw r},0)),r}}return n}class mb extends fb{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function br(n,e){const t=Ke(n);return ps.xt(t.Ht,e)}class Sv{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&pC(u,e,r[s])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&fl(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&fl(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),s=r;this.applyToLocalView(s),r.isValidDocument()||s.convertToNoDocument(Tt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),on())}isEqual(e){return this.batchId===e.batchId&&Lf(this.mutations,e.mutations,(t,r)=>Im(t,r))&&Lf(this.baseMutations,e.baseMutations,(t,r)=>Im(t,r))}}class Om{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){At(e.mutations.length===r.length);let s=zw;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new Om(e,t,r,s)}}class yb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gl{constructor(e,t,r,s,u=Tt.min(),c=Tt.min(),g=_r.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g}withSequenceNumber(e){return new gl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class np{constructor(e){this.Jt=e}}function Ac(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ml(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:oh(s=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Jf(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Sc(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:Sc(e.version)}}var s,u;return r}function ml(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Sc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function lh(n){const e=new Kn(n.seconds,n.nanoseconds);return Tt.fromTimestamp(e)}function Mc(n,e){const t=(e.baseMutations||[]).map(u=>Nm(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Nm(n.Jt,u)),s=Kn.fromMillis(e.localWriteTimeMs);return new Sv(e.batchId,s,t,r)}function rp(n){const e=lh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?lh(n.lastLimboFreeSnapshotVersion):Tt.min();let r;var s;return void 0!==n.query.documents?(At(1===(s=n.query).documents.length),r=Hs(bc(EC(s.documents[0])))):r=Hs(tb(n.query)),new gl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_r.fromBase64String(n.resumeToken))}function _b(n,e){const t=Sc(e.snapshotVersion),r=Sc(e.lastLimboFreeSnapshotVersion);let s;s=pm(e.target)?Xw(n.Jt,e.target):eb(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qr(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Mv(n){const e=tb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ow(e,e.limit,"L"):e}function xv(n,e){return new yb(e.largestBatchId,Nm(n.Jt,e.overlayMutation))}function Nv(n,e){const t=e.path.lastSegment();return[n,Ti(e.path.popLast()),t]}class vb{getBundleMetadata(e,t){return Pm(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:lh(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Pm(e).put({bundleId:(r=t).id,createTime:Sc(wr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ip(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:Mv(s.bundledQuery),readTime:lh(s.readTime)};var s})}saveNamedQuery(e,t){return ip(e).put({name:(r=t).name,readTime:Sc(wr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Pm(n){return br(n,"bundles")}function ip(n){return br(n,"namedQueries")}class xc{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new xc(e,t.uid||"")}getOverlay(e,t){return sp(e).get(Nv(this.userId,t)).next(r=>r?xv(this.M,r):null)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const g=new yb(t,c);s.push(this.Xt(e,g))}),he.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(Ti(c.getCollectionPath())));const u=[];return s.forEach(c=>{const g=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(sp(e).Qt("collectionPathOverlayIndex",g))}),he.waitFor(u)}getOverlaysForCollection(e,t,r){const s=sh(),u=Ti(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return sp(e).qt("collectionPathOverlayIndex",c).next(g=>{for(const v of g){const b=xv(this.M,v);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=sh();let c;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return sp(e).Wt({index:"collectionGroupOverlayIndex",range:g},(v,b,S)=>{const x=xv(this.M,b);u.size()<s||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return sp(e).put(function(r,s,u){const[c,g,v]=Nv(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Xf(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function sp(n){return br(n,"documentOverlays")}class yl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Pn(e.integerValue));else if("doubleValue"in e){const r=Pn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Qd(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(yc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?vw(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):rt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const s of Object.keys(r))this.re(s,t),this.te(r[s],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const s of r)this.te(s,t)}ae(e,t){this.ne(t,37),Ge.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Eb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function wb(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=Eb(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}yl.fe=new yl;class HC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const s=t.codePointAt(0);this._e(240|s>>>18),this._e(128|63&s>>>12),this._e(128|63&s>>>6),this._e(128|63&s)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const s=t.codePointAt(0);this.ge(240|s>>>18),this.ge(128|63&s>>>12),this.ge(128|63&s>>>6),this.ge(128|63&s)}}this.ye()}Te(e){const t=this.Ee(e),r=wb(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Re(e){const t=this.Ee(e),r=wb(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class Rv{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class GC{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class km{constructor(){this.De=new HC,this.Ce=new Rv(this.De),this.xe=new GC(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Nc{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Nc(this.indexId,this.documentKey,this.arrayValue,r)}}function Rc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Oc(n.arrayValue,e.arrayValue),0!==t?t:(t=Oc(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function Oc(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class bb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=fm(e);if(void 0!==t&&!this.Be(t))return!1;const r=cl(e);let s=0,u=0;for(;s<r.length&&this.Be(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Fe){const c=r[s];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++s}for(;s<r.length;++s){const c=r[s];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ch{constructor(){this.qe=new Ib}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(Eo.min())}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class Ib{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Wt(Kt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Wt(Kt.comparator)).toArray()}}const op=new Uint8Array(0);class zC{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Ib,this.Ge=new Dc(r=>qr(r),(r,s)=>eh(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Ti(s)};return qC(e).put(u)}return he.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[om(t),""],!1,!0);return qC(e).qt(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(zs(c.parent))}return r})}addFieldIndex(e,t){const r=Ov(e),s={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete s.indexId,r.add(s).next()}deleteFieldIndex(e,t){const r=Ov(e),s=ap(e),u=dh(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=dh(e);let s=!0;const u=new Map;return he.forEach(this.Qe(t),c=>this.je(e,c).next(g=>{s&&(s=!!g),u.set(c,g)})).next(()=>{if(s){let c=on();const g=[];return he.forEach(u,(v,b)=>{var S;Fe("IndexedDbIndexManager",`Using index ${S=v,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(bt=>`${bt.fieldPath}:${bt.kind}`).join(",")}`} to execute ${qr(t)}`);const x=function(bt,at){const Ot=fm(at);if(void 0===Ot)return null;for(const Ft of gm(bt,Ot.fieldPath))switch(Ft.op){case"array-contains-any":return Ft.value.arrayValue.values||[];case"array-contains":return[Ft.value]}return null}(b,v),L=function(bt,at){const Ot=new Map;for(const Ft of cl(at))for(const an of gm(bt,Ft.fieldPath))switch(an.op){case"==":case"in":Ot.set(Ft.fieldPath.canonicalString(),an.value);break;case"not-in":case"!=":return Ot.set(Ft.fieldPath.canonicalString(),an.value),Array.from(Ot.values())}return null}(b,v),q=function(bt,at){const Ot=[];let Ft=!0;for(const an of cl(at)){const ws=0===an.kind?Tw(bt,an.fieldPath,bt.startAt):Aw(bt,an.fieldPath,bt.startAt);Ot.push(ws.value),Ft&&(Ft=ws.inclusive)}return new ou(Ot,Ft)}(b,v),Z=function(bt,at){const Ot=[];let Ft=!0;for(const an of cl(at)){const ws=0===an.kind?Aw(bt,an.fieldPath,bt.endAt):Tw(bt,an.fieldPath,bt.endAt);Ot.push(ws.value),Ft&&(Ft=ws.inclusive)}return new ou(Ot,Ft)}(b,v),_e=this.We(v,b,q),ke=this.We(v,b,Z),pt=this.ze(v,b,L),gt=this.He(v.indexId,x,_e,q.inclusive,ke,Z.inclusive,pt);return he.forEach(gt,bt=>r.Gt(bt,t.limit).next(at=>{at.forEach(Ot=>{const Ft=Ge.fromSegments(Ot.documentKey);c.has(Ft)||(c=c.add(Ft),g.push(Ft))})}))}).next(()=>g)}return he.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,s,u,c,g){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),b=v/(null!=t?t.length:1),S=[];for(let x=0;x<v;++x){const L=t?this.Je(t[x/b]):op,q=this.Ye(e,L,r[x%b],s),Z=this.Xe(e,L,u[x%b],c),_e=g.map(ke=>this.Ye(e,L,ke,!0));S.push(...this.createRange(q,Z,_e))}return S}Ye(e,t,r,s){const u=new Nc(e,Ge.empty(),t,r);return s?u:u.ke()}Xe(e,t,r,s){const u=new Nc(e,Ge.empty(),t,r);return s?u.ke():u}je(e,t){const r=new bb(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let c=null;for(const g of u)r.$e(g)&&(!c||g.fields.length>c.fields.length)&&(c=g);return c})}getIndexType(e,t){let r=2;return he.forEach(this.Qe(t),s=>this.je(e,s).next(u=>{u?0!==r&&u.fields.length<function(c){let g=new Wt(Bn.comparator),v=!1;for(const b of c.filters){const S=b;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:g=g.add(S.field))}for(const b of c.orderBy)b.field.isKeyField()||(g=g.add(b.field));return g.size+(v?1:0)}(s)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new km;for(const s of cl(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.Ne(s.kind);yl.fe.Zt(u,c)}return r.Se()}Je(e){const t=new km;return yl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new km;return yl.fe.Zt(ll(this.databaseId,t),r.Ne(function(s){const u=cl(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let s=[];s.push(new km);let u=0;for(const c of cl(e)){const g=r[u++];for(const v of s)if(this.en(t,c.fieldPath)&&Jd(g))s=this.nn(s,c,g);else{const b=v.Ne(c.kind);yl.fe.Zt(g,b)}}return this.sn(s)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const g of s){const v=new km;v.seed(g.Se()),yl.fe.Zt(c,v.Ne(t.kind)),u.push(v)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Er&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ov(e),s=ap(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return he.forEach(u,g=>s.get([g.indexId,this.uid]).next(v=>{c.push(function(b,S){const x=S?new jf(S.sequenceNumber,new Eo(lh(S.readTime),new Ge(zs(S.documentKey)),S.largestBatchId)):jf.empty(),L=b.fields.map(([q,Z])=>new su(Bn.fromServerFormat(q),Z));return new hm(b.indexId,b.collectionGroup,L,x)}(g,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Nt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=Ov(e),u=ap(e);return this.rn(e).next(c=>s.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>he.forEach(g,v=>{return u.put({indexId:v.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Sc((L=r).readTime),documentKey:Ti(L.documentKey.path),largestBatchId:L.largestBatchId});var L})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?he.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),he.forEach(g,v=>this.on(e,s,v).next(b=>{const S=this.un(u,v);return b.isEqual(S)?he.resolve():this.an(e,u,v,b,S)}))))})}cn(e,t,r,s){return dh(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,s){return dh(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const s=dh(e);let u=new Wt(Rc);return s.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,g)=>{u=u.add(new Nc(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}un(e,t){let r=new Wt(Rc);const s=this.Ze(t,e);if(null==s)return r;const u=fm(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Jd(c))for(const g of c.arrayValue.values||[])r=r.add(new Nc(t.indexId,e.key,this.Je(g),s))}else r=r.add(new Nc(t.indexId,e.key,op,s));return r}an(e,t,r,s,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(g,v,b,S,x){const L=g.getIterator(),q=v.getIterator();let Z=Xd(L),_e=Xd(q);for(;Z||_e;){let ke=!1,pt=!1;if(Z&&_e){const gt=b(Z,_e);gt<0?pt=!0:gt>0&&(ke=!0)}else null!=Z?pt=!0:ke=!0;ke?(S(_e),_e=Xd(q)):pt?(x(Z),Z=Xd(L)):(Z=Xd(L),_e=Xd(q))}}(s,u,Rc,g=>{c.push(this.cn(e,t,r,g))},g=>{c.push(this.hn(e,t,r,g))}),he.waitFor(c)}rn(e){let t=1;return ap(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,g)=>Rc(c,g)).filter((c,g,v)=>!g||0!==Rc(c,v[g-1]));const s=[];s.push(e);for(const c of r){const g=Rc(c,e),v=Rc(c,t);if(0===g)s[0]=e.ke();else if(g>0&&v<0)s.push(c),s.push(c.ke());else if(v>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2)u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,op,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,op,[]]));return u}getMinOffset(e,t){let r;return he.forEach(this.Qe(t),s=>this.je(e,s).next(u=>{u?(!r||cv(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Eo.min()})).next(()=>r)}}function qC(n){return br(n,"collectionParents")}function dh(n){return br(n,"indexEntries")}function Ov(n){return br(n,"indexConfiguration")}function ap(n){return br(n,"indexState")}const Fm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Zi(e,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Db(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let g=0;const v=r.Wt({range:c},(S,x,L)=>(g++,L.delete()));u.push(v.next(()=>{At(1===g)}));const b=[];for(const S of t.mutations){const x=Cv(e,S.key.path,t.batchId);u.push(s.delete(x)),b.push(S.key)}return he.waitFor(u).next(()=>b)}function Lm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Zi.DEFAULT_COLLECTION_PERCENTILE=10,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zi.DEFAULT=new Zi(41943040,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zi.DISABLED=new Zi(-1,0,0);class Pv{constructor(e,t,r,s){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=s,this.ln={}}static Yt(e,t,r,s){At(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Pv(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _l(e).Wt({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=hh(e),c=_l(e);return c.add({}).next(g=>{At("number"==typeof g);const v=new Sv(g,t,r,s),b=function(L,q,Z){const _e=Z.baseMutations.map(pt=>Xf(L.Jt,pt)),ke=Z.mutations.map(pt=>Xf(L.Jt,pt));return{userId:q,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:_e,mutations:ke}}(this.M,this.userId,v),S=[];let x=new Wt((L,q)=>Nt(L.canonicalString(),q.canonicalString()));for(const L of s){const q=Cv(this.userId,L.key.path,g);x=x.add(L.key.path.popLast()),S.push(c.put(b)),S.push(u.put(q,SC))}return x.forEach(L=>{S.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.ln[g]=v.keys()}),he.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return _l(e).get(t).next(r=>r?(At(r.userId===this.userId),Mc(this.M,r)):null)}fn(e,t){return this.ln[t]?he.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.ln[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return _l(e).Wt({index:"userMutationsIndex",range:s},(c,g,v)=>{g.userId===this.userId&&(At(g.batchId>=r),u=Mc(this.M,g)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return _l(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _l(e).qt("userMutationsIndex",t).next(r=>r.map(s=>Mc(this.M,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=tp(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return hh(e).Wt({range:s},(c,g,v)=>{const[b,S,x]=c,L=zs(S);if(b===this.userId&&t.path.isEqual(L))return _l(e).get(x).next(q=>{if(!q)throw rt();At(q.userId===this.userId),u.push(Mc(this.M,q))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wt(Nt);const s=[];return t.forEach(u=>{const c=tp(this.userId,u.path),g=IDBKeyRange.lowerBound(c),v=hh(e).Wt({range:g},(b,S,x)=>{const[L,q,Z]=b,_e=zs(q);L===this.userId&&u.path.isEqual(_e)?r=r.add(Z):x.done()});s.push(v)}),he.waitFor(s).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=tp(this.userId,r),c=IDBKeyRange.lowerBound(u);let g=new Wt(Nt);return hh(e).Wt({range:c},(v,b,S)=>{const[x,L,q]=v,Z=zs(L);x===this.userId&&r.isPrefixOf(Z)?Z.length===s&&(g=g.add(q)):S.done()}).next(()=>this.dn(e,g))}dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(_l(e).get(u).next(c=>{if(null===c)throw rt();At(c.userId===this.userId),r.push(Mc(this.M,c))}))}),he.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return Db(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),he.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return hh(e).Wt({range:r},(u,c,g)=>{if(u[0]===this.userId){const v=zs(u[1]);s.push(v)}else g.done()}).next(()=>{At(0===s.length)})})}containsKey(e,t){return Cb(e,this.userId,t)}wn(e){return Tb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Cb(n,e,t){const r=tp(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return hh(n).Wt({range:u,jt:!0},(g,v,b)=>{const[S,x,L]=g;S===e&&x===s&&(c=!0),b.done()}).next(()=>c)}function _l(n){return br(n,"mutations")}function hh(n){return br(n,"documentMutations")}function Tb(n){return br(n,"mutationQueues")}class Pc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Pc(0)}static yn(){return new Pc(-1)}}class WC{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Pc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Tt.fromTimestamp(new Kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.In(e,s)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ma(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(At(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return ma(e).Wt((c,g)=>{const v=rp(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(s++,u.push(this.removeTargetData(e,v)))}).next(()=>he.waitFor(u)).next(()=>s)}forEachTarget(e,t){return ma(e).Wt((r,s)=>{const u=rp(s);t(u)})}pn(e){return kv(e).get("targetGlobalKey").next(t=>(At(null!==t),t))}In(e,t){return kv(e).put("targetGlobalKey",t)}Tn(e,t){return ma(e).put(_b(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=qr(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ma(e).Wt({range:s,index:"queryTargetsIndex"},(c,g,v)=>{const b=rp(g);eh(t,b.target)&&(u=b,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=lu(e);return t.forEach(c=>{const g=Ti(c.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,c))}),he.waitFor(s)}removeMatchingKeys(e,t,r){const s=lu(e);return he.forEach(t,u=>{const c=Ti(u.path);return he.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=lu(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=lu(e);let u=on();return s.Wt({range:r,jt:!0},(c,g,v)=>{const b=zs(c[1]),S=new Ge(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ti(t.path),s=IDBKeyRange.bound([r],[om(r)],!1,!0);let u=0;return lu(e).Wt({index:"documentTargetsIndex",jt:!0,range:s},([c,g],v,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return ma(e).get(t).next(r=>r?rp(r):null)}}function ma(n){return br(n,"targets")}function kv(n){return br(n,"targetGlobal")}function lu(n){return br(n,"targetDocuments")}function vl(n){return Vm.apply(this,arguments)}function Vm(){return Vm=(0,be.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==hb)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),Vm.apply(this,arguments)}function Fv([n,e],[t,r]){const s=Nt(n,t);return 0===s?Nt(e,r):s}class Ab{constructor(e){this.An=e,this.buffer=new Wt(Fv),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Fv(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,be.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(s){Tc(s)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield vl(s)}yield t.Sn(e)}))}}class Sb{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(fs.A);const r=new Ab(t);return this.Dn.forEachTarget(e,s=>r.Pn(s.sequenceNumber)).next(()=>this.Dn.xn(e,s=>r.Pn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(Fm)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fm):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,s,u,c,g,v,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,c=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(r=x,g=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(b=Date.now(),X_()<=Yu.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${s} in `+(g-c)+`ms\n\tRemoved ${u} targets in `+(v-g)+`ms\n\tRemoved ${x} documents in `+(b-v)+`ms\nTotal Duration: ${b-S}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:x})))}}class ZC{constructor(e,t){this.db=e,this.garbageCollector=new Sb(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,s)=>t(s))}addReference(e,t,r){return Um(e,r)}removeReference(e,t,r){return Um(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Um(e,t)}On(e,t){return function(r,s){let u=!1;return Tb(r).zt(c=>Cb(r,c,s).next(g=>(g&&(u=!0),he.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Mn(e,(c,g)=>{if(g<=t){const v=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Tt.min()),lu(e).delete([0,Ti(c.path)])))});s.push(v)}}).next(()=>he.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Um(e,t)}Mn(e,t){const r=lu(e);let s,u=fs.A;return r.Wt({index:"documentTargetsIndex"},([c,g],{path:v,sequenceNumber:b})=>{0===c?(u!==fs.A&&t(new Ge(zs(s)),u),u=b,s=v):u=fs.A}).next(()=>{u!==fs.A&&t(new Ge(zs(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Um(n,e){return lu(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ti(e.path),sequenceNumber:r}));var r}class Mb{constructor(){this.changes=new Dc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YC{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return cu(e).put(r)}removeEntry(e,t,r){return cu(e).delete(function(s,u){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ml(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=yn.newInvalidDocument(t);return cu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Yi(t))},(s,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:yn.newInvalidDocument(t)};return cu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Yi(t))},(s,u)=>{r={document:this.$n(t,u),size:Lm(u)}}).next(()=>r)}getEntries(e,t){let r=Gs();return this.Ln(e,t,(s,u)=>{const c=this.$n(s,u);r=r.insert(s,c)}).next(()=>r)}Un(e,t){let r=Gs(),s=new ar(Ge.comparator);return this.Ln(e,t,(u,c)=>{const g=this.$n(u,c);r=r.insert(u,g),s=s.insert(u,Lm(c))}).next(()=>({documents:r,qn:s}))}Ln(e,t,r){if(t.isEmpty())return he.resolve();let s=new Wt(Bm);t.forEach(v=>s=s.add(v));const u=IDBKeyRange.bound(Yi(s.first()),Yi(s.last())),c=s.getIterator();let g=c.getNext();return cu(e).Wt({index:"documentKeyIndex",range:u},(v,b,S)=>{const x=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&Bm(g,x)<0;)r(g,null),g=c.getNext();g&&g.isEqual(x)&&(r(g,b),g=c.hasNext()?c.getNext():null),g?S.Ut(Yi(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),ml(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cu(e).qt(IDBKeyRange.bound(s,u,!0)).next(c=>{let g=Gs();for(const v of c){const b=this.$n(Ge.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);g=g.insert(b.key,b)}return g})}getAllFromCollectionGroup(e,t,r,s){let u=Gs();const c=Nb(t,r),g=Nb(t,Eo.max());return cu(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,g,!0)},(v,b,S)=>{const x=this.$n(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(x.key,x),u.size===s&&S.done()}).next(()=>u)}newChangeBuffer(e){return new up(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return xb(e).get("remoteDocumentGlobalKey").next(t=>(At(!!t),t))}Fn(e,t){return xb(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function $C(n,e){let t;if(e.document)t=Iv(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),s=lh(e.noDocument.readTime);t=yn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=Ge.fromSegments(e.unknownDocument.path),s=lh(e.unknownDocument.version);t=yn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Kn(r[0],r[1]);return Tt.fromTimestamp(s)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Tt.min()))return r}return yn.newInvalidDocument(e)}}class up extends Mb{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Dc(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Wt((u,c)=>Nt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const g=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,g.readTime)),c.isValidDocument()){const v=Ac(this.Kn.M,c);s=s.add(u.path.popLast()),r+=Lm(v)-g.size,t.push(this.Kn.addEntry(e,u,v))}else if(r-=g.size,this.trackRemovals){const v=Ac(this.Kn.M,c.convertToNoDocument(Tt.min()));t.push(this.Kn.addEntry(e,u,v))}}),s.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:s})=>(s.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function xb(n){return br(n,"remoteDocumentGlobal")}function cu(n){return br(n,"remoteDocumentsV14")}function Yi(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Nb(n,e){const t=e.documentKey.path.toArray();return[n,ml(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Bm(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Nt(t[u],r[u]),s)return s;return s=Nt(t.length,r.length),s||(s=Nt(t[t.length-2],r[r.length-2]),s||Nt(t[t.length-1],r[r.length-1]))}class lp{constructor(e){this.M=e}kt(e,t,r,s){const u=new uh("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ab,{unique:!0}),g.createObjectStore("documentMutations"),Rb(e),function(g){g.createObjectStore("remoteDocuments")}(e));let c=he.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),Rb(e)),c=c.next(()=>function(g){const v=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Tt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(g,v){return v.store("mutations").qt().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ab,{unique:!0});const S=v.store("mutations"),x=b.map(L=>S.put(L));return he.waitFor(x)})}(e,u))),c=c.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.Qn(u))),r<6&&s>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&s>=7&&(c=c.next(()=>this.Wn(u))),r<8&&s>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.Hn(u))),r<11&&s>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:VC});v.createIndex("collectionPathOverlayIndex",UC,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",lb,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:MC});v.createIndex("documentKeyIndex",xC),v.createIndex("collectionGroupIndex",Tv)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>{!function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:PC}).createIndex("sequenceNumberIndex",kC,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:FC}).createIndex("documentKeyIndex",LC,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,s)=>{t+=Lm(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(s=>he.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(g=>he.forEach(g,v=>{At(v.userId===u.userId);const b=Mc(this.M,v);return Db(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Wt((c,g)=>{const v=new Kt(c),b=[0,Ti(v)];u.push(t.get(b).next(S=>S?he.resolve():t.put({targetId:0,path:Ti(v),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>he.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:OC});const r=t.store("collectionParents"),s=new Ib,u=c=>{if(s.add(c)){const g=c.lastSegment(),v=c.popLast();return r.put({collectionId:g,parent:Ti(v)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,g)=>{const v=new Kt(c);return u(v.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,g,v],b)=>{const S=zs(g);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,s)=>{const u=rp(s),c=_b(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),s=[];return r.Wt((u,c)=>{const g=t.store("remoteDocumentsV14"),v=(b=c,b.document?new Ge(Kt.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):rt()).path.toArray();var b;const S={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(g.put(S))}).next(()=>he.waitFor(s))}}function Rb(n){n.createObjectStore("targetDocuments",{keyPath:ub}).createIndex("documentTargetsIndex",RC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",NC,{unique:!0}),n.createObjectStore("targetGlobal")}const Lv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Vv{constructor(e,t,r,s,u,c,g,v,b,S,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=g,this.Xn=b,this.Zn=S,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=L=>Promise.resolve(),!Vv.vt())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZC(this,s),this.hs=t+"main",this.M=new np(v),this.ls=new ps(this.hs,this.ts,new lp(this.M)),this.fs=new WC(this.referenceDelegate,this.M),this.ds=new YC(this.M),this._s=new vb,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,Lv);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new fs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,be.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>kc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Tc(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return El(e).get("owner").next(t=>he.resolve(this.Ps(t)))}Vs(e){return kc(e).delete(this.clientId)}vs(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=br(r,"clientMetadata");return s.qt().next(u=>{const c=e.Ds(u,18e5),g=u.filter(v=>-1===c.indexOf(v));return he.forEach(g,v=>s.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?he.resolve(!0):El(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,Lv);return!1}}return!(!this.networkEnabled||!this.inForeground)||kc(e).qt().next(r=>void 0===this.Ds(r,5e3).find(s=>{if(this.clientId!==s.clientId){const c=!this.inForeground&&s.inForeground,g=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||c&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new mb(t,fs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>kc(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Pv.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new zC(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return xc.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?db:13===c?cb:12===c?BC:11===c?Av:void rt();var c;let g;return this.ls.runTransaction(e,s,u,v=>(g=new mb(v,this.es?this.es.next():fs.A),"readwrite-primary"===t?this.Es(g).next(b=>!!b||this.As(g)).next(b=>{if(!b)throw mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Re(ce.FAILED_PRECONDITION,hb);return r(g)}).next(b=>this.bs(g).next(()=>b)):this.$s(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}$s(e){return El(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,Lv)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return El(e).put("owner",t)}static vt(){return ps.vt()}Rs(e){const t=El(e);return t.get("owner").next(r=>this.Ps(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Bt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){mr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function El(n){return br(n,"owner")}function kc(n){return br(n,"clientMetadata")}function Uv(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class QC{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(s=>{for(const u of r)u.applyToLocalView(s);return s})}qs(e,t){e.forEach((r,s)=>{for(const u of t)u.applyToLocalView(s)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ge.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.js(e,t.path):Em(t)?this.Ws(e,t,r):this.zs(e,t,r);var s}js(e,t){return this.Ls(e,new Ge(t)).next(r=>{let s=Cm();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}Ws(e,t,r){const s=t.collectionGroup;let u=Cm();return this.indexManager.getCollectionParents(e,s).next(c=>he.forEach(c,g=>{const v=(b=t,S=g.child(s),new fa(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.zs(e,v,r).next(b=>{b.forEach((S,x)=>{u=u.insert(S,x)})})}).next(()=>u))}zs(e,t,r){let s;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const g of c.mutations){const v=g.key;let b=s.get(v);null==b&&(b=yn.newInvalidDocument(v),s=s.insert(v,b)),fl(g,b,c.localWriteTime),b.isFoundDocument()||(s=s.remove(v))}}).next(()=>(s.forEach((u,c)=>{pv(t,c)||(s=s.remove(u))}),s))}}class jm{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=s}static Ys(e,t){let r=on(),s=on();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new jm(e,t.fromCache,r,s)}}class Bv{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,s){return this.ti(e,t).next(u=>u||this.ei(e,t,s,r)).next(u=>u||this.ni(e,t))}ti(e,t){return he.resolve(null)}ei(e,t,r,s){return function Rw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||s.isEqual(Tt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,s)?this.ni(e,t):(X_()<=Yu.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),fv(t)),this.ri(e,c,t,bw(s,-1)))})}si(e,t){let r=new Wt(Fw(e));return t.forEach((s,u)=>{pv(e,u)&&(r=r.add(u))}),r}ii(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}ni(e,t){return X_()<=Yu.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",fv(t)),this.Zs.Qs(e,t,Eo.min())}ri(e,t,r,s){return this.Zs.Qs(e,r,s).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class jv{constructor(e,t,r,s){this.persistence=e,this.oi=t,this.M=s,this.ui=new ar(Nt),this.ai=new Dc(u=>qr(u),eh),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new QC(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function $v(n,e,t,r){return new jv(n,e,t,r)}function Ob(n,e){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,be.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.Bs.getAllMutationBatches(r).next(u=>(s=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],g=[];let v=on();for(const b of s){c.push(b.batchId);for(const S of b.mutations)v=v.add(S.key)}for(const b of u){g.push(b.batchId);for(const S of b.mutations)v=v.add(S.key)}return t.fi.Ks(r,v).next(b=>({di:b,removedBatchIds:c,addedBatchIds:g}))})})}),Hv.apply(this,arguments)}function gS(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,g,v,b){const S=v.batch,x=S.keys();let L=he.resolve();return x.forEach(q=>{L=L.next(()=>b.getEntry(g,q)).next(Z=>{const _e=v.docVersions.get(q);At(null!==_e),Z.version.compareTo(_e)<0&&(S.applyToRemoteDocument(Z,v),Z.isValidDocument()&&(Z.setReadTime(v.commitVersion),b.addEntry(Z)))})}),L.next(()=>c.Bs.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,s))})}function $m(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Gv(n,e){const t=Ke(n),r=e.snapshotVersion;let s=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});s=t.ui;const g=[];e.targetChanges.forEach((b,S)=>{const x=s.get(S);if(!x)return;g.push(t.fs.removeMatchingKeys(u,b.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,S)));let L=x.withSequenceNumber(u.currentSequenceNumber);var q,Z,_e;e.targetMismatches.has(S)?L=L.withResumeToken(_r.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):b.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(b.resumeToken,r)),s=s.insert(S,L),Z=L,_e=b,(0===(q=x).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0)&&g.push(t.fs.updateTargetData(u,L))});let v=Gs();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),g.push(zv(u,c,e.documentUpdates).next(b=>{v=b})),!r.isEqual(Tt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(b)}return he.waitFor(g).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,v)).next(()=>v)}).then(u=>(t.ui=s,u))}function zv(n,e,t){let r=on();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=Gs();return t.forEach((c,g)=>{const v=s.get(c);g.isNoDocument()&&g.version.isEqual(Tt.min())?(e.removeEntry(c,g.readTime),u=u.insert(c,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),u=u.insert(c,g)):Fe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",v.version," Watch version:",g.version)}),u})}function qv(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function wl(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.fs.getTargetData(r,e).next(u=>u?(s=u,he.resolve(s)):t.fs.allocateTargetId(r).next(c=>(s=new gl(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function fh(n,e,t){return Wv.apply(this,arguments)}function Wv(){return Wv=(0,be.Z)(function*(n,e,t){const r=Ke(n),s=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Tc(c))throw c;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(s.target)}),Wv.apply(this,arguments)}function Hm(n,e,t){const r=Ke(n);let s=Tt.min(),u=on();return r.persistence.runTransaction("Execute query","readonly",c=>function(g,v,b){const S=Ke(g),x=S.ai.get(b);return void 0!==x?he.resolve(S.ui.get(x)):S.fs.getTargetData(v,b)}(r,c,Hs(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,g.targetId).next(v=>{u=v})}).next(()=>r.oi.Qs(c,e,t?s:Tt.min(),t?u:on())).next(g=>(Gm(r,kw(e),g),{documents:g,_i:u})))}function Pb(n,e){const t=Ke(n),r=Ke(t.fs),s=t.ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function Kv(n,e){const t=Ke(n),r=t.ci.get(e)||Tt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.hi.getAllFromCollectionGroup(s,e,bw(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(Gm(t,e,s),s))}function Gm(n,e,t){let r=Tt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function Zv(){return Zv=(0,be.Z)(function*(n,e,t,r){const s=Ke(n);let u=on(),c=Gs();for(const b of t){const S=e.wi(b.metadata.name);b.document&&(u=u.add(S));const x=e.mi(b);x.setReadTime(e.gi(b.metadata.readTime)),c=c.insert(S,x)}const g=s.hi.newChangeBuffer({trackRemovals:!0}),v=yield wl(s,(b=r,Hs(bc(Kt.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>zv(b,g,c).next(S=>(g.apply(b),S)).next(S=>s.fs.removeMatchingKeysForTargetId(b,v.targetId).next(()=>s.fs.addMatchingKeys(b,u,v.targetId)).next(()=>s.fi.Gs(b,S)).next(()=>S)))}),Zv.apply(this,arguments)}function Fb(n,e){return zm.apply(this,arguments)}function zm(){return zm=(0,be.Z)(function*(n,e,t=on()){const r=yield wl(n,Hs(Mv(e.bundledQuery))),s=Ke(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=wr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s._s.saveNamedQuery(u,e);const g=r.withResumeToken(_r.EMPTY_BYTE_STRING,c);return s.ui=s.ui.insert(g.targetId,g),s.fs.updateTargetData(u,g).next(()=>s.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.fs.addMatchingKeys(u,t,r.targetId)).next(()=>s._s.saveNamedQuery(u,e))})}),zm.apply(this,arguments)}class JC{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return he.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:wr(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Mv(r.bundledQuery),readTime:wr(r.readTime)}),he.resolve();var r}}class Lb{constructor(){this.overlays=new ar(Ge.comparator),this.Ii=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.Xt(e,t,u)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ii.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const s=sh(),u=t.length+1,c=new Ge(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const v=g.getNext().value,b=v.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&v.largestBatchId>r&&s.set(v.getKey(),v)}return he.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new ar((b,S)=>b-S);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=sh(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const g=sh(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((b,S)=>g.set(b,S)),!(g.size()>=s)););return he.resolve(g)}Xt(e,t,r){if(null===r)return;const s=this.overlays.get(r.key);if(null!==s){const c=this.Ii.get(s.largestBatchId).delete(r.key);this.Ii.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new yb(t,r));let u=this.Ii.get(t);void 0===u&&(u=on(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class qm{constructor(){this.Ti=new Wt(Fr.Ei),this.Ai=new Wt(Fr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Fr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Fr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Ge(new Kt([])),r=new Fr(t,e),s=new Fr(t,e+1),u=[];return this.Ai.forEachInRange([r,s],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ge(new Kt([])),r=new Fr(t,e),s=new Fr(t,e+1);let u=on();return this.Ai.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Fr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Fr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ge.comparator(e.key,t.key)||Nt(e.Ci,t.Ci)}static Ri(e,t){return Nt(e.Ci,t.Ci)||Ge.comparator(e.key,t.key)}}class Vb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Wt(Fr.Ei)}checkEmpty(e){return he.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,s){const u=this.xi;this.xi++;const c=new Sv(u,t,r,s);this.Bs.push(c);for(const g of s)this.Ni=this.Ni.add(new Fr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Mi(t+1),u=s<0?0:s;return he.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return he.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Fr(t,0),s=new Fr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,s],c=>{const g=this.ki(c.Ci);u.push(g)}),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wt(Nt);return t.forEach(s=>{const u=new Fr(s,0),c=new Fr(s,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],g=>{r=r.add(g.Ci)})}),he.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const c=new Fr(new Ge(u),0);let g=new Wt(Nt);return this.Ni.forEachWhile(v=>{const b=v.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(g=g.add(v.Ci)),!0)},c),he.resolve(this.Oi(g))}Oi(e){const t=[];return e.forEach(r=>{const s=this.ki(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){At(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return he.forEach(t.mutations,s=>{const u=new Fr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Fr(t,0),s=this.Ni.firstAfterOrEqual(r);return he.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return he.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class XC{constructor(e){this.$i=e,this.docs=new ar(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let r=Gs();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():yn.newInvalidDocument(s))}),he.resolve(r)}getAllFromCollection(e,t,r){let s=Gs();const u=new Ge(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:g,value:{document:v}}=c.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||cv(Iw(v),r)<=0||(s=s.insert(v.key,v.mutableCopy()))}return he.resolve(s)}getAllFromCollectionGroup(e,t,r,s){rt()}Bi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ai(this)}getSize(e){return he.resolve(this.size)}}class Ai extends Mb{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Kn.addEntry(e,s)):this.Kn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class ph{constructor(e){this.persistence=e,this.Li=new Dc(t=>qr(t),eh),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new qm,this.targetCount=0,this.Ki=Pc.gn()}forEachTarget(e,t){return this.Li.forEach((r,s)=>t(s)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),he.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new Pc(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Tn(t),he.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Li.forEach((c,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),he.waitFor(u).next(()=>s)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),he.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.qi.containsKey(t))}}class eT{constructor(e,t){this.Gi={},this.overlays={},this.es=new fs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new ph(this),this.indexManager=new ch,this.ds=new XC(r=>this.referenceDelegate.Qi(r)),this.M=new np(t),this._s=new JC(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Lb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new Vb(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const s=new tT(this.es.next());return this.referenceDelegate.ji(),r(s).next(u=>this.referenceDelegate.Wi(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}zi(e,t){return he.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class tT extends fb{constructor(e){super(),this.currentSequenceNumber=e}}class Ub{constructor(e){this.persistence=e,this.Hi=new qm,this.Ji=null}static Yi(e){return new Ub(e)}get Xi(){if(this.Ji)return this.Ji;throw rt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),he.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(s=>this.Xi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Xi,r=>{const s=Ge.fromPath(r);return this.Zi(e,s).next(u=>{u||t.removeEntry(s,Tt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return he.or([()=>he.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function gh(n,e){return`firestore_clients_${n}_${e}`}function Bb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function cp(n,e){return`firestore_targets_${n}_${e}`}class Wm{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static tr(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new Re(s.error.code,s.error.message))),c?new Wm(e,t,s.state,u):(mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mh{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Re(r.error.code,r.error.message))),u?new mh(e,r.state,s):(mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Km{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Tm();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=iv(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new Km(e,u):(mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Yv{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Yv(t.clientId,t.onlineState):(mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class dp{constructor(){this.activeTargetIds=Tm()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zm{constructor(e,t,r,s,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new ar(Nt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=gh(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new dp),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.Fs();for(const s of t){if(s===e.ir)continue;const u=e.getItem(gh(e.persistenceKey,s));if(u){const c=Km.tr(s,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const s=e.pr(r);s&&e.Ir(s)}for(const s of e.cr)e.ur(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(cp(this.persistenceKey,e));if(r){const s=mh.tr(e,r);s&&(t=s.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(cp(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Ar(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Sr(s,null)}{const s=t.Dr(r.key,r.newValue);if(s)return t.Sr(s.clientId,s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Cr(r.key,r.newValue);if(s)return t.Nr(s)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const s=t.kr(r.key,r.newValue);if(s)return t.Mr(s)}}else if(r.key===t.mr){if(null!==r.newValue){const s=t.pr(r.newValue);if(s)return t.Ir(s)}}else if(r.key===t.lr){const s=function(u){let c=fs.A;if(null!=u)try{const g=JSON.parse(u);At("number"==typeof g),c=g}catch(g){mr("SharedClientState","Failed to read sequence number from WebStorage",g)}return c}(r.newValue);s!==fs.A&&t.sequenceNumberHandler(s)}else if(r.key===t.gr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const s=new Wm(this.currentUser,e,t,r),u=Bb(this.persistenceKey,this.currentUser,e);this.setItem(u,s.er())}Ar(e){const t=Bb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const s=cp(this.persistenceKey,e),u=new mh(e,t,r);this.setItem(s,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Km.tr(r,t)}Cr(e,t){const r=this._r.exec(e),s=Number(r[1]);return Wm.tr(new zr(void 0!==r[2]?r[2]:null),s,t)}kr(e,t){const r=this.wr.exec(e),s=Number(r[1]);return mh.tr(s,t)}pr(e){return Yv.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),s=this.Tr(this.ar),u=this.Tr(r),c=[],g=[];return u.forEach(v=>{s.has(v)||c.push(v)}),s.forEach(v=>{u.has(v)||g.push(v)}),this.syncEngine.Lr(c,g).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Tm();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class Qv{constructor(){this.Ur=new dp,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new dp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ym{Kr(e){}shutdown(){}}class Qm{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const mS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class jb{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class nT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,s,u){const c=this.ho(e,t);Fe("RestConnection","Sending: ",c,r);const g={};return this.lo(g,s,u),this.fo(e,c,g,r).then(v=>(Fe("RestConnection","Received: ",v),v),v=>{throw kf("RestConnection",`${e} failed with error: `,v,"url: ",c,"request:",r),v})}_o(e,t,r,s,u){return this.co(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+sl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.uo}/v1/${t}:${mS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,c)=>{const g=new eC;g.listenOnce(XD.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case J_.NO_ERROR:const b=g.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case J_.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),c(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case J_.HTTP_ERROR:const S=g.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){const x=g.getResponseJson().error;if(x&&x.status&&x.message){const L=function(q){const Z=q.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Z)>=0?Z:ce.UNKNOWN}(x.status);c(new Re(L,x.message))}else c(new Re(ce.UNKNOWN,"Server responded with status "+g.getStatus()))}else c(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(s);g.send(t,"POST",v,r,15)})}wo(e,t,r){const s=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=JD(),c=hw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new gw({})),this.lo(g.initMessageHeaders,t,r),(0,Bt.uI)()||(0,Bt.b$)()||(0,Bt.d)()||(0,Bt.w1)()||(0,Bt.Mn)()||(0,Bt.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const v=s.join("");Fe("Connection","Creating WebChannel: "+v,g);const b=u.createWebChannel(v,g);let S=!1,x=!1;const L=new jb({Jr:Z=>{x?Fe("Connection","Not sending because WebChannel is closed:",Z):(S||(Fe("Connection","Opening WebChannel transport."),b.open(),S=!0),Fe("Connection","WebChannel sending:",Z),b.send(Z))},Yr:()=>b.close()}),q=(Z,_e,ke)=>{Z.listen(_e,pt=>{try{ke(pt)}catch(gt){setTimeout(()=>{throw gt},0)}})};return q(b,im.EventType.OPEN,()=>{x||Fe("Connection","WebChannel transport opened.")}),q(b,im.EventType.CLOSE,()=>{x||(x=!0,Fe("Connection","WebChannel transport closed"),L.ro())}),q(b,im.EventType.ERROR,Z=>{x||(x=!0,kf("Connection","WebChannel transport errored:",Z),L.ro(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),q(b,im.EventType.MESSAGE,Z=>{var _e;if(!x){const ke=Z.data[0];At(!!ke);const pt=ke,gt=pt.error||(null===(_e=pt[0])||void 0===_e?void 0:_e.error);if(gt){Fe("Connection","WebChannel received error:",gt);const bt=gt.status;let at=function(Ft){const an=ur[Ft];if(void 0!==an)return kn(an)}(bt),Ot=gt.message;void 0===at&&(at=ce.INTERNAL,Ot="Unknown error status: "+bt+" with message "+gt.message),x=!0,L.ro(new Re(at,Ot)),b.close()}else Fe("Connection","WebChannel received:",ke),L.oo(ke)}}),q(c,fw.STAT_EVENT,Z=>{Z.stat===pw.PROXY?Fe("Connection","Detected buffering proxy"):Z.stat===pw.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.io()},0),L}}function Jv(){return"undefined"!=typeof window?window:null}function Fc(){return"undefined"!=typeof document?document:null}function yh(n){return new vC(n,!0)}class Xv{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Jm{constructor(e,t,r,s,u,c,g,v){this.Yn=e,this.Vo=r,this.vo=s,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Xv(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,be.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,be.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Do===t&&this.Qo(r,s)},r=>{e(()=>{const s=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(s)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(s=>{r(()=>this.jo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.No.Ro((0,be.Z)(function*(){e.state=0,e.start()}))}jo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eE extends Jm{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function IC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:rt(),s=e.targetChange.targetIds||[],u=function(v,b){return v.N?(At(void 0===b||"string"==typeof b),_r.fromBase64String(b||"")):(At(void 0===b||b instanceof Uint8Array),_r.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&function(v){const b=void 0===v.code?ce.UNKNOWN:kn(v.code);return new Re(b,v.message||"")}(c);t=new Zf(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=ga(n,r.document.name),u=wr(r.document.updateTime),c=new fi({mapValue:{fields:r.document.fields}}),g=yn.newFoundDocument(s,u,c);t=new Am(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,s=ga(n,r.document),u=r.readTime?wr(r.readTime):Tt.min(),c=yn.newNoDocument(s,u);t=new Am([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=ga(n,r.document);t=new Am([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return rt();{const r=e.filter,u=new Dm(r.count||0);t=new Ww(r.targetId,u)}}var v;return t}(this.M,e),r=function(s){if(!("targetChange"in s))return Tt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Tt.min():u.readTime?wr(u.readTime):Tt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=Mm(this.M),t.addTarget=function(s,u){let c;const g=u.target;return c=pm(g)?{documents:Xw(s,g)}:{query:eb(s,g)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=Yw(s,u.resumeToken):u.snapshotVersion.compareTo(Tt.min())>0&&(c.readTime=Jf(s,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function DC(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=Mm(this.M),t.removeTarget=e,this.Lo(t)}}class yS extends Jm{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(At(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function ep(n,e){return n&&n.length>0?(At(void 0!==e),n.map(t=>function(r,s){let u=wr(r.updateTime?r.updateTime:s);return u.isEqual(Tt.min())&&(u=wr(s)),new $w(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=wr(e.commitTime);return this.listener.tu(r,t)}return At(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Mm(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Xf(this.M,r))};this.Lo(t)}}class rT extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=s,this.su=!1}iu(){if(this.su)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.So.co(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(ce.UNKNOWN,s.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.So._o(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Re(ce.UNKNOWN,s.toString())})}terminate(){this.su=!0}}class iT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(mr(t),this.uu=!1):Fe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class $b{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(g=>{r.enqueueAndForget((0,be.Z)(function*(){var v;du(c)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,be.Z)(function*(b){const S=Ke(b);S.wu.add(4),yield Lc(S),S.yu.set("Unknown"),S.wu.delete(4),yield _h(S)}),function(b){return v.apply(this,arguments)})(c))}))}),this.yu=new iT(r,s)}}function _h(n){return tE.apply(this,arguments)}function tE(){return tE=(0,be.Z)(function*(n){if(du(n))for(const e of n.mu)yield e(!0)}),tE.apply(this,arguments)}function Lc(n){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,be.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Xm.apply(this,arguments)}function ey(n,e){const t=Ke(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),ry(t)?ny(t):vh(t).Mo()&&ty(t,e))}function hp(n,e){const t=Ke(n),r=vh(t);t._u.delete(e),r.Mo()&&Hb(t,e),0===t._u.size&&(r.Mo()?r.$o():du(t)&&t.yu.set("Unknown"))}function ty(n,e){n.pu.Z(e.targetId),vh(n).Ho(e)}function Hb(n,e){n.pu.Z(e),vh(n).Jo(e)}function ny(n){n.pu=new Kw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),vh(n).start(),n.yu.au()}function ry(n){return du(n)&&!vh(n).ko()&&n._u.size>0}function du(n){return 0===Ke(n).wu.size}function nE(n){n.pu=void 0}function sT(n){return rE.apply(this,arguments)}function rE(){return rE=(0,be.Z)(function*(n){n._u.forEach((e,t)=>{ty(n,e)})}),rE.apply(this,arguments)}function _S(n,e){return iy.apply(this,arguments)}function iy(){return iy=(0,be.Z)(function*(n,e){nE(n),ry(n)?(n.yu.lu(e),ny(n)):n.yu.set("Unknown")}),iy.apply(this,arguments)}function vS(n,e,t){return Gb.apply(this,arguments)}function Gb(){return Gb=(0,be.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Zf&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(s,u){const c=u.cause;for(const g of u.targetIds)s._u.has(g)&&(yield s.remoteSyncer.rejectListen(g,c),s._u.delete(g),s.pu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield iE(n,r)}else if(e instanceof Am?n.pu.ut(e):e instanceof Ww?n.pu._t(e):n.pu.ht(e),!t.isEqual(Tt.min()))try{const r=yield $m(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const c=s.pu.yt(u);return c.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const b=s._u.get(v);b&&s._u.set(v,b.withResumeToken(g.resumeToken,u))}}),c.targetMismatches.forEach(g=>{const v=s._u.get(g);if(!v)return;s._u.set(g,v.withResumeToken(_r.EMPTY_BYTE_STRING,v.snapshotVersion)),Hb(s,g);const b=new gl(v.target,g,1,v.sequenceNumber);ty(s,b)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield iE(n,r)}var r}),Gb.apply(this,arguments)}function iE(n,e,t){return zb.apply(this,arguments)}function zb(){return zb=(0,be.Z)(function*(n,e,t){if(!Tc(e))throw e;n.wu.add(1),yield Lc(n),n.yu.set("Offline"),t||(t=()=>$m(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield _h(n)}))}),zb.apply(this,arguments)}function oT(n,e){return e().catch(t=>iE(n,t,e))}function fp(n){return qb.apply(this,arguments)}function qb(){return qb=(0,be.Z)(function*(n){const e=Ke(n),t=Vc(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;ES(e);)try{const s=yield qv(e.localStore,r);if(null===s){0===e.du.length&&t.$o();break}r=s.batchId,sy(e,s)}catch(s){yield iE(e,s)}aT(e)&&sE(e)}),qb.apply(this,arguments)}function ES(n){return du(n)&&n.du.length<10}function sy(n,e){n.du.push(e);const t=Vc(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function aT(n){return du(n)&&!Vc(n).ko()&&n.du.length>0}function sE(n){Vc(n).start()}function oE(n){return oy.apply(this,arguments)}function oy(){return oy=(0,be.Z)(function*(n){Vc(n).nu()}),oy.apply(this,arguments)}function Wb(n){return Kb.apply(this,arguments)}function Kb(){return Kb=(0,be.Z)(function*(n){const e=Vc(n);for(const t of n.du)e.Zo(t.mutations)}),Kb.apply(this,arguments)}function aE(n,e,t){return ay.apply(this,arguments)}function ay(){return ay=(0,be.Z)(function*(n,e,t){const r=n.du.shift(),s=Om.from(r,e,t);yield oT(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield fp(n)}),ay.apply(this,arguments)}function Zb(n,e){return uy.apply(this,arguments)}function uy(){return uy=(0,be.Z)(function*(n,e){var t;e&&Vc(n).Xo&&(yield(t=(0,be.Z)(function*(r,s){if(Wf(u=s.code)&&u!==ce.ABORTED){const c=r.du.shift();Vc(r).Fo(),yield oT(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,s)),yield fp(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),aT(n)&&sE(n)}),uy.apply(this,arguments)}function uT(n,e){return ly.apply(this,arguments)}function ly(){return ly=(0,be.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=du(t);t.wu.add(3),yield Lc(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield _h(t)}),ly.apply(this,arguments)}function uE(n,e){return pp.apply(this,arguments)}function pp(){return pp=(0,be.Z)(function*(n,e){const t=Ke(n);e?(t.wu.delete(2),yield _h(t)):e||(t.wu.add(2),yield Lc(t),t.yu.set("Unknown"))}),pp.apply(this,arguments)}function vh(n){return n.Iu||(n.Iu=function(e,t,r){const s=Ke(e);return s.iu(),new eE(t,s.So,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Xr:sT.bind(null,n),eo:_S.bind(null,n),zo:vS.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Fo(),ry(n)?ny(n):n.yu.set("Unknown")):(yield n.Iu.stop(),nE(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Vc(n){return n.Tu||(n.Tu=function(e,t,r){const s=Ke(e);return s.iu(),new yS(t,s.So,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Xr:oE.bind(null,n),eo:Zb.bind(null,n),eu:Wb.bind(null,n),tu:aE.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Tu.Fo(),yield fp(n)):(yield n.Tu.stop(),n.du.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class Yb{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,g=new Yb(e,t,c,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gp(n,e){if(mr("AsyncQueue",`${e}: ${n}`),Tc(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Eh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Cm(),this.sortedSet=new ar(this.comparator)}static emptySet(e){return new Eh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Eh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Eh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Qb{constructor(){this.Eu=new ar(Ge.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):rt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class wh{constructor(e,t,r,s,u,c,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new wh(e,t,Eh.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class wS{constructor(){this.Ru=void 0,this.listeners=[]}}class lT{constructor(){this.queries=new Dc(e=>Pw(e),zf),this.onlineState="Unknown",this.bu=new Set}}function mp(n,e){return lE.apply(this,arguments)}function lE(){return lE=(0,be.Z)(function*(n,e){const t=Ke(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new wS),s)try{u.Ru=yield t.onListen(r)}catch(c){const g=gp(c,`Initialization of query '${fv(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&hE(t)}),lE.apply(this,arguments)}function gs(n,e){return cE.apply(this,arguments)}function cE(){return cE=(0,be.Z)(function*(n,e){const t=Ke(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),cE.apply(this,arguments)}function dE(n,e){const t=Ke(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const g of c.listeners)g.Vu(s)&&(r=!0);c.Ru=s}}r&&hE(t)}function cT(n,e,t){const r=Ke(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function hE(n){n.bu.forEach(e=>{e.next()})}class yp{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new wh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=wh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class Jb{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class fE{constructor(e){this.M=e}wi(e){return ga(this.M,e)}mi(e){return e.metadata.exists?Iv(this.M,e.document,!1):yn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return wr(e)}}class dT{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pE(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Kt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new fE(this.M);for(const s of e)if(s.metadata.queries){const u=r.wi(s.metadata.name);for(const c of s.metadata.queries){const g=(t.get(c)||on()).add(u);t.set(c,g)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function kb(n,e,t,r){return Zv.apply(this,arguments)}(e.localStore,new fE(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const s of e.queries)yield Fb(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function pE(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class gE{constructor(e){this.key=e}}class Xb{constructor(e){this.key=e}}class eI{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=on(),this.mutatedKeys=on(),this.Gu=Fw(e),this.Qu=new Eh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Qb,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,g=!1;const v="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,x)=>{const L=s.get(S),q=pv(this.query,x)?x:null,Z=!!L&&this.mutatedKeys.has(L.key),_e=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let ke=!1;L&&q?L.data.isEqual(q.data)?Z!==_e&&(r.track({type:3,doc:q}),ke=!0):this.Hu(L,q)||(r.track({type:2,doc:q}),ke=!0,(v&&this.Gu(q,v)>0||b&&this.Gu(q,b)<0)&&(g=!0)):!L&&q?(r.track({type:0,doc:q}),ke=!0):L&&!q&&(r.track({type:1,doc:L}),ke=!0,(v||b)&&(g=!0)),ke&&(q?(c=c.add(q),u=_e?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const S="F"===this.query.limitType?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:c,zu:r,ii:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((b,S)=>function(x,L){const q=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return q(x)-q(L)}(b.type,S.type)||this.Gu(b.doc,S.doc)),this.Ju(r);const c=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,v=g!==this.qu;return this.qu=g,0!==u.length||v?{snapshot:new wh(this.query,e.Qu,s,u,e.mutatedKeys,0===g,v,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Qb,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=on(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Xb(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new gE(r))}),t}ta(e){this.Uu=e._i,this.Ku=on();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return wh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class mE{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class bo{constructor(e){this.key=e,this.na=!1}}class hT{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Dc(g=>Pw(g),zf),this.ra=new Map,this.oa=new Set,this.ua=new ar(Ge.comparator),this.aa=new Map,this.ca=new qm,this.ha={},this.la=new Map,this.fa=Pc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function bS(n,e){return yE.apply(this,arguments)}function yE(){return yE=(0,be.Z)(function*(n,e){const t=lI(n);let r,s;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ea();else{const c=yield wl(t.localStore,Hs(e));t.isPrimaryClient&&ey(t.remoteStore,c);const g=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield cy(t,e,r,"current"===g)}return s}),yE.apply(this,arguments)}function cy(n,e,t,r){return _E.apply(this,arguments)}function _E(){return _E=(0,be.Z)(function*(n,e,t,r){n._a=(S,x,L)=>{return(q=(0,be.Z)(function*(Z,_e,ke,pt){let gt=_e.view.Wu(ke);gt.ii&&(gt=yield Hm(Z.localStore,_e.query,!1).then(({documents:Ot})=>_e.view.Wu(Ot,gt)));const bt=pt&&pt.targetChanges.get(_e.targetId),at=_e.view.applyChanges(gt,Z.isPrimaryClient,bt);return gy(Z,_e.targetId,at.Xu),at.snapshot}),function(Z,_e,ke,pt){return q.apply(this,arguments)})(n,S,x,L);var q};const s=yield Hm(n.localStore,e,!0),u=new eI(e,s._i),c=u.Wu(s.documents),g=Kf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(c,n.isPrimaryClient,g);gy(n,t,v.Xu);const b=new mE(e,t,u);return n.ia.set(e,b),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),v.snapshot}),_E.apply(this,arguments)}function fT(n,e){return dy.apply(this,arguments)}function dy(){return dy=(0,be.Z)(function*(n,e){const t=Ke(n),r=t.ia.get(e),s=t.ra.get(r.targetId);if(s.length>1)return t.ra.set(r.targetId,s.filter(u=>!zf(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield fh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),hp(t.remoteStore,r.targetId),vp(t,r.targetId)}).catch(vl))):(vp(t,r.targetId),yield fh(t.localStore,r.targetId,!0))}),dy.apply(this,arguments)}function tI(){return tI=(0,be.Z)(function*(n,e,t){const r=cI(n);try{const s=yield function(u,c){const g=Ke(u),v=Kn.now(),b=c.reduce((x,L)=>x.add(L.key),on());let S;return g.persistence.runTransaction("Locally write mutations","readwrite",x=>g.fi.Ks(x,b).next(L=>{S=L;const q=[];for(const Z of c){const _e=pS(Z,S.get(Z.key));null!=_e&&q.push(new pl(Z.key,_e,ww(_e.value.mapValue),Zn.exists(!0)))}return g.Bs.addMutationBatch(x,v,q,c)})).then(x=>(x.applyToLocalDocumentSet(S),{batchId:x.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,g){let v=u.ha[u.currentUser.toKey()];v||(v=new ar(Nt)),v=v.insert(c,g),u.ha[u.currentUser.toKey()]=v}(r,s.batchId,t),yield hu(r,s.changes),yield fp(r.remoteStore)}catch(s){const u=gp(s,"Failed to persist write");t.reject(u)}}),tI.apply(this,arguments)}function vE(n,e){return hy.apply(this,arguments)}function hy(){return hy=(0,be.Z)(function*(n,e){const t=Ke(n);try{const r=yield Gv(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.aa.get(u);c&&(At(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.na=!0:s.modifiedDocuments.size>0?At(c.na):s.removedDocuments.size>0&&(At(c.na),c.na=!1))}),yield hu(t,r,e)}catch(r){yield vl(r)}}),hy.apply(this,arguments)}function nI(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ia.forEach((u,c)=>{const g=c.view.Pu(e);g.snapshot&&s.push(g.snapshot)}),function(u,c){const g=Ke(u);g.onlineState=c;let v=!1;g.queries.forEach((b,S)=>{for(const x of S.listeners)x.Pu(c)&&(v=!0)}),v&&hE(g)}(r.eventManager,e),s.length&&r.sa.zo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gT(n,e,t){return fy.apply(this,arguments)}function fy(){return fy=(0,be.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.aa.get(e),u=s&&s.key;if(u){let c=new ar(Ge.comparator);c=c.insert(u,yn.newNoDocument(u,Tt.min()));const g=on().add(u),v=new au(Tt.min(),new Map,new Wt(Nt),c,g);yield vE(r,v),r.ua=r.ua.remove(u),r.aa.delete(e),DE(r)}else yield fh(r.localStore,e,!1).then(()=>vp(r,e,t)).catch(vl)}),fy.apply(this,arguments)}function EE(n,e){return _p.apply(this,arguments)}function _p(){return _p=(0,be.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const s=yield gS(t.localStore,e);IE(t,r,null),bE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hu(t,s)}catch(s){yield vl(s)}}),_p.apply(this,arguments)}function rI(n,e,t){return wE.apply(this,arguments)}function wE(){return wE=(0,be.Z)(function*(n,e,t){const r=Ke(n);try{const s=yield function(u,c){const g=Ke(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return g.Bs.lookupMutationBatch(v,c).next(S=>(At(null!==S),b=S.keys(),g.Bs.removeMutationBatch(v,S))).next(()=>g.Bs.performConsistencyCheck(v)).next(()=>g.fi.Ks(v,b))})}(r.localStore,e);IE(r,e,t),bE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hu(r,s)}catch(s){yield vl(s)}}),wE.apply(this,arguments)}function py(){return py=(0,be.Z)(function*(n,e){const t=Ke(n);du(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ke(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>c.Bs.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.la.get(r)||[];s.push(e),t.la.set(r,s)}catch(r){const s=gp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),py.apply(this,arguments)}function bE(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function IE(n,e,t){const r=Ke(n);let s=r.ha[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ha[r.currentUser.toKey()]=s}}function vp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||mT(n,r)})}function mT(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(hp(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),DE(n))}function gy(n,e,t){for(const r of t)r instanceof gE?(n.ca.addReference(r.key,e),yT(n,r)):r instanceof Xb?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||mT(n,r.key)):rt()}function yT(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.oa.add(r),DE(n))}function DE(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Ge(Kt.fromString(e)),r=n.fa.next();n.aa.set(r,new bo(t)),n.ua=n.ua.insert(t,r),ey(n.remoteStore,new gl(Hs(bc(t.path)),r,2,fs.A))}}function hu(n,e,t){return sI.apply(this,arguments)}function sI(){return sI=(0,be.Z)(function*(n,e,t){const r=Ke(n),s=[],u=[],c=[];var g;r.ia.isEmpty()||(r.ia.forEach((g,v)=>{c.push(r._a(v,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,b.fromCache?"not-current":"current"),s.push(b);const S=jm.Ys(v.targetId,b);u.push(S)}}))}),yield Promise.all(c),r.sa.zo(s),yield(g=(0,be.Z)(function*(v,b){const S=Ke(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>he.forEach(b,L=>he.forEach(L.Hs,q=>S.persistence.referenceDelegate.addReference(x,L.targetId,q)).next(()=>he.forEach(L.Js,q=>S.persistence.referenceDelegate.removeReference(x,L.targetId,q)))))}catch(x){if(!Tc(x))throw x;Fe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of b){const L=x.targetId;if(!x.fromCache){const q=S.ui.get(L),_e=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);S.ui=S.ui.insert(L,_e)}}}),function(v,b){return g.apply(this,arguments)})(r.localStore,u))}),sI.apply(this,arguments)}function IS(n,e){return oI.apply(this,arguments)}function oI(){return oI=(0,be.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield Ob(t.localStore,e);t.currentUser=e,(s=t).la.forEach(c=>{c.forEach(g=>{g.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hu(t,r.di)}var s}),oI.apply(this,arguments)}function DS(n,e){const t=Ke(n),r=t.aa.get(e);if(r&&r.na)return on().add(r.key);{let s=on();const u=t.ra.get(e);if(!u)return s;for(const c of u){const g=t.ia.get(c);s=s.unionWith(g.view.ju)}return s}}function CS(n,e){return CE.apply(this,arguments)}function CE(){return CE=(0,be.Z)(function*(n,e){const t=Ke(n),r=yield Hm(t.localStore,e.query,!0),s=e.view.ta(r);return t.isPrimaryClient&&gy(t,e.targetId,s.Xu),s}),CE.apply(this,arguments)}function my(n,e){return TE.apply(this,arguments)}function TE(){return TE=(0,be.Z)(function*(n,e){const t=Ke(n);return Kv(t.localStore,e).then(r=>hu(t,r))}),TE.apply(this,arguments)}function _T(n,e,t,r){return yy.apply(this,arguments)}function yy(){return yy=(0,be.Z)(function*(n,e,t,r){const s=Ke(n),u=yield function(c,g){const v=Ke(c),b=Ke(v.Bs);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.fn(S,g).next(x=>x?v.fi.Ks(S,x):he.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield fp(s.remoteStore):"acknowledged"===t||"rejected"===t?(IE(s,e,r||null),bE(s,e),g=e,Ke(Ke(s.localStore).Bs)._n(g)):rt(),yield hu(s,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),yy.apply(this,arguments)}function _y(){return _y=(0,be.Z)(function*(n,e){const t=Ke(n);if(lI(t),cI(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield vy(t,r.toArray());t.da=!0,yield uE(t.remoteStore,!0);for(const u of s)ey(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let s=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(vp(t,c),fh(t.localStore,c,!0))),hp(t.remoteStore,c)}),yield s,yield vy(t,r),function(u){const c=Ke(u);c.aa.forEach((g,v)=>{hp(c.remoteStore,v)}),c.ca.Si(),c.aa=new Map,c.ua=new ar(Ge.comparator)}(t),t.da=!1,yield uE(t.remoteStore,!1)}}),_y.apply(this,arguments)}function vy(n,e,t){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,be.Z)(function*(n,e,t){const r=Ke(n),s=[],u=[];for(const c of e){let g;const v=r.ra.get(c);if(v&&0!==v.length){g=yield wl(r.localStore,Hs(v[0]));for(const b of v){const S=r.ia.get(b),x=yield CS(r,S);x.snapshot&&u.push(x.snapshot)}}else{const b=yield Pb(r.localStore,c);g=yield wl(r.localStore,b),yield cy(r,aI(b),c,!1)}s.push(g)}return r.sa.zo(u),s}),Ep.apply(this,arguments)}function aI(n){return hv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function AE(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).Fs()}function SE(n,e,t,r){return bh.apply(this,arguments)}function bh(){return bh=(0,be.Z)(function*(n,e,t,r){const s=Ke(n);if(s.da)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=s.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Kv(s.localStore,kw(u[0])),g=au.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield hu(s,c,g);break}case"rejected":yield fh(s.localStore,e,!0),vp(s,e,r);break;default:rt()}}),bh.apply(this,arguments)}function TS(n,e,t){return uI.apply(this,arguments)}function uI(){return uI=(0,be.Z)(function*(n,e,t){const r=lI(n);if(r.da){for(const s of e){if(r.ra.has(s)){Fe("SyncEngine","Adding an already active target "+s);continue}const u=yield Pb(r.localStore,s),c=yield wl(r.localStore,u);yield cy(r,aI(u),c.targetId,!1),ey(r.remoteStore,c)}for(const s of t)r.ra.has(s)&&(yield fh(r.localStore,s,!1).then(()=>{hp(r.remoteStore,s),vp(r,s)}).catch(vl))}}),uI.apply(this,arguments)}function lI(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gT.bind(null,e),e.sa.zo=dE.bind(null,e.eventManager),e.sa.wa=cT.bind(null,e.eventManager),e}function cI(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rI.bind(null,e),e}class hI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.M=yh(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return $v(this.persistence,new Bv,e.initialUser,this.M)}ya(e){return new eT(Ub.Yi,this.M)}ga(e){return new Qv}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class fI extends hI{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield cI(r.Ta.syncEngine),yield fp(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return $v(this.persistence,new Bv,e.initialUser,this.M)}pa(e){return new KC(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Uv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Zi.withCacheSize(this.cacheSizeBytes):Zi.DEFAULT;return new Vv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Jv(),Fc(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Qv}}class vT extends fI{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const s=r.Ta.syncEngine;r.sharedClientState instanceof Zm&&(r.sharedClientState.syncEngine={$r:_T.bind(null,s),Br:SE.bind(null,s),Lr:TS.bind(null,s),Fs:AE.bind(null,s),Fr:my.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,be.Z)(function*(c){yield function Uc(n,e){return _y.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=Jv();if(!Zm.vt(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Uv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ME{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>nI(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=IS.bind(null,r.syncEngine),yield uE(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new lT}createDatastore(e){const t=yh(e.databaseInfo.databaseId),r=new nT(e.databaseInfo);return new rT(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>nI(this.syncEngine,g,0),c=Qm.vt()?new Qm:new Ym,new $b(t,r,s,u,c);var t,r,s,u,c}createSyncEngine(e,t){return function(r,s,u,c,g,v,b){const S=new hT(r,s,u,c,g,v);return b&&(S.da=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=Ke(t);Fe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Lc(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function xE(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class pI{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new yr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,be.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),s=Number(r);isNaN(s)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(s);return new Jb(JSON.parse(u),t.length+s)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,be.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,be.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class ET{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,be.Z)(function*(u,c){const g=Ke(u),v=Mm(g.M)+"/documents",b={documents:c.map(q=>oh(g.M,q))},S=yield g._o("BatchGetDocuments",v,b),x=new Map;S.forEach(q=>{const Z=function xm(n,e){return"found"in e?function(t,r){At(!!r.found);const s=ga(t,r.found.name),u=wr(r.found.updateTime),c=new fi({mapValue:{fields:r.found.fields}});return yn.newFoundDocument(s,u,c)}(n,e):"missing"in e?function(t,r){At(!!r.missing),At(!!r.readTime);const s=ga(t,r.missing),u=wr(r.readTime);return yn.newNoDocument(s,u)}(n,e):rt()}(g.M,q);x.set(Z.key.toString(),Z)});const L=[];return c.forEach(q=>{const Z=x.get(q.toString());At(!!Z),L.push(Z)}),L}),function(u,c){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ge.fromPath(s);e.mutations.push(new vv(u,e.precondition(u)))}),yield(r=(0,be.Z)(function*(s,u){const c=Ke(s),g=Mm(c.M)+"/documents",v={writes:u.map(b=>Xf(c.M,b))};yield c.co("Commit",g,v)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=Tt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Zn.updateTime(t):Zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Tt.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(t)}return Zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class wT{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.xa=r.maxAttempts,this.No=new Xv(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,be.Z)(function*(){const t=new ET(e.datastore),r=e.ka(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Ma(u)}))}).catch(s=>{e.Ma(s)})}))}ka(e){try{const t=this.updateFunction(e);return!Uf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Wf(t)}return!1}}class gI{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=zr.UNAUTHENTICATED,this.clientId=ev.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,be.Z)(function*(g){Fe("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Fe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=gp(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Ey(n,e){return mI.apply(this,arguments)}function mI(){return mI=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,be.Z)(function*(u){r.isEqual(u)||(yield Ob(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),mI.apply(this,arguments)}function NE(n,e){return bp.apply(this,arguments)}function bp(){return bp=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield RE(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>uT(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>uT(e.remoteStore,u)),n.onlineComponents=e}),bp.apply(this,arguments)}function RE(n){return OE.apply(this,arguments)}function OE(){return OE=(0,be.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield Ey(n,new hI)),n.offlineComponents}),OE.apply(this,arguments)}function PE(n){return yI.apply(this,arguments)}function yI(){return yI=(0,be.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield NE(n,new ME)),n.onlineComponents}),yI.apply(this,arguments)}function bT(n){return RE(n).then(e=>e.persistence)}function kE(n){return RE(n).then(e=>e.localStore)}function _I(n){return PE(n).then(e=>e.remoteStore)}function vI(n){return PE(n).then(e=>e.syncEngine)}function Ip(n){return EI.apply(this,arguments)}function EI(){return EI=(0,be.Z)(function*(n){const e=yield PE(n),t=e.eventManager;return t.onListen=bS.bind(null,e.syncEngine),t.onUnlisten=fT.bind(null,e.syncEngine),t}),EI.apply(this,arguments)}function DT(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(s,u,c,g,v){const b=new wp({next:x=>{u.enqueueAndForget(()=>gs(s,S));const L=x.docs.has(c);!L&&x.fromCache?v.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&x.fromCache&&g&&"server"===g.source?v.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new yp(bc(c.path),b,{includeMetadataChanges:!0,ku:!0});return mp(s,S)}(yield Ip(n),n.asyncQueue,e,t,r)})),r.promise}function CT(n,e,t={}){const r=new yr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(s,u,c,g,v){const b=new wp({next:x=>{u.enqueueAndForget(()=>gs(s,S)),x.fromCache&&"server"===g.source?v.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new yp(c,b,{includeMetadataChanges:!0,ku:!0});return mp(s,S)}(yield Ip(n),n.asyncQueue,e,t,r)})),r.promise}const l=new Map;function d(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function p(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _(n){if(!Ge.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function w(n){if(Ge.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function I(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function T(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=I(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function M(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class k{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,p("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class U{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k({}),this._settingsFrozen=!1,e instanceof la?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(s.options.projectId)}(e))}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new nC;switch(t.type){case"gapi":const r=t.client;return At(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new sC(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=l.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),l.delete(e),t.terminate())}(this),Promise.resolve()}}class se{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ue(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new se(this.firestore,e,this._key)}}class xe{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xe(this.firestore,e,this._query)}}class Ue extends xe{constructor(e,t,r){super(e,t,bc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new se(this.firestore,null,new Ge(e))}withConverter(e){return new Ue(this.firestore,e,this._path)}}function tt(n,e,...t){if(n=(0,Bt.m9)(n),d("collection","path",e),n instanceof U){const r=Kt.fromString(e,...t);return w(r),new Ue(n,null,r)}{if(!(n instanceof se||n instanceof Ue))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return w(r),new Ue(n.firestore,null,r)}}function ct(n,e,...t){if(n=(0,Bt.m9)(n),1===arguments.length&&(e=ev.R()),d("doc","path",e),n instanceof U){const r=Kt.fromString(e,...t);return _(r),new se(n,null,new Ge(r))}{if(!(n instanceof se||n instanceof Ue))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Kt.fromString(e,...t));return _(r),new se(n.firestore,n instanceof Ue?n.converter:null,new Ge(r))}}function jt(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),(n instanceof se||n instanceof Ue)&&(e instanceof se||e instanceof Ue)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function en(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),n instanceof xe&&e instanceof xe&&n.firestore===e.firestore&&zf(n._query,e._query)&&n.converter===e.converter}class ms{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Xv(this,"async_queue_retry"),this.Qa=()=>{const t=Fc();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Fc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=Fc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new yr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,be.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Tc(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,mr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const s=Yb.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(s),s}ja(){this.Ua&&rt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function fu(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class FE{constructor(){this._progressObserver={},this._taskCompletionResolver=new yr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _n extends U{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new ms,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||wy(this),this._firestoreClient.terminate()}}function jn(n){return n._firestoreClient||wy(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wy(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new rv(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new gI(n._authCredentials,n._appCheckCredentials,n._queue,r)}function NS(n,e,t){const r=new yr;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield Ey(n,t),yield NE(n,e),r.resolve()}catch(s){if(!("FirebaseError"===(u=s).name?u.code===ce.FAILED_PRECONDITION||u.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function RS(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bl(_r.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new bl(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Dp{constructor(e){this._methodName=e}}class II{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Nt(this._lat,e._lat)||Nt(this._long,e._long)}}const vR=/^__.*__$/;class ER{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new pl(e,this.data,this.fieldMask,t,this.fieldTransforms):new ih(e,this.data,t,this.fieldTransforms)}}class OS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new pl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function PS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class DI{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=s,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new DI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.nc({path:r,ic:!1});return s.rc(e),s}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.nc({path:r,ic:!1});return s.tc(),s}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return AI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(PS(this.ec)&&vR.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class wR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||yh(e)}lc(e,t,r,s=!1){return new DI({ec:e,methodName:t,hc:r,path:Bn.emptyPath(),ic:!1,cc:s},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Cp(n){const e=n._freezeSettings(),t=yh(n._databaseId);return new wR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function CI(n,e,t,r,s,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,s);MT("Data must be an object, but it was:",c,r);const g=LS(r,c);let v,b;if(u.merge)v=new al(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const L=xT(e,x,t);if(!c.contains(L))throw new Re(ce.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);US(S,L)||S.push(L)}v=new al(S),b=c.fieldTransforms.filter(x=>v.covers(x.field))}else v=null,b=c.fieldTransforms;return new ER(new fi(g),v,b)}class BE extends Dp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof BE}}function kS(n,e,t){return new DI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class TT extends Dp{_toFieldTransform(e){return new rh(e.path,new nh)}isEqual(e){return e instanceof TT}}class bR extends Dp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=kS(this,e,!0),r=this.fc.map(u=>Tp(u,t)),s=new dl(r);return new rh(e.path,s)}isEqual(e){return this===e}}class IR extends Dp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=kS(this,e,!0),r=this.fc.map(u=>Tp(u,t)),s=new hl(r);return new rh(e.path,s)}isEqual(e){return this===e}}class DR extends Dp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Ic(e.M,Uw(e.M,this.dc));return new rh(e.path,t)}isEqual(e){return this===e}}function AT(n,e,t,r){const s=n.lc(1,e,t);MT("Data must be an object, but it was:",s,r);const u=[],c=fi.empty();ol(r,(v,b)=>{const S=TI(e,v,t);b=(0,Bt.m9)(b);const x=s.oc(S);if(b instanceof BE)u.push(S);else{const L=Tp(b,x);null!=L&&(u.push(S),c.set(S,L))}});const g=new al(u);return new OS(c,g,s.fieldTransforms)}function ST(n,e,t,r,s,u){const c=n.lc(1,e,t),g=[xT(e,r,t)],v=[s];if(u.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)g.push(xT(e,u[L])),v.push(u[L+1]);const b=[],S=fi.empty();for(let L=g.length-1;L>=0;--L)if(!US(b,g[L])){const q=g[L];let Z=v[L];Z=(0,Bt.m9)(Z);const _e=c.oc(q);if(Z instanceof BE)b.push(q);else{const ke=Tp(Z,_e);null!=ke&&(b.push(q),S.set(q,ke))}}const x=new al(b);return new OS(S,x,c.fieldTransforms)}function FS(n,e,t,r=!1){return Tp(t,n.lc(r?4:3,e))}function Tp(n,e){if(VS(n=(0,Bt.m9)(n)))return MT("Unsupported field value:",e,n),LS(n,e);if(n instanceof Dp)return function(t,r){if(!PS(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const c of t){let g=Tp(c,r.uc(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,Bt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Uw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Kn.fromDate(t);return{timestampValue:Jf(r.M,s)}}if(t instanceof Kn){const s=new Kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Jf(r.M,s)}}if(t instanceof II)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof bl)return{bytesValue:Yw(r.M,t._byteString)};if(t instanceof se){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Sm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${I(t)}`)}(n,e)}function LS(n,e){const t={};return am(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ol(n,(r,s)=>{const u=Tp(s,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function VS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Kn||n instanceof II||n instanceof bl||n instanceof se||n instanceof Dp)}function MT(n,e,t){if(!VS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=I(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function xT(n,e,t){if((e=(0,Bt.m9)(e))instanceof Bc)return e._internalPath;if("string"==typeof e)return TI(n,e);throw AI("Field path arguments must be of type string or ",n,!1,void 0,t)}const CR=new RegExp("[~\\*/\\[\\]]");function TI(n,e,t){if(e.search(CR)>=0)throw AI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bc(...e.split("."))._internalPath}catch(r){throw AI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function AI(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||c)&&(v+=" (found",u&&(v+=` in field ${r}`),c&&(v+=` in document ${s}`),v+=")"),new Re(ce.INVALID_ARGUMENT,g+n+v)}function US(n,e){return n.some(t=>t.isEqual(e))}class jE{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new se(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new TR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(SI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class TR extends jE{data(){return super.data()}}function SI(n,e){return"string"==typeof e?TI(n,e):e instanceof Bc?e._internalPath:e._delegate._internalPath}class Ap{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jc extends jE{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new $E(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(SI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class $E extends jc{data(e={}){return super.data(e)}}class Ih{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ap(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $E(this._firestore,this._userDataWriter,r.key,r,new Ap(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new $E(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ap(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||3!==c.type).map(c=>{const g=new $E(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Ap(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,b=-1;return 0!==c.type&&(v=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:AR(c.type),doc:g,oldIndex:v,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function AR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function BS(n,e){return n instanceof jc&&e instanceof jc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ih&&e instanceof Ih&&n._firestore===e._firestore&&en(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function jS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HE{}function Dh(n,...e){for(const t of e)n=t._apply(n);return n}class SR extends HE{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Cp(e.firestore),r=function(s,u,c,g,v,b,S){let x;if(v.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){WS(S,b);const q=[];for(const Z of S)q.push(qS(g,s,Z));x={arrayValue:{values:q}}}else x=qS(g,s,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||WS(S,b),x=FS(c,"where",S,"in"===b||"not-in"===b);const L=Er.create(v,b,x);return function(q,Z){if(Z.S()){const ke=vm(q);if(null!==ke&&!ke.isEqual(Z.field))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ke.toString()}' and '${Z.field.toString()}'`);const pt=_m(q);null!==pt&&KS(0,Z.field,pt)}const _e=function(ke,pt){for(const gt of ke.filters)if(pt.indexOf(gt.op)>=0)return gt.op;return null}(q,function(ke){switch(ke){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==_e)throw new Re(ce.INVALID_ARGUMENT,_e===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${_e.toString()}' filters.`)}(s,L),L}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new xe(e.firestore,e.converter,function(s,u){const c=s.filters.concat([u]);return new fa(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class xR extends HE{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new wc(s,u);return function(g,v){if(null===_m(g)){const b=vm(g);null!==b&&KS(0,b,v.field)}}(r,c),c}(e._query,this._c,this.gc);return new xe(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new fa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class $S extends HE{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new xe(e.firestore,e.converter,Ow(e._query,this.yc,this.Ic))}}class HS extends HE{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=zS(e,this.type,this.Tc,this.Ec);return new xe(e.firestore,e.converter,(s=t,new fa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class GS extends HE{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=zS(e,this.type,this.Tc,this.Ec);return new xe(e.firestore,e.converter,(s=t,new fa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function zS(n,e,t,r){if(t[0]=(0,Bt.m9)(t[0]),t[0]instanceof jE)return function(s,u,c,g,v){if(!g)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const S of th(s))if(S.field.isKeyField())b.push(ll(u,g.key));else{const x=g.data.field(S.field);if(Vf(x))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const L=S.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}b.push(x)}return new ou(b,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Cp(n.firestore);return function(u,c,g,v,b,S){const x=u.explicitOrderBy;if(b.length>x.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let q=0;q<b.length;q++){const Z=b[q];if(x[q].field.isKeyField()){if("string"!=typeof Z)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Z}`);if(!Em(u)&&-1!==Z.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Z}' contains a slash.`);const _e=u.path.child(Kt.fromString(Z));if(!Ge.isDocumentKey(_e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${_e}' is not because it contains an odd number of segments.`);const ke=new Ge(_e);L.push(ll(c,ke))}else{const _e=FS(g,v,Z);L.push(_e)}}return new ou(L,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function qS(n,e,t){if("string"==typeof(t=(0,Bt.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Em(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Kt.fromString(t));if(!Ge.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ll(n,new Ge(r))}if(t instanceof se)return ll(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${I(t)}.`)}function WS(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function KS(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const VR={maxAttempts:5};class NT{convertValue(e,t="none"){switch(_c(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return ol(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new II(Pn(e.latitude),Pn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Yd(e));default:return null}}convertTimestamp(e){const t=ua(e);return new Kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Kt.fromString(e);At(Dv(r));const s=new la(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return s.isEqual(t)||mr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function MI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UR extends NT{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new se(this.firestore,null,t)}}class ZS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cp(e)}set(e,t,r){this._verifyNotCommitted();const s=Ch(e,this._firestore),u=MI(s.converter,t,r),c=CI(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,Zn.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Ch(e,this._firestore);let c;return c="string"==typeof(t=(0,Bt.m9)(t))||t instanceof Bc?ST(this._dataReader,"WriteBatch.update",u._key,t,r,s):AT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ch(e,this._firestore);return this._mutations=this._mutations.concat(new qf(t._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ch(n,e){if((n=(0,Bt.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Sp extends NT{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new se(this.firestore,null,t)}}function YS(n,e,t){n=T(n,se);const r=T(n.firestore,_n),s=MI(n.converter,e,t);return by(r,[CI(Cp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Zn.none())])}function QS(n,e,t,...r){n=T(n,se);const s=T(n.firestore,_n),u=Cp(s);let c;return c="string"==typeof(e=(0,Bt.m9)(e))||e instanceof Bc?ST(u,"updateDoc",n._key,e,t,r):AT(u,"updateDoc",n._key,e),by(s,[c.toMutation(n._key,Zn.exists(!0))])}function JS(n,...e){var t,r,s;n=(0,Bt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||fu(e[c])||(u=e[c],c++);const g={includeMetadataChanges:u.includeMetadataChanges};if(fu(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(s=x.complete)||void 0===s?void 0:s.bind(x)}let v,b,S;if(n instanceof se)b=T(n.firestore,_n),S=bc(n._key.path),v={next:x=>{e[c]&&e[c](RT(b,n,x))},error:e[c+1],complete:e[c+2]};else{const x=T(n,xe);b=T(x.firestore,_n),S=x._query;const L=new Sp(b);v={next:q=>{e[c]&&e[c](new Ih(b,L,x,q))},error:e[c+1],complete:e[c+2]},jS(n._query)}return function(x,L,q,Z){const _e=new wp(Z),ke=new yp(L,_e,q);return x.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return mp(yield Ip(x),ke)})),()=>{_e.Aa(),x.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return gs(yield Ip(x),ke)}))}}(jn(b),S,g,v)}function by(n,e){return function(t,r){const s=new yr;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function pT(n,e,t){return tI.apply(this,arguments)}(yield vI(t),r,s)})),s.promise}(jn(n),e)}function RT(n,e,t){const r=t.docs.get(e._key),s=new Sp(n);return new jc(n,s,e._key,r,new Ap(t.hasPendingWrites,t.fromCache),e.converter)}class ZR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Cp(e)}get(e){const t=Ch(e,this._firestore),r=new UR(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return rt();const u=s[0];if(u.isFoundDocument())return new jE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new jE(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const s=Ch(e,this._firestore),u=MI(s.converter,t,r),c=CI(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,c),this}update(e,t,r,...s){const u=Ch(e,this._firestore);let c;return c="string"==typeof(t=(0,Bt.m9)(t))||t instanceof Bc?ST(this._dataReader,"Transaction.update",u._key,t,r,s):AT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Ch(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ch(e,this._firestore),r=new Sp(this._firestore);return super.get(e).then(s=>new jc(this._firestore,r,t._key,s._document,new Ap(!1,!1),t.converter))}}function OT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function eM(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function tM(){if(!function fS(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){sl=ic.SDK_VERSION,(0,ic._registerComponent)(new Mg.wA("firestore",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),u=new _n(s,new rC(t.getProvider("auth-internal")),new oC(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,ic.registerVersion)(tC,"3.4.9",n),(0,ic.registerVersion)(tC,"3.4.9","esm2017")}();class GE{constructor(e){this._delegate=e}static fromBase64String(e){return tM(),new GE(bl.fromBase64String(e))}static fromUint8Array(e){return eM(),new GE(bl.fromUint8Array(e))}toBase64(){return tM(),this._delegate.toBase64()}toUint8Array(){return eM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function PT(n){return function iO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class sO{enableIndexedDbPersistence(e,t){return function VE(n,e){RS(n=T(n,_n));const t=jn(n),r=n._freezeSettings(),s=new ME;return NS(t,s,new fI(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function UE(n){RS(n=T(n,_n));const e=jn(n),t=n._freezeSettings(),r=new ME;return NS(e,r,new vT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function fR(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!ps.vt())return Promise.resolve();const s=r+"main";yield ps.delete(s)}),function(r){return t.apply(this,arguments)})(Uv(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class nM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof la||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&kf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Q(n,e,t,r={}){var s;const u=(n=T(n,U))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&kf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,g;if("string"==typeof r.mockUserToken)c=r.mockUserToken,g=zr.MOCK_USER;else{c=(0,Bt.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new zr(v)}n._authCredentials=new mw(new Ff(c,g))}}(this._delegate,e,t,r)}enableNetwork(){return function gR(n){return function AS(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield bT(n),t=yield _I(n);return e.setNetworkEnabled(!0),function(r){const s=Ke(r);return s.wu.delete(0),_h(s)}(t)}))}(jn(n=T(n,_n)))}(this._delegate)}disableNetwork(){return function mR(n){return function SS(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield bT(n),t=yield _I(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(s){const u=Ke(s);u.wu.add(0),yield Lc(u),u.yu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(jn(n=T(n,_n)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,p("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function pR(n){return function(e){const t=new yr;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function iI(n,e){return py.apply(this,arguments)}(yield vI(e),t)})),t.promise}(jn(n=T(n,_n)))}(this._delegate)}onSnapshotsInSync(e){return function KR(n,e){return function xS(n,e){const t=new wp(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Ip(n),s=t,Ke(r).bu.add(s),void s.next();var r,s})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield Ip(n),s=t,void Ke(r).bu.delete(s);var r,s}))}}(jn(n=T(n,_n)),fu(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Iy(this,tt(this._delegate,e))}catch(t){throw ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new ya(this,ct(this._delegate,e))}catch(t){throw ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _s(this,function Se(n,e){if(n=T(n,U),d("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xe(n,null,(t=e,new fa(Kt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function YR(n,e,t){n=T(n,_n);const r=Object.assign(Object.assign({},VR),t);return function(s){if(s.maxAttempts<1)throw new Re(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function i(n,e,t){const r=new yr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const s=yield(u=n,PE(u).then(c=>c.datastore));var u;new wT(n.asyncQueue,s,t,e,r).run()})),r.promise}(jn(n),s=>e(new ZR(n,s)),r)}(this._delegate,t=>e(new rM(this,t)))}batch(){return jn(this._delegate),new iM(new ZS(this._delegate,e=>by(this._delegate,e)))}loadBundle(e){return function yR(n,e){const t=jn(n=T(n,_n)),r=new FE;return function o(n,e,t,r){const s=function(u,c){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,b){if(v instanceof Uint8Array)return xE(v,b);if(v instanceof ArrayBuffer)return xE(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new pI(v,c);var v}(t,yh(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function dI(n,e,t){const r=Ke(n);var s;(s=(0,be.Z)(function*(u,c,g){try{const v=yield c.getMetadata();if(yield function(L,q){const Z=Ke(L),_e=wr(q.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",ke=>Z._s.getBundleMetadata(ke,q.id)).then(ke=>!!ke&&ke.createTime.compareTo(_e)>=0)}(u.localStore,v))return yield c.close(),g._completeWith({taskState:"Success",documentsLoaded:(L=v).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);g._updateProgress(pE(v));const b=new dT(v,u.localStore,c.M);let S=yield c.ma();for(;S;){const L=yield b.Fu(S);L&&g._updateProgress(L),S=yield c.ma()}const x=yield b.complete();return yield hu(u,x.Lu,void 0),yield function(L,q){const Z=Ke(L);return Z.persistence.runTransaction("Save bundle","readwrite",_e=>Z._s.saveBundleMetadata(_e,q))}(u.localStore,v),g._completeWith(x.progress),Promise.resolve(x.Bu)}catch(v){return kf("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var L}),function(u,c,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield vI(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _R(n,e){return function a(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const s=Ke(t);return s.persistence.runTransaction("Get named query","readonly",u=>s._s.getNamedQuery(u,r))}(yield kE(n),e)}))}(jn(n=T(n,_n)),e).then(t=>t?new xe(n,null,t.query):null)}(this._delegate,e).then(t=>t?new _s(this,t):null)}}class xI extends NT{constructor(e){super(),this.firestore=e}convertBytes(e){return new GE(new bl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ya.forKey(t,this.firestore,null)}}class rM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new xI(e)}get(e){const t=xp(e);return this._delegate.get(t).then(r=>new zE(this._firestore,new jc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=xp(e);return r?(OT("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=xp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=xp(e);return this._delegate.delete(t),this}}class iM{constructor(e){this._delegate=e}set(e,t,r){const s=xp(e);return r?(OT("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=xp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=xp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Mp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new $E(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Mp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Mp(e,new xI(e),t),s.set(t,u)),u}}Mp.INSTANCES=new WeakMap;class ya{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ya(t,new se(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new ya(t,new se(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Iy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Iy(this.firestore,tt(this._delegate,e))}catch(t){throw ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Bt.m9)(e))instanceof se&&jt(this._delegate,e)}set(e,t){t=OT("DocumentReference.set",t);try{return t?YS(this._delegate,e,t):YS(this._delegate,e)}catch(r){throw ys(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?QS(this._delegate,e):QS(this._delegate,e,t,...r)}catch(s){throw ys(s,"updateDoc()","DocumentReference.update()")}}delete(){return function qR(n){return by(T(n.firestore,_n),[new qf(n._key,Zn.none())])}(this._delegate)}onSnapshot(...e){const t=sM(e),r=oM(e,s=>new zE(this.firestore,new jc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return JS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jR(n){n=T(n,se);const e=T(n.firestore,_n),t=jn(e),r=new Sp(e);return function IT(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(s,u,c){try{const g=yield function(v,b){const S=Ke(v);return S.persistence.runTransaction("read document","readonly",x=>S.fi.Ls(x,b))}(s,u);g.isFoundDocument()?c.resolve(g):g.isNoDocument()?c.resolve(null):c.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=gp(g,`Failed to get document '${u} from cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield kE(n),e,t);var r})),t.promise}(t,n._key).then(s=>new jc(e,r,n._key,s,new Ap(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function $R(n){n=T(n,se);const e=T(n.firestore,_n);return DT(jn(e),n._key,{source:"server"}).then(t=>RT(e,n,t))}(this._delegate):function BR(n){n=T(n,se);const e=T(n.firestore,_n);return DT(jn(e),n._key).then(t=>RT(e,n,t))}(this._delegate),t.then(r=>new zE(this.firestore,new jc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ya(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function ys(n,e,t){return n.message=n.message.replace(e,t),n}function sM(n){for(const e of n)if("object"==typeof e&&!PT(e))return e;return{}}function oM(n,e){var t,r;let s;return s=PT(n[0])?n[0]:PT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class zE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ya(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return BS(this._delegate,e._delegate)}}class qE extends zE{data(e){const t=this._delegate.data(e);return function Kd(n,e){n||rt()}(void 0!==t),t}}class _s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new xI(e)}where(e,t,r){try{return new _s(this.firestore,Dh(this._delegate,function MR(n,e,t){const r=e,s=SI("where",n);return new SR(s,r,t)}(e,t,r)))}catch(s){throw ys(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _s(this.firestore,Dh(this._delegate,function NR(n,e="asc"){const t=e,r=SI("orderBy",n);return new xR(r,t)}(e,t)))}catch(r){throw ys(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _s(this.firestore,Dh(this._delegate,function RR(n){return M("limit",n),new $S("limit",n,"F")}(e)))}catch(t){throw ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new _s(this.firestore,Dh(this._delegate,function OR(n){return M("limitToLast",n),new $S("limitToLast",n,"L")}(e)))}catch(t){throw ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _s(this.firestore,Dh(this._delegate,function PR(...n){return new HS("startAt",n,!0)}(...e)))}catch(t){throw ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _s(this.firestore,Dh(this._delegate,function kR(...n){return new HS("startAfter",n,!1)}(...e)))}catch(t){throw ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _s(this.firestore,Dh(this._delegate,function FR(...n){return new GS("endBefore",n,!1)}(...e)))}catch(t){throw ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _s(this.firestore,Dh(this._delegate,function LR(...n){return new GS("endAt",n,!0)}(...e)))}catch(t){throw ys(t,"endAt()","Query.endAt()")}}isEqual(e){return en(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function GR(n){n=T(n,xe);const e=T(n.firestore,_n),t=jn(e),r=new Sp(e);return function MS(n,e){const t=new yr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(s,u,c){try{const g=yield Hm(s,u,!0),v=new eI(u,g._i),b=v.Wu(g.documents),S=v.applyChanges(b,!1);c.resolve(S.snapshot)}catch(g){const v=gp(g,`Failed to execute query '${u} against cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield kE(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Ih(e,r,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function zR(n){n=T(n,xe);const e=T(n.firestore,_n),t=jn(e),r=new Sp(e);return CT(t,n._query,{source:"server"}).then(s=>new Ih(e,r,n,s))}(this._delegate):function HR(n){n=T(n,xe);const e=T(n.firestore,_n),t=jn(e),r=new Sp(e);return jS(n._query),CT(t,n._query).then(s=>new Ih(e,r,n,s))}(this._delegate),t.then(r=>new kT(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=sM(e),r=oM(e,s=>new kT(this.firestore,new Ih(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return JS(this._delegate,t,r)}withConverter(e){return new _s(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}class aO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new qE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new qE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new aO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new qE(this._firestore,r))})}isEqual(e){return BS(this._delegate,e._delegate)}}class Iy extends _s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ya(this.firestore,e):null}doc(e){try{return new ya(this.firestore,void 0===e?ct(this._delegate):ct(this._delegate,e))}catch(t){throw ys(t,"doc()","CollectionReference.doc()")}}add(e){return function WR(n,e){const t=T(n.firestore,_n),r=ct(n),s=MI(n.converter,e);return by(t,[CI(Cp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ya(this.firestore,t))}isEqual(e){return jt(this._delegate,e._delegate)}withConverter(e){return new Iy(this.firestore,this._delegate.withConverter(e?Mp.getInstance(this.firestore,e):null))}}function xp(n){return T(n,se)}class FT{constructor(...e){this._delegate=new Bc(...e)}static documentId(){return new FT(Bn.keyField().canonicalString())}isEqual(e){return(e=(0,Bt.m9)(e))instanceof Bc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Np{constructor(e){this._delegate=e}static serverTimestamp(){const e=function JR(){return new TT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Np(e)}static delete(){const e=function QR(){return new BE("deleteField")}();return e._methodName="FieldValue.delete",new Np(e)}static arrayUnion(...e){const t=function XR(...n){return new bR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Np(t)}static arrayRemove(...e){const t=function eO(...n){return new IR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Np(t)}static increment(e){const t=function tO(n){return new DR("increment",n)}(e);return t._methodName="FieldValue.increment",new Np(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const uO={Firestore:nM,GeoPoint:II,Timestamp:Kn,Blob:GE,Transaction:rM,WriteBatch:iM,DocumentReference:ya,DocumentSnapshot:zE,Query:_s,QueryDocumentSnapshot:qE,QuerySnapshot:kT,CollectionReference:Iy,FieldPath:FT,FieldValue:Np,setLogLevel:function oO(n){!function hS(n){aa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function cO(n){(function lO(n,e){n.INTERNAL.registerComponent(new Mg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},uO)))})(n,(e,t)=>new nM(e,t,new sO)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(DD.Z);var dO=O(6451),NI=O(5363),hO=O(6063);class fO extends ei.x{constructor(e=1/0,t=1/0,r=hO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)g=v;g&&r.splice(0,g+1)}}}var pO=O(3099);function aM(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,pO.B)({connector:()=>new fO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function uM(n,e){return(0,Nu.m)(e)?wn(()=>n,e):wn(()=>n)}var LT=O(9468),VT=O(5867);const lM=new Map,vO={activated:!1,tokenObservers:[]},EO={initialized:!1,enabled:!1};function pi(n){return lM.get(n)||vO}function pu(n,e){lM.set(n,e)}function RI(){return EO}class CO{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new Bt.BH,yield function TO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Bt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vs=new Bt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function dM(n){if(!pi(n).activated)throw vs.create("use-before-activation",{appName:n.name})}function $T(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,be.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const x=yield s.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,g;try{c=yield fetch(n,u)}catch(x){throw vs.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw vs.create("fetch-status-error",{httpStatus:c.status});try{g=yield c.json()}catch(x){throw vs.create("fetch-parse-error",{originalErrorMessage:x.message})}const v=g.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw vs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const b=1e3*Number(v[1]),S=Date.now();return{token:g.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),HT.apply(this,arguments)}function NO(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const KE="firebase-app-check-store";let kI=null;function fM(){return kI||(kI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(vs.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(KE,{keyPath:"compositeKey"})}}catch(t){e(vs.create("storage-open",{originalErrorMessage:t.message}))}}),kI)}function GT(){return GT=(0,be.Z)(function*(n,e){const r=(yield fM()).transaction(KE,"readwrite"),u=r.objectStore(KE).put({compositeKey:n,value:e});return new Promise((c,g)=>{u.onsuccess=v=>{c()},r.onerror=v=>{var b;g(vs.create("storage-set",{originalErrorMessage:null===(b=v.target.error)||void 0===b?void 0:b.message}))}})}),GT.apply(this,arguments)}const ZE=new Yu.Yd("@firebase/app-check");function yM(n,e){return(0,Bt.hl)()?function kO(n,e){return function pM(n,e){return GT.apply(this,arguments)}(function mM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ZE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function _M(){return RI().enabled}function vM(){return KT.apply(this,arguments)}function KT(){return KT=(0,be.Z)(function*(){const n=RI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),KT.apply(this,arguments)}const jO={error:"UNKNOWN_ERROR"};function $O(n){return Bt.US.encodeString(JSON.stringify(n),!1)}function FI(n){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,be.Z)(function*(n,e=!1){const t=n.app;dM(t);const r=pi(t);let u,s=r.token;if(!s){const v=yield r.cachedTokenPromise;v&&LI(v)&&(s=v)}if(!e&&s&&LI(s))return{token:s.token};let g,c=!1;if(_M()){r.exchangeTokenPromise||(r.exchangeTokenPromise=$T(NO(t,yield vM()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const v=yield r.exchangeTokenPromise;return yield yM(t,v),pu(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0),s=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?ZE.warn(v.message):ZE.error(v),u=v}return s?(g={token:s.token},pu(t,Object.assign(Object.assign({},r),{token:s})),yield yM(t,s)):g=GO(u),c&&wM(t,g),g}),ZT.apply(this,arguments)}function QT(n,e){const t=pi(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),pu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function EM(n){const{app:e}=n,t=pi(e);let r=t.tokenRefresher;r||(r=function HO(n){const{app:e}=n;return new CO((0,be.Z)(function*(){let r;if(r=pi(e).token?yield FI(n,!0):yield FI(n),r.error)throw r.error}),()=>!0,()=>{const t=pi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),pu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function wM(n,e){const t=pi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(s){}}function LI(n){return n.expireTimeMillis-Date.now()>0}function GO(n){return{token:$O(jO),error:n}}class zO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=pi(this.app);for(const t of e)QT(this.app,t.next);return Promise.resolve()}}const MM="app-check-internal";!function sP(){(0,ic._registerComponent)(new Mg.wA("app-check",n=>function qO(n,e){return new zO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(MM).initialize()})),(0,ic._registerComponent)(new Mg.wA(MM,n=>function WO(n){return{getToken:e=>FI(n,e),addTokenListener:e=>function YT(n,e,t,r){const{app:s}=n,u=pi(s),c={next:t,error:r,type:e};if(pu(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&LI(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),EM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>EM(n))}(n,"INTERNAL",e),removeTokenListener:e=>QT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ic.registerVersion)("@firebase/app-check","0.5.8")}();class tA{constructor(){return(0,Wn.vb)("app-check")}}"undefined"!=typeof window&&window;var cP=O(127);const NM=new f.OlP("angularfire2.auth.use-emulator"),RM=new f.OlP("angularfire2.auth.settings"),OM=new f.OlP("angularfire2.auth.tenant-id"),PM=new f.OlP("angularfire2.auth.langugage-code"),kM=new f.OlP("angularfire2.auth.use-device-language"),FM=new f.OlP("angularfire.auth.persistence"),LM=(n,e,t,r,s,u,c,g)=>(0,js.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=s,u&&v.useDeviceLanguage(),c)for(const[b,S]of Object.entries(c))v.settings[b]=S;return g&&v.setPersistence(g),v},[t,r,s,u,c,g]);let VM=(()=>{class n{constructor(t,r,s,u,c,g,v,b,S,x,L,q){const Z=new ei.x,_e=et(void 0).pipe((0,NI.Q)(c.outsideAngular),wn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,7092)))),(0,Mt.U)(()=>(0,js.on)(t,u,r)),(0,Mt.U)(ke=>LM(ke,u,g,b,S,x,v,L)),aM({bufferSize:1,refCount:!1}));if(No(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{_e.pipe(Ko()).subscribe();const pt=_e.pipe(wn(at=>at.getRedirectResult().then(Ot=>Ot,()=>null)),Wn.iC,aM({bufferSize:1,refCount:!1})),gt=_e.pipe(wn(at=>new On.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>at.onAuthStateChanged(Ft=>Ot.next(Ft),Ft=>Ot.error(Ft),()=>Ot.complete()))})))),bt=_e.pipe(wn(at=>new On.y(Ot=>({unsubscribe:u.runOutsideAngular(()=>at.onIdTokenChanged(Ft=>Ot.next(Ft),Ft=>Ot.error(Ft),()=>Ot.complete()))}))));this.authState=pt.pipe(uM(gt),(0,LT.R)(c.outsideAngular),(0,NI.Q)(c.insideAngular)),this.user=pt.pipe(uM(bt),(0,LT.R)(c.outsideAngular),(0,NI.Q)(c.insideAngular)),this.idToken=this.user.pipe(wn(at=>at?(0,gn.D)(at.getIdToken()):et(null))),this.idTokenResult=this.user.pipe(wn(at=>at?(0,gn.D)(at.getIdTokenResult()):et(null))),this.credential=(0,dO.T)(pt,Z,this.authState.pipe($r(at=>!at))).pipe((0,Mt.U)(at=>(null==at?void 0:at.user)?at:null),(0,LT.R)(c.outsideAngular),(0,NI.Q)(c.insideAngular))}return(0,js.pX)(this,_e,u,{spy:{apply:(ke,pt,gt)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&gt.then(bt=>Z.next(bt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(js.Dh),f.LFG(js.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Wn.HU),f.LFG(NM,8),f.LFG(RM,8),f.LFG(OM,8),f.LFG(PM,8),f.LFG(kM,8),f.LFG(FM,8),f.LFG(tA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function UM(n,e){return function hP(n,e=sS.z){return new On.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function rA(n,e){return UM(n,e).pipe((0,Mt.U)(t=>({payload:t,type:"query"})))}function UI(n,e){return rA(n,e).pipe($i(void 0),u_(),(0,Mt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,g)=>{const v=s.find(S=>S.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:c}})}),u}))}function BM(n,e,t){return UI(n,t).pipe(Hi((r,s)=>function pP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return iA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return iA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return iA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function T0(n,e=Ei.y){return n=null!=n?n:ID,(0,nr.e)((t,r)=>{let s,u=!0;t.subscribe((0,xn.x)(r,c=>{const g=e(c);(u||!n(s,g))&&(u=!1,s=g,r.next(c))}))})}(),(0,Mt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function iA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function jM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class $M{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=UI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Mt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe($i(void 0),u_(),$r(([r,s])=>s.length>0||!r),(0,Mt.U)(([r,s])=>s),Wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Hi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=jM(e);return BM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return rA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Wn.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(Wn.iC)}add(e){return this.ref.add(e)}doc(e){return new HM(this.ref.doc(e),this.afs)}}class HM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=qM(r,t);return new $M(s,u,this.afs)}snapshotChanges(){return function fP(n,e){return UM(n,e).pipe($i(void 0),u_(),(0,Mt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,gn.D)(this.ref.get(e)).pipe(Wn.iC)}}class mP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?UI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),$r(t=>t.length>0),Wn.iC):UI(this.query,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Hi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=jM(e);return BM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return rA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Wn.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(Wn.iC)}}const GM=new f.OlP("angularfire2.enableFirestorePersistence"),zM=new f.OlP("angularfire2.firestore.persistenceSettings"),yP=new f.OlP("angularfire2.firestore.settings"),_P=new f.OlP("angularfire2.firestore.use-emulator");function qM(n,e=(t=>t)){return{query:e(n),ref:n}}let YE=(()=>{class n{constructor(t,r,s,u,c,g,v,b,S,x,L,q,Z,_e,ke,pt,gt){this.schedulers=v;const bt=(0,js.on)(t,g,r),at=S;x&&LM(bt,g,L,Z,_e,ke,q,pt),[this.firestore,this.persistenceEnabled$]=(0,js.cc)(`${bt.name}.firestore`,"AngularFirestore",bt.name,()=>{const Ot=g.runOutsideAngular(()=>bt.firestore());if(u&&Ot.settings(u),at&&Ot.useEmulator(...at),s&&!No(c)){const Ft=()=>{try{return(0,gn.D)(Ot.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(an){return"undefined"!=typeof console&&console.warn(an),et(!1)}};return[Ot,g.runOutsideAngular(Ft)]}return[Ot,et(!1)]},[u,at,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=qM(s,r),g=this.schedulers.ngZone.run(()=>u);return new $M(g,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new mP(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new HM(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(js.Dh),f.LFG(js.xv,8),f.LFG(GM,8),f.LFG(yP,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Wn.HU),f.LFG(zM,8),f.LFG(_P,8),f.LFG(VM,8),f.LFG(NM,8),f.LFG(RM,8),f.LFG(OM,8),f.LFG(PM,8),f.LFG(kM,8),f.LFG(FM,8),f.LFG(tA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),BI=(()=>{class n{constructor(){cP.Z.registerVersion("angularfire",Wn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:GM,useValue:!0},{provide:zM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[YE]}),n})(),sA=(()=>{class n{constructor(t){this._client=t}getAll(){return this._client.collection("products").valueChanges({idField:"id"})}getOne(t){return this._client.doc("products/"+t).valueChanges({idField:"id"}).pipe(wn(r=>r?et(r):is(new Error("Item does not exist in firebase"))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(YE))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const WM=new f.OlP("GETS_ONE_PRODUCT_DTO");let oA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[sA,{provide:I0,useExisting:sA},{provide:WM,useExisting:sA}],imports:[[BI]]}),n})(),vP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar]]}),n})(),aA=(()=>{class n{constructor(){this._subject=new jr({})}select(){return this._subject.asObservable().pipe($r(t=>t!=={}))}setState(t){return et(this._subject.next(t)).pipe((0,Mt.U)(()=>{}))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const KM=new f.OlP("SELECTS_PRODUCT_CONTEXT_STORAGE"),ZM=new f.OlP("SETS_STATE_PRODUCT_CONTEXT_STORAGE");let EP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[aA,{provide:KM,useExisting:aA},{provide:ZM,useExisting:aA}],imports:[[]]}),n})(),YM=(()=>{class n{constructor(t){this._setsStateProductContextStorage=t}resolve(t,r){return this._setsStateProductContextStorage.setState({productId:t.params.productId}).pipe((0,Mt.U)(s=>!0))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ZM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),wP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[YM],imports:[[]]}),n})(),bP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar]]}),n})(),QM=(()=>{class n{constructor(t){this._client=t}getAll(){return this._client.collection("heroes").valueChanges({idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(YE))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),JM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[QM,{provide:w0,useExisting:QM}],imports:[[BI]]}),n})(),XM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar,bP,zi.forChild([{path:"",component:a_}]),C0,oA,JM,oA]]}),n})(),ex=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar]]}),n})(),tx=(()=>{class n{constructor(t){this._client=t}getAll(){return this._client.collection("team").valueChanges({idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(YE))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const nx=new f.OlP("GETS_ALL_OURTEAM_DTO");let IP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[tx,{provide:nx,useExisting:tx}],imports:[[BI]]}),n})(),QE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar,zi]]}),n})();function DP(n,e){if(1&n&&(f.TgZ(0,"div",3)(1,"div",4),f._UZ(2,"img",5),f.TgZ(3,"div",6)(4,"h3",7),f._uU(5),f._UZ(6,"br"),f.qZA(),f.TgZ(7,"h4",7),f._uU(8),f._UZ(9,"br"),f.qZA()()()()),2&n){const t=e.$implicit;f.xp6(2),f.Q6J("src",t.imageUrl,f.LSH),f.xp6(3),f.Oqu(t.name),f.xp6(3),f.Oqu(t.description)}}let CP=(()=>{class n{constructor(t){this._getsAllOurteamDto=t,this.team$=this._getsAllOurteamDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(nx))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-ourteam"]],decls:5,vars:3,consts:[[1,"center","container-fluid","background"],[1,"row"],["class","col-md",4,"ngFor","ngForOf"],[1,"col-md"],[1,"card","background",2,"width","42rem"],[1,"photo",3,"src"],[1,"card-body","background","containertext"],[1,"card-title","fw-bold"]],template:function(t,r){1&t&&(f._UZ(0,"br"),f.TgZ(1,"div",0)(2,"div",1),f.YNc(3,DP,10,3,"div",2),f.ALo(4,"async"),f.qZA()()),2&t&&(f.xp6(3),f.Q6J("ngForOf",f.lcZ(4,1,r.team$)))},directives:[Un],pipes:[Al],encapsulation:2,changeDetection:0}),n})(),jI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-goback"]],decls:3,vars:1,consts:[[1,"d-flex"],["type","button",1,"background","navtext",3,"routerLink"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"button",1),f._uU(2," MAIN "),f.qZA()()),2&t&&(f.xp6(1),f.Q6J("routerLink","/"))},directives:[Ku],encapsulation:2,changeDetection:0}),n})(),TP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-aboutus-page"]],decls:2,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-ourteam")(1,"lib-goback")},directives:[CP,jI],encapsulation:2,changeDetection:0}),n})(),AP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar,ex,QE,zi.forChild([{path:"",component:TP}]),IP,QE,ex]]}),n})(),rx=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Rp=(()=>{class n extends rx{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Il=new f.OlP("NgValueAccessor"),xP={provide:Il,useExisting:(0,f.Gpc)(()=>$I),multi:!0},RP=new f.OlP("CompositionEventMode");let $I=(()=>{class n extends rx{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function NP(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(RP,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([xP]),f.qOj]}),n})();function Th(n){return null==n||0===n.length}function sx(n){return null!=n&&"number"==typeof n.length}const Qi=new f.OlP("NgValidators"),Ah=new f.OlP("NgAsyncValidators"),OP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class uA{static min(e){return function ox(n){return e=>{if(Th(e.value)||Th(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ax(n){return e=>{if(Th(e.value)||Th(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function ux(n){return Th(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function lx(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function cx(n){return Th(n.value)||OP.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function dx(n){return e=>Th(e.value)||!sx(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function hx(n){return e=>sx(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function fx(n){if(!n)return HI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Th(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return vx(e)}static composeAsync(e){return Ex(e)}}function HI(n){return null}function px(n){return null!=n}function gx(n){const e=(0,f.QGY)(n)?(0,gn.D)(n):n;return(0,f.CqO)(e),e}function mx(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function yx(n,e){return e.map(t=>t(n))}function _x(n){return n.map(e=>function PP(n){return!n.validate}(e)?e:t=>e.validate(t))}function vx(n){if(!n)return null;const e=n.filter(px);return 0==e.length?null:function(t){return mx(yx(t,e))}}function lA(n){return null!=n?vx(_x(n)):null}function Ex(n){if(!n)return null;const e=n.filter(px);return 0==e.length?null:function(t){return function SP(...n){const e=(0,Va.jO)(n),{args:t,keys:r}=un(n),s=new On.y(u=>{const{length:c}=t;if(!c)return void u.complete();const g=new Array(c);let v=c,b=c;for(let S=0;S<c;S++){let x=!1;(0,qo.Xf)(t[S]).subscribe((0,xn.x)(u,L=>{x||(x=!0,b--),g[S]=L},()=>v--,void 0,()=>{(!v||!x)&&(b||u.next(r?Gl(r,g):g),u.complete())}))}});return e?s.pipe(dd(e)):s}(yx(t,e).map(gx)).pipe((0,Mt.U)(mx))}}function cA(n){return null!=n?Ex(_x(n)):null}function wx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bx(n){return n._rawValidators}function Ix(n){return n._rawAsyncValidators}function dA(n){return n?Array.isArray(n)?n:[n]:[]}function GI(n,e){return Array.isArray(n)?n.includes(e):n===e}function Dx(n,e){const t=dA(e);return dA(n).forEach(s=>{GI(t,s)||t.push(s)}),t}function Cx(n,e){return dA(e).filter(t=>!GI(n,t))}class Tx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Sh extends Tx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Es extends Tx{get formDirective(){return null}get path(){return null}}class Ax{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}let Sx=(()=>{class n extends Ax{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Sh,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),Mx=(()=>{class n extends Ax{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Es,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function JE(n,e){pA(n,e),e.valueAccessor.writeValue(n.value),function $P(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Nx(n,e)})}(n,e),function GP(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function HP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Nx(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function jP(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function WI(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ZI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function KI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pA(n,e){const t=bx(n);null!==e.validator?n.setValidators(wx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Ix(n);null!==e.asyncValidator?n.setAsyncValidators(wx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();KI(e._rawValidators,s),KI(e._rawAsyncValidators,s)}function ZI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=bx(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(c=>c!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=Ix(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(c=>c!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return KI(e._rawValidators,r),KI(e._rawAsyncValidators,r),t}function Nx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function yA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const XE="VALID",YI="INVALID",Dy="PENDING",e0="DISABLED";function vA(n){return(QI(n)?n.validators:n)||null}function kx(n){return Array.isArray(n)?lA(n):n||null}function EA(n,e){return(QI(e)?e.asyncValidators:n)||null}function Fx(n){return Array.isArray(n)?cA(n):n||null}function QI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Lx=n=>n instanceof t0,wA=n=>n instanceof JI;function Vx(n){return Lx(n)?n.value:n.getRawValue()}function Ux(n,e){const t=wA(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function Bx(n,e){wA(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new f.vHH(1002,"")})}class bA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=kx(this._rawValidators),this._composedAsyncValidatorFn=Fx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===XE}get invalid(){return this.status===YI}get pending(){return this.status==Dy}get disabled(){return this.status===e0}get enabled(){return this.status!==e0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=kx(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Fx(e)}addValidators(e){this.setValidators(Dx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Dx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Cx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Cx(e,this._rawAsyncValidators))}hasValidator(e){return GI(this._rawValidators,e)}hasAsyncValidator(e){return GI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Dy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=e0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=XE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===XE||this.status===Dy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?e0:XE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Dy,this._hasOwnPendingAsyncValidator=!0;const t=gx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function KP(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=wA(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:(n=>n instanceof YP)(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?e0:this.errors?YI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dy)?Dy:this._anyControlsHaveStatus(YI)?YI:XE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){QI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class t0 extends bA{constructor(e=null,t,r){super(vA(t),EA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),QI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){yA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){yA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class JI extends bA{constructor(e,t,r){super(vA(t),EA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Bx(this,e),Object.keys(e).forEach(r=>{Ux(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Vx(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class YP extends bA{constructor(e,t,r){super(vA(t),EA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Bx(this,e),e.forEach((r,s)=>{Ux(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Vx(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let zx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Wx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const DA=new f.OlP("NgModelWithFormControlWarning"),s1={provide:Es,useExisting:(0,f.Gpc)(()=>XI)};let XI=(()=>{class n extends Es{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ZI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return JE(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){WI(t.control||null,t,!1),yA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Px(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(WI(r||null,t),Lx(s)&&(JE(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Rx(n,e){pA(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function zP(n,e){return ZI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pA(this.form,this),this._oldForm&&ZI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Qi,10),f.Y36(Ah,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([s1]),f.qOj,f.TTD]}),n})();const u1={provide:Sh,useExisting:(0,f.Gpc)(()=>AA)};let AA=(()=>{class n extends Sh{constructor(t,r,s,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function mA(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===$I?t=u:function WP(n){return Object.getPrototypeOf(n.constructor)===Rp}(u)?r=u:s=u}),s||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function gA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function qI(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(Es,13),f.Y36(Qi,10),f.Y36(Ah,10),f.Y36(Il,10),f.Y36(DA,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([u1]),f.qOj,f.TTD]}),n})(),D1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Wx]]}),n})(),C1=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:DA,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[D1]}),n})(),lN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar,C1]]}),n})(),cN=(()=>{class n{constructor(t){this._client=t}add(t){return(0,gn.D)(this._client.collection("messages").add(t)).pipe((0,Mt.U)(()=>{}))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(YE))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const dN=new f.OlP("ADDS_MESSAGES_DTO");let hN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[cN,{provide:dN,useExisting:cN}],imports:[[BI]]}),n})(),T1=(()=>{class n{constructor(t){this._addsMessagesDto=t,this.contact=new JI({name:new t0("",[uA.required]),email:new t0("",[uA.required]),text:new t0("",[uA.required])})}onMessageSubmited(t){var r,s,u;t.invalid||(this._addsMessagesDto.add({name:null===(r=t.get("name"))||void 0===r?void 0:r.value,email:null===(s=t.get("email"))||void 0===s?void 0:s.value,text:null===(u=t.get("text"))||void 0===u?void 0:u.value}),this.contact.reset())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(dN))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-contactus"]],decls:5,vars:1,consts:[[3,"formGroup","ngSubmit"],["type","text","formControlName","name","placeholder","Name"],["type","text","formControlName","email","placeholder","Email"],["type","text","formControlName","text","placeholder","Text"],["type","submit","value","Submit"]],template:function(t,r){1&t&&(f.TgZ(0,"form",0),f.NdJ("ngSubmit",function(){return r.onMessageSubmited(r.contact)}),f._UZ(1,"input",1)(2,"input",2)(3,"input",3)(4,"input",4),f.qZA()),2&t&&f.Q6J("formGroup",r.contact)},directives:[zx,Mx,XI,$I,Sx,AA],encapsulation:2,changeDetection:0}),n})(),A1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-contactus-page"]],decls:2,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-contactus")(1,"lib-goback")},directives:[T1,jI],encapsulation:2,changeDetection:0}),n})(),S1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar,lN,js.hO,hN,lN,zi.forChild([{path:"",component:A1}]),QE]]}),n})();function M1(n,e){if(1&n&&(f.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"h5",3),f._uU(4),f.qZA(),f.TgZ(5,"h6",4),f._uU(6),f.qZA(),f.TgZ(7,"h6",4),f._uU(8),f.qZA(),f._UZ(9,"img",5),f.TgZ(10,"a",6),f._uU(11,"Dodaj do koszyka"),f.qZA()()()()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.name),f.xp6(2),f.Oqu(t.description),f.xp6(2),f.hij("",t.price," z\u0142"),f.xp6(1),f.Q6J("src",t.imageUrl,f.LSH)}}let x1=(()=>{class n{constructor(t,r){this._getsOneProductDto=t,this._selectsProductContextStorage=r,this.productDetail$=this._selectsProductContextStorage.select().pipe(wn(s=>this._getsOneProductDto.getOne(s.productId)))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(WM),f.Y36(KM))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-product-detail"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"card",2,"width","18rem"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],["width","100","height","200",3,"src"],["href","#",1,"card-link"]],template:function(t,r){1&t&&(f.YNc(0,M1,12,4,"div",0),f.ALo(1,"async")),2&t&&f.Q6J("ngIf",f.lcZ(1,1,r.productDetail$))},directives:[Jn],pipes:[Al],encapsulation:2,changeDetection:0}),n})(),N1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-productdetail-page"]],decls:5,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"h1"),f._uU(1,"ProductdetailPage"),f.qZA(),f._UZ(2,"lib-product-detail")(3,"lib-goback"),f._uU(4,">\n"))},directives:[x1,jI],encapsulation:2,changeDetection:0}),n})(),R1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar,vP,oA,EP,wP,zi.forChild([{path:"",component:N1,resolve:[YM]}]),QE]]}),n})(),O1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-confirmation-page"]],decls:2,vars:0,template:function(t,r){1&t&&(f._UZ(0,"lib-goback"),f._uU(1,">\n"))},directives:[jI],encapsulation:2,changeDetection:0}),n})(),P1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar,zi.forChild([{path:"",component:O1}]),QE]]}),n})();const k1=[{path:"home",loadChildren:()=>XM},{path:"aboutus",loadChildren:()=>AP},{path:"contactus",loadChildren:()=>S1},{path:"details/:productId",loadChildren:()=>R1},{path:"confirmation",loadChildren:()=>P1},{path:"",loadChildren:()=>XM}];let F1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[zi.forRoot(k1)],zi]}),n})(),L1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-button"]],decls:8,vars:3,consts:[[1,"container-flex"],["type","button",1,"background","navtext","navpaddingsright",3,"routerLink"],["type","button",1,"background","navtext","navpaddingsleft",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag-heart","text-white"],["fill-rule","evenodd","d","M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5Zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0ZM14 14V5H2v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1ZM8 7.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132Z"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"button",1),f._uU(2," ABOUT "),f.qZA(),f.TgZ(3,"button",1),f._uU(4," CONTACT "),f.qZA(),f.TgZ(5,"button",2),f.O4$(),f.TgZ(6,"svg",3),f._UZ(7,"path",4),f.qZA()()()),2&t&&(f.xp6(1),f.Q6J("routerLink","./aboutus"),f.xp6(2),f.Q6J("routerLink","./contactus"),f.xp6(2),f.Q6J("routerLink","./confirmation"))},directives:[Ku],encapsulation:2,changeDetection:0}),n})(),V1=(()=>{class n{constructor(){this.title="HACKATON"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"container-fluid","text-white","header","background"],[1,"display-6","fw-bold","mainheading"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"p",1),f._uU(2," E-COMMERCE by \u017byrafy "),f._UZ(3,"lib-button"),f.qZA()(),f._UZ(4,"router-outlet"))},directives:[L1,Xl],styles:[""]}),n})();const fN_firebase={projectId:"hakaton-2939c",appId:"1:328501125806:web:f4fdbfdcfbd55095c0433f",storageBucket:"hakaton-2939c.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBBe-onwqZKv-FSmDwnyRRflXyYmm_SleI",authDomain:"hakaton-2939c.firebaseapp.com",messagingSenderId:"328501125806"};class NA{constructor(e){return e}}const pN="firestore",RA=new f.OlP("angularfire2.firestore-instances"),$1={provide:class U1{constructor(){return(0,Wn.vb)(pN)}},deps:[[new f.FiY,RA]]},H1={provide:NA,useFactory:function B1(n,e){const t=(0,Wn.JM)(pN,n,e);return t&&new NA(t)},deps:[[new f.FiY,RA],class WE{constructor(e){return e}}]};let gN=(()=>{class n{constructor(){(0,VT.KN)("angularfire",Wn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[H1,$1]}),n})();class mN{}const $c="*";function yN(n,e=null){return{type:2,steps:n,options:e}}function _N(n){return{type:6,styles:n,offset:null}}function vN(n){Promise.resolve(null).then(n)}class r0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){vN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class EN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,s=0;const u=this.players.length;0==u?vN(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++s==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,g)=>Math.max(c,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const s=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(s)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Zt=!1;function wN(n){return new f.vHH(3e3,Zt)}function Dk(){return"undefined"!=typeof window&&void 0!==window.document}function PA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Mh(n){switch(n.length){case 0:return new r0;case 1:return n[0];default:return new EN(n)}}function bN(n,e,t,r,s={},u={}){const c=[],g=[];let v=-1,b=null;if(r.forEach(S=>{const x=S.offset,L=x==v,q=L&&b||{};Object.keys(S).forEach(Z=>{let _e=Z,ke=S[Z];if("offset"!==Z)switch(_e=e.normalizePropertyName(_e,c),ke){case"!":ke=s[Z];break;case $c:ke=u[Z];break;default:ke=e.normalizeStyleValue(Z,_e,ke,c)}q[_e]=ke}),L||g.push(q),b=q,v=x}),c.length)throw function fk(n){return new f.vHH(3502,Zt)}();return g}function kA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&FA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&FA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&FA(t,"destroy",n)))}}function FA(n,e,t){const r=t.totalTime,u=LA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function LA(n,e,t,r,s="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:u,disabled:!!c}}function Io(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function IN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let VA=(n,e)=>!1,DN=(n,e,t)=>[],CN=null;function UA(n){const e=n.parentNode||n.host;return e===CN?null:e}(PA()||"undefined"!=typeof Element)&&(Dk()?(CN=(()=>document.documentElement)(),VA=(n,e)=>{for(;e;){if(e===n)return!0;e=UA(e)}return!1}):VA=(n,e)=>n.contains(e),DN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Pp=null,TN=!1;function AN(n){Pp||(Pp=function Tk(){return"undefined"!=typeof document?document.body:null}()||{},TN=!!Pp.style&&"WebkitAppearance"in Pp.style);let e=!0;return Pp.style&&!function Ck(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Pp.style,!e&&TN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Pp.style)),e}const SN=VA,MN=DN;let xN=(()=>{class n{validateStyleProperty(t){return AN(t)}matchesElement(t,r){return!1}containsElement(t,r){return SN(t,r)}getParentElement(t){return UA(t)}query(t,r,s){return MN(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,u,c,g=[],v){return new r0(s,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),BA=(()=>{class n{}return n.NOOP=new xN,n})();const jA="ng-enter",tD="ng-leave",nD="ng-trigger",rD=".ng-trigger",RN="ng-animating",$A=".ng-animating";function kp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:HA(parseFloat(e[1]),e[2])}function HA(n,e){return"s"===e?1e3*n:n}function iD(n,e,t){return n.hasOwnProperty("duration")?n:function Mk(n,e,t){let s,u=0,c="";if("string"==typeof n){const g=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return e.push(wN()),{duration:0,delay:0,easing:""};s=HA(parseFloat(g[1]),g[2]);const v=g[3];null!=v&&(u=HA(parseFloat(v),g[4]));const b=g[5];b&&(c=b)}else s=n;if(!t){let g=!1,v=e.length;s<0&&(e.push(function z1(){return new f.vHH(3100,Zt)}()),g=!0),u<0&&(e.push(function q1(){return new f.vHH(3101,Zt)}()),g=!0),g&&e.splice(v,0,wN())}return{duration:s,delay:u,easing:c}}(n,e,t)}function Cy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function xh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Cy(n,t);return t}function PN(n,e,t){return t?e+":"+t+";":""}function kN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=PN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=PN(0,Rk(t),n.style[t]));n.setAttribute("style",e)}function Dl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const s=zA(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[s]),n.style[s]=e[r]}),PA()&&kN(n))}function Fp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=zA(t);n.style[r]=""}),PA()&&kN(n))}function s0(n){return Array.isArray(n)?1==n.length?n[0]:yN(n):n}const GA=new RegExp("{{\\s*(.+?)\\s*}}","g");function FN(n){let e=[];if("string"==typeof n){let t;for(;t=GA.exec(n);)e.push(t[1]);GA.lastIndex=0}return e}function sD(n,e,t){const r=n.toString(),s=r.replace(GA,(u,c)=>{let g=e[c];return e.hasOwnProperty(c)||(t.push(function K1(n){return new f.vHH(3003,Zt)}()),g=""),g.toString()});return s==r?n:s}function oD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Nk=/-+([a-z0-9])/g;function zA(n){return n.replace(Nk,(...e)=>e[1].toUpperCase())}function Rk(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Do(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Z1(n){return new f.vHH(3004,Zt)}()}}function LN(n,e){return window.getComputedStyle(n)[e]}function Vk(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Uk(n,e,t){if(":"==n[0]){const v=function Bk(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function lk(n){return new f.vHH(3016,Zt)}()),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function uk(n){return new f.vHH(3015,Zt)}()),e;const s=r[1],u=r[2],c=r[3];e.push(VN(s,c));"<"==u[0]&&!("*"==s&&"*"==c)&&e.push(VN(c,s))}(r,t,e)):t.push(n),t}const cD=new Set(["true","1"]),dD=new Set(["false","0"]);function VN(n,e){const t=cD.has(n)||dD.has(n),r=cD.has(e)||dD.has(e);return(s,u)=>{let c="*"==n||n==s,g="*"==e||e==u;return!c&&t&&"boolean"==typeof s&&(c=s?cD.has(n):dD.has(n)),!g&&r&&"boolean"==typeof u&&(g=u?cD.has(e):dD.has(e)),c&&g}}const jk=new RegExp("s*:selfs*,?","g");function qA(n,e,t,r){return new $k(n).build(e,t,r)}class $k{constructor(e){this._driver=e}build(e,t,r){const s=new zk(t);this._resetContextStyleTimingState(s);const u=Do(this,s0(e),s);return s.unsupportedCSSPropertiesFound.size&&s.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function Q1(){return new f.vHH(3006,Zt)}()),e.definitions.forEach(g=>{if(this._resetContextStyleTimingState(t),0==g.type){const v=g,b=v.name;b.toString().split(/\s*,\s*/).forEach(S=>{v.name=S,u.push(this.visitState(v,t))}),v.name=b}else if(1==g.type){const v=this.visitTransition(g,t);r+=v.queryCount,s+=v.depCount,c.push(v)}else t.errors.push(function J1(){return new f.vHH(3007,Zt)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=s||{};r.styles.forEach(g=>{if(hD(g)){const v=g;Object.keys(v).forEach(b=>{FN(v[b]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(oD(u.values()),t.errors.push(function X1(n,e){return new f.vHH(3008,Zt)}()))}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Do(this,s0(e.animation),t);return{type:1,matchers:Vk(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Lp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Do(this,r,t)),options:Lp(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const u=e.steps.map(c=>{t.currentTime=r;const g=Do(this,c,t);return s=Math.max(s,t.currentTime),g});return t.currentTime=s,{type:3,steps:u,options:Lp(e.options)}}visitAnimate(e,t){const r=function Wk(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return WA(iD(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=WA(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||iD(r,e),WA(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,u=e.styles?e.styles:_N({});if(5==u.type)s=this.visitKeyframes(u,t);else{let c=e.styles,g=!1;if(!c){g=!0;const b={};r.easing&&(b.easing=r.easing),c=_N(b)}t.currentTime+=r.duration+r.delay;const v=this.visitStyle(c,t);v.isEmptyStep=g,s=v}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==$c?r.push(c):t.errors.push(function ek(n){return new f.vHH(3002,Zt)}()):r.push(c)}):r.push(e.styles);let s=!1,u=null;return r.forEach(c=>{if(hD(c)){const g=c,v=g.easing;if(v&&(u=v,delete g.easing),!s)for(let b in g)if(g[b].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(g=>{if(!this._driver.validateStyleProperty(g))return delete c[g],void t.unsupportedCSSPropertiesFound.add(g);const v=t.collectedStyles[t.currentQuerySelector],b=v[g];let S=!0;b&&(u!=s&&u>=b.startTime&&s<=b.endTime&&(t.errors.push(function tk(n,e,t,r,s){return new f.vHH(3010,Zt)}()),S=!1),u=b.startTime),S&&(v[g]={startTime:u,endTime:s}),t.options&&function xk(n,e,t){const r=e.params||{},s=FN(n);s.length&&s.forEach(u=>{r.hasOwnProperty(u)||t.push(function W1(n){return new f.vHH(3001,Zt)}())})}(c[g],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function nk(){return new f.vHH(3011,Zt)}()),r;let u=0;const c=[];let g=!1,v=!1,b=0;const S=e.steps.map(pt=>{const gt=this._makeStyleAst(pt,t);let bt=null!=gt.offset?gt.offset:function qk(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(hD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(hD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(gt.styles),at=0;return null!=bt&&(u++,at=gt.offset=bt),v=v||at<0||at>1,g=g||at<b,b=at,c.push(at),gt});v&&t.errors.push(function rk(){return new f.vHH(3012,Zt)}()),g&&t.errors.push(function ik(){return new f.vHH(3200,Zt)}());const x=e.steps.length;let L=0;u>0&&u<x?t.errors.push(function sk(){return new f.vHH(3202,Zt)}()):0==u&&(L=1/(x-1));const q=x-1,Z=t.currentTime,_e=t.currentAnimateTimings,ke=_e.duration;return S.forEach((pt,gt)=>{const bt=L>0?gt==q?1:L*gt:c[gt],at=bt*ke;t.currentTime=Z+_e.delay+at,_e.duration=at,this._validateStyleAst(pt,t),pt.offset=bt,r.styles.push(pt)}),r}visitReference(e,t){return{type:8,animation:Do(this,s0(e.animation),t),options:Lp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Lp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Lp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function Hk(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(jk,"")),n=n.replace(/@\*/g,rD).replace(/@\w+/g,t=>rD+"-"+t.substr(1)).replace(/:animating/g,$A),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Io(t.collectedStyles,t.currentQuerySelector,{});const g=Do(this,s0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:s.limit||0,optional:!!s.optional,includeSelf:c,animation:g,originalSelector:e.selector,options:Lp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function ok(){return new f.vHH(3013,Zt)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:iD(e.timings,t.errors,!0);return{type:12,animation:Do(this,s0(e.animation),t),timings:r,options:null}}}class zk{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function hD(n){return!Array.isArray(n)&&"object"==typeof n}function Lp(n){return n?(n=Cy(n)).params&&(n.params=function Gk(n){return n?Cy(n):null}(n.params)):n={},n}function WA(n,e,t){return{duration:n,delay:e,easing:t}}function KA(n,e,t,r,s,u,c=null,g=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:u,totalTime:s+u,easing:c,subTimeline:g}}class fD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Yk=new RegExp(":enter","g"),Jk=new RegExp(":leave","g");function ZA(n,e,t,r,s,u={},c={},g,v,b=[]){return(new Xk).buildKeyframes(n,e,t,r,s,u,c,g,v,b)}class Xk{buildKeyframes(e,t,r,s,u,c,g,v,b,S=[]){b=b||new fD;const x=new YA(e,t,b,s,u,S,[]);x.options=v,x.currentTimeline.setStyles([c],null,x.errors,v),Do(this,r,x);const L=x.timelines.filter(q=>q.containsAnimation());if(Object.keys(g).length){let q;for(let Z=L.length-1;Z>=0;Z--){const _e=L[Z];if(_e.element===t){q=_e;break}}q&&!q.allowOnlyTimelineStyles()&&q.setStyles([g],null,x.errors,v)}return L.length?L.map(q=>q.buildKeyframes()):[KA(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const s=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,s,s.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?kp(r.duration):null,g=null!=r.delay?kp(r.delay):null;return 0!==c&&e.forEach(v=>{const b=t.appendInstructionToTimeline(v,c,g);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Do(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const u=e.options;if(u&&(u.params||u.delay)&&(s=t.createSubContext(u),s.transformIntoNewTimeline(),null!=u.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=pD);const c=kp(u.delay);s.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Do(this,c,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?kp(e.options.delay):0;e.steps.forEach(c=>{const g=t.createSubContext(e.options);u&&g.delayNextStep(u),Do(this,c,g),s=Math.max(s,g.currentTimeline.currentTime),r.push(g.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return iD(t.params?sD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,u=r.duration,g=t.createSubContext().currentTimeline;g.easing=r.easing,e.styles.forEach(v=>{g.forwardTime((v.offset||0)*u),g.setStyles(v.styles,v.easing,t.errors,t.options),g.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(g),t.transformIntoNewTimeline(s+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},u=s.delay?kp(s.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=pD);let c=r;const g=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=g.length;let v=null;g.forEach((b,S)=>{t.currentQueryIndex=S;const x=t.createSubContext(e.options,b);u&&x.delayNextStep(u),b===t.element&&(v=x.currentTimeline),Do(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),g=c*(t.currentQueryTotal-1);let v=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":v=g-v;break;case"full":v=r.currentStaggerTime}const S=t.currentTimeline;v&&S.delayNextStep(v);const x=S.currentTime;Do(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-x+(s.startTime-r.currentTimeline.startTime)}}const pD={};class YA{constructor(e,t,r,s,u,c,g,v){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=u,this.errors=c,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new gD(this._driver,t,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=kp(r.duration)),null!=r.delay&&(s.delay=kp(r.delay));const u=r.params;if(u){let c=s.params;c||(c=this.options.params={}),Object.keys(u).forEach(g=>{(!t||!c.hasOwnProperty(g))&&(c[g]=sD(u[g],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,u=new YA(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=pD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new eF(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(u),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,u,c){let g=[];if(s&&g.push(this.element),e.length>0){e=(e=e.replace(Yk,"."+this._enterClassName)).replace(Jk,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),g.push(...b)}return!u&&0==g.length&&c.push(function ak(n){return new f.vHH(3014,Zt)}()),g}}class gD{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new gD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||$c,this._currentKeyframe[t]=$c}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&(this._previousKeyframe.easing=t);const u=s&&s.params||{},c=function tF(n,e){const t={};let r;return n.forEach(s=>{"*"===s?(r=r||Object.keys(e),r.forEach(u=>{t[u]=$c})):xh(s,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(g=>{const v=sD(c[g],u,r);this._pendingStyles[g]=v,this._localTimelineStyles.hasOwnProperty(g)||(this._backFill[g]=this._globalTimelineStyles.hasOwnProperty(g)?this._globalTimelineStyles[g]:$c),this._updateStyle(g,v)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],s=e._styleSummary[t];(!r||s.time>r.time)&&this._updateStyle(t,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((g,v)=>{const b=xh(g,!0);Object.keys(b).forEach(S=>{const x=b[S];"!"==x?e.add(S):x==$c&&t.add(S)}),r||(b.offset=v/this.duration),s.push(b)});const u=e.size?oD(e.values()):[],c=t.size?oD(t.values()):[];if(r){const g=s[0],v=Cy(g);g.offset=0,v.offset=1,s=[g,v]}return KA(this.element,s,u,c,this.duration,this.startTime,this.easing,!1)}}class eF extends gD{constructor(e,t,r,s,u,c,g=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=u,this._stretchStartingKeyframe=g,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,g=t/c,v=xh(e[0],!1);v.offset=0,u.push(v);const b=xh(e[0],!1);b.offset=jN(g),u.push(b);const S=e.length-1;for(let x=1;x<=S;x++){let L=xh(e[x],!1);L.offset=jN((t+L.offset*r)/c),u.push(L)}r=c,t=0,s="",e=u}return KA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function jN(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class QA{}class nF extends QA{normalizePropertyName(e,t){return zA(e)}normalizeStyleValue(e,t,r,s){let u="";const c=r.toString().trim();if(rF[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const g=r.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&s.push(function Y1(n,e){return new f.vHH(3005,Zt)}())}return c+u}}const rF=(()=>function iF(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function $N(n,e,t,r,s,u,c,g,v,b,S,x,L){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:g,queriedElements:v,preStyleProps:b,postStyleProps:S,totalTime:x,errors:L}}const JA={};class HN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function sF(n,e,t,r,s){return n.some(u=>u(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){const s=this._stateStyles["*"],u=this._stateStyles[e],c=s?s.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,s,u,c,g,v,b,S){const x=[],L=this.ast.options&&this.ast.options.params||JA,Z=this.buildStyles(r,g&&g.params||JA,x),_e=v&&v.params||JA,ke=this.buildStyles(s,_e,x),pt=new Set,gt=new Map,bt=new Map,at="void"===s,Ot={params:Object.assign(Object.assign({},L),_e)},Ft=S?[]:ZA(e,t,this.ast.animation,u,c,Z,ke,Ot,b,x);let an=0;if(Ft.forEach(Hc=>{an=Math.max(Hc.duration+Hc.delay,an)}),x.length)return $N(t,this._triggerName,r,s,at,Z,ke,[],[],gt,bt,an,x);Ft.forEach(Hc=>{const Gc=Hc.element,sR=Io(gt,Gc,{});Hc.preStyleProps.forEach(Vp=>sR[Vp]=!0);const a0=Io(bt,Gc,{});Hc.postStyleProps.forEach(Vp=>a0[Vp]=!0),Gc!==t&&pt.add(Gc)});const ws=oD(pt.values());return $N(t,this._triggerName,r,s,at,Z,ke,Ft,ws,gt,bt,an)}}class oF{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},s=Cy(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(s[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(g=>{let v=c[g];v.length>1&&(v=sD(v,s,t));const b=this.normalizer.normalizePropertyName(g,t);v=this.normalizer.normalizeStyleValue(g,b,v,t),r[b]=v})}}),r}}class uF{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(s=>{this.states[s.name]=new oF(s.style,s.options&&s.options.params||{},r)}),GN(this.states,"true","1"),GN(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new HN(e,s,this.states))}),this.fallbackTransition=function lF(n,e,t){return new HN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,g)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(c=>c.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function GN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const cF=new fD;class dF{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=qA(this._driver,t,r,[]);if(r.length)throw function pk(n){return new f.vHH(3503,Zt)}();this._animations[e]=u}_buildPlayer(e,t,r){const s=e.element,u=bN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(s,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],u=this._animations[e];let c;const g=new Map;if(u?(c=ZA(this._driver,t,u,jA,tD,{},{},r,cF,s),c.forEach(S=>{const x=Io(g,S.element,{});S.postStyleProps.forEach(L=>x[L]=null)})):(s.push(function gk(){return new f.vHH(3300,Zt)}()),c=[]),s.length)throw function mk(n){return new f.vHH(3504,Zt)}();g.forEach((S,x)=>{Object.keys(S).forEach(L=>{S[L]=this._driver.computeStyle(x,L,$c)})});const b=Mh(c.map(S=>{const x=g.get(S.element);return this._buildPlayer(S,{},x)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function yk(n){return new f.vHH(3301,Zt)}();return t}listen(e,t,r,s){const u=LA(t,"","","");return kA(this._getPlayer(e),r,u,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const zN="ng-animate-queued",XA="ng-animate-disabled",mF=[],qN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},yF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},_a="__ng_removed";class eS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function wF(n){return null!=n?n:null}(r?e.value:e),r){const u=Cy(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const o0="void",tS=new eS(o0);class _F{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,va(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.hasOwnProperty(t))throw function _k(n,e){return new f.vHH(3302,Zt)}();if(null==r||0==r.length)throw function vk(n){return new f.vHH(3303,Zt)}();if(!function bF(n){return"start"==n||"done"==n}(r))throw function Ek(n,e){return new f.vHH(3400,Zt)}();const u=Io(this._elementListeners,e,[]),c={name:t,phase:r,callback:s};u.push(c);const g=Io(this._engine.statesByElement,e,{});return g.hasOwnProperty(t)||(va(e,nD),va(e,nD+"-"+t),g[t]=tS),()=>{this._engine.afterFlush(()=>{const v=u.indexOf(c);v>=0&&u.splice(v,1),this._triggers[t]||delete g[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function wk(n){return new f.vHH(3401,Zt)}();return t}trigger(e,t,r,s=!0){const u=this._getTrigger(t),c=new nS(this.id,t,e);let g=this._engine.statesByElement.get(e);g||(va(e,nD),va(e,nD+"-"+t),this._engine.statesByElement.set(e,g={}));let v=g[t];const b=new eS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&v&&b.absorbOptions(v.options),g[t]=b,v||(v=tS),b.value!==o0&&v.value===b.value){if(!function CF(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const u=t[s];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(v.params,b.params)){const _e=[],ke=u.matchStyles(v.value,v.params,_e),pt=u.matchStyles(b.value,b.params,_e);_e.length?this._engine.reportError(_e):this._engine.afterFlush(()=>{Fp(e,ke),Dl(e,pt)})}return}const L=Io(this._engine.playersByElement,e,[]);L.forEach(_e=>{_e.namespaceId==this.id&&_e.triggerName==t&&_e.queued&&_e.destroy()});let q=u.matchTransition(v.value,b.value,e,b.params),Z=!1;if(!q){if(!s)return;q=u.fallbackTransition,Z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:q,fromState:v,toState:b,player:c,isFallbackTransition:Z}),Z||(va(e,zN),c.onStart(()=>{Ty(e,zN)})),c.onDone(()=>{let _e=this.players.indexOf(c);_e>=0&&this.players.splice(_e,1);const ke=this._engine.playersByElement.get(e);if(ke){let pt=ke.indexOf(c);pt>=0&&ke.splice(pt,1)}}),this.players.push(c),L.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,rD,!0);r.forEach(s=>{if(s[_a])return;const u=this._engine.fetchNamespacesByElement(s);u.size?u.forEach(c=>c.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const g=[];if(Object.keys(u).forEach(v=>{if(c.set(v,u[v].value),this._triggers[v]){const b=this.trigger(e,v,o0,s);b&&g.push(b)}}),g.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Mh(g).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(u=>{const c=u.name;if(s.has(c))return;s.add(c);const v=this._triggers[c].fallbackTransition,b=r[c]||tS,S=new eS(o0),x=new nS(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:v,fromState:b,toState:S,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)s=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[_a];(!u||u===qN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){va(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(g=>{if(g.name==r.triggerName){const v=LA(u,r.triggerName,r.fromState.value,r.toState.value);v._data=e,kA(r.player,g.phase,v,g.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const u=r.transition.ast.depCount,c=s.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class vF{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new _F(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,s=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let g=this.driver.getParentElement(t);for(;g;){const v=s.get(g);if(v){const b=r.indexOf(v);r.splice(b+1,0,e),c=!0;break}g=this.driver.getParentElement(g)}}else for(let g=u;g>=0;g--)if(this.driver.containsElement(r[g].hostElement,t)){r.splice(g+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return s.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const s=Object.keys(r);for(let u=0;u<s.length;u++){const c=r[s[u]].namespaceId;if(c){const g=this._fetchNamespace(c);g&&t.add(g)}}}return t}trigger(e,t,r,s){if(mD(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!mD(t))return;const u=t[_a];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),va(e,XA)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ty(e,XA))}removeNode(e,t,r,s){if(mD(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,r,s,u){this.collectedLeaveElements.push(t),t[_a]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,s,u){return mD(t)?this._fetchNamespace(e).listen(t,r,s,u):()=>{}}_buildInstruction(e,t,r,s,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,rD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,$A,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Mh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[_a];if(r&&r.setForRemoval){if(e[_a]=qN,r.namespaceId){this.destroyInnerAnimations(e);const s=this._fetchNamespace(r.namespaceId);s&&s.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(XA))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)va(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Mh(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw function bk(n){return new f.vHH(3402,Zt)}()}_flushAnimations(e,t){const r=new fD,s=[],u=new Map,c=[],g=new Map,v=new Map,b=new Map,S=new Set;this.disabledNodes.forEach(st=>{S.add(st);const It=this.driver.query(st,".ng-animate-queued",!0);for(let xt=0;xt<It.length;xt++)S.add(It[xt])});const x=this.bodyNode,L=Array.from(this.statesByElement.keys()),q=ZN(L,this.collectedEnterElements),Z=new Map;let _e=0;q.forEach((st,It)=>{const xt=jA+_e++;Z.set(It,xt),st.forEach(tn=>va(tn,xt))});const ke=[],pt=new Set,gt=new Set;for(let st=0;st<this.collectedLeaveElements.length;st++){const It=this.collectedLeaveElements[st],xt=It[_a];xt&&xt.setForRemoval&&(ke.push(It),pt.add(It),xt.hasAnimation?this.driver.query(It,".ng-star-inserted",!0).forEach(tn=>pt.add(tn)):gt.add(It))}const bt=new Map,at=ZN(L,Array.from(pt));at.forEach((st,It)=>{const xt=tD+_e++;bt.set(It,xt),st.forEach(tn=>va(tn,xt))}),e.push(()=>{q.forEach((st,It)=>{const xt=Z.get(It);st.forEach(tn=>Ty(tn,xt))}),at.forEach((st,It)=>{const xt=bt.get(It);st.forEach(tn=>Ty(tn,xt))}),ke.forEach(st=>{this.processLeaveNode(st)})});const Ot=[],Ft=[];for(let st=this._namespaceList.length-1;st>=0;st--)this._namespaceList[st].drainQueuedTransitions(t).forEach(xt=>{const tn=xt.player,gi=xt.element;if(Ot.push(tn),this.collectedEnterElements.length){const bs=gi[_a];if(bs&&bs.setForMove){if(bs.previousTriggersValues&&bs.previousTriggersValues.has(xt.triggerName)){const Up=bs.previousTriggersValues.get(xt.triggerName),Rh=this.statesByElement.get(xt.element);Rh&&Rh[xt.triggerName]&&(Rh[xt.triggerName].value=Up)}return void tn.destroy()}}const Cl=!x||!this.driver.containsElement(x,gi),Co=bt.get(gi),Nh=Z.get(gi),Yn=this._buildInstruction(xt,r,Nh,Co,Cl);if(Yn.errors&&Yn.errors.length)return void Ft.push(Yn);if(Cl)return tn.onStart(()=>Fp(gi,Yn.fromStyles)),tn.onDestroy(()=>Dl(gi,Yn.toStyles)),void s.push(tn);if(xt.isFallbackTransition)return tn.onStart(()=>Fp(gi,Yn.fromStyles)),tn.onDestroy(()=>Dl(gi,Yn.toStyles)),void s.push(tn);const uR=[];Yn.timelines.forEach(bs=>{bs.stretchStartingKeyframe=!0,this.disabledNodes.has(bs.element)||uR.push(bs)}),Yn.timelines=uR,r.append(gi,Yn.timelines),c.push({instruction:Yn,player:tn,element:gi}),Yn.queriedElements.forEach(bs=>Io(g,bs,[]).push(tn)),Yn.preStyleProps.forEach((bs,Up)=>{const Rh=Object.keys(bs);if(Rh.length){let Bp=v.get(Up);Bp||v.set(Up,Bp=new Set),Rh.forEach(iS=>Bp.add(iS))}}),Yn.postStyleProps.forEach((bs,Up)=>{const Rh=Object.keys(bs);let Bp=b.get(Up);Bp||b.set(Up,Bp=new Set),Rh.forEach(iS=>Bp.add(iS))})});if(Ft.length){const st=[];Ft.forEach(It=>{st.push(function Ik(n,e){return new f.vHH(3505,Zt)}())}),Ot.forEach(It=>It.destroy()),this.reportError(st)}const an=new Map,ws=new Map;c.forEach(st=>{const It=st.element;r.has(It)&&(ws.set(It,It),this._beforeAnimationBuild(st.player.namespaceId,st.instruction,an))}),s.forEach(st=>{const It=st.element;this._getPreviousPlayers(It,!1,st.namespaceId,st.triggerName,null).forEach(tn=>{Io(an,It,[]).push(tn),tn.destroy()})});const Hc=ke.filter(st=>QN(st,v,b)),Gc=new Map;KN(Gc,this.driver,gt,b,$c).forEach(st=>{QN(st,v,b)&&Hc.push(st)});const a0=new Map;q.forEach((st,It)=>{KN(a0,this.driver,new Set(st),v,"!")}),Hc.forEach(st=>{const It=Gc.get(st),xt=a0.get(st);Gc.set(st,Object.assign(Object.assign({},It),xt))});const Vp=[],oR=[],aR={};c.forEach(st=>{const{element:It,player:xt,instruction:tn}=st;if(r.has(It)){if(S.has(It))return xt.onDestroy(()=>Dl(It,tn.toStyles)),xt.disabled=!0,xt.overrideTotalTime(tn.totalTime),void s.push(xt);let gi=aR;if(ws.size>1){let Co=It;const Nh=[];for(;Co=Co.parentNode;){const Yn=ws.get(Co);if(Yn){gi=Yn;break}Nh.push(Co)}Nh.forEach(Yn=>ws.set(Yn,gi))}const Cl=this._buildAnimation(xt.namespaceId,tn,an,u,a0,Gc);if(xt.setRealPlayer(Cl),gi===aR)Vp.push(xt);else{const Co=this.playersByElement.get(gi);Co&&Co.length&&(xt.parentPlayer=Mh(Co)),s.push(xt)}}else Fp(It,tn.fromStyles),xt.onDestroy(()=>Dl(It,tn.toStyles)),oR.push(xt),S.has(It)&&s.push(xt)}),oR.forEach(st=>{const It=u.get(st.element);if(It&&It.length){const xt=Mh(It);st.setRealPlayer(xt)}}),s.forEach(st=>{st.parentPlayer?st.syncPlayerEvents(st.parentPlayer):st.destroy()});for(let st=0;st<ke.length;st++){const It=ke[st],xt=It[_a];if(Ty(It,tD),xt&&xt.hasAnimation)continue;let tn=[];if(g.size){let Cl=g.get(It);Cl&&Cl.length&&tn.push(...Cl);let Co=this.driver.query(It,$A,!0);for(let Nh=0;Nh<Co.length;Nh++){let Yn=g.get(Co[Nh]);Yn&&Yn.length&&tn.push(...Yn)}}const gi=tn.filter(Cl=>!Cl.destroyed);gi.length?IF(this,It,gi):this.processLeaveNode(It)}return ke.length=0,Vp.forEach(st=>{this.players.push(st),st.onDone(()=>{st.destroy();const It=this.players.indexOf(st);this.players.splice(It,1)}),st.play()}),Vp}elementContainsData(e,t){let r=!1;const s=t[_a];return s&&s.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,u){let c=[];if(t){const g=this.playersByQueriedElement.get(e);g&&(c=g)}else{const g=this.playersByElement.get(e);if(g){const v=!u||u==o0;g.forEach(b=>{b.queued||!v&&b.triggerName!=s||c.push(b)})}}return(r||s)&&(c=c.filter(g=>!(r&&r!=g.namespaceId||s&&s!=g.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,g=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const b=v.element,S=b!==u,x=Io(r,b,[]);this._getPreviousPlayers(b,S,c,g,t.toState).forEach(q=>{const Z=q.getRealPlayer();Z.beforeDestroy&&Z.beforeDestroy(),q.destroy(),x.push(q)})}Fp(u,t.fromStyles)}_buildAnimation(e,t,r,s,u,c){const g=t.triggerName,v=t.element,b=[],S=new Set,x=new Set,L=t.timelines.map(Z=>{const _e=Z.element;S.add(_e);const ke=_e[_a];if(ke&&ke.removedBeforeQueried)return new r0(Z.duration,Z.delay);const pt=_e!==v,gt=function DF(n){const e=[];return YN(n,e),e}((r.get(_e)||mF).map(an=>an.getRealPlayer())).filter(an=>!!an.element&&an.element===_e),bt=u.get(_e),at=c.get(_e),Ot=bN(0,this._normalizer,0,Z.keyframes,bt,at),Ft=this._buildPlayer(Z,Ot,gt);if(Z.subTimeline&&s&&x.add(_e),pt){const an=new nS(e,g,_e);an.setRealPlayer(Ft),b.push(an)}return Ft});b.forEach(Z=>{Io(this.playersByQueriedElement,Z.element,[]).push(Z),Z.onDone(()=>function EF(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,Z.element,Z))}),S.forEach(Z=>va(Z,RN));const q=Mh(L);return q.onDestroy(()=>{S.forEach(Z=>Ty(Z,RN)),Dl(v,t.toStyles)}),x.forEach(Z=>{Io(s,Z,[]).push(q)}),q}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new r0(e.duration,e.delay)}}class nS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new r0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>kA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Io(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function mD(n){return n&&1===n.nodeType}function WN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function KN(n,e,t,r,s){const u=[];t.forEach(v=>u.push(WN(v)));const c=[];r.forEach((v,b)=>{const S={};v.forEach(x=>{const L=S[x]=e.computeStyle(b,x,s);(!L||0==L.length)&&(b[_a]=yF,c.push(b))}),n.set(b,S)});let g=0;return t.forEach(v=>WN(v,u[g++])),c}function ZN(n,e){const t=new Map;if(n.forEach(g=>t.set(g,[])),0==e.length)return t;const s=new Set(e),u=new Map;function c(g){if(!g)return 1;let v=u.get(g);if(v)return v;const b=g.parentNode;return v=t.has(b)?b:s.has(b)?1:c(b),u.set(g,v),v}return e.forEach(g=>{const v=c(g);1!==v&&t.get(v).push(g)}),t}function va(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function Ty(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function IF(n,e,t){Mh(t).onDone(()=>n.processLeaveNode(e))}function YN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof EN?YN(r.players,e):e.push(r)}}function QN(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(u=>s.add(u)):e.set(n,r),t.delete(n),!0}class yD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,u)=>{},this._transitionEngine=new vF(e,t,r),this._timelineEngine=new dF(e,t,r),this._transitionEngine.onRemovalComplete=(s,u)=>this.onRemovalComplete(s,u)}registerTrigger(e,t,r,s,u){const c=e+"-"+s;let g=this._triggerCache[c];if(!g){const v=[],S=qA(this._driver,u,v,[]);if(v.length)throw function hk(n,e){return new f.vHH(3404,Zt)}();g=function aF(n,e,t){return new uF(n,e,t)}(s,S,this._normalizer),this._triggerCache[c]=g}this._transitionEngine.registerTrigger(t,s,g)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r,s){this._transitionEngine.removeNode(e,t,s||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[u,c]=IN(r);this._timelineEngine.command(u,t,c,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,u){if("@"==r.charAt(0)){const[c,g]=IN(r);return this._timelineEngine.listen(c,t,g,u)}return this._transitionEngine.listen(e,t,r,s,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let AF=(()=>{class n{constructor(t,r,s){this._element=t,this._startStyles=r,this._endStyles=s,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Dl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Dl(this._element,this._initialStyles),this._endStyles&&(Dl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Fp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Fp(this._element,this._endStyles),this._endStyles=null),Dl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function rS(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const s=t[r];SF(s)&&(e=e||{},e[s]=n[s])}return e}function SF(n){return"display"===n||"position"===n}class JN{constructor(e,t,r,s){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:LN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class MF{validateStyleProperty(e){return AN(e)}matchesElement(e,t){return!1}containsElement(e,t){return SN(e,t)}getParentElement(e){return UA(e)}query(e,t,r){return MN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,s,u,c=[]){const v={duration:r,delay:s,fill:0==s?"both":"forwards"};u&&(v.easing=u);const b={},S=c.filter(L=>L instanceof JN);(function Ok(n,e){return 0===n||0===e})(r,s)&&S.forEach(L=>{let q=L.currentSnapshot;Object.keys(q).forEach(Z=>b[Z]=q[Z])}),t=function Pk(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(g=>{u.hasOwnProperty(g)||c.push(g),u[g]=t[g]}),c.length)for(var s=1;s<e.length;s++){let g=e[s];c.forEach(function(v){g[v]=LN(n,v)})}}return e}(e,t=t.map(L=>xh(L,!1)),b);const x=function TF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=rS(e[0]),e.length>1&&(r=rS(e[e.length-1]))):e&&(t=rS(e)),t||r?new AF(n,t,r):null}(e,t);return new JN(e,t,v,x)}}let xF=(()=>{class n extends mN{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?yN(t):t;return XN(this._renderer,null,r,"register",[s]),new NF(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class NF extends class G1{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new RF(this._id,e,t||{},this._renderer)}}class RF{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return XN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function XN(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const eR="@.disabled";let OF=(()=>{class n{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const g=null==c?void 0:c.parentNode(u);g&&c.removeChild(g,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new tR("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,g=r.id+"-"+this._currentId;this._currentId++,this.engine.register(g,t);const v=S=>{Array.isArray(S)?S.forEach(v):this.engine.registerTrigger(c,g,t,S.name,S)};return r.data.animation.forEach(v),new PF(this,g,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,g]=u;c(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(yD),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class tR{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==eR?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class PF extends tR{constructor(e,t,r,s){super(t,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==eR?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function kF(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function FF(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,s,u,c,g=>{this.factory.scheduleListenerCallback(g._data||-1,r,g)})}return this.delegate.listen(e,t,r)}}let LF=(()=>{class n extends yD{constructor(t,r,s){super(t.body,r,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le),f.LFG(BA),f.LFG(QA))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const nR=new f.OlP("AnimationModuleType"),rR=[{provide:mN,useClass:xF},{provide:QA,useFactory:function VF(){return new nF}},{provide:yD,useClass:LF},{provide:f.FYo,useFactory:function UF(n,e,t){return new OF(n,e,t)},deps:[hn,yD,f.R0b]}],iR=[{provide:BA,useFactory:()=>new MF},{provide:nR,useValue:"BrowserAnimations"},...rR],BF=[{provide:BA,useClass:xN},{provide:nR,useValue:"NoopAnimations"},...rR];let jF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?BF:iR}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:iR,imports:[Fo]}),n})(),$F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Ar,zi]]}),n})(),HF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[V1]}),n.\u0275inj=f.cJS({providers:[],imports:[[Fo,zi,hN,F1,$F,gN,JM,js.hO.initializeApp(fN_firebase),jF]]}),n})();(0,f.G48)(),Tu().bootstrapModule(HF).catch(n=>console.error(n))},5867:(Xe,we,O)=>{O.d(we,{Mq:()=>f.getApp,C6:()=>f.getApps,KN:()=>f.registerVersion});var f=O(9681);(0,f.registerVersion)("firebase","9.8.1","app")},127:(Xe,we,O)=>{O.d(we,{Z:()=>f.Z});var f=O(3942);f.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(Xe,we,O)=>{O.r(we);var f=O(5861),X=O(3942),P=O(2090),ue=O(9681),re=O(655),ge=O(1877),le=O(4859);const Oe=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},je=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new ge.Yd("@firebase/auth");function Ye(y,...h){qe.logLevel<=ge.in.ERROR&&qe.error(`Auth (${ue.SDK_VERSION}): ${y}`,...h)}function Te(y,...h){throw $e(y,...h)}function Ee(y,...h){return $e(y,...h)}function Ie(y,h,m){const E=Object.assign(Object.assign({},je()),{[h]:m});return new P.LL("auth","Firebase",E).create(h,{appName:y.name})}function He(y,h,m){if(!(h instanceof m))throw m.name!==h.constructor.name&&Te(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(y,...h){if("string"!=typeof y){const m=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return fe.create(y,...h)}function j(y,h,...m){if(!y)throw $e(h,...m)}function ve(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ye(h),new Error(h)}function K(y,h){y||ve(h)}const ie=new Map;function ee(y){K(y instanceof Function,"Expected a class definition");let h=ie.get(y);return h?(K(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ie.set(y,h),h)}function Pe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ut(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Jt{constructor(h,m){this.shortDelay=h,this.longDelay=m,K(m>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Lt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Tn(y,h){K(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return h?`${m}${h.startsWith("/")?h.slice(1):h}`:m}class nn{static initialize(h,m,E){this.fetchImpl=h,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ir=new Jt(3e4,6e4);function qt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function kt(y,h,m,E){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(y,h,m,E,A={}){return Wr(y,A,(0,f.Z)(function*(){let R={},W={};E&&("GET"===h?W=E:R={body:JSON.stringify(E)});const pe=(0,P.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),nn.fetch()(Is(y,y.config.apiHost,m,pe),Object.assign({method:h,headers:Le,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Wr(y,h,m){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(y,h,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Yt),h);try{const A=new Kr(y),R=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const W=yield R.json();if("needConfirmation"in W)throw Mi(y,"account-exists-with-different-credential",W);if(R.ok&&!("errorMessage"in W))return W;{const pe=R.ok?W.errorMessage:W.error.message,[Le,Ze]=pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Mi(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===Le)throw Mi(y,"email-already-in-use",W);const yt=E[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw Ie(y,yt,Ze);Te(y,yt)}}catch(A){if(A instanceof P.ZR)throw A;Te(y,"network-request-failed")}})).apply(this,arguments)}function Dr(y,h,m,E){return Si.apply(this,arguments)}function Si(){return(Si=(0,f.Z)(function*(y,h,m,E,A={}){const R=yield kt(y,h,m,E,A);return"mfaPendingCredential"in R&&Te(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Is(y,h,m,E){const A=`${h}${m}?${E}`;return y.config.emulator?Tn(y.config,A):`${y.config.apiScheme}://${A}`}class Kr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),Ir.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mi(y,h,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=Ee(y,h,E);return A.customData._tokenResponse=m,A}function Zr(){return(Zr=(0,f.Z)(function*(y,h){return kt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function vn(y,h){return An.apply(this,arguments)}function An(){return(An=(0,f.Z)(function*(y,h){return kt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qs(y,h){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,f.Z)(function*(y,h){return kt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function $n(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function To(){return(To=(0,f.Z)(function*(y,h=!1){const m=(0,P.m9)(y),E=yield m.getIdToken(h),A=it(E);j(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,W=null==R?void 0:R.sign_in_provider;return{claims:A,token:E,authTime:$n(Gt(A.auth_time)),issuedAtTime:$n(Gt(A.iat)),expirationTime:$n(Gt(A.exp)),signInProvider:W||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Gt(y){return 1e3*Number(y)}function it(y){const[h,m,E]=y.split(".");if(void 0===h||void 0===m||void 0===E)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,P.tV)(m);return A?JSON.parse(A):(Ye("Failed to decode base64 JWT payload"),null)}catch(A){return Ye("Caught error parsing JWT payload as JSON",A),null}}function cr(y,h){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(y,h,m=!1){if(m)return h;try{return yield h}catch(E){throw E instanceof P.ZR&&Vt(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Vt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ws{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var m;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield m.iteration()}),E)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&h.schedule(!0))}h.schedule()})()}}class dr{constructor(h,m){this.createdAt=h,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=$n(this.lastLoginAt),this.creationTime=$n(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function hr(y){return V.apply(this,arguments)}function V(){return(V=(0,f.Z)(function*(y){var h;const m=y.auth,E=yield y.getIdToken(),A=yield cr(y,qs(m,{idToken:E}));j(null==A?void 0:A.users.length,m,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const W=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?H(R.providerUserInfo):[],pe=De(y.providerData,W),yt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==pe?void 0:pe.length)),lt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:pe,metadata:new dr(R.createdAt,R.lastLoginAt),isAnonymous:yt};Object.assign(y,lt)})).apply(this,arguments)}function z(){return(z=(0,f.Z)(function*(y){const h=(0,P.m9)(y);yield hr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function De(y,h){return[...y.filter(E=>!h.some(A=>A.providerId===E.providerId)),...h]}function H(y){return y.map(h=>{var{providerId:m}=h,E=(0,re._T)(h,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ne(){return(Ne=(0,f.Z)(function*(y,h){const m=yield Wr(y,{},(0,f.Z)(function*(){const E=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,W=Is(y,A,"/v1/token",`key=${R}`),pe=yield y._getAdditionalHeaders();return pe["Content-Type"]="application/x-www-form-urlencoded",nn.fetch()(W,{method:"POST",headers:pe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Je{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){j(h.idToken,"internal-error"),j(void 0!==h.idToken,"internal-error"),j(void 0!==h.refreshToken,"internal-error");const m="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function vt(y){const h=it(y);return j(h,"internal-error"),j(void 0!==h.exp,"internal-error"),j(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,m)}getToken(h,m=!1){var E=this;return(0,f.Z)(function*(){return j(!E.accessToken||E.refreshToken,h,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,m){var E=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:W}=yield function J(y,h){return Ne.apply(this,arguments)}(h,m);E.updateTokensAndExpiration(A,R,Number(W))})()}updateTokensAndExpiration(h,m,E){this.refreshToken=m||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,m){const{refreshToken:E,accessToken:A,expirationTime:R}=m,W=new Je;return E&&(j("string"==typeof E,"internal-error",{appName:h}),W.refreshToken=E),A&&(j("string"==typeof A,"internal-error",{appName:h}),W.accessToken=A),R&&(j("number"==typeof R,"internal-error",{appName:h}),W.expirationTime=R),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Je,this.toJSON())}_performRefresh(){return ve("not implemented")}}function ht(y,h){j("string"==typeof y||void 0===y,"internal-error",{appName:h})}class Dt{constructor(h){var{uid:m,auth:E,stsTokenManager:A}=h,R=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ws(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new dr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var m=this;return(0,f.Z)(function*(){const E=yield cr(m,m.stsTokenManager.getToken(m.auth,h));return j(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(h){return function mi(y){return To.apply(this,arguments)}(this,h)}reload(){return function G(y){return z.apply(this,arguments)}(this)}_assign(h){this!==h&&(j(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(m=>Object.assign({},m)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Dt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,m=!1){var E=this;return(0,f.Z)(function*(){let A=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),A=!0),m&&(yield hr(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,f.Z)(function*(){const m=yield h.getIdToken();return yield cr(h,function mt(y,h){return Zr.apply(this,arguments)}(h.auth,{idToken:m})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,m){var E,A,R,W,pe,Le,Ze,yt;const lt=null!==(E=m.displayName)&&void 0!==E?E:void 0,In=null!==(A=m.email)&&void 0!==A?A:void 0,ci=null!==(R=m.phoneNumber)&&void 0!==R?R:void 0,nc=null!==(W=m.photoURL)&&void 0!==W?W:void 0,Qy=null!==(pe=m.tenantId)&&void 0!==pe?pe:void 0,na=null!==(Le=m._redirectEventId)&&void 0!==Le?Le:void 0,Sd=null!==(Ze=m.createdAt)&&void 0!==Ze?Ze:void 0,Md=null!==(yt=m.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:rf,emailVerified:xd,isAnonymous:di,providerData:sf,stsTokenManager:of}=m;j(rf&&of,h,"internal-error");const Ku=Je.fromJSON(this.name,of);j("string"==typeof rf,h,"internal-error"),ht(lt,h.name),ht(In,h.name),j("boolean"==typeof xd,h,"internal-error"),j("boolean"==typeof di,h,"internal-error"),ht(ci,h.name),ht(nc,h.name),ht(Qy,h.name),ht(na,h.name),ht(Sd,h.name),ht(Md,h.name);const rc=new Dt({uid:rf,auth:h,email:In,emailVerified:xd,displayName:lt,isAnonymous:di,photoURL:nc,phoneNumber:ci,tenantId:Qy,stsTokenManager:Ku,createdAt:Sd,lastLoginAt:Md});return sf&&Array.isArray(sf)&&(rc.providerData=sf.map(Zu=>Object.assign({},Zu))),na&&(rc._redirectEventId=na),rc}static _fromIdTokenResponse(h,m,E=!1){return(0,f.Z)(function*(){const A=new Je;A.updateFromServerResponse(m);const R=new Dt({uid:m.localId,auth:h,stsTokenManager:A,isAnonymous:E});return yield hr(R),R})()}}const Et=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,f.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,f.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,f.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function Fn(y,h,m){return`firebase:${y}:${h}:${m}`}class Cr{constructor(h,m,E){this.persistence=h,this.auth=m,this.userKey=E;const{config:A,name:R}=this.auth;this.fullUserKey=Fn(this.userKey,A.apiKey,R),this.fullPersistenceKey=Fn("persistence",A.apiKey,R),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const m=yield h.persistence._get(h.fullUserKey);return m?Dt._fromJSON(h.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var m=this;return(0,f.Z)(function*(){if(m.persistence===h)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=h,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,m,E="authUser"){return(0,f.Z)(function*(){if(!m.length)return new Cr(ee(Et),h,E);const A=(yield Promise.all(m.map(function(){var Ze=(0,f.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let R=A[0]||ee(Et);const W=Fn(E,h.config.apiKey,h.name);let pe=null;for(const Ze of m)try{const yt=yield Ze._get(W);if(yt){const lt=Dt._fromJSON(h,yt);Ze!==R&&(pe=lt),R=Ze;break}}catch(yt){}const Le=A.filter(Ze=>Ze._shouldAllowMigration);return R._shouldAllowMigration&&Le.length?(R=Le[0],pe&&(yield R._set(W,pe.toJSON())),yield Promise.all(m.map(function(){var Ze=(0,f.Z)(function*(yt){if(yt!==R)try{yield yt._remove(W)}catch(lt){}});return function(yt){return Ze.apply(this,arguments)}}())),new Cr(R,h,E)):new Cr(R,h,E)})()}}function gu(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ln(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Ea(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Xi(h))return"Blackberry";if(Vn(h))return"Webos";if(mu(h))return"Safari";if((h.includes("chrome/")||wa(h))&&!h.includes("edge/"))return"Chrome";if(Tr(h))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Ea(y=(0,P.z$)()){return/firefox\//i.test(y)}function mu(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function wa(y=(0,P.z$)()){return/crios\//i.test(y)}function Ln(y=(0,P.z$)()){return/iemobile/i.test(y)}function Tr(y=(0,P.z$)()){return/android/i.test(y)}function Xi(y=(0,P.z$)()){return/blackberry/i.test(y)}function Vn(y=(0,P.z$)()){return/webos/i.test(y)}function Lr(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ds(y=(0,P.z$)()){return Lr(y)||Tr(y)||Vn(y)||Xi(y)||/windows phone/i.test(y)||Ln(y)}function Ao(y,h=[]){let m;switch(y){case"Browser":m=gu((0,P.z$)());break;case"Worker":m=`${gu((0,P.z$)())}-${y}`;break;default:m=y}const E=h.length?h.join(","):"FirebaseCore-web";return`${m}/JsCore/${ue.SDK_VERSION}/${E}`}class Vr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,m){const E=R=>new Promise((W,pe)=>{try{W(h(R))}catch(Le){pe(Le)}});E.onAbort=m,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var m=this;return(0,f.Z)(function*(){if(m.auth.currentUser===h)return;const E=[];try{for(const A of m.queue)yield A(h),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const R of E)try{R()}catch(W){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A.message})}})()}}class We{constructor(h,m,E){this.app=h,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xt(this),this.idTokenSubscription=new Xt(this),this.beforeStateQueue=new Vr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,m){var E=this;return m&&(this._popupRedirectResolver=ee(m)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,R;if(!E._deleted&&(E.persistenceManager=yield Cr.create(E,h),!E._deleted)){if(null===(A=E._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(W){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const m=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||m){if(h.currentUser&&m&&h.currentUser.uid===m.uid)return h._currentUser._assign(m),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(m,!0)}})()}initializeCurrentUser(h){var m=this;return(0,f.Z)(function*(){var E;const A=yield m.assertedPersistence.getCurrentUser();let R=A,W=!1;if(h&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const pe=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Le=null==R?void 0:R._redirectEventId,Ze=yield m.tryRedirectSignIn(h);(!pe||pe===Le)&&(null==Ze?void 0:Ze.user)&&(R=Ze.user,W=!0)}if(!R)return m.directlySetCurrentUser(null);if(!R._redirectEventId){if(W)try{yield m.beforeStateQueue.runMiddleware(R)}catch(pe){R=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(pe))}return R?m.reloadAndSetCurrentUserOrClear(R):m.directlySetCurrentUser(null)}return j(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===R._redirectEventId?m.directlySetCurrentUser(R):m.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var m=this;return(0,f.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,h,!0)}catch(A){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var m=this;return(0,f.Z)(function*(){try{yield hr(h)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Qe(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var m=this;return(0,f.Z)(function*(){const E=h?(0,P.m9)(h):null;return E&&j(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(h,m=!1){var E=this;return(0,f.Z)(function*(){if(!E._deleted)return h&&j(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,f.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var m=this;return this.queue((0,f.Z)(function*(){yield m.assertedPersistence.setPersistence(ee(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,m,E){return this.registerStateListener(this.authStateSubscription,h,m,E)}beforeAuthStateChanged(h,m){return this.beforeStateQueue.pushCallback(h,m)}onIdTokenChanged(h,m,E){return this.registerStateListener(this.idTokenSubscription,h,m,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,m){var E=this;return(0,f.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var m=this;return(0,f.Z)(function*(){if(!m.redirectPersistenceManager){const E=h&&ee(h)||m._popupRedirectResolver;j(E,m,"argument-error"),m.redirectPersistenceManager=yield Cr.create(m,[ee(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(h){var m=this;return(0,f.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,f.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===h?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?m.redirectUser:null})()}_persistUserIfCurrent(h){var m=this;return(0,f.Z)(function*(){if(h===m.currentUser)return m.queue((0,f.Z)(function*(){return m.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,m,E,A){if(this._deleted)return()=>{};const R="function"==typeof m?m:m.next.bind(m),W=this._isInitialized?Promise.resolve():this._initializationPromise;return j(W,this,"internal-error"),W.then(()=>R(this.currentUser)),"function"==typeof m?h.addObserver(m,E,A):h.addObserver(m)}directlySetCurrentUser(h){var m=this;return(0,f.Z)(function*(){m.currentUser&&m.currentUser!==h&&(m._currentUser._stopProactiveRefresh(),h&&m.isProactiveRefreshEnabled&&h._startProactiveRefresh()),m.currentUser=h,h?yield m.assertedPersistence.setCurrentUser(h):yield m.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ao(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var m;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(m=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function ot(y){return(0,P.m9)(y)}class Xt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(m=>this.observer=m)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function xi(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Ni(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class yi{constructor(h,m){this.providerId=h,this.signInMethod=m}toJSON(){return ve("not implemented")}_getIdTokenResponse(h){return ve("not implemented")}_linkToIdToken(h,m){return ve("not implemented")}_getReauthenticationResolver(h){return ve("not implemented")}}function Sn(y,h){return St.apply(this,arguments)}function St(){return(St=(0,f.Z)(function*(y,h){return kt(y,"POST","/v1/accounts:resetPassword",qt(y,h))})).apply(this,arguments)}function Ia(y,h){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,f.Z)(function*(y,h){return kt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function yu(y,h){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,f.Z)(function*(y,h){return kt(y,"POST","/v1/accounts:update",qt(y,h))})).apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPassword",qt(y,h))})).apply(this,arguments)}function As(y,h){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(y,h){return kt(y,"POST","/v1/accounts:sendOobCode",qt(y,h))})).apply(this,arguments)}function rn(y,h){return _u.apply(this,arguments)}function _u(){return(_u=(0,f.Z)(function*(y,h){return As(y,h)})).apply(this,arguments)}function Da(y,h){return Br.apply(this,arguments)}function Br(){return(Br=(0,f.Z)(function*(y,h){return As(y,h)})).apply(this,arguments)}function Ri(y,h){return vu.apply(this,arguments)}function vu(){return(vu=(0,f.Z)(function*(y,h){return As(y,h)})).apply(this,arguments)}function qc(y,h){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,f.Z)(function*(y,h){return As(y,h)})).apply(this,arguments)}function Tl(){return(Tl=(0,f.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,h))})).apply(this,arguments)}function Wc(){return(Wc=(0,f.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,h))})).apply(this,arguments)}class fr extends yi{constructor(h,m,E,A=null){super("password",E),this._email=h,this._password=m,this._tenantId=A}static _fromEmailAndPassword(h,m){return new fr(h,m,"password")}static _fromEmailAndCode(h,m,E=null){return new fr(h,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(h){var m=this;return(0,f.Z)(function*(){switch(m.signInMethod){case"password":return function Un(y,h){return Zs.apply(this,arguments)}(h,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Pi(y,h){return Tl.apply(this,arguments)}(h,{email:m._email,oobCode:m._password});default:Te(h,"internal-error")}})()}_linkToIdToken(h,m){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return Ia(h,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function jp(y,h){return Wc.apply(this,arguments)}(h,{idToken:m,email:E._email,oobCode:E._password});default:Te(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ss(y,h){return Kc.apply(this,arguments)}function Kc(){return(Kc=(0,f.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithIdp",qt(y,h))})).apply(this,arguments)}class es extends yi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const m=new es(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(m.idToken=h.idToken),h.accessToken&&(m.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(m.nonce=h.nonce),h.pendingToken&&(m.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(m.accessToken=h.oauthToken,m.secret=h.oauthTokenSecret):Te("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A}=m,R=(0,re._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const W=new es(E,A);return W.idToken=R.idToken||void 0,W.accessToken=R.accessToken||void 0,W.secret=R.secret,W.nonce=R.nonce,W.pendingToken=R.pendingToken||null,W}_getIdTokenResponse(h){return Ss(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,Ss(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,Ss(h,m)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),h.postBody=(0,P.xO)(m)}return h}}function Al(y,h){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,f.Z)(function*(y,h){return kt(y,"POST","/v1/accounts:sendVerificationCode",qt(y,h))})).apply(this,arguments)}function Ms(){return(Ms=(0,f.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,h))})).apply(this,arguments)}function Yc(){return(Yc=(0,f.Z)(function*(y,h){const m=yield Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,h));if(m.temporaryProof)throw Mi(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Gp={USER_NOT_FOUND:"user-not-found"};function Qc(){return(Qc=(0,f.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Gp)})).apply(this,arguments)}class So extends yi{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,m){return new So({verificationId:h,verificationCode:m})}static _fromTokenResponse(h,m){return new So({phoneNumber:h,temporaryProof:m})}_getIdTokenResponse(h){return function Sl(y,h){return Ms.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,m){return function Hp(y,h){return Yc.apply(this,arguments)}(h,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function zp(y,h){return Qc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return h&&m?{temporaryProof:h,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:R}=h;return E||m||A||R?new So({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:R}):null}}class Eu{constructor(h){var m,E,A,R,W,pe;const Le=(0,P.zd)((0,P.pd)(h)),Ze=null!==(m=Le.apiKey)&&void 0!==m?m:null,yt=null!==(E=Le.oobCode)&&void 0!==E?E:null,lt=function Oh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);j(Ze&&yt&&lt,"argument-error"),this.apiKey=Ze,this.operation=lt,this.code=yt,this.continueUrl=null!==(R=Le.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(W=Le.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(pe=Le.tenantId)&&void 0!==pe?pe:null}static parseLink(h){const m=function Ca(y){const h=(0,P.zd)((0,P.pd)(y)).link,m=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,E=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(E?(0,P.zd)((0,P.pd)(E)).link:null)||E||m||h||y}(h);try{return new Eu(m)}catch(E){return null}}}let Xc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return fr._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=Eu.parseLink(E);return j(A,"argument-error"),fr._fromEmailAndCode(m,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class pr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ys extends pr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class ki extends Ys{static credentialFromJSON(h){const m="string"==typeof h?JSON.parse(h):h;return j("providerId"in m&&"signInMethod"in m,"argument-error"),es._fromParams(m)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return j(h.idToken||h.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return ki.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return ki.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:R,nonce:W,providerId:pe}=h;if(!E&&!A&&!m&&!R||!pe)return null;try{return new ki(pe)._credential({idToken:m,accessToken:E,nonce:W,pendingToken:R})}catch(Le){return null}}}let Mo=(()=>{class y extends Ys{constructor(){super("facebook.com")}static credential(m){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ed=(()=>{class y extends Ys{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return y.credential(E,A)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ph=(()=>{class y extends Ys{constructor(){super("github.com")}static credential(m){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Qs extends yi{constructor(h,m){super(h,h),this.pendingToken=m}_getIdTokenResponse(h){return Ss(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,Ss(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,Ss(h,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A,pendingToken:R}=m;return E&&A&&R&&E===A?new Qs(E,R):null}static _create(h,m){return new Qs(h,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Sr extends pr{constructor(h){j(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Sr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Sr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const m=Qs.fromJSON(h);return j(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:m,providerId:E}=h;if(!m||!E)return null;try{return Qs._create(E,m)}catch(A){return null}}}let td=(()=>{class y extends Ys{constructor(){super("twitter.com")}static credential(m,E){return es._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return y.credential(E,A)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Mr(y,h){return No.apply(this,arguments)}function No(){return(No=(0,f.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signUp",qt(y,h))})).apply(this,arguments)}class Jr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,m,E,A=!1){return(0,f.Z)(function*(){const R=yield Dt._fromIdTokenResponse(h,E,A),W=Ml(E);return new Jr({user:R,providerId:W,_tokenResponse:E,operationType:m})})()}static _forOperation(h,m,E){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const A=Ml(E);return new Jr({user:h,providerId:A,_tokenResponse:E,operationType:m})})()}}function Ml(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function xl(){return(xl=(0,f.Z)(function*(y){var h;const m=ot(y);if(yield m._initializationPromise,null===(h=m.currentUser)||void 0===h?void 0:h.isAnonymous)return new Jr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Mr(m,{returnSecureToken:!0}),A=yield Jr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ro extends P.ZR{constructor(h,m,E,A){var R;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Ro.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,m,E,A){return new Ro(h,m,E,A)}}function Nl(y,h,m,E){return("reauthenticate"===h?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ro._fromErrorAndOperation(y,R,h,E):R})}function Fi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function sn(){return(sn=(0,f.Z)(function*(y,h){const m=(0,P.m9)(y);yield Qt(!0,m,h);const{providerUserInfo:E}=yield vn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[h]}),A=Fi(E||[]);return m.providerData=m.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ta(y,h){return Js.apply(this,arguments)}function Js(){return(Js=(0,f.Z)(function*(y,h,m=!1){const E=yield cr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),m);return Jr._forOperation(y,"link",E)})).apply(this,arguments)}function Qt(y,h,m){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,f.Z)(function*(y,h,m){yield hr(h);const A=!1===y?"provider-already-linked":"no-such-provider";j(Fi(h.providerData).has(m)===y,h.auth,A)})).apply(this,arguments)}function wu(y,h){return xs.apply(this,arguments)}function xs(){return(xs=(0,f.Z)(function*(y,h,m=!1){const{auth:E}=y,A="reauthenticate";try{const R=yield cr(y,Nl(E,A,h,y),m);j(R.idToken,E,"internal-error");const W=it(R.idToken);j(W,E,"internal-error");const{sub:pe}=W;return j(y.uid===pe,E,"user-mismatch"),Jr._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Te(E,"user-mismatch"),R}})).apply(this,arguments)}function Xn(y,h){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,f.Z)(function*(y,h,m=!1){const E="signIn",A=yield Nl(y,E,h),R=yield Jr._fromIdTokenResponse(y,E,A);return m||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function pn(y,h){return Li.apply(this,arguments)}function Li(){return(Li=(0,f.Z)(function*(y,h){return Xn(ot(y),h)})).apply(this,arguments)}function er(y,h){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,f.Z)(function*(y,h){const m=(0,P.m9)(y);return yield Qt(!1,m,h.providerId),Ta(m,h)})).apply(this,arguments)}function ts(y,h){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,f.Z)(function*(y,h){return wu((0,P.m9)(y),h)})).apply(this,arguments)}function _i(y,h){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,f.Z)(function*(y,h){return Dr(y,"POST","/v1/accounts:signInWithCustomToken",qt(y,h))})).apply(this,arguments)}function ft(){return(ft=(0,f.Z)(function*(y,h){const m=ot(y),E=yield _i(m,{token:h,returnSecureToken:!0}),A=yield Jr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Po{constructor(h,m){this.factorId=h,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(h,m){return"phoneInfo"in m?bu._fromServerResponse(h,m):Te(h,"internal-error")}}class bu extends Po{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,m){return new bu(m)}}function Ma(y,h,m){var E;j((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),j(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=m.url,h.dynamicLinkDomain=m.dynamicLinkDomain,h.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(j(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=m.iOS.bundleId),m.android&&(j(m.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=m.android.installApp,h.androidMinimumVersionCode=m.android.minimumVersion,h.androidPackageName=m.android.packageName)}function xa(){return(xa=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y),A={requestType:"PASSWORD_RESET",email:h};m&&Ma(E,A,m),yield Da(E,A)})).apply(this,arguments)}function kl(){return(kl=(0,f.Z)(function*(y,h,m){yield Sn((0,P.m9)(y),{oobCode:h,newPassword:m})})).apply(this,arguments)}function Pt(){return(Pt=(0,f.Z)(function*(y,h){yield yu((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function Fl(y,h){return hn.apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(y,h){const m=(0,P.m9)(y),E=yield Sn(m,{oobCode:h}),A=E.requestType;switch(j(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(E.mfaInfo,m,"internal-error");default:j(E.email,m,"internal-error")}let R=null;return E.mfaInfo&&(R=Po._fromServerResponse(ot(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function eo(){return(eo=(0,f.Z)(function*(y,h){const{data:m}=yield Fl((0,P.m9)(y),h);return m.email})).apply(this,arguments)}function Na(){return(Na=(0,f.Z)(function*(y,h,m){const E=ot(y),A=yield Mr(E,{returnSecureToken:!0,email:h,password:m}),R=yield Jr._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function Iu(){return(Iu=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};j(m.handleCodeInApp,E,"argument-error"),m&&Ma(E,A,m),yield Ri(E,A)})).apply(this,arguments)}function Mn(){return(Mn=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y),A=Xc.credentialWithLink(h,m||Pe());return j(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),pn(E,A)})).apply(this,arguments)}function ns(y,h){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,f.Z)(function*(y,h){return kt(y,"POST","/v1/accounts:createAuthUri",qt(y,h))})).apply(this,arguments)}function vi(){return(vi=(0,f.Z)(function*(y,h){const E={identifier:h,continueUri:ut()?Pe():"http://localhost"},{signinMethods:A}=yield ns((0,P.m9)(y),E);return A||[]})).apply(this,arguments)}function Cu(){return(Cu=(0,f.Z)(function*(y,h){const m=(0,P.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Ma(m.auth,A,h);const{email:R}=yield rn(m.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Tu(){return(Tu=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};m&&Ma(E.auth,R,m);const{email:W}=yield qc(E.auth,R);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function Pa(y,h){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,f.Z)(function*(y,h){return kt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ka(){return(ka=(0,f.Z)(function*(y,{displayName:h,photoURL:m}){if(void 0===h&&void 0===m)return;const E=(0,P.m9)(y),R={idToken:yield E.getIdToken(),displayName:h,photoUrl:m,returnSecureToken:!0},W=yield cr(E,Pa(E.auth,R));E.displayName=W.displayName||null,E.photoURL=W.photoUrl||null;const pe=E.providerData.find(({providerId:Le})=>"password"===Le);pe&&(pe.displayName=E.displayName,pe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(W)})).apply(this,arguments)}function Lo(y,h,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,f.Z)(function*(y,h,m){const{auth:E}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),m&&(R.password=m);const W=yield cr(y,Ia(E,R));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Vo{constructor(h,m,E={}){this.isNewUser=h,this.providerId=m,this.profile=E}}class id extends Vo{constructor(h,m,E,A){super(h,m,E),this.username=A}}class Uo extends Vo{constructor(h,m){super(h,"facebook.com",m)}}class Ui extends id{constructor(h,m){super(h,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Fh extends Vo{constructor(h,m){super(h,"google.com",m)}}class Hn extends id{constructor(h,m,E){super(h,"twitter.com",m,E)}}function Bi(y){const{user:h,_tokenResponse:m}=y;return h.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function rd(y){var h,m;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const W=null===(m=null===(h=it(y.idToken))||void 0===h?void 0:h.firebase)||void 0===m?void 0:m.sign_in_provider;if(W)return new Vo(R,"anonymous"!==W&&"custom"!==W?W:null)}if(!E)return null;switch(E){case"facebook.com":return new Uo(R,A);case"github.com":return new Ui(R,A);case"google.com":return new Fh(R,A);case"twitter.com":return new Hn(R,A,y.screenName||null);case"custom":case"anonymous":return new Vo(R,null);default:return new Vo(R,E,A)}}(m)}class rs{constructor(h,m){this.type=h,this.credential=m}static _fromIdtoken(h){return new rs("enroll",h)}static _fromMfaPendingCredential(h){return new rs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var m,E;if(null==h?void 0:h.multiFactorSession){if(null===(m=h.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return rs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return rs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Bo{constructor(h,m,E){this.session=h,this.hints=m,this.signInResolver=E}static _fromError(h,m){const E=ot(h),A=m.customData._serverResponse,R=(A.mfaInfo||[]).map(pe=>Po._fromServerResponse(E,pe));j(A.mfaPendingCredential,E,"internal-error");const W=rs._fromMfaPendingCredential(A.mfaPendingCredential);return new Bo(W,R,function(){var pe=(0,f.Z)(function*(Le){const Ze=yield Le._process(E,W);delete A.mfaInfo,delete A.mfaPendingCredential;const yt=Object.assign(Object.assign({},A),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(m.operationType){case"signIn":const lt=yield Jr._fromIdTokenResponse(E,m.operationType,yt);return yield E._updateCurrentUser(lt.user),lt;case"reauthenticate":return j(m.user,E,"internal-error"),Jr._forOperation(m.user,m.operationType,yt);default:Te(E,"internal-error")}});return function(Le){return pe.apply(this,arguments)}}())}resolveSignIn(h){var m=this;return(0,f.Z)(function*(){return m.signInResolver(h)})()}}function Vh(y,h){return kt(y,"POST","/v2/accounts/mfaEnrollment:start",qt(y,h))}class ad{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Po._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new ad(h)}getSession(){var h=this;return(0,f.Z)(function*(){return rs._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,m){var E=this;return(0,f.Z)(function*(){const A=h,R=yield E.getSession(),W=yield cr(E.user,A._process(E.user.auth,R,m));return yield E.user._updateTokensIfNecessary(W),E.user.reload()})()}unenroll(h){var m=this;return(0,f.Z)(function*(){const E="string"==typeof h?h:h.uid,A=yield m.user.getIdToken(),R=yield cr(m.user,function Au(y,h){return kt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(y,h))}(m.user.auth,{idToken:A,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:W})=>W!==E),yield m.user._updateTokensIfNecessary(R);try{yield m.user.reload()}catch(W){if("auth/user-token-expired"!==W.code)throw W}})()}}const Su=new WeakMap,no="__sak";class ud{constructor(h,m){this.storageRetriever=h,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(no,"1"),this.storage.removeItem(no),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,m){return this.storage.setItem(h,JSON.stringify(m)),Promise.resolve()}_get(h){const m=this.storage.getItem(h);return Promise.resolve(m?JSON.parse(m):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ei=(()=>{class y extends ud{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Zp(){const y=(0,P.z$)();return mu(y)||Lr(y)}()&&function Qn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ds(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),R=this.localCache[E];A!==R&&m(E,R,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((pe,Le,Ze)=>{this.notifyListeners(pe,Ze)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pe=this.storage.getItem(A);if(m.newValue!==pe)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const R=()=>{const pe=this.storage.getItem(A);!E&&this.localCache[A]===pe||this.notifyListeners(A,pe)},W=this.storage.getItem(A);!function ba(){return(0,P.w1)()&&10===document.documentMode}()||W===m.newValue||m.newValue===m.oldValue?R():setTimeout(R,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const R of Array.from(A))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,R=this;return(0,f.Z)(function*(){yield A().call(R,m,E),R.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,f.Z)(function*(){const R=yield E().call(A,m);return A.localCache[m]=JSON.stringify(R),R})()}_remove(m){var E=()=>super._remove,A=this;return(0,f.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return y.type="LOCAL",y})(),On=(()=>{class y extends ud{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let ld=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(R=>R.isListeningto(m));if(E)return E;const A=new y(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,f.Z)(function*(){const A=m,{eventId:R,eventType:W,data:pe}=A.data,Le=E.handlersMap[W];if(!(null==Le?void 0:Le.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:W});const Ze=Array.from(Le).map(function(){var lt=(0,f.Z)(function*(In){return In(A.origin,pe)});return function(In){return lt.apply(this,arguments)}}()),yt=yield function $l(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return h.apply(this,arguments)}}()))}(Ze);A.ports[0].postMessage({status:"done",eventId:R,eventType:W,response:yt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ji(y="",h=10){let m="";for(let E=0;E<h;E++)m+=Math.floor(10*Math.random());return y+m}class Hl{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,m,E=50){var A=this;return(0,f.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let W,pe;return new Promise((Le,Ze)=>{const yt=ji("",20);R.port1.start();const lt=setTimeout(()=>{Ze(new Error("unsupported_event"))},E);pe={messageChannel:R,onMessage(In){const ci=In;if(ci.data.eventId===yt)switch(ci.data.status){case"ack":clearTimeout(lt),W=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Le(ci.data.response);break;default:clearTimeout(lt),clearTimeout(W),Ze(new Error("invalid_response"))}}},A.handlers.add(pe),R.port1.addEventListener("message",pe.onMessage),A.target.postMessage({eventType:h,eventId:yt,data:m},[R.port2])}).finally(()=>{pe&&A.removeMessageHandler(pe)})})()}}function un(){return window}function Ei(){return void 0!==un().WorkerGlobalScope&&"function"==typeof un().importScripts}function xu(){return(xu=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Gl="firebaseLocalStorageDb",jo="firebaseLocalStorage",$o="fbase_key";class Rs{constructor(h){this.request=h}toPromise(){return new Promise((h,m)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function tr(y,h){return y.transaction([jo],h?"readwrite":"readonly").objectStore(jo)}function is(){const y=indexedDB.open(Gl,1);return new Promise((h,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(jo,{keyPath:$o})}catch(A){m(A)}}),y.addEventListener("success",(0,f.Z)(function*(){const E=y.result;E.objectStoreNames.contains(jo)?h(E):(E.close(),yield function Nu(){const y=indexedDB.deleteDatabase(Gl);return new Rs(y).toPromise()}(),h(yield is()))}))})}function Ho(y,h,m){return Os.apply(this,arguments)}function Os(){return(Os=(0,f.Z)(function*(y,h,m){const E=tr(y,!0).put({[$o]:h,value:m});return new Rs(E).toPromise()})).apply(this,arguments)}function ro(){return(ro=(0,f.Z)(function*(y,h){const m=tr(y,!1).get(h),E=yield new Rs(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function zo(y,h){const m=tr(y,!0).delete(h);return new Rs(m).toPromise()}const Ps=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,f.Z)(function*(){return m.db||(m.db=yield is()),m.db})()}_withRetries(m){var E=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const R=yield E._openDb();return yield m(R)}catch(R){if(A++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,f.Z)(function*(){return Ei()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,f.Z)(function*(){m.receiver=ld._getInstance(function dd(){return Ei()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,f.Z)(function*(A,R){return{keyProcessed:(yield m._poll()).includes(R.key)}});return function(A,R){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,f.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,f.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function Mt(){return xu.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Hl(m.activeServiceWorker);const R=yield m.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,f.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function cd(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const m=yield is();return yield Ho(m,no,"1"),yield zo(m,no),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,f.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(R=>Ho(R,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,f.Z)(function*(){const A=yield E._withRetries(R=>function Go(y,h){return ro.apply(this,arguments)}(R,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,f.Z)(function*(){return E._withPendingWrite((0,f.Z)(function*(){return yield E._withRetries(A=>zo(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,f.Z)(function*(){const E=yield m._withRetries(W=>{const pe=tr(W,!1).getAll();return new Rs(pe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:W,value:pe}of E)R.add(W),JSON.stringify(m.localCache[W])!==JSON.stringify(pe)&&(m.notifyListeners(W,pe),A.push(W));for(const W of Object.keys(m.localCache))m.localCache[W]&&!R.has(W)&&(m.notifyListeners(W,null),A.push(W));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const R of Array.from(A))R(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function nr(y,h){return kt(y,"POST","/v2/accounts/mfaSignIn:start",qt(y,h))}function wn(){return(wn=(0,f.Z)(function*(y){return(yield kt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $i(y){return new Promise((h,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=h,E.onerror=A=>{const R=Ee("internal-error");R.customData=A,m(R)},E.type="text/javascript",E.charset="UTF-8",function so(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(E)})}function ss(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ti=1e12;class bn{constructor(h){this.auth=h,this.counter=ti,this._widgets=new Map}render(h,m){const E=this.counter;return this._widgets.set(E,new Ou(h,this.auth.name,m||{})),this.counter++,E}reset(h){var m;const E=h||ti;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(h){var m;return(null===(m=this._widgets.get(h||ti))||void 0===m?void 0:m.getResponse())||""}execute(h){var m=this;return(0,f.Z)(function*(){var E;return null===(E=m._widgets.get(h||ti))||void 0===E||E.execute(),""})()}}class Ou{constructor(h,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;j(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ja(y){const h=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)h.push(m.charAt(Math.floor(Math.random()*m.length)));return h.join("")}(50);const{callback:h,"expired-callback":m}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fn=ss("rcb"),Yp=new Jt(3e4,6e4);class My{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!un().grecaptcha}load(h,m=""){return j(function Ko(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),h,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(un().grecaptcha):new Promise((E,A)=>{const R=un().setTimeout(()=>{A(Ee(h,"network-request-failed"))},Yp.get());un()[fn]=()=>{un().clearTimeout(R),delete un()[fn];const pe=un().grecaptcha;if(!pe)return void A(Ee(h,"internal-error"));const Le=pe.render;pe.render=(Ze,yt)=>{const lt=Le(Ze,yt);return this.counter++,lt},this.hostLanguage=m,E(pe)},$i(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:fn,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(R),A(Ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!un().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Hr{load(h){return(0,f.Z)(function*(){return new bn(h)})()}clearedOneInstance(){}}const hd="recaptcha",ks={theme:"light",type:"image"};class oo{constructor(h,m=Object.assign({},ks),E){this.parameters=m,this.type=hd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ot(E),this.isInvisible="invisible"===this.parameters.size,j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;j(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Hr:new My,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const m=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(m)||new Promise(R=>{const W=pe=>{!pe||(h.tokenChangeListeners.delete(W),R(pe))};h.tokenChangeListeners.add(W),h.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof h)h(m);else if("string"==typeof h){const E=un()[h];"function"==typeof E&&E(m)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let m=h.container;if(!h.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}h.widgetId=h.getAssertedRecaptcha().render(m,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){j(ut()&&!Ei(),h.auth,"internal-error"),yield function Pu(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const m=yield function Ru(y){return wn.apply(this,arguments)}(h.auth);j(m,h.auth,"internal-error"),h.parameters.sitekey=m})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mn{constructor(h,m){this.verificationId=h,this.onConfirmation=m}confirm(h){const m=So._fromVerification(this.verificationId,h);return this.onConfirmation(m)}}function ao(){return(ao=(0,f.Z)(function*(y,h,m){const E=ot(y),A=yield Zo(E,h,(0,P.m9)(m));return new mn(A,R=>pn(E,R))})).apply(this,arguments)}function ql(){return(ql=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y);yield Qt(!1,E,"phone");const A=yield Zo(E.auth,h,(0,P.m9)(m));return new mn(A,R=>er(E,R))})).apply(this,arguments)}function ri(){return(ri=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y),A=yield Zo(E.auth,h,(0,P.m9)(m));return new mn(A,R=>ts(E,R))})).apply(this,arguments)}function Zo(y,h,m){return uo.apply(this,arguments)}function uo(){return(uo=(0,f.Z)(function*(y,h,m){var E;const A=yield m.verify();try{let R;if(j("string"==typeof A,y,"argument-error"),j(m.type===hd,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const W=R.session;if("phoneNumber"in R)return j("enroll"===W.type,y,"internal-error"),(yield Vh(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{j("signin"===W.type,y,"internal-error");const pe=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return j(pe,y,"missing-multi-factor-info"),(yield nr(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:pe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield Al(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return W}}finally{m._reset()}})).apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(y,h){yield Ta((0,P.m9)(y),h)})).apply(this,arguments)}let co=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=ot(m)}verifyPhoneNumber(m,E){return Zo(this.auth,m,(0,P.m9)(E))}static credential(m,E){return So._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?So._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function os(y,h){return h?ee(h):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class $a extends yi{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ss(h,this._buildIdpRequest())}_linkToIdToken(h,m){return Ss(h,this._buildIdpRequest(m))}_getReauthenticationResolver(h){return Ss(h,this._buildIdpRequest())}_buildIdpRequest(h){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(m.idToken=h),m}}function Rt(y){return Xn(y.auth,new $a(y),y.bypassAuthState)}function ku(y){const{auth:h,user:m}=y;return j(m,h,"internal-error"),wu(m,new $a(y),y.bypassAuthState)}function zn(y){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,f.Z)(function*(y){const{auth:h,user:m}=y;return j(m,h,"internal-error"),Ta(m,new $a(y),y.bypassAuthState)})).apply(this,arguments)}class Fs{constructor(h,m,E,A,R=!1){this.auth=h,this.resolver=E,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var h=this;return new Promise(function(){var m=(0,f.Z)(function*(E,A){h.pendingPromise={resolve:E,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(h){var m=this;return(0,f.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:R,tenantId:W,error:pe,type:Le}=h;if(pe)return void m.reject(pe);const Ze={auth:m.auth,requestUri:E,sessionId:A,tenantId:W||void 0,postBody:R||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Le)(Ze))}catch(yt){m.reject(yt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Rt;case"linkViaPopup":case"linkViaRedirect":return zn;case"reauthViaPopup":case"reauthViaRedirect":return ku;default:Te(this.auth,"internal-error")}}resolve(h){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jp=new Jt(2e3,1e4);function Ls(){return(Ls=(0,f.Z)(function*(y,h,m){const E=ot(y);He(y,h,pr);const A=os(E,m);return new Wl(E,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function Fu(){return(Fu=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y);He(E.auth,h,pr);const A=os(E.auth,m);return new Wl(E.auth,"reauthViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}function Gi(){return(Gi=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y);He(E.auth,h,pr);const A=os(E.auth,m);return new Wl(E.auth,"linkViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}let Wl=(()=>{class y extends Fs{constructor(m,E,A,R,W){super(m,E,R,W),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,f.Z)(function*(){const E=yield m.execute();return j(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,f.Z)(function*(){K(1===m.filter.length,"Popup operations only handle one event");const E=ji();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Ee(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=(null===(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Jp.get())};m()}}return y.currentPopupAction=null,y})();const rr=new Map;class Ny extends Fs{constructor(h,m,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,m=this;return(0,f.Z)(function*(){let E=rr.get(m.auth._key());if(!E){try{const R=(yield function Qo(y,h){return Jo.apply(this,arguments)}(m.resolver,m.auth))?yield h().call(m):null;E=()=>Promise.resolve(R)}catch(A){E=()=>Promise.reject(A)}rr.set(m.auth._key(),E)}return m.bypassAuthState||rr.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var m=()=>super.onAuthEvent,E=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return m().call(E,h);if("unknown"!==h.type){if(h.eventId){const A=yield E.auth._redirectUserForId(h.eventId);if(A)return E.user=A,m().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Jo(){return(Jo=(0,f.Z)(function*(y,h){const m=F(h),E=N(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function ho(y,h){return gd.apply(this,arguments)}function gd(){return(gd=(0,f.Z)(function*(y,h){return N(y)._set(F(h),"true")})).apply(this,arguments)}function C(y,h){rr.set(y._key(),h)}function N(y){return ee(y._redirectPersistence)}function F(y){return Fn("pendingRedirect",y.config.apiKey,y.name)}function me(){return(me=(0,f.Z)(function*(y,h,m){const E=ot(y);He(y,h,pr);const A=os(E,m);return yield ho(A,E),A._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function dt(){return(dt=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y);He(E.auth,h,pr);const A=os(E.auth,m);yield ho(A,E.auth);const R=yield si(E);return A._openRedirect(E.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function gr(){return(gr=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y);He(E.auth,h,pr);const A=os(E.auth,m);yield Qt(!1,E,h.providerId),yield ho(A,E.auth);const R=yield si(E);return A._openRedirect(E.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function as(){return(as=(0,f.Z)(function*(y,h){return yield ot(y)._initializationPromise,Gr(y,h,!1)})).apply(this,arguments)}function Gr(y,h){return ii.apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(y,h,m=!1){const E=ot(y),A=os(E,h),W=yield new Ny(E,A,m).execute();return W&&!m&&(delete W.user._redirectEventId,yield E._persistUserIfCurrent(W.user),yield E._setRedirectUser(null,h)),W})).apply(this,arguments)}function si(y){return oi.apply(this,arguments)}function oi(){return(oi=(0,f.Z)(function*(y){const h=ji(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Vu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(m=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Xp(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Uu(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=h,m=!0)),m}sendToConsumer(h,m){var E;if(h.error&&!Uu(h)){const A=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ee(this.auth,A))}else m.onAuthEvent(h)}isEventForConsumer(h,m){const E=null===m.eventId||!!h.eventId&&h.eventId===m.eventId;return m.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kl(h))}saveEventToCache(h){this.cachedEventUids.add(Kl(h)),this.lastProcessedEventTime=Date.now()}}function Kl(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Uu({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function eg(y){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,f.Z)(function*(y,h={}){return kt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const fo=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zl=/^https?/;function tg(){return(tg=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield eg(y);for(const m of h)try{if(ng(m))return}catch(E){}Te(y,"unauthorized-domain")})).apply(this,arguments)}function ng(y){const h=Pe(),{protocol:m,hostname:E}=new URL(h);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===m&&W.hostname===E}if(!Zl.test(m))return!1;if(fo.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Oy=new Jt(3e4,6e4);function rg(){const y=un().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let Bu=null;function po(y){return Bu=Bu||function Bh(y){return new Promise((h,m)=>{var E,A,R;function W(){rg(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{rg(),m(Ee(y,"network-request-failed"))},timeout:Oy.get()})}if(null===(A=null===(E=un().gapi)||void 0===E?void 0:E.iframes)||void 0===A?void 0:A.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=un().gapi)||void 0===R?void 0:R.load)){const pe=ss("iframefcb");return un()[pe]=()=>{gapi.load?W():m(Ee(y,"network-request-failed"))},$i(`https://apis.google.com/js/api.js?onload=${pe}`).catch(Le=>m(Le))}W()}}).catch(h=>{throw Bu=null,h})}(y),Bu}const go=new Jt(5e3,15e3),Py={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ju=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ky(y){const h=y.config;j(h.authDomain,y,"auth-domain-config-required");const m=h.emulator?Tn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:y.name,v:ue.SDK_VERSION},A=ju.get(y.config.apiHost);A&&(E.eid=A);const R=y._getFrameworks();return R.length&&(E.fw=R.join(",")),`${m}?${(0,P.xO)(E).slice(1)}`}function Xo(){return Xo=(0,f.Z)(function*(y){const h=yield po(y),m=un().gapi;return j(m,y,"internal-error"),h.open({where:document.body,url:ky(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Py,dontclear:!0},E=>new Promise(function(){var A=(0,f.Z)(function*(R,W){yield E.restyle({setHideOnLeave:!1});const pe=Ee(y,"network-request-failed"),Le=un().setTimeout(()=>{W(pe)},go.get());function Ze(){un().clearTimeout(Le),R(E)}E.ping(Ze).then(Ze,()=>{W(pe)})});return function(R,W){return A.apply(this,arguments)}}()))}),Xo.apply(this,arguments)}const jh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ig{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Vs(y,h,m,E,A,R){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:ue.SDK_VERSION,eventId:A};if(h instanceof pr){h.setDefaultLanguage(y.languageCode),W.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(W.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Le,Ze]of Object.entries(R||{}))W[Le]=Ze}if(h instanceof Ys){const Le=h.getScopes().filter(Ze=>""!==Ze);Le.length>0&&(W.scopes=Le.join(","))}y.tenantId&&(W.tid=y.tenantId);const pe=W;for(const Le of Object.keys(pe))void 0===pe[Le]&&delete pe[Le];return`${function Ql({config:y}){return y.emulator?Tn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(pe).slice(1)}`}const Ed="webStorageSupport";class wd extends class l0{constructor(h){this.factorId=h}_process(h,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(h,m.credential,E);case"signin":return this._finalizeSignIn(h,m.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new wd(h)}_finalizeEnroll(h,m,E){return function to(y,h){return kt(y,"POST","/v2/accounts/mfaEnrollment:finalize",qt(y,h))}(h,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,m){return function io(y,h){return kt(y,"POST","/v2/accounts/mfaSignIn:finalize",qt(y,h))}(h,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let og=(()=>{class y{constructor(){}static assertion(m){return wd._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var ag="@firebase/auth";class lg{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var m=this;return(0,f.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const m=this.auth.onIdTokenChanged(E=>{var A;h((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,m),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const m=this.internalListeners.get(h);!m||(this.internalListeners.delete(h),m(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Us(){return window}function za(){return(za=(0,f.Z)(function*(y,h,m){var E;const{BuildInfo:A}=Us();K(h.sessionId,"AuthEvent did not contain a session ID");const R=yield zh(h.sessionId),W={};return Lr()?W.ibi=A.packageName:Tr()?W.apn=A.packageName:Te(y,"operation-not-supported-in-this-environment"),A.displayName&&(W.appDisplayName=A.displayName),W.sessionId=R,Vs(y,m,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,W)})).apply(this,arguments)}function Id(){return(Id=(0,f.Z)(function*(y){const{BuildInfo:h}=Us(),m={};Lr()?m.iosBundleId=h.packageName:Tr()?m.androidPackageName=h.packageName:Te(y,"operation-not-supported-in-this-environment"),yield eg(y,m)})).apply(this,arguments)}function hg(){return(hg=(0,f.Z)(function*(y,h,m){const{cordova:E}=Us();let A=()=>{};try{yield new Promise((R,W)=>{let pe=null;function Le(){var lt;R();const In=null===(lt=E.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof In&&In(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Ze(){pe||(pe=window.setTimeout(()=>{W(Ee(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===(null==document?void 0:document.visibilityState)&&Ze()}h.addPassiveListener(Le),document.addEventListener("resume",Ze,!1),Tr()&&document.addEventListener("visibilitychange",yt,!1),A=()=>{h.removePassiveListener(Le),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",yt,!1),pe&&window.clearTimeout(pe)}})}finally{A()}})).apply(this,arguments)}function zh(y){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,f.Z)(function*(y){const h=qh(y),m=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function qh(y){if(K(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),m=new Uint8Array(h);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}!function c0(y){(0,ue._registerComponent)(new le.wA("auth",(h,{options:m})=>{const E=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:R,authDomain:W}=E.options;return((pe,Le)=>{j(R&&!R.includes(":"),"invalid-api-key",{appName:pe.name}),j(!(null==W?void 0:W.includes(":")),"argument-error",{appName:pe.name});const Ze={apiKey:R,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ao(y)},yt=new We(pe,Le,Ze);return function ae(y,h){const m=(null==h?void 0:h.persistence)||[],E=(Array.isArray(m)?m:[m]).map(ee);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(yt,m),yt})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,m,E)=>{h.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new le.wA("auth-internal",h=>{const m=ot(h.getProvider("auth").getImmediate());return new lg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(ag,"0.20.1",function bd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(ag,"0.20.1","esm2017")}("Browser");class Cd extends Vu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function Gu(y){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,f.Z)(function*(y){const h=yield Wa()._get(Kh(y));return h&&(yield Wa()._remove(Kh(y))),h})).apply(this,arguments)}function Wh(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*h.length);y.push(h.charAt(E))}return y.join("")}function Wa(){return ee(ei)}function Kh(y){return Fn("authEvent",y.config.apiKey,y.name)}function zt(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...m]=y.split("?");return(0,P.zd)(m.join("?"))}function qu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function Ka(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function gg(y=(0,P.z$)()){return!("file:"!==Ka()&&"ionic:"!==Ka()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Jh(){try{const y=self.localStorage,h=ji();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Qh(y=(0,P.z$)()){return function xr(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Za(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return ir()&&(0,P.hl)()}return!1}function ir(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ya(){return(function zy(){return"http:"===Ka()||"https:"===Ka()}()||(0,P.ru)()||gg())&&!function ta(){return(0,P.b$)()||(0,P.UG)()}()&&Jh()&&!ir()}function Td(){return gg()&&"undefined"!=typeof document}function ec(){return(ec=(0,f.Z)(function*(){return!!Td()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const ai={LOCAL:"local",NONE:"none",SESSION:"session"},mo=j,yg="persistence";function Wu(y){return Xh.apply(this,arguments)}function Xh(){return(Xh=(0,f.Z)(function*(y){yield y._initializationPromise;const h=vg(),m=Fn(yg,y.config.apiKey,y.name);h&&h.setItem(m,y._getPersistence())})).apply(this,arguments)}function vg(){var y;try{return(null===(y=function mg(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Wy=j;class ui{constructor(){this.browserResolver=ee(class Vy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=On,this._completeRedirectFn=Gr,this._overrideRedirectResult=C}_openPopup(h,m,E,A){var R=this;return(0,f.Z)(function*(){var W;K(null===(W=R.eventManagers[h._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const pe=Vs(h,m,E,Pe(),A);return function Yl(y,h,m,E=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),W=Math.max((window.screen.availWidth-E)/2,0).toString();let pe="";const Le=Object.assign(Object.assign({},jh),{width:E.toString(),height:A.toString(),top:R,left:W}),Ze=(0,P.z$)().toLowerCase();m&&(pe=wa(Ze)?"_blank":m),Ea(Ze)&&(h=h||"http://localhost",Le.scrollbars="yes");const yt=Object.entries(Le).reduce((In,[ci,nc])=>`${In}${ci}=${nc},`,"");if(function Ks(y=(0,P.z$)()){var h;return Lr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ze)&&"_self"!==pe)return function Fy(y,h){const m=document.createElement("a");m.href=y,m.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(h||"",pe),new ig(null);const lt=window.open(h||"",pe,yt);j(lt,y,"popup-blocked");try{lt.focus()}catch(In){}return new ig(lt)}(h,pe,ji())})()}_openRedirect(h,m,E,A){var R=this;return(0,f.Z)(function*(){return yield R._originValidation(h),function Ua(y){un().location.href=y}(Vs(h,m,E,Pe(),A)),new Promise(()=>{})})()}_initialize(h){const m=h._key();if(this.eventManagers[m]){const{manager:A,promise:R}=this.eventManagers[m];return A?Promise.resolve(A):(K(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(h);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(h){var m=this;return(0,f.Z)(function*(){const E=yield function yd(y){return Xo.apply(this,arguments)}(h),A=new Vu(h);return E.register("authEvent",R=>(j(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[h._key()]={manager:A},m.iframes[h._key()]=E,A})()}_isIframeWebStorageSupported(h,m){this.iframes[h._key()].send(Ed,{type:Ed},A=>{var R;const W=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[Ed];void 0!==W&&m(!!W),Te(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ry(y){return tg.apply(this,arguments)}(h)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ds()||mu()||Lr()}}),this.cordovaResolver=ee(class pg{constructor(){this._redirectPersistence=On,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gr,this._overrideRedirectResult=C}_initialize(h){var m=this;return(0,f.Z)(function*(){const E=h._key();let A=m.eventManagers.get(E);return A||(A=new Cd(h),m.eventManagers.set(E,A),m.attachCallbackListeners(h,A)),A})()}_openPopup(h){Te(h,"operation-not-supported-in-this-environment")}_openRedirect(h,m,E,A){var R=this;return(0,f.Z)(function*(){!function $u(y){var h,m,E,A,R,W,pe,Le,Ze,yt;const lt=Us();j("function"==typeof(null===(h=null==lt?void 0:lt.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(void 0!==(null===(m=null==lt?void 0:lt.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(R=null===(A=null===(E=null==lt?void 0:lt.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Le=null===(pe=null===(W=null==lt?void 0:lt.cordova)||void 0===W?void 0:W.plugins)||void 0===pe?void 0:pe.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(yt=null===(Ze=null==lt?void 0:lt.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const W=yield R._initialize(h);yield W.initialized(),W.resetRedirect(),function D(){rr.clear()}(),yield R._originValidation(h);const pe=function Hu(y,h,m=null){return{type:h,eventId:m,urlResponse:null,sessionId:Wh(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(h,E,A);yield function Uy(y,h){return Wa()._set(Kh(y),h)}(h,pe);const Le=yield function us(y,h,m){return za.apply(this,arguments)}(h,pe,m),Ze=yield function Dd(y){const{cordova:h}=Us();return new Promise(m=>{h.plugins.browsertab.isAvailable(E=>{let A=null;E?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function zc(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(A)})})}(Le);return function qa(y,h,m){return hg.apply(this,arguments)}(h,W,Ze)})()}_isIframeWebStorageSupported(h,m){throw new Error("Method not implemented.")}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function dg(y){return Id.apply(this,arguments)}(h)),this.originValidationPromises[m]}attachCallbackListeners(h,m){const{universalLinks:E,handleOpenURL:A,BuildInfo:R}=Us(),W=setTimeout((0,f.Z)(function*(){yield Gu(h),m.onEvent(qu())}),500),pe=function(){var yt=(0,f.Z)(function*(lt){clearTimeout(W);const In=yield Gu(h);let ci=null;In&&(null==lt?void 0:lt.url)&&(ci=function By(y,h){var m,E;const A=function Yh(y){const h=zt(y),m=h.link?decodeURIComponent(h.link):void 0,E=zt(m).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return zt(A).link||A||E||m||y}(h);if(A.includes("/__/auth/callback")){const R=zt(A),W=R.firebaseError?function Zh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,pe=null===(E=null===(m=null==W?void 0:W.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Le=pe?Ee(pe):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(In,lt.url)),m.onEvent(ci||qu())});return function(In){return yt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,pe);const Le=A,Ze=`${R.packageName.toLowerCase()}://`;Us().handleOpenURL=function(){var yt=(0,f.Z)(function*(lt){if(lt.toLowerCase().startsWith(Ze)&&pe({url:lt}),"function"==typeof Le)try{Le(lt)}catch(In){console.error(In)}});return function(lt){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=On,this._completeRedirectFn=Gr,this._overrideRedirectResult=C}_initialize(h){var m=this;return(0,f.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,m,E,A){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,m,E,A)})()}_openRedirect(h,m,E,A){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,m,E,A)})()}_isIframeWebStorageSupported(h,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,m)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Td()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const m=yield function qy(){return ec.apply(this,arguments)}();h.underlyingResolver=m?h.cordovaResolver:h.browserResolver})()}}function Eg(y){return y.unwrap()}function Ad(y){return wg(y)}function wg(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return co.credentialFromResult(y);const m=h.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=ed;break;case"facebook.com":E=Mo;break;case"github.com":E=Ph;break;case"twitter.com":E=td;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:W,pendingToken:pe,nonce:Le}=h;return R||W||A||pe?pe?m.startsWith("saml.")?Qs._create(m,pe):es._fromParams({providerId:m,signInMethod:m,pendingToken:pe,idToken:A,accessToken:R}):new ki(m).credential({idToken:A,accessToken:R,rawNonce:Le}):null}return y instanceof P.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function li(y,h){return h.catch(m=>{throw m instanceof P.ZR&&function Zy(y,h){var m;const E=null===(m=h.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new bg(y,function Gn(y,h){var m;const E=(0,P.m9)(y),A=h;return j(h.customData.operationType,E,"argument-error"),j(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),Bo._fromError(E,A)}(y,h));else if(E){const A=wg(h),R=h;A&&(R.credential=A,R.tenantId=E.tenantId||void 0,R.email=E.email||void 0,R.phoneNumber=E.phoneNumber||void 0)}}(y,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:Ad(m),additionalUserInfo:Bi(m),user:Bs.getOrCreate(A)}})}function ef(y,h){return tf.apply(this,arguments)}function tf(){return(tf=(0,f.Z)(function*(y,h){const m=yield h;return{verificationId:m.verificationId,confirm:E=>li(y,m.confirm(E))}})).apply(this,arguments)}class bg{constructor(h,m){this.resolver=m,this.auth=function Ky(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return li(Eg(this.auth),this.resolver.resolveSignIn(h))}}class Bs{constructor(h){this._delegate=h,this.multiFactor=function Mu(y){const h=(0,P.m9)(y);return Su.has(h)||Su.set(h,ad._fromUser(h)),Su.get(h)}(h)}static getOrCreate(h){return Bs.USER_MAP.has(h)||Bs.USER_MAP.set(h,new Bs(h)),Bs.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var m=this;return(0,f.Z)(function*(){return li(m.auth,er(m._delegate,h))})()}linkWithPhoneNumber(h,m){var E=this;return(0,f.Z)(function*(){return ef(E.auth,function xy(y,h,m){return ql.apply(this,arguments)}(E._delegate,h,m))})()}linkWithPopup(h){var m=this;return(0,f.Z)(function*(){return li(m.auth,function pd(y,h,m){return Gi.apply(this,arguments)}(m._delegate,h,ui))})()}linkWithRedirect(h){var m=this;return(0,f.Z)(function*(){return yield Wu(ot(m.auth)),function Ut(y,h,m){return function wt(y,h,m){return gr.apply(this,arguments)}(y,h,m)}(m._delegate,h,ui)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var m=this;return(0,f.Z)(function*(){return li(m.auth,ts(m._delegate,h))})()}reauthenticateWithPhoneNumber(h,m){return ef(this.auth,function ni(y,h,m){return ri.apply(this,arguments)}(this._delegate,h,m))}reauthenticateWithPopup(h){return li(this.auth,function wi(y,h,m){return Fu.apply(this,arguments)}(this._delegate,h,ui))}reauthenticateWithRedirect(h){var m=this;return(0,f.Z)(function*(){return yield Wu(ot(m.auth)),function Ve(y,h,m){return function Ct(y,h,m){return dt.apply(this,arguments)}(y,h,m)}(m._delegate,h,ui)})()}sendEmailVerification(h){return function Vl(y,h){return Cu.apply(this,arguments)}(this._delegate,h)}unlink(h){var m=this;return(0,f.Z)(function*(){return yield function kh(y,h){return sn.apply(this,arguments)}(m._delegate,h),m})()}updateEmail(h){return function Wp(y,h){return Lo((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function jl(y,h){return Lo((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function lo(y,h){return Yo.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Bl(y,h){return ka.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,m){return function Ul(y,h,m){return Tu.apply(this,arguments)}(this._delegate,h,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Bs.USER_MAP=new WeakMap;const tc=j;let Ig=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;tc(A,"invalid-api-key",{appName:m.name}),tc(A,"invalid-api-key",{appName:m.name});const R="undefined"!=typeof window?ui:void 0;this._delegate=E.initialize({options:{persistence:Yy(A,m.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Bs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Ur(y,h,m){const E=ot(y);j(E._canInitEmulator,E,"emulator-config-failed"),j(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const A=!!(null==m?void 0:m.disableWarnings),R=xi(h),{host:W,port:pe}=function Rn(y){const h=xi(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const R=A[1];return{host:R,port:Ni(E.substr(R.length+1))}}{const[R,W]=E.split(":");return{host:R,port:Ni(W)}}}(h);E.config.emulator={url:`${R}//${W}${null===pe?"":`:${pe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:W,port:pe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function dn(){function y(){const h=document.createElement("p"),m=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function Ae(y,h){return Pt.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Fl(this._delegate,m)}confirmPasswordReset(m,E){return function Pl(y,h,m){return kl.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var A=this;return(0,f.Z)(function*(){return li(A._delegate,function Xr(y,h,m){return Na.apply(this,arguments)}(A._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Ns(y,h){return vi.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Ra(y,h){const m=Eu.parseLink(h);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,f.Z)(function*(){tc(Ya(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function qn(y,h){return as.apply(this,arguments)}(m._delegate,ui);return E?li(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function jy(y,h){ot(y)._logFramework(h)}(this._delegate,m)}onAuthStateChanged(m,E,A){const{next:R,error:W,complete:pe}=Dg(m,E,A);return this._delegate.onAuthStateChanged(R,W,pe)}onIdTokenChanged(m,E,A){const{next:R,error:W,complete:pe}=Dg(m,E,A);return this._delegate.onIdTokenChanged(R,W,pe)}sendSignInLinkToEmail(m,E){return function qp(y,h,m){return Iu.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function Ol(y,h,m){return xa.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,f.Z)(function*(){let A;switch(function _g(y,h){mo(Object.values(ai).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?mo(h!==ai.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?mo(h===ai.NONE,y,"unsupported-persistence-type"):ir()?mo(h===ai.NONE||h===ai.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):mo(h===ai.NONE||Jh(),y,"unsupported-persistence-type")}(E._delegate,m),m){case ai.SESSION:A=On;break;case ai.LOCAL:A=(yield ee(Ps)._isAvailable())?Ps:ei;break;case ai.NONE:A=Et;break;default:return Te("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return li(this._delegate,function nd(y){return xl.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return li(this._delegate,pn(this._delegate,m))}signInWithCustomToken(m){return li(this._delegate,function Oo(y,h){return ft.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return li(this._delegate,function Ll(y,h,m){return pn((0,P.m9)(y),Xc.credential(h,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return li(this._delegate,function Du(y,h,m){return Mn.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return ef(this._delegate,function zl(y,h,m){return ao.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,f.Z)(function*(){return tc(Ya(),E._delegate,"operation-not-supported-in-this-environment"),li(E._delegate,function fd(y,h,m){return Ls.apply(this,arguments)}(E._delegate,m,ui))})()}signInWithRedirect(m){var E=this;return(0,f.Z)(function*(){return tc(Ya(),E._delegate,"operation-not-supported-in-this-environment"),yield Wu(E._delegate),function Y(y,h,m){return function ne(y,h,m){return me.apply(this,arguments)}(y,h,m)}(E._delegate,m,ui)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function ko(y,h){return eo.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ai,y})();function Dg(y,h,m){let E=y;"function"!=typeof y&&({next:E,error:h,complete:m}=y);const A=E;return{next:W=>A(W&&Bs.getOrCreate(W)),error:h,complete:m}}function Yy(y,h){const m=function Qa(y,h){const m=vg();if(!m)return[];const E=Fn(yg,y,h);switch(m.getItem(E)){case ai.NONE:return[Et];case ai.LOCAL:return[Ps,On];case ai.SESSION:return[On];default:return[]}}(y,h);if("undefined"!=typeof self&&!m.includes(Ps)&&m.push(Ps),"undefined"!=typeof window)for(const E of[ei,On])m.includes(E)||m.push(E);return m.includes(Et)||m.push(Et),m}class nf{constructor(){this.providerId="phone",this._delegate=new co(Eg(X.Z.auth()))}static credential(h,m){return co.credential(h,m)}verifyPhoneNumber(h,m){return this._delegate.verifyPhoneNumber(h,m)}unwrap(){return this._delegate}}nf.PHONE_SIGN_IN_METHOD=co.PHONE_SIGN_IN_METHOD,nf.PROVIDER_ID=co.PROVIDER_ID;const Cg=j;class h0{constructor(h,m,E=X.Z.app()){var A;Cg(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new oo(h,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ls(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const m=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new Ig(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Xc,FacebookAuthProvider:Mo,GithubAuthProvider:Ph,GoogleAuthProvider:ed,OAuthProvider:ki,SAMLAuthProvider:Sr,PhoneAuthProvider:nf,PhoneMultiFactorGenerator:og,RecaptchaVerifier:h0,TwitterAuthProvider:td,Auth:Ig,AuthCredential:yi,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.14")}(X.Z)},8306:(Xe,we,O)=>{O.d(we,{y:()=>$});var f=O(2961),X=O(727),P=O(8822),ue=O(4671);var le=O(2416),oe=O(576),de=O(2806);let $=(()=>{class Me{constructor(je){je&&(this._subscribe=je)}lift(je){const fe=new Me;return fe.source=this,fe.operator=je,fe}subscribe(je,fe,Ce){const qe=function ze(Me){return Me&&Me instanceof f.Lv||function te(Me){return Me&&(0,oe.m)(Me.next)&&(0,oe.m)(Me.error)&&(0,oe.m)(Me.complete)}(Me)&&(0,X.Nn)(Me)}(je)?je:new f.Hp(je,fe,Ce);return(0,de.x)(()=>{const{operator:Ye,source:Te}=this;qe.add(Ye?Ye.call(qe,Te):Te?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(je){try{return this._subscribe(je)}catch(fe){je.error(fe)}}forEach(je,fe){return new(fe=B(fe))((Ce,qe)=>{const Ye=new f.Hp({next:Te=>{try{je(Te)}catch(Ee){qe(Ee),Ye.unsubscribe()}},error:qe,complete:Ce});this.subscribe(Ye)})}_subscribe(je){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(je)}[P.L](){return this}pipe(...je){return function ge(Me){return 0===Me.length?ue.y:1===Me.length?Me[0]:function(je){return Me.reduce((fe,Ce)=>Ce(fe),je)}}(je)(this)}toPromise(je){return new(je=B(je))((fe,Ce)=>{let qe;this.subscribe(Ye=>qe=Ye,Ye=>Ce(Ye),()=>fe(qe))})}}return Me.create=Oe=>new Me(Oe),Me})();function B(Me){var Oe;return null!==(Oe=null!=Me?Me:le.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(Xe,we,O)=>{O.d(we,{x:()=>le});var f=O(8306),X=O(727);const ue=(0,O(3888).d)(de=>function(){de(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=O(8737),ge=O(2806);let le=(()=>{class de extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const te=new oe(this,this);return te.operator=B,te}_throwIfClosed(){if(this.closed)throw new ue}next(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(B)}})}error(B){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:te}=this;for(;te.length;)te.shift().error(B)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:te,isStopped:ze,observers:Me}=this;return te||ze?X.Lc:(this.currentObservers=null,Me.push(B),new X.w0(()=>{this.currentObservers=null,(0,re.P)(Me,B)}))}_checkFinalizedStatuses(B){const{hasError:te,thrownError:ze,isStopped:Me}=this;te?B.error(ze):Me&&B.complete()}asObservable(){const B=new f.y;return B.source=this,B}}return de.create=($,B)=>new oe($,B),de})();class oe extends le{constructor($,B){super(),this.destination=$,this.source=B}next($){var B,te;null===(te=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===te||te.call(B,$)}error($){var B,te;null===(te=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===te||te.call(B,$)}complete(){var $,B;null===(B=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===B||B.call($)}_subscribe($){var B,te;return null!==(te=null===(B=this.source)||void 0===B?void 0:B.subscribe($))&&void 0!==te?te:X.Lc}}},2961:(Xe,we,O)=>{O.d(we,{Hp:()=>je,Lv:()=>te});var f=O(576),X=O(727),P=O(2416),ue=O(7849);function re(){}const ge=de("C",void 0,void 0);function de(Te,Ee,Ie){return{kind:Te,value:Ee,error:Ie}}var $=O(3410),B=O(2806);class te extends X.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,X.Nn)(Ee)&&Ee.add(this)):this.destination=Ye}static create(Ee,Ie,He){return new je(Ee,Ie,He)}next(Ee){this.isStopped?qe(function oe(Te){return de("N",Te,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?qe(function le(Te){return de("E",void 0,Te)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?qe(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Me(Te,Ee){return ze.call(Te,Ee)}class Oe{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Ee)}catch(He){fe(He)}}error(Ee){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Ee)}catch(He){fe(He)}else fe(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ie){fe(Ie)}}}class je extends te{constructor(Ee,Ie,He){let $e;if(super(),(0,f.m)(Ee)||!Ee)$e={next:null!=Ee?Ee:void 0,error:null!=Ie?Ie:void 0,complete:null!=He?He:void 0};else{let j;this&&P.v.useDeprecatedNextContext?(j=Object.create(Ee),j.unsubscribe=()=>this.unsubscribe(),$e={next:Ee.next&&Me(Ee.next,j),error:Ee.error&&Me(Ee.error,j),complete:Ee.complete&&Me(Ee.complete,j)}):$e=Ee}this.destination=new Oe($e)}}function fe(Te){P.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Te):(0,ue.h)(Te)}function qe(Te,Ee){const{onStoppedNotification:Ie}=P.v;Ie&&$.z.setTimeout(()=>Ie(Te,Ee))}const Ye={closed:!0,next:re,error:function Ce(Te){throw Te},complete:re}},727:(Xe,we,O)=>{O.d(we,{Lc:()=>ge,w0:()=>re,Nn:()=>le});var f=O(576);const P=(0,O(3888).d)(de=>function(B){de(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((te,ze)=>`${ze+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ue=O(8737);class re{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Me of B)Me.remove(this);else B.remove(this);const{initialTeardown:te}=this;if((0,f.m)(te))try{te()}catch(Me){$=Me instanceof P?Me.errors:[Me]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Me of ze)try{oe(Me)}catch(Oe){$=null!=$?$:[],Oe instanceof P?$=[...$,...Oe.errors]:$.push(Oe)}}if($)throw new P($)}}add($){var B;if($&&$!==this)if(this.closed)oe($);else{if($ instanceof re){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push($)}}_hasParent($){const{_parentage:B}=this;return B===$||Array.isArray(B)&&B.includes($)}_addParent($){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push($),B):B?[B,$]:$}_removeParent($){const{_parentage:B}=this;B===$?this._parentage=null:Array.isArray(B)&&(0,ue.P)(B,$)}remove($){const{_finalizers:B}=this;B&&(0,ue.P)(B,$),$ instanceof re&&$._removeParent(this)}}re.EMPTY=(()=>{const de=new re;return de.closed=!0,de})();const ge=re.EMPTY;function le(de){return de instanceof re||de&&"closed"in de&&(0,f.m)(de.remove)&&(0,f.m)(de.add)&&(0,f.m)(de.unsubscribe)}function oe(de){(0,f.m)(de)?de():de.unsubscribe()}},2416:(Xe,we,O)=>{O.d(we,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Xe,we,O)=>{O.d(we,{E:()=>X});const X=new(O(8306).y)(re=>re.complete())},8996:(Xe,we,O)=>{O.d(we,{D:()=>Ee});var f=O(8421),X=O(5363),P=O(9468),ge=O(8306),oe=O(2202),de=O(576),$=O(9672);function te(Ie,He){if(!Ie)throw new Error("Iterable cannot be null");return new ge.y($e=>{(0,$.f)($e,He,()=>{const j=Ie[Symbol.asyncIterator]();(0,$.f)($e,He,()=>{j.next().then(ve=>{ve.done?$e.complete():$e.next(ve.value)})},0,!0)})})}var ze=O(3670),Me=O(8239),Oe=O(1144),je=O(6495),fe=O(2206),Ce=O(4532),qe=O(3260);function Ee(Ie,He){return He?function Te(Ie,He){if(null!=Ie){if((0,ze.c)(Ie))return function ue(Ie,He){return(0,f.Xf)(Ie).pipe((0,P.R)(He),(0,X.Q)(He))}(Ie,He);if((0,Oe.z)(Ie))return function le(Ie,He){return new ge.y($e=>{let j=0;return He.schedule(function(){j===Ie.length?$e.complete():($e.next(Ie[j++]),$e.closed||this.schedule())})})}(Ie,He);if((0,Me.t)(Ie))return function re(Ie,He){return(0,f.Xf)(Ie).pipe((0,P.R)(He),(0,X.Q)(He))}(Ie,He);if((0,fe.D)(Ie))return te(Ie,He);if((0,je.T)(Ie))return function B(Ie,He){return new ge.y($e=>{let j;return(0,$.f)($e,He,()=>{j=Ie[oe.h](),(0,$.f)($e,He,()=>{let ve,K;try{({value:ve,done:K}=j.next())}catch(ie){return void $e.error(ie)}K?$e.complete():$e.next(ve)},0,!0)}),()=>(0,de.m)(null==j?void 0:j.return)&&j.return()})}(Ie,He);if((0,qe.L)(Ie))return function Ye(Ie,He){return te((0,qe.Q)(Ie),He)}(Ie,He)}throw(0,Ce.z)(Ie)}(Ie,He):(0,f.Xf)(Ie)}},8421:(Xe,we,O)=>{O.d(we,{Xf:()=>ze});var f=O(655),X=O(1144),P=O(8239),ue=O(8306),re=O(3670),ge=O(2206),le=O(4532),oe=O(6495),de=O(3260),$=O(576),B=O(7849),te=O(8822);function ze(Te){if(Te instanceof ue.y)return Te;if(null!=Te){if((0,re.c)(Te))return function Me(Te){return new ue.y(Ee=>{const Ie=Te[te.L]();if((0,$.m)(Ie.subscribe))return Ie.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,X.z)(Te))return function Oe(Te){return new ue.y(Ee=>{for(let Ie=0;Ie<Te.length&&!Ee.closed;Ie++)Ee.next(Te[Ie]);Ee.complete()})}(Te);if((0,P.t)(Te))return function je(Te){return new ue.y(Ee=>{Te.then(Ie=>{Ee.closed||(Ee.next(Ie),Ee.complete())},Ie=>Ee.error(Ie)).then(null,B.h)})}(Te);if((0,ge.D)(Te))return Ce(Te);if((0,oe.T)(Te))return function fe(Te){return new ue.y(Ee=>{for(const Ie of Te)if(Ee.next(Ie),Ee.closed)return;Ee.complete()})}(Te);if((0,de.L)(Te))return function qe(Te){return Ce((0,de.Q)(Te))}(Te)}throw(0,le.z)(Te)}function Ce(Te){return new ue.y(Ee=>{(function Ye(Te,Ee){var Ie,He,$e,j;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,f.KL)(Te);!(He=yield Ie.next()).done;)if(Ee.next(He.value),Ee.closed)return}catch(ve){$e={error:ve}}finally{try{He&&!He.done&&(j=Ie.return)&&(yield j.call(Ie))}finally{if($e)throw $e.error}}Ee.complete()})})(Te,Ee).catch(Ie=>Ee.error(Ie))})}},6451:(Xe,we,O)=>{O.d(we,{T:()=>ge});var f=O(8189),X=O(8421),P=O(515),ue=O(7669),re=O(8996);function ge(...le){const oe=(0,ue.yG)(le),de=(0,ue._6)(le,1/0),$=le;return $.length?1===$.length?(0,X.Xf)($[0]):(0,f.J)(de)((0,re.D)($,oe)):P.E}},5403:(Xe,we,O)=>{O.d(we,{x:()=>X});var f=O(2961);function X(ue,re,ge,le,oe){return new P(ue,re,ge,le,oe)}class P extends f.Lv{constructor(re,ge,le,oe,de,$){super(re),this.onFinalize=de,this.shouldUnsubscribe=$,this._next=ge?function(B){try{ge(B)}catch(te){re.error(te)}}:super._next,this._error=oe?function(B){try{oe(B)}catch(te){re.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(B){re.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(Xe,we,O)=>{O.d(we,{U:()=>P});var f=O(4482),X=O(5403);function P(ue,re){return(0,f.e)((ge,le)=>{let oe=0;ge.subscribe((0,X.x)(le,de=>{le.next(ue.call(re,de,oe++))}))})}},8189:(Xe,we,O)=>{O.d(we,{J:()=>P});var f=O(5577),X=O(4671);function P(ue=1/0){return(0,f.z)(X.y,ue)}},5577:(Xe,we,O)=>{O.d(we,{z:()=>oe});var f=O(4004),X=O(8421),P=O(4482),ue=O(9672),re=O(5403),le=O(576);function oe(de,$,B=1/0){return(0,le.m)($)?oe((te,ze)=>(0,f.U)((Me,Oe)=>$(te,Me,ze,Oe))((0,X.Xf)(de(te,ze))),B):("number"==typeof $&&(B=$),(0,P.e)((te,ze)=>function ge(de,$,B,te,ze,Me,Oe,je){const fe=[];let Ce=0,qe=0,Ye=!1;const Te=()=>{Ye&&!fe.length&&!Ce&&$.complete()},Ee=He=>Ce<te?Ie(He):fe.push(He),Ie=He=>{Me&&$.next(He),Ce++;let $e=!1;(0,X.Xf)(B(He,qe++)).subscribe((0,re.x)($,j=>{null==ze||ze(j),Me?Ee(j):$.next(j)},()=>{$e=!0},void 0,()=>{if($e)try{for(Ce--;fe.length&&Ce<te;){const j=fe.shift();Oe?(0,ue.f)($,Oe,()=>Ie(j)):Ie(j)}Te()}catch(j){$.error(j)}}))};return de.subscribe((0,re.x)($,Ee,()=>{Ye=!0,Te()})),()=>{null==je||je()}}(te,ze,de,B)))}},5363:(Xe,we,O)=>{O.d(we,{Q:()=>ue});var f=O(9672),X=O(4482),P=O(5403);function ue(re,ge=0){return(0,X.e)((le,oe)=>{le.subscribe((0,P.x)(oe,de=>(0,f.f)(oe,re,()=>oe.next(de),ge),()=>(0,f.f)(oe,re,()=>oe.complete(),ge),de=>(0,f.f)(oe,re,()=>oe.error(de),ge)))})}},3099:(Xe,we,O)=>{O.d(we,{B:()=>ge});var f=O(8996),X=O(5698),P=O(7579),ue=O(2961),re=O(4482);function ge(oe={}){const{connector:de=(()=>new P.x),resetOnError:$=!0,resetOnComplete:B=!0,resetOnRefCountZero:te=!0}=oe;return ze=>{let Me=null,Oe=null,je=null,fe=0,Ce=!1,qe=!1;const Ye=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Te=()=>{Ye(),Me=je=null,Ce=qe=!1},Ee=()=>{const Ie=Me;Te(),null==Ie||Ie.unsubscribe()};return(0,re.e)((Ie,He)=>{fe++,!qe&&!Ce&&Ye();const $e=je=null!=je?je:de();He.add(()=>{fe--,0===fe&&!qe&&!Ce&&(Oe=le(Ee,te))}),$e.subscribe(He),Me||(Me=new ue.Hp({next:j=>$e.next(j),error:j=>{qe=!0,Ye(),Oe=le(Te,$,j),$e.error(j)},complete:()=>{Ce=!0,Ye(),Oe=le(Te,B),$e.complete()}}),(0,f.D)(Ie).subscribe(Me))})(ze)}}function le(oe,de,...$){return!0===de?(oe(),null):!1===de?null:de(...$).pipe((0,X.q)(1)).subscribe(()=>oe())}},9468:(Xe,we,O)=>{O.d(we,{R:()=>X});var f=O(4482);function X(P,ue=0){return(0,f.e)((re,ge)=>{ge.add(P.schedule(()=>re.subscribe(ge),ue))})}},5698:(Xe,we,O)=>{O.d(we,{q:()=>ue});var f=O(515),X=O(4482),P=O(5403);function ue(re){return re<=0?()=>f.E:(0,X.e)((ge,le)=>{let oe=0;ge.subscribe((0,P.x)(le,de=>{++oe<=re&&(le.next(de),re<=oe&&le.complete())}))})}},8505:(Xe,we,O)=>{O.d(we,{b:()=>re});var f=O(576),X=O(4482),P=O(5403),ue=O(4671);function re(ge,le,oe){const de=(0,f.m)(ge)||le||oe?{next:ge,error:le,complete:oe}:ge;return de?(0,X.e)(($,B)=>{var te;null===(te=de.subscribe)||void 0===te||te.call(de);let ze=!0;$.subscribe((0,P.x)(B,Me=>{var Oe;null===(Oe=de.next)||void 0===Oe||Oe.call(de,Me),B.next(Me)},()=>{var Me;ze=!1,null===(Me=de.complete)||void 0===Me||Me.call(de),B.complete()},Me=>{var Oe;ze=!1,null===(Oe=de.error)||void 0===Oe||Oe.call(de,Me),B.error(Me)},()=>{var Me,Oe;ze&&(null===(Me=de.unsubscribe)||void 0===Me||Me.call(de)),null===(Oe=de.finalize)||void 0===Oe||Oe.call(de)}))}):ue.y}},4408:(Xe,we,O)=>{O.d(we,{o:()=>re});var f=O(727);class X extends f.w0{constructor(le,oe){super()}schedule(le,oe=0){return this}}const P={setInterval(ge,le,...oe){const{delegate:de}=P;return(null==de?void 0:de.setInterval)?de.setInterval(ge,le,...oe):setInterval(ge,le,...oe)},clearInterval(ge){const{delegate:le}=P;return((null==le?void 0:le.clearInterval)||clearInterval)(ge)},delegate:void 0};var ue=O(8737);class re extends X{constructor(le,oe){super(le,oe),this.scheduler=le,this.work=oe,this.pending=!1}schedule(le,oe=0){if(this.closed)return this;this.state=le;const de=this.id,$=this.scheduler;return null!=de&&(this.id=this.recycleAsyncId($,de,oe)),this.pending=!0,this.delay=oe,this.id=this.id||this.requestAsyncId($,this.id,oe),this}requestAsyncId(le,oe,de=0){return P.setInterval(le.flush.bind(le,this),de)}recycleAsyncId(le,oe,de=0){if(null!=de&&this.delay===de&&!1===this.pending)return oe;P.clearInterval(oe)}execute(le,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const de=this._execute(le,oe);if(de)return de;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,oe){let $,de=!1;try{this.work(le)}catch(B){de=!0,$=B||new Error("Scheduled action threw falsy error")}if(de)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:le,scheduler:oe}=this,{actions:de}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(de,this),null!=le&&(this.id=this.recycleAsyncId(oe,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Xe,we,O)=>{O.d(we,{v:()=>P});var f=O(6063);class X{constructor(re,ge=X.now){this.schedulerActionCtor=re,this.now=ge}schedule(re,ge=0,le){return new this.schedulerActionCtor(this,re).schedule(le,ge)}}X.now=f.l.now;class P extends X{constructor(re,ge=X.now){super(re,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:ge}=this;if(this._active)return void ge.push(re);let le;this._active=!0;do{if(le=re.execute(re.state,re.delay))break}while(re=ge.shift());if(this._active=!1,le){for(;re=ge.shift();)re.unsubscribe();throw le}}}},4986:(Xe,we,O)=>{O.d(we,{z:()=>P});var f=O(4408);const P=new(O(7565).v)(f.o)},6063:(Xe,we,O)=>{O.d(we,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Xe,we,O)=>{O.d(we,{z:()=>f});const f={setTimeout(X,P,...ue){const{delegate:re}=f;return(null==re?void 0:re.setTimeout)?re.setTimeout(X,P,...ue):setTimeout(X,P,...ue)},clearTimeout(X){const{delegate:P}=f;return((null==P?void 0:P.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(Xe,we,O)=>{O.d(we,{h:()=>X});const X=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Xe,we,O)=>{O.d(we,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Xe,we,O)=>{O.d(we,{_6:()=>ge,jO:()=>ue,yG:()=>re});var f=O(576);function P(le){return le[le.length-1]}function ue(le){return(0,f.m)(P(le))?le.pop():void 0}function re(le){return function X(le){return le&&(0,f.m)(le.schedule)}(P(le))?le.pop():void 0}function ge(le,oe){return"number"==typeof P(le)?le.pop():oe}},8737:(Xe,we,O)=>{function f(X,P){if(X){const ue=X.indexOf(P);0<=ue&&X.splice(ue,1)}}O.d(we,{P:()=>f})},3888:(Xe,we,O)=>{function f(X){const ue=X(re=>{Error.call(re),re.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}O.d(we,{d:()=>f})},2806:(Xe,we,O)=>{O.d(we,{x:()=>P,O:()=>ue});var f=O(2416);let X=null;function P(re){if(f.v.useDeprecatedSynchronousErrorHandling){const ge=!X;if(ge&&(X={errorThrown:!1,error:null}),re(),ge){const{errorThrown:le,error:oe}=X;if(X=null,le)throw oe}}else re()}function ue(re){f.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=re)}},9672:(Xe,we,O)=>{function f(X,P,ue,re=0,ge=!1){const le=P.schedule(function(){ue(),ge?X.add(this.schedule(null,re)):this.unsubscribe()},re);if(X.add(le),!ge)return le}O.d(we,{f:()=>f})},4671:(Xe,we,O)=>{function f(X){return X}O.d(we,{y:()=>f})},1144:(Xe,we,O)=>{O.d(we,{z:()=>f});const f=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(Xe,we,O)=>{O.d(we,{D:()=>X});var f=O(576);function X(P){return Symbol.asyncIterator&&(0,f.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(Xe,we,O)=>{function f(X){return"function"==typeof X}O.d(we,{m:()=>f})},3670:(Xe,we,O)=>{O.d(we,{c:()=>P});var f=O(8822),X=O(576);function P(ue){return(0,X.m)(ue[f.L])}},6495:(Xe,we,O)=>{O.d(we,{T:()=>P});var f=O(2202),X=O(576);function P(ue){return(0,X.m)(null==ue?void 0:ue[f.h])}},8239:(Xe,we,O)=>{O.d(we,{t:()=>X});var f=O(576);function X(P){return(0,f.m)(null==P?void 0:P.then)}},3260:(Xe,we,O)=>{O.d(we,{Q:()=>P,L:()=>ue});var f=O(655),X=O(576);function P(re){return(0,f.FC)(this,arguments,function*(){const le=re.getReader();try{for(;;){const{value:oe,done:de}=yield(0,f.qq)(le.read());if(de)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(oe)}}finally{le.releaseLock()}})}function ue(re){return(0,X.m)(null==re?void 0:re.getReader)}},4482:(Xe,we,O)=>{O.d(we,{A:()=>X,e:()=>P});var f=O(576);function X(ue){return(0,f.m)(null==ue?void 0:ue.lift)}function P(ue){return re=>{if(X(re))return re.lift(function(ge){try{return ue(ge,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Xe,we,O)=>{O.d(we,{h:()=>P});var f=O(2416),X=O(3410);function P(ue){X.z.setTimeout(()=>{const{onUnhandledError:re}=f.v;if(!re)throw ue;re(ue)})}},4532:(Xe,we,O)=>{function f(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(we,{z:()=>f})},655:(Xe,we,O)=>{function ue(K,ie){var ee={};for(var ye in K)Object.prototype.hasOwnProperty.call(K,ye)&&ie.indexOf(ye)<0&&(ee[ye]=K[ye]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(ye=Object.getOwnPropertySymbols(K);ae<ye.length;ae++)ie.indexOf(ye[ae])<0&&Object.prototype.propertyIsEnumerable.call(K,ye[ae])&&(ee[ye[ae]]=K[ye[ae]])}return ee}function oe(K,ie,ee,ye){return new(ee||(ee=Promise))(function(Pe,ut){function Ht(Jt){try{Qe(ye.next(Jt))}catch(Tn){ut(Tn)}}function Lt(Jt){try{Qe(ye.throw(Jt))}catch(Tn){ut(Tn)}}function Qe(Jt){Jt.done?Pe(Jt.value):function ae(Pe){return Pe instanceof ee?Pe:new ee(function(ut){ut(Pe)})}(Jt.value).then(Ht,Lt)}Qe((ye=ye.apply(K,ie||[])).next())})}function fe(K){return this instanceof fe?(this.v=K,this):new fe(K)}function Ce(K,ie,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,ye=ee.apply(K,ie||[]),Pe=[];return ae={},ut("next"),ut("throw"),ut("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function ut(nn){ye[nn]&&(ae[nn]=function(Yt){return new Promise(function(Ir,qt){Pe.push([nn,Yt,Ir,qt])>1||Ht(nn,Yt)})})}function Ht(nn,Yt){try{!function Lt(nn){nn.value instanceof fe?Promise.resolve(nn.value.v).then(Qe,Jt):Tn(Pe[0][2],nn)}(ye[nn](Yt))}catch(Ir){Tn(Pe[0][3],Ir)}}function Qe(nn){Ht("next",nn)}function Jt(nn){Ht("throw",nn)}function Tn(nn,Yt){nn(Yt),Pe.shift(),Pe.length&&Ht(Pe[0][0],Pe[0][1])}}function Ye(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,ie=K[Symbol.asyncIterator];return ie?ie.call(K):(K=function te(K){var ie="function"==typeof Symbol&&Symbol.iterator,ee=ie&&K[ie],ye=0;if(ee)return ee.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&ye>=K.length&&(K=void 0),{value:K&&K[ye++],done:!K}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ee={},ye("next"),ye("throw"),ye("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function ye(Pe){ee[Pe]=K[Pe]&&function(ut){return new Promise(function(Ht,Lt){!function ae(Pe,ut,Ht,Lt){Promise.resolve(Lt).then(function(Qe){Pe({value:Qe,done:Ht})},ut)}(Ht,Lt,(ut=K[Pe](ut)).done,ut.value)})}}}O.d(we,{_T:()=>ue,mG:()=>oe,qq:()=>fe,FC:()=>Ce,KL:()=>Ye})},5e3:(Xe,we,O)=>{O.d(we,{deG:()=>Yp,tb:()=>uy,AFp:()=>oy,ip1:()=>sE,CZH:()=>oE,hGG:()=>_I,z2F:()=>EE,sBO:()=>yT,Sil:()=>Qb,_Vd:()=>np,EJc:()=>vh,SBq:()=>ml,qLn:()=>Ad,vpe:()=>Yi,tBr:()=>Gr,XFs:()=>mt,OlP:()=>fn,zs3:()=>_o,ZZ4:()=>Ey,aQg:()=>bp,soG:()=>pp,YKP:()=>bb,h0i:()=>Oc,PXZ:()=>_E,R0b:()=>gs,FiY:()=>ii,Lbi:()=>Zb,g9A:()=>ay,Qsj:()=>rp,FYo:()=>Mc,JOm:()=>A,tp0:()=>oi,Rgc:()=>lp,dDg:()=>pE,q4F:()=>vb,GfV:()=>Nv,s_b:()=>kc,ifc:()=>Gt,eFA:()=>dy,G48:()=>IE,Gpc:()=>B,X6Q:()=>bE,_c5:()=>kE,VLi:()=>eI,c2e:()=>ly,zSh:()=>V_,wAp:()=>_t,vHH:()=>Oe,cg1:()=>Im,kL8:()=>ih,dqk:()=>Vt,sIi:()=>hs,CqO:()=>Yd,QGY:()=>Vf,F4k:()=>nv,RDi:()=>Nl,AaK:()=>oe,qOj:()=>G_,TTD:()=>ki,_Bn:()=>Rm,xp6:()=>af,uIk:()=>zd,ekj:()=>vr,Suo:()=>Fb,Xpm:()=>ht,lG2:()=>mu,Yz7:()=>Yt,cJS:()=>qt,oAB:()=>Cr,Yjl:()=>wa,Y36:()=>Zd,_UZ:()=>al,qZA:()=>Bn,TgZ:()=>um,n5z:()=>Ru,LFG:()=>Ve,$8M:()=>so,$Z:()=>ol,NdJ:()=>rv,CRH:()=>zm,O4$:()=>Ay,ALo:()=>Ab,lcZ:()=>Sb,Q6J:()=>am,s9C:()=>vc,iGM:()=>kb,LSH:()=>zu,YNc:()=>Q_,_uU:()=>wc,Oqu:()=>dv,hij:()=>Gf,AsE:()=>ym});var f=O(7579),X=O(727),P=O(8306),ue=O(6451),re=O(3099);function ge(i){for(let o in i)if(i[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function le(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function oe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(oe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function de(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const $=ge({__forward_ref__:ge});function B(i){return i.__forward_ref__=B,i.toString=function(){return oe(this())},i}function te(i){return ze(i)?i():i}function ze(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===B}class Oe extends Error{constructor(o,a){super(function je(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function Ce(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function Ee(i,o){const a=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${Ce(i)} found${a}`)}function Lt(i,o){null==i&&function Qe(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Yt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function qt(i){return{providers:i.providers||[],imports:i.imports||[]}}function kt(i){return Ji(i,Si)||Ji(i,Kr)}function Ji(i,o){return i.hasOwnProperty(o)?i[o]:null}function Dr(i){return i&&(i.hasOwnProperty(Is)||i.hasOwnProperty(Mi))?i[Is]:null}const Si=ge({\u0275prov:ge}),Is=ge({\u0275inj:ge}),Kr=ge({ngInjectableDef:ge}),Mi=ge({ngInjectorDef:ge});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Zr;function An(i){const o=Zr;return Zr=i,o}function qs(i,o,a){const l=kt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&mt.Optional?null:void 0!==o?o:void Ee(oe(i),"Injector")}function $n(i){return{toString:i}.toString()}var Nn=(()=>((Nn=Nn||{})[Nn.OnPush=0]="OnPush",Nn[Nn.Default=1]="Default",Nn))(),Gt=(()=>{return(i=Gt||(Gt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Gt;var i})();const it="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,cr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vt=it||"undefined"!=typeof global&&global||vt||cr,hr={},V=[],G=ge({\u0275cmp:ge}),z=ge({\u0275dir:ge}),De=ge({\u0275pipe:ge}),H=ge({\u0275mod:ge}),J=ge({\u0275fac:ge}),Ne=ge({__NG_ELEMENT_ID__:ge});let Je=0;function ht(i){return $n(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Nn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||V,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Gt.Emulated,id:"c",styles:i.styles||V,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,p=i.features,_=i.pipes;return l.id+=Je++,l.inputs=Ea(i.inputs,a),l.outputs=Ea(i.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(cn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(Et):null,l})}function cn(i){return Ln(i)||function Tr(i){return i[z]||null}(i)}function Et(i){return function Xi(i){return i[De]||null}(i)}const Fn={};function Cr(i){return $n(()=>{const o={type:i.type,bootstrap:i.bootstrap||V,declarations:i.declarations||V,imports:i.imports||V,exports:i.exports||V,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Fn[i.id]=i.type),o})}function Ea(i,o){if(null==i)return hr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const mu=ht;function wa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ln(i){return i[G]||null}function Vn(i,o){const a=i[H]||null;if(!a&&!0===o)throw new Error(`Type ${oe(i)} does not have '\u0275mod' property.`);return a}function Br(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ri(i){return Array.isArray(i)&&!0===i[1]}function vu(i){return 0!=(8&i.flags)}function qc(i){return 2==(2&i.flags)}function Oi(i){return 1==(1&i.flags)}function Pi(i){return null!==i.template}function Tl(i){return 0!=(512&i[2])}function pr(i,o){return i.hasOwnProperty(J)?i[J]:null}class Ys{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ki(){return Mo}function Mo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ph),ed}function ed(){const i=Qs(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===hr)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Ph(i,o,a,l){const d=Qs(i)||function xo(i,o){return i[Ar]=o}(i,{previous:hr,current:null}),p=d.current||(d.current={}),_=d.previous,w=this.declaredInputs[a],I=_[w];p[w]=new Ys(I&&I.currentValue,o,_===hr),i[l]=o}ki.ngInherit=!0;const Ar="__ngSimpleChanges__";function Qs(i){return i[Ar]||null}let Ro;function Nl(i){Ro=i}function sn(i){return!!i.listen}const Ta={createRenderer:(i,o)=>function Fi(){return void 0!==Ro?Ro:"undefined"!=typeof document?document:void 0}()};function Qt(i){for(;Array.isArray(i);)i=i[0];return i}function xs(i,o){return Qt(o[i])}function Xn(i,o){return Qt(o[i.index])}function pn(i,o){return i.data[o]}function er(i,o){const a=o[i];return Br(a)?a:a[0]}function Xs(i){return 4==(4&i[2])}function ts(i){return 128==(128&i[2])}function _i(i,o){return null==o?null:i[o]}function Vi(i){i[18]=0}function Oo(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const ft={lFrame:rd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function xa(){return ft.bindingsEnabled}function Ae(){return ft.lFrame.lView}function Pt(){return ft.lFrame.tView}function hn(){let i=ko();for(;null!==i&&64===i.type;)i=i.parent;return i}function ko(){return ft.lFrame.currentTNode}function Xr(i,o){const a=ft.lFrame;a.currentTNode=i,a.isParent=o}function Na(){return ft.lFrame.isParent}function Ra(){return ft.isInCheckNoChangesMode}function Du(i){ft.isInCheckNoChangesMode=i}function Ns(){return ft.lFrame.bindingIndex++}function vi(i){const o=ft.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function Ul(i,o){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=i,Pa(o)}function Pa(i){ft.lFrame.currentDirectiveIndex=i}function Bl(){return ft.lFrame.currentQueryIndex}function ka(i){ft.lFrame.currentQueryIndex=i}function Wp(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function jl(i,o,a){if(a&mt.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&mt.Host||(d=Wp(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,i=p}const l=ft.lFrame=Fa();return l.currentTNode=o,l.lView=i,!0}function Lo(i){const o=Fa(),a=i[1];ft.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Fa(){const i=ft.lFrame,o=null===i?null:i.child;return null===o?rd(i):o}function rd(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Vo(){const i=ft.lFrame;return ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const id=Vo;function Uo(){const i=Vo();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Hn(){return ft.lFrame.selectedIndex}function Bi(i){ft.lFrame.selectedIndex=i}function En(){const i=ft.lFrame;return pn(i.tView,i.selectedIndex)}function Ay(){ft.lFrame.currentNamespace="svg"}function od(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:M}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function La(i,o,a){Gn(i,o,3,a)}function rs(i,o,a,l){(3&i[2])===a&&Gn(i,o,a,l)}function Bo(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Gn(i,o,a,l){const p=null!=l?l:-1,_=o.length-1;let w=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof o[I+1]){if(w=o[I],null!=l&&w>=l)break}else o[I]<0&&(i[18]+=65536),(w<p||-1==p)&&(Vh(i,a,o,I),i[18]=(4294901760&i[18])+I+2),I++}function Vh(i,o,a,l){const d=a[l]<0,p=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Au{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function et(i,o,a){const l=sn(i);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const _=a[d++],w=a[d++],I=a[d++];l?i.setAttribute(o,w,I,_):o.setAttributeNS(_,w,I)}else{const _=p,w=a[++d];jr(_)?l&&i.setProperty(o,_,w):l?i.setAttribute(o,_,w):o.setAttribute(_,w),d++}}return d}function ei(i){return 3===i||4===i||6===i}function jr(i){return 64===i.charCodeAt(0)}function On(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||$l(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function $l(i,o,a,l,d){let p=0,_=i.length;if(-1===o)_=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===o){_=-1;break}if(w>o){_=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==_&&(i.splice(_,0,o),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}function ld(i){return-1!==i}function ji(i){return 32767&i}function un(i,o){let a=function Hl(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let Ua=!0;function Ei(i){const o=Ua;return Ua=i,o}let dd=0;function xn(i,o){const a=$o(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,jo(l.data,i),jo(o,null),jo(l.blueprint,null));const d=Rs(i,o),p=i.injectorIndex;if(ld(d)){const _=ji(d),w=un(d,o),I=w[1].data;for(let T=0;T<8;T++)o[p+T]=w[_+T]|I[_+T]}return o[p+8]=d,p}function jo(i,o){i.push(0,0,0,0,0,0,0,0,o)}function $o(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Rs(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const p=d[1],_=p.type;if(l=2===_?p.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function tr(i,o,a){!function Gl(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Ne)&&(l=a[Ne]),null==l&&(l=a[Ne]=dd++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function is(i,o,a){if(a&mt.Optional)return i;Ee(o,"NodeInjector")}function Ho(i,o,a,l){if(a&mt.Optional&&void 0===l&&(l=null),0==(a&(mt.Self|mt.Host))){const d=i[9],p=An(void 0);try{return d?d.get(o,l,a&mt.Optional):qs(o,l,a&mt.Optional)}finally{An(p)}}return is(l,o,a)}function Os(i,o,a,l=mt.Default,d){if(null!==i){const p=function Ba(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Ne)?i[Ne]:void 0;return"number"==typeof o?o>=0?255&o:ro:o}(a);if("function"==typeof p){if(!jl(o,i,l))return l&mt.Host?is(d,a,l):Ho(o,a,l,d);try{const _=p(l);if(null!=_||l&mt.Optional)return _;Ee(a)}finally{id()}}else if("number"==typeof p){let _=null,w=$o(i,o),I=-1,T=l&mt.Host?o[16][6]:null;for((-1===w||l&mt.SkipSelf)&&(I=-1===w?Rs(i,o):o[w+8],-1!==I&&nr(l,!1)?(_=o[1],w=ji(I),o=un(I,o)):w=-1);-1!==w;){const M=o[1];if(Ps(p,w,M.data)){const k=zo(w,o,a,_,l,T);if(k!==Go)return k}I=o[w+8],-1!==I&&nr(l,o[1].data[w+8]===T)&&Ps(p,w,o)?(_=M,w=ji(I),o=un(I,o)):w=-1}}}return Ho(o,a,l,d)}const Go={};function ro(){return new io(hn(),Ae())}function zo(i,o,a,l,d,p){const _=o[1],w=_.data[i+8],M=qo(w,_,a,null==l?qc(w)&&Ua:l!=_&&0!=(3&w.type),d&mt.Host&&p===w);return null!==M?Wo(o,_,M,w):Go}function qo(i,o,a,l,d){const p=i.providerIndexes,_=o.data,w=1048575&p,I=i.directiveStart,M=p>>20,U=d?w+M:i.directiveEnd;for(let Q=l?w:w+M;Q<U;Q++){const se=_[Q];if(Q<I&&a===se||Q>=I&&se.type===a)return Q}if(d){const Q=_[I];if(Q&&Pi(Q)&&Q.type===a)return I}return null}function Wo(i,o,a,l){let d=i[a];const p=o.data;if(function ad(i){return i instanceof Au}(d)){const _=d;_.resolving&&function qe(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ce(p[a]));const w=Ei(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?An(_.injectImpl):null;jl(i,l,mt.Default);try{d=i[a]=_.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function Kp(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const _=Mo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==I&&An(I),Ei(w),_.resolving=!1,id()}}return d}function Ps(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function nr(i,o){return!(i&mt.Self||i&mt.Host&&o)}class io{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Os(this._tNode,this._lView,o,l,a)}}function Ru(i){return $n(()=>{const o=i.prototype.constructor,a=o[J]||wn(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const p=d[J]||wn(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function wn(i){return ze(i)?()=>{const o=wn(te(i));return o&&o()}:pr(i)}function so(i){return function Nu(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(ei(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(hn(),i)}const ss="__parameters__";function bn(i,o,a){return $n(()=>{const l=function ti(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const _=new d(...p);return w.annotation=_,w;function w(I,T,M){const k=I.hasOwnProperty(ss)?I[ss]:Object.defineProperty(I,ss,{value:[]})[ss];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(_),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class fn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Yp=new fn("AnalyzeForEntryComponents");function ni(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),ni(l,o)):o!==i&&o.push(l)}return o}function ri(i,o){i.forEach(a=>Array.isArray(a)?ri(a,o):o(a))}function Zo(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function uo(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function zn(i,o,a){let l=Fs(i,o);return l>=0?i[1|l]=a:(l=~l,function os(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function Ha(i,o){const a=Fs(i,o);if(a>=0)return i[1|a]}function Fs(i,o){return function fd(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const p=l+(d-l>>1),_=i[p<<a];if(o===_)return p<<a;_>o?d=p:l=p+1}return~(d<<a)}(i,o,1)}const Qo={},Jo="__NG_DI_FLAG__",ho="ngTempTokenPath",D=/\n/gm,N="__source",F=ge({provide:String,useValue:ge});let Y;function ne(i){const o=Y;return Y=i,o}function me(i,o=mt.Default){if(void 0===Y)throw new Oe(203,"");return null===Y?qs(i,void 0,o):Y.get(i,o&mt.Optional?null:void 0,o)}function Ve(i,o=mt.Default){return(function vn(){return Zr}()||me)(te(i),o)}const dt=Ve;function Ut(i){const o=[];for(let a=0;a<i.length;a++){const l=te(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Oe(900,"");let d,p=mt.Default;for(let _=0;_<l.length;_++){const w=l[_],I=gr(w);"number"==typeof I?-1===I?d=w.token:p|=I:d=w}o.push(Ve(d,p))}else o.push(Ve(l))}return o}function wt(i,o){return i[Jo]=o,i.prototype[Jo]=o,i}function gr(i){return i[Jo]}const Gr=wt(bn("Inject",i=>({token:i})),-1),ii=wt(bn("Optional"),8),oi=wt(bn("SkipSelf"),4);class vd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ea(i){return i instanceof vd?i.changingThisBreaksApplicationSecurity:i}const bd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,cg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var zt=(()=>((zt=zt||{})[zt.NONE=0]="NONE",zt[zt.HTML=1]="HTML",zt[zt.STYLE=2]="STYLE",zt[zt.SCRIPT=3]="SCRIPT",zt[zt.URL=4]="URL",zt[zt.RESOURCE_URL=5]="RESOURCE_URL",zt))();function zu(i){const o=function ta(){const i=Ae();return i&&i[12]}();return o?o.sanitize(zt.URL,i)||"":function Vs(i,o){const a=function Ql(i){return i instanceof vd&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?ea(i):function Us(i){return(i=String(i)).match(bd)||i.match(cg)?i:"unsafe:"+i}(fe(i))}const Jh="__ngContext__";function ir(i,o){i[Jh]=o}function Td(i){const o=function Ya(i){return i[Jh]||null}(i);return o?Array.isArray(o)?o:o.lView:null}function ui(i){return i.ngOriginalError}function Ky(i,...o){i.error(...o)}class Ad{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function Eg(i){return i&&i.ngErrorLogger||Ky}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&ui(o);for(;a&&ui(a);)a=ui(a);return a||null}}const Yy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vt))();function ls(i){return i instanceof Function?i():i}var A=(()=>((A=A||{})[A.Important=1]="Important",A[A.DashCase=2]="DashCase",A))();function W(i,o){return undefined(i,o)}function Ze(i){const o=i[3];return Ri(o)?o[3]:o}function In(i){return nc(i[13])}function ci(i){return nc(i[4])}function nc(i){for(;null!==i&&!Ri(i);)i=i[4];return i}function na(i,o,a,l,d){if(null!=l){let p,_=!1;Ri(l)?p=l:Br(l)&&(_=!0,l=l[0]);const w=Qt(l);0===i&&null!==a?null==d?t_(o,a,w):cs(o,a,w,d||null,!0):1===i&&null!==a?cs(o,a,w,d||null,!0):2===i?function s_(i,o,a){const l=zi(i,o);l&&function ED(i,o,a,l){sn(i)?i.removeChild(o,a,l):o.removeChild(a)}(i,l,o,a)}(o,w,_):3===i&&o.destroyNode(w),null!=p&&function I0(i,o,a,l,d){const p=a[7];p!==Qt(a)&&na(o,i,l,p,d);for(let w=10;w<a.length;w++){const I=a[w];Sg(I[1],I,i,o,l,p)}}(o,i,p,a,d)}}function xd(i,o,a){if(sn(i))return i.createElement(o,a);{const l=null!==a?function xl(i){const o=i.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(o):i.createElementNS(l,o)}}function f0(i,o){const a=i[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Oo(d,-1)),a.splice(l,1)}function Jy(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&f0(d,l),o>0&&(i[a-1][4]=l[4]);const p=uo(i,10+o);!function di(i,o){Sg(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Xy(i,o){if(!(256&o[2])){const a=o[11];sn(a)&&a.destroyNode&&Sg(i,o,a,3,null,null),function Ku(i){let o=i[13];if(!o)return e_(i[1],i);for(;o;){let a=null;if(Br(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Br(o)&&e_(o[1],o),o=o[3];null===o&&(o=i),Br(o)&&e_(o[1],o),a=o&&o[4]}o=a}}(o)}}function e_(i,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function g0(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Au)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=d[p[_]],I=p[_+1];try{I.call(w)}finally{}}else try{p.call(d)}finally{}}}}(i,o),function p0(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],w="function"==typeof _?_(o):Qt(o[_]),I=l[d=a[p+2]],T=a[p+3];"boolean"==typeof T?w.removeEventListener(a[p],I,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),p+=2}else{const _=l[d=a[p+1]];a[p].call(_)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();o[7]=null}}(i,o),1===o[1].type&&sn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Ri(o[3])){a!==o[3]&&f0(a,o);const l=o[19];null!==l&&l.detachView(i)}}}function Tg(i,o,a){return function vD(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===Gt.None||d===Gt.Emulated)return null}return Xn(l,a)}(i,o.parent,a)}function cs(i,o,a,l,d){sn(i)?i.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function t_(i,o,a){sn(i)?i.appendChild(o,a):o.appendChild(a)}function m0(i,o,a,l,d){null!==l?cs(i,o,a,l,d):t_(i,o,a)}function zi(i,o){return sn(i)?i.parentNode(o):o.parentNode}let n_=function _0(i,o,a){return 40&i.type?Xn(i,a):null};function Ag(i,o,a,l){const d=Tg(i,l,o),p=o[11],w=function y0(i,o,a){return n_(i,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)m0(p,d,a[I],w,!1);else m0(p,d,a,w,!1)}function Nd(i,o){if(null!==o){const a=o.type;if(3&a)return Xn(o,i);if(4&a)return i_(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Nd(i,l);{const d=i[o.index];return Ri(d)?i_(-1,d):Qt(d)}}if(32&a)return W(o,i)()||Qt(i[o.index]);{const l=E0(i,o);return null!==l?Array.isArray(l)?l[0]:Nd(Ze(i[16]),l):Nd(i,o.next)}}return null}function E0(i,o){return null!==o?i[16][6].projection[o.projection]:null}function i_(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Nd(l,d)}return o[7]}function o_(i,o,a,l,d,p,_){for(;null!=a;){const w=l[a.index],I=a.type;if(_&&0===o&&(w&&ir(Qt(w),l),a.flags|=4),64!=(64&a.flags))if(8&I)o_(i,o,a.child,l,d,p,!1),na(o,i,d,w,p);else if(32&I){const T=W(a,l);let M;for(;M=T();)na(o,i,d,M,p);na(o,i,d,w,p)}else 16&I?b0(i,o,l,a,d,p):na(o,i,d,w,p);a=_?a.projectionNext:a.next}}function Sg(i,o,a,l,d,p){o_(a,l,i.firstChild,o,d,p,!1)}function b0(i,o,a,l,d,p){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)na(o,i,d,I[T],p);else o_(i,o,I,_[3],d,p,!0)}function D0(i,o,a){sn(i)?i.setAttribute(o,"style",a):o.style.cssText=a}function a_(i,o,a){sn(i)?""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a):o.className=a}function C0(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}const Wn="ng-template";function u_(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==C0(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function T0(i){return 4===i.type&&i.value!==Wn}function ID(i,o,a){return o===(4!==i.type||a?i.value:Wn)}function js(i,o,a){let l=4;const d=i.attrs||[],p=function Mg(i){for(let o=0;o<i.length;o++)if(ei(i[o]))return o;return i.length}(d);let _=!1;for(let w=0;w<o.length;w++){const I=o[w];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!ID(i,I,a)||""===I&&1===o.length){if(ra(l))return!1;_=!0}}else{const T=8&l?I:o[++w];if(8&l&&null!==i.attrs){if(!u_(i.attrs,T,a)){if(ra(l))return!1;_=!0}continue}const k=DD(8&l?"class":I,d,T0(i),a);if(-1===k){if(ra(l))return!1;_=!0;continue}if(""!==T){let U;U=k>p?"":d[k+1].toLowerCase();const Q=8&l?U:null;if(Q&&-1!==C0(Q,T,0)||2&l&&T!==U){if(ra(l))return!1;_=!0}}}}else{if(!_&&!ra(l)&&!ra(I))return!1;if(_&&ra(I))continue;_=!1,l=I|1&l}}return ra(l)||_}function ra(i){return 0==(1&i)}function DD(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function Yu(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function be(i,o,a=!1){for(let l=0;l<o.length;l++)if(js(i,o[l],a))return!0;return!1}function A0(i,o){return i?":not("+o.trim()+")":o}function Xa(i){let o=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];d+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!ra(_)&&(o+=A0(p,d),d=""),l=_,p=p||!ra(l);a++}return""!==d&&(o+=A0(p,d)),o}const Be={};function af(i){xg(Pt(),Ae(),Hn()+i,Ra())}function xg(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&La(o,p,a)}else{const p=i.preOrderHooks;null!==p&&rs(o,p,0,a)}Bi(a)}function Ng(i,o){return i<<17|o<<2}function ds(i){return i>>17&32767}function c_(i){return 2|i}function Dn(i){return(131068&i)>>2}function Od(i,o){return-131069&i|o<<2}function ia(i){return 1|i}function hf(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];ka(d),_.contentQueries(2,o[p],p)}}}function sc(i,o,a,l,d,p,_,w,I,T){const M=o.blueprint.slice();return M[0]=d,M[2]=140|l,Vi(M),M[3]=M[15]=i,M[8]=a,M[10]=_||i&&i[10],M[11]=w||i&&i[11],M[12]=I||i&&i[12]||null,M[9]=T||i&&i[9]||null,M[6]=p,M[16]=2==o.type?i[16]:M,M}function Xu(i,o,a,l,d){let p=i.data[o];if(null===p)p=function Fg(i,o,a,l,d){const p=ko(),_=Na(),I=i.data[o]=function PD(i,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,o,a,l,d),function Vl(){return ft.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const _=function eo(){const i=ft.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Xr(p,!0),p}function oc(i,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function ff(i,o,a){Lo(o);try{const l=i.viewQuery;null!==l&&qg(1,l,a);const d=i.template;null!==d&&Lg(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&hf(i,o),i.staticViewQueries&&qg(2,i.viewQuery,a);const p=i.components;null!==p&&function b_(i,o){for(let a=0;a<o.length;a++)W0(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,Uo()}}function ac(i,o,a,l){const d=o[2];if(256==(256&d))return;Lo(o);const p=Ra();try{Vi(o),function Oa(i){return ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Lg(i,o,a,2,l);const _=3==(3&d);if(!p)if(_){const T=i.preOrderCheckHooks;null!==T&&La(o,T,null)}else{const T=i.preOrderHooks;null!==T&&rs(o,T,0,null),Bo(o,0)}if(function q0(i){for(let o=In(i);null!==o;o=ci(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&Oo(p,1),d[2]|=1024}}}(o),function Ci(i){for(let o=In(i);null!==o;o=ci(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];ts(l)&&ac(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&hf(i,o),!p)if(_){const T=i.contentCheckHooks;null!==T&&La(o,T)}else{const T=i.contentHooks;null!==T&&rs(o,T,1),Bo(o,1)}!function kg(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Bi(~d);else{const p=d,_=a[++l],w=a[++l];Ul(_,p),w(2,o[p])}}}finally{Bi(-1)}}(i,o);const w=i.components;null!==w&&function w_(i,o){for(let a=0;a<o.length;a++)_f(i,o[a])}(o,w);const I=i.viewQuery;if(null!==I&&qg(2,I,l),!p)if(_){const T=i.viewCheckHooks;null!==T&&La(o,T)}else{const T=i.viewHooks;null!==T&&rs(o,T,2),Bo(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Oo(o[3],-1))}finally{Uo()}}function V0(i,o,a,l){const d=o[10],p=!Ra(),_=Xs(o);try{p&&!_&&d.begin&&d.begin(),_&&ff(i,o,l),ac(i,o,a,l)}finally{p&&!_&&d.end&&d.end()}}function Lg(i,o,a,l,d){const p=Hn(),_=2&l;try{Bi(-1),_&&o.length>20&&xg(i,o,20,Ra()),a(l,d)}finally{Bi(p)}}function D_(i,o,a){!xa()||(function mf(i,o,a,l){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||xn(a,o),ir(l,o);const _=a.initialInputs;for(let w=d;w<p;w++){const I=i.data[w],T=Pi(I);T&&$D(o,a,I);const M=Wo(o,i,w,a);ir(M,o),null!==_&&jg(0,w-d,M,I,0,_),T&&(er(a.index,o)[8]=M)}}(i,o,a,Xn(a,o)),128==(128&a.flags)&&function $0(i,o,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,w=function Tu(){return ft.lFrame.currentDirectiveIndex}();try{Bi(_);for(let I=l;I<d;I++){const T=i.data[I],M=o[I];Pa(I),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&N_(T,M)}}finally{Bi(-1),Pa(w)}}(i,o,a))}function pf(i,o,a=Xn){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],w=-1===_?a(o,i):i[_];i[d++]=w}}}function Vg(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Fd(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Fd(i,o,a,l,d,p,_,w,I,T){const M=20+l,k=M+d,U=function Or(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Be);return a}(M,k),Q="function"==typeof T?T():T;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:o,data:U.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function U0(i,o,a,l){const d=Df(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&Wg(i).push(l,d.length-1))}function T_(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Di(i,o,a,l,d,p,_,w){const I=Xn(o,a);let M,T=o.inputs;!w&&null!=T&&(M=T[l])?(L_(i,a,M,l,d),qc(o)&&function A_(i,o){const a=er(o,i);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function FD(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,o.value||"",l):d,sn(p)?p.setProperty(I,l,d):jr(l)||(I.setProperty?I.setProperty(l,d):I[l]=d))}function gf(i,o,a,l){let d=!1;if(xa()){const p=function H0(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];be(a,_.selectors,!1)&&(d||(d=[]),tr(xn(a,o),i,_.type),Pi(_)?(yf(i,a),d.unshift(_)):d.push(_))}return d}(i,o,a),_=null===l?null:{"":-1};if(null!==p){d=!0,uc(a,i.data.length,p.length);for(let M=0;M<p.length;M++){const k=p[M];k.providersResolver&&k.providersResolver(k)}let w=!1,I=!1,T=oc(i,o,p.length,null);for(let M=0;M<p.length;M++){const k=p[M];a.mergedAttrs=On(a.mergedAttrs,k.hostAttrs),G0(i,a,o,T,k),jD(T,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const U=k.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}!function kD(i,o){const l=o.directiveEnd,d=i.data,p=o.attrs,_=[];let w=null,I=null;for(let T=o.directiveStart;T<l;T++){const M=d[T],k=M.inputs,U=null===p||T0(o)?null:z0(k,p);_.push(U),w=T_(k,T,w),I=T_(M.outputs,T,I)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=w,o.outputs=I}(i,a)}_&&function BD(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Oe(-301,!1);l.push(o[d],p)}}}(a,l,_)}return a.mergedAttrs=On(a.mergedAttrs,a.attrs),d}function x_(i,o,a,l,d,p){const _=p.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const I=~o.index;(function UD(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(l,d,_)}}function N_(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function yf(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function jD(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;Pi(o)&&(a[""]=i)}}function uc(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function G0(i,o,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=pr(d.type)),_=new Au(p,Pi(d),null);i.blueprint[l]=_,a[l]=_,x_(i,o,0,l,oc(i,a,d.hostVars,Be),d)}function $D(i,o,a){const l=Xn(o,i),d=Vg(a),p=i[10],_=vf(i,sc(i,d,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));i[o.index]=_}function hi(i,o,a,l,d,p){const _=Xn(i,o);!function Bg(i,o,a,l,d,p,_){if(null==p)sn(i)?i.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==_?fe(p):_(p,l||"",d);sn(i)?i.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],_,p,i.value,a,l,d)}function jg(i,o,a,l,d,p){const _=p[o];if(null!==_){const w=l.setInput;for(let I=0;I<_.length;){const T=_[I++],M=_[I++],k=_[I++];null!==w?l.setInput(a,k,T,M):a[M]=k}}}function z0(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function R_(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function _f(i,o){const a=er(o,i);if(ts(a)){const l=a[1];80&a[2]?ac(l,a,l.template,a[8]):a[5]>0&&Ld(a)}}function Ld(i){for(let l=In(i);null!==l;l=ci(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const _=p[1];ac(_,p,_.template,p[8])}else p[5]>0&&Ld(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=er(a[l],i);ts(d)&&d[5]>0&&Ld(d)}}function W0(i,o){const a=er(o,i),l=a[1];(function O_(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),ff(l,a,a[8])}function vf(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Hg(i){for(;i;){i[2]|=64;const o=Ze(i);if(Tl(i)&&!o)return i;i=o}return null}function bf(i,o,a){const l=o[10];l.begin&&l.begin();try{ac(i,o,i.template,a)}catch(d){throw F_(o,d),d}finally{l.end&&l.end()}}function Gg(i){!function wf(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=Td(a),d=l[1];V0(d,l,d.template,a)}}(i[8])}function qg(i,o,a){ka(0),o(i,a)}const P_=(()=>Promise.resolve(null))();function Df(i){return i[7]||(i[7]=[])}function Wg(i){return i.cleanup||(i.cleanup=[])}function F_(i,o){const a=i[9],l=a?a.get(Ad,null):null;l&&l.handleError(o)}function L_(i,o,a,l,d){for(let p=0;p<a.length;){const _=a[p++],w=a[p++],I=o[_],T=i.data[_];null!==T.setInput?T.setInput(I,d,l,w):I[w]=d}}function eu(i,o,a){const l=xs(o,i);!function Md(i,o,a){sn(i)?i.setValue(o,a):o.textContent=a}(i[11],l,a)}function el(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const w=o[_];"number"==typeof w?p=w:1==p?d=de(d,w):2==p&&(l=de(l,w+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const tu=new fn("INJECTOR",-1);class Yg{get(o,a=Qo){if(a===Qo){const l=new Error(`NullInjectorError: No provider for ${oe(o)}!`);throw l.name="NullInjectorError",l}return a}}const V_=new fn("Set Injector scope."),lc={},Vd={};let Cf;function tl(){return void 0===Cf&&(Cf=new Yg),Cf}function U_(i,o=null,a=null,l){const d=Z0(i,o,a,l);return d._resolveInjectorDefTypes(),d}function Z0(i,o=null,a=null,l){return new cc(i,a,o||tl(),l)}class cc{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&ri(a,w=>this.processProvider(w,o,a)),ri([o],w=>this.processInjectorType(w,[],p)),this.records.set(tu,dc(void 0,this));const _=this.records.get(V_);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof o?null:oe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Qo,l=mt.Default){this.assertNotDestroyed();const d=ne(this),p=An(void 0);try{if(!(l&mt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const I=function Y0(i){return"function"==typeof i||"object"==typeof i&&i instanceof fn}(o)&&kt(o);w=I&&this.injectableDefInScope(I)?dc(yo(o),lc):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&mt.Self?tl():this.parent).get(o,a=l&mt.Optional&&a===Qo?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[ho]=_[ho]||[]).unshift(oe(o)),d)throw _;return function qn(i,o,a,l){const d=i[ho];throw o[N]&&d.unshift(o[N]),i.message=function as(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=oe(o);if(Array.isArray(o))d=o.map(oe).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let w=o[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):oe(w)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[ho]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{An(p),ne(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(oe(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,a,l){if(!(o=te(o)))return!1;let d=Dr(o);const p=null==d&&o.ngModule||void 0,_=void 0===p?o:p,w=-1!==l.indexOf(_);if(void 0!==p&&(d=Dr(p)),null==d)return!1;if(null!=d.imports&&!w){let M;l.push(_);try{ri(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===M&&(M=[]),M.push(k))})}finally{}if(void 0!==M)for(let k=0;k<M.length;k++){const{ngModule:U,providers:Q}=M[k];ri(Q,se=>this.processProvider(se,U,Q||V))}}this.injectorDefTypes.add(_);const I=pr(_)||(()=>new _);this.records.set(_,dc(I,lc));const T=d.providers;if(null!=T&&!w){const M=o;ri(T,k=>this.processProvider(k,M,T))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let d=Ud(o=te(o))?o:te(o&&o.provide);const p=function Jg(i,o,a){return Cn(i)?dc(void 0,i.useValue):dc(Tf(i),lc)}(o);if(Ud(o)||!0!==o.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=dc(void 0,lc,!0),_.factory=()=>Ut(_.multi),this.records.set(d,_)),d=o,_.multi.push(o)}this.records.set(d,p)}hydrate(o,a){return a.value===lc&&(a.value=Vd,a.value=a.factory()),"object"==typeof a.value&&a.value&&function GD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=te(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function yo(i){const o=kt(i),a=null!==o?o.factory:pr(i);if(null!==a)return a;if(i instanceof fn)throw new Oe(204,!1);if(i instanceof Function)return function Qg(i){const o=i.length;if(o>0)throw function lo(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new Oe(204,!1);const a=function Wr(i){const o=i&&(i[Si]||i[Kr]);if(o){const a=function lr(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Oe(204,!1)}function Tf(i,o,a){let l;if(Ud(i)){const d=te(i);return pr(d)||yo(d)}if(Cn(i))l=()=>te(i.useValue);else if(function HD(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Ut(i.deps||[]));else if(function Xg(i){return!(!i||!i.useExisting)}(i))l=()=>Ve(te(i.useExisting));else{const d=te(i&&(i.useClass||i.provide));if(!function Sf(i){return!!i.deps}(i))return pr(d)||yo(d);l=()=>new d(...Ut(i.deps))}return l}function dc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Cn(i){return null!==i&&"object"==typeof i&&F in i}function Ud(i){return"function"==typeof i}let _o=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return U_({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return U_({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Qo,i.NULL=new Yg,i.\u0275prov=Yt({token:i,providedIn:"any",factory:()=>Ve(tu)}),i.__NG_ELEMENT_ID__=-1,i})();function ow(i,o){od(Td(i)[1],hn())}function G_(i){let o=function Hd(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(Pi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=rm(i.inputs),_.declaredInputs=rm(i.declaredInputs),_.outputs=rm(i.outputs);const w=d.hostBindings;w&&ZD(i,w);const I=d.viewQuery,T=d.contentQueries;if(I&&WD(i,I),T&&KD(i,T),le(i.inputs,d.inputs),le(i.declaredInputs,d.declaredInputs),le(i.outputs,d.outputs),Pi(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(i),w===G_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function sr(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=On(d.hostAttrs,a=On(a,d.hostAttrs))}}(l)}function rm(i){return i===hr?{}:i===V?[]:i}function WD(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function KD(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function ZD(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Nf=null;function ru(){if(!Nf){const i=Vt.Symbol;if(i&&i.iterator)Nf=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Nf=l)}}}return Nf}function hs(i){return!!Rf(i)&&(Array.isArray(i)||!(i instanceof Map)&&ru()in i)}function Rf(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function kr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function zd(i,o,a,l){const d=Ae();return kr(d,Ns(),o)&&(Pt(),hi(En(),d,i,o,a,l)),zd}function hc(i,o,a,l){return kr(i,Ns(),a)?o+fe(a)+l:Be}function oa(i,o,a,l,d,p){const w=function sa(i,o,a,l){const d=kr(i,o,a);return kr(i,o+1,l)||d}(i,function ns(){return ft.lFrame.bindingIndex}(),a,d);return vi(2),w?o+fe(a)+l+fe(d)+p:Be}function Q_(i,o,a,l,d,p,_,w){const I=Ae(),T=Pt(),M=i+20,k=T.firstCreatePass?function dw(i,o,a,l,d,p,_,w,I){const T=o.consts,M=Xu(o,i,4,_||null,_i(T,w));gf(o,a,M,_i(T,I)),od(o,M);const k=M.tViews=Fd(2,M,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,M),k.queries=o.queries.embeddedTView(M)),M}(M,T,I,o,a,l,d,p,_):T.data[M];Xr(k,!1);const U=I[11].createComment("");Ag(T,I,U,k),ir(U,I),vf(I,I[M]=R_(U,I,U,k)),Oi(k)&&D_(T,I,k),null!=_&&pf(I,k,w)}function Zd(i,o=mt.Default){const a=Ae();return null===a?Ve(i,o):Os(hn(),a,te(i),o)}function ol(){throw new Error("invalid")}function am(i,o,a){const l=Ae();return kr(l,Ns(),o)&&Di(Pt(),En(),l,i,o,l[11],a,!1),am}function mc(i,o,a,l,d){const _=d?"class":"style";L_(i,a,o.inputs[_],_,l)}function um(i,o,a,l){const d=Ae(),p=Pt(),_=20+i,w=d[11],I=d[_]=xd(w,o,function sd(){return ft.lFrame.currentNamespace}()),T=p.firstCreatePass?function Kt(i,o,a,l,d,p,_){const w=o.consts,T=Xu(o,i,2,d,_i(w,p));return gf(o,a,T,_i(w,_)),null!==T.attrs&&el(T,T.attrs,!1),null!==T.mergedAttrs&&el(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,p,d,0,o,a,l):p.data[_];Xr(T,!0);const M=T.mergedAttrs;null!==M&&et(w,I,M);const k=T.classes;null!==k&&a_(w,I,k);const U=T.styles;return null!==U&&D0(w,I,U),64!=(64&T.flags)&&Ag(p,d,I,T),0===function bu(){return ft.lFrame.elementDepthCount}()&&ir(I,d),function Ma(){ft.lFrame.elementDepthCount++}(),Oi(T)&&(D_(p,d,T),function I_(i,o,a){if(vu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,T,d)),null!==l&&pf(d,T),um}function Bn(){let i=hn();Na()?function Ll(){ft.lFrame.isParent=!1}():(i=i.parent,Xr(i,!1));const o=i;!function Ol(){ft.lFrame.elementDepthCount--}();const a=Pt();return a.firstCreatePass&&(od(a,i),vu(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function ud(i){return 0!=(16&i.flags)}(o)&&mc(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Zp(i){return 0!=(32&i.flags)}(o)&&mc(a,o,Ae(),o.stylesWithoutHost,!1),Bn}function al(i,o,a,l){return um(i,o,a,l),Bn(),al}function Vf(i){return!!i&&"function"==typeof i.then}function nv(i){return!!i&&"function"==typeof i.subscribe}const Yd=nv;function rv(i,o,a,l){const d=Ae(),p=Pt(),_=hn();return function Qd(i,o,a,l,d,p,_,w){const I=Oi(l),M=i.firstCreatePass&&Wg(i),k=o[8],U=Df(o);let Q=!0;if(3&l.type||w){const Ue=Xn(l,o),tt=w?w(Ue):Ue,Se=U.length,ct=w?jt=>w(Qt(jt[l.index])):l.index;if(sn(a)){let jt=null;if(!w&&I&&(jt=function Uf(i,o,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===l){const w=o[7],I=d[p+2];return w.length>I?w[I]:null}"string"==typeof _&&(p+=2)}return null}(i,o,d,l.index)),null!==jt)(jt.__ngLastListenerFn__||jt).__ngNextListenerFn__=p,jt.__ngLastListenerFn__=p,Q=!1;else{p=Ge(l,o,k,p,!1);const en=a.listen(tt,d,p);U.push(p,en),M&&M.push(d,ct,Se,Se+1)}}else p=Ge(l,o,k,p,!0),tt.addEventListener(d,p,_),U.push(p),M&&M.push(d,ct,Se,_)}else p=Ge(l,o,k,p,!1);const se=l.outputs;let xe;if(Q&&null!==se&&(xe=se[d])){const Ue=xe.length;if(Ue)for(let tt=0;tt<Ue;tt+=2){const ms=o[xe[tt]][xe[tt+1]].subscribe(p),fu=U.length;U.push(p,ms),M&&M.push(d,l.index,fu,-(fu+1))}}}(p,d,d[11],_,i,o,!!a,l),rv}function iv(i,o,a,l){try{return!1!==a(l)}catch(d){return F_(i,d),!1}}function Ge(i,o,a,l,d){return function p(_){if(_===Function)return l;const w=2&i.flags?er(i.index,o):o;0==(32&o[2])&&Hg(w);let I=iv(o,0,l,_),T=p.__ngNextListenerFn__;for(;T;)I=iv(o,0,T,_)&&I,T=T.__ngNextListenerFn__;return d&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function vc(i,o,a){return da(i,"",o,"",a),vc}function da(i,o,a,l,d){const p=Ae(),_=hc(p,o,a,l);return _!==Be&&Di(Pt(),En(),p,i,_,p[11],d,!1),da}function Ew(i,o,a,l,d){const p=i[a+1],_=null===o;let w=l?ds(p):Dn(p),I=!1;for(;0!==w&&(!1===I||_);){const M=i[w+1];uC(i[w],o)&&(I=!0,i[w+1]=l?ia(M):c_(M)),w=l?ds(M):Dn(M)}I&&(i[a+1]=l?c_(p):ia(p))}function uC(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Fs(i,o)>=0}function vr(i,o){return function $s(i,o,a,l){const d=Ae(),p=Pt(),_=vi(2);p.firstUpdatePass&&function eh(i,o,a,l){const d=i.data;if(null===d[a+1]){const p=d[Hn()],_=function Cw(i,o){return o>=i.expandoStartIndex}(i,a);(function ou(i,o){return 0!=(i.flags&(o?16:32))})(p,l)&&null===o&&!_&&(o=!1),o=function pm(i,o,a,l){const d=function Fo(i){const o=ft.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=Hf(a=Er(null,i,o,a,l),o.attrs,l),p=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Er(d,i,o,a,l),null===p){let I=function gm(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Dn(l))return i[ds(l)]}(i,o,l);void 0!==I&&Array.isArray(I)&&(I=Er(null,i,o,I[1],l),I=Hf(I,o.attrs,l),function Tw(i,o,a,l){i[ds(a?o.classBindings:o.styleBindings)]=l}(i,o,l,I))}else p=function Aw(i,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=Hf(l,i[p].hostAttrs,a);return Hf(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function Bf(i,o,a,l,d,p){let _=p?o.classBindings:o.styleBindings,w=ds(_),I=Dn(_);i[l]=a;let M,T=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||Fs(k,M)>0)&&(T=!0)}else M=a;if(d)if(0!==I){const U=ds(i[w+1]);i[l+1]=Ng(U,w),0!==U&&(i[U+1]=Od(i[U+1],l)),i[w+1]=function CD(i,o){return 131071&i|o<<17}(i[w+1],l)}else i[l+1]=Ng(w,0),0!==w&&(i[w+1]=Od(i[w+1],l)),w=l;else i[l+1]=Ng(I,0),0===w?w=l:i[I+1]=Od(i[I+1],l),I=l;T&&(i[l+1]=c_(i[l+1])),Ew(i,M,l,!0),Ew(i,M,l,!1),function vw(i,o,a,l,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&Fs(p,o)>=0&&(a[l+1]=ia(a[l+1]))}(o,M,i,l,p),_=Ng(w,I),p?o.classBindings=_:o.styleBindings=_}(d,p,o,a,_,l)}}(p,i,_,l),o!==Be&&kr(d,_,o)&&function xw(i,o,a,l,d,p,_,w){if(!(3&o.type))return;const I=i.data,T=I[w+1];mm(function Nr(i){return 1==(1&i)}(T)?Nw(I,o,a,d,Dn(T),_):void 0)||(mm(p)||function S0(i){return 2==(2&i)}(T)&&(p=Nw(I,null,a,d,w,_)),function bD(i,o,a,l,d){const p=sn(i);if(o)d?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:A.DashCase;if(null==d)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),_|=A.Important),p?i.setStyle(a,l,d,_):a.style.setProperty(l,d,w?"important":"")}}}(l,_,xs(Hn(),a),d,p))}(p,p.data[Hn()],d,d[11],i,d[_+1]=function cC(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=oe(ea(i)))),i}(o,a),l,_)}(i,o,null,!0),vr}function Er(i,o,a,l,d){let p=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(p=o[w],l=Hf(l,p.hostAttrs,d),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Hf(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),zn(i,_,!!a||o[++p]))}return void 0===i?null:i}function Nw(i,o,a,l,d,p){const _=null===o;let w;for(;d>0;){const I=i[d],T=Array.isArray(I),M=T?I[1]:I,k=null===M;let U=a[d+1];U===Be&&(U=k?V:void 0);let Q=k?Ha(U,l):M===l?U:void 0;if(T&&!mm(Q)&&(Q=Ha(I,l)),mm(Q)&&(w=Q,_))return w;const se=i[d+1];d=_?ds(se):Dn(se)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(w=Ha(I,l))}return w}function mm(i){return void 0!==i}function wc(i,o=""){const a=Ae(),l=Pt(),d=i+20,p=l.firstCreatePass?Xu(l,d,1,o,null):l.data[d],_=a[d]=function Sd(i,o){return sn(i)?i.createText(o):i.createTextNode(o)}(a[11],o);Ag(l,a,_,p),Xr(p,!1)}function dv(i){return Gf("",i,""),dv}function Gf(i,o,a){const l=Ae(),d=hc(l,i,o,a);return d!==Be&&eu(l,Hn(),d),Gf}function ym(i,o,a,l,d){const p=Ae(),_=oa(p,i,o,a,l,d);return _!==Be&&eu(p,Hn(),_),ym}const pa=void 0;var pC=["en",[["a","p"],["AM","PM"],pa],[["AM","PM"],pa,pa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pa,"{1} 'at' {0}",pa],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function bm(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let fl={};function Im(i){const o=function Hw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=pl(o);if(a)return a;const l=o.split("-")[0];if(a=pl(l),a)return a;if("en"===l)return pC;throw new Error(`Missing locale data for the locale "${i}".`)}function ih(i){return Im(i)[_t.PluralCase]}function pl(i){return i in fl||(fl[i]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[i]),fl[i]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const Dm="en-US";let Gw=Dm;function uh(i,o,a,l,d){if(i=te(i),Array.isArray(i))for(let p=0;p<i.length;p++)uh(i[p],o,a,l,d);else{const p=Pt(),_=Ae();let w=Ud(i)?i:te(i.provide),I=Tf(i);const T=hn(),M=1048575&T.providerIndexes,k=T.directiveStart,U=T.providerIndexes>>20;if(Ud(i)||!i.multi){const Q=new Au(I,d,Zd),se=Cc(w,o,d?M:M+U,k);-1===se?(tr(xn(T,_),p,w),ps(p,i,o.length),o.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Q),_.push(Q)):(a[se]=Q,_[se]=Q)}else{const Q=Cc(w,o,M+U,k),se=Cc(w,o,M,M+U),xe=Q>=0&&a[Q],Ue=se>=0&&a[se];if(d&&!Ue||!d&&!xe){tr(xn(T,_),p,w);const tt=function gb(i,o,a,l,d){const p=new Au(i,a,Zd);return p.multi=[],p.index=o,p.componentProviders=0,pb(p,d,l&&!a),p}(d?jC:Tc,a.length,d,l,I);!d&&Ue&&(a[se].providerFactory=tt),ps(p,i,o.length,0),o.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(tt),_.push(tt)}else ps(p,i,Q>-1?Q:se,pb(a[d?se:Q],I,!d&&l));!d&&l&&Ue&&a[se].componentProviders++}}}function ps(i,o,a,l){const d=Ud(o),p=function Af(i){return!!i.useClass}(o);if(d||p){const I=(p?te(o.useClass):o).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const M=T.indexOf(a);-1===M?T.push(a,[l,I]):T[M+1].push(l,I)}else T.push(a,I)}}}function pb(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Cc(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function Tc(i,o,a,l){return uu(this.multi,[])}function jC(i,o,a,l){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=Wo(a,a[1],this.providerFactory.index,l);p=w.slice(0,_),uu(d,p);for(let I=_;I<w.length;I++)p.push(w[I])}else p=[],uu(d,p);return p}function uu(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function Rm(i,o=[]){return a=>{a.providersResolver=(l,d)=>function he(i,o,a){const l=Pt();if(l.firstCreatePass){const d=Pi(i);uh(a,l.data,l.blueprint,d,!0),uh(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class br{}class gl{resolveComponentFactory(o){throw function Sv(i){const o=Error(`No component factory found for ${oe(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let np=(()=>{class i{}return i.NULL=new gl,i})();function $C(){return Ac(hn(),Ae())}function Ac(i,o){return new ml(Xn(i,o))}let ml=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=$C,i})();function Sc(i){return i instanceof ml?i.nativeElement:i}class Mc{}let rp=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Mv(){const i=Ae(),a=er(hn().index,i);return function _b(i){return i[11]}(Br(a)?a:i)}(),i})(),xv=(()=>{class i{}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:()=>null}),i})();class Nv{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const vb=new Nv("13.2.7"),Pm={};function ip(i,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(Qt(p)),Ri(p))for(let w=10;w<p.length;w++){const I=p[w],T=I[1].firstChild;null!==T&&ip(I[1],I,T,l)}const _=a.type;if(8&_)ip(i,o,a.child,l);else if(32&_){const w=W(a,o);let I;for(;I=w();)l.push(I)}else if(16&_){const w=E0(o,a);if(Array.isArray(w))l.push(...w);else{const I=Ze(o[16]);ip(I[1],I,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class xc{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return ip(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Ri(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Jy(o,l),uo(a,l))}this._attachedToViewContainer=!1}Xy(this._lView[1],this._lView)}onDestroy(o){U0(this._lView[1],this._lView,null,o)}markForCheck(){Hg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){bf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function zg(i,o,a){Du(!0);try{bf(i,o,a)}finally{Du(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function of(i,o){Sg(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class sp extends xc{constructor(o){super(o),this._view=o}detectChanges(){Gg(this._view)}checkNoChanges(){!function If(i){Du(!0);try{Gg(i)}finally{Du(!1)}}(this._view)}get context(){return null}}class yl extends np{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Ln(o);return new Rv(a,this.ngModule)}}function Eb(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Rv extends br{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function nt(i){return i.map(Xa).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Eb(this.componentDef.inputs)}get outputs(){return Eb(this.componentDef.outputs)}create(o,a,l,d){const p=(d=d||this.ngModule)?function HC(i,o){return{get:(a,l,d)=>{const p=i.get(a,Pm,d);return p!==Pm||l===Pm?p:o.get(a,l,d)}}}(o,d.injector):o,_=p.get(Mc,Ta),w=p.get(xv,null),I=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",M=l?function Ug(i,o,a){if(sn(i))return i.selectRootElement(o,a===Gt.ShadowDom);let l="string"==typeof o?i.querySelector(o):o;return l.textContent="",l}(I,l,this.componentDef.encapsulation):xd(_.createRenderer(null,this.componentDef),T,function wb(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(T)),k=this.componentDef.onPush?576:528,U=function tm(i,o){return{components:[],scheduler:i||Yy,clean:P_,playerHandler:o||null,flags:0}}(),Q=Fd(0,null,null,1,0,null,null,null,null,null),se=sc(null,Q,U,k,null,null,_,I,w,p);let xe,Ue;Lo(se);try{const tt=function $d(i,o,a,l,d,p){const _=a[1];a[20]=i;const I=Xu(_,20,2,"#host",null),T=I.mergedAttrs=o.hostAttrs;null!==T&&(el(I,T,!0),null!==i&&(et(d,i,T),null!==I.classes&&a_(d,i,I.classes),null!==I.styles&&D0(d,i,I.styles)));const M=l.createRenderer(i,o),k=sc(a,Vg(o),null,o.onPush?64:16,a[20],I,l,M,p||null,null);return _.firstCreatePass&&(tr(xn(I,a),_,o.type),yf(_,I),uc(I,a.length,1)),vf(a,k),a[20]=k}(M,this.componentDef,se,_,I);if(M)if(l)et(I,M,["ng-version",vb.full]);else{const{attrs:Se,classes:ct}=function l_(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++l]):8===d&&a.push(p);else{if(!ra(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Se&&et(I,M,Se),ct&&ct.length>0&&a_(I,M,ct.join(" "))}if(Ue=pn(Q,20),void 0!==a){const Se=Ue.projection=[];for(let ct=0;ct<this.ngContentSelectors.length;ct++){const jt=a[ct];Se.push(null!=jt?Array.from(jt):null)}}xe=function xf(i,o,a,l,d){const p=a[1],_=function M_(i,o,a){const l=hn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),G0(i,l,o,oc(i,o,1,null),a));const d=Wo(o,i,l.directiveStart,l);ir(d,o);const p=Xn(l,o);return p&&ir(p,o),d}(p,a,o);if(l.components.push(_),i[8]=_,d&&d.forEach(I=>I(_,o)),o.contentQueries){const I=hn();o.contentQueries(1,_,I.directiveStart)}const w=hn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Bi(w.index),x_(a[1],w,0,w.directiveStart,w.directiveEnd,o),N_(o,_)),_}(tt,this.componentDef,se,U,[ow]),ff(Q,se,null)}finally{Uo()}return new Nc(this.componentType,xe,Ac(Ue,se),se,Ue)}}class Nc extends class mb{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new sp(d),this.componentType=o}get injector(){return new io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Oc{}class bb{}const ch=new Map;class ap extends Oc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new yl(this);const l=Vn(o);this._bootstrapComponents=ls(l.bootstrap),this._r3Injector=Z0(o,a,[{provide:Oc,useValue:this},{provide:np,useValue:this.componentFactoryResolver}],oe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=_o.THROW_IF_NOT_FOUND,l=mt.Default){return o===_o||o===Oc||o===tu?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Fm extends bb{constructor(o){super(),this.moduleType=o,null!==Vn(o)&&function zC(i){const o=new Set;!function a(l){const d=Vn(l,!0),p=d.id;null!==p&&(function op(i,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${i} - ${oe(o)} vs ${oe(o.name)}`)}(p,ch.get(p),l),ch.set(p,l));const _=ls(d.imports);for(const w of _)o.has(w)||(o.add(w),a(w))}(i)}(o)}create(o){return new ap(this.moduleType,o)}}function kv(i,o,a,l,d,p){const _=o+a;return kr(i,_,d)?function qi(i,o,a){return i[o]=a}(i,_+1,p?l.call(p,d):l(d)):function ma(i,o){const a=i[o];return a===Be?void 0:a}(i,_+1)}function Ab(i,o){const a=Pt();let l;const d=i+20;a.firstCreatePass?(l=function KC(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const p=l.factory||(l.factory=pr(l.type)),_=An(Zd);try{const w=Ei(!1),I=p();return Ei(w),function Wd(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,Ae(),d,I),I}finally{An(_)}}function Sb(i,o,a){const l=i+20,d=Ae(),p=function Li(i,o){return i[o]}(d,l);return function up(i,o){return i[1].data[o].pure}(d,l)?kv(d,function Mn(){const i=ft.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}(),o,p.transform,a,p):p.transform(a)}function cu(i){return o=>{setTimeout(i,void 0,o)}}const Yi=class xb extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,p,_;let w=o,I=a||(()=>null),T=l;if(o&&"object"==typeof o){const k=o;w=null===(d=k.next)||void 0===d?void 0:d.bind(k),I=null===(p=k.error)||void 0===p?void 0:p.bind(k),T=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(I=cu(I),w&&(w=cu(w)),T&&(T=cu(T)));const M=super.subscribe({next:w,error:I,complete:T});return o instanceof X.w0&&o.add(M),M}};function Nb(){return this._results[ru()]()}class Bm{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ru(),l=Bm.prototype;l[a]||(l[a]=Nb)}get changes(){return this._changes||(this._changes=new Yi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=ni(o);(this._changesDetected=!function ql(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let lp=(()=>{class i{}return i.__NG_ELEMENT_ID__=Vv,i})();const Rb=lp,Lv=class extends Rb{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=sc(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),ff(a,l,o),new xc(l)}};function Vv(){return El(hn(),Ae())}function El(i,o){return 4&i.type?new Lv(o,i,Ac(i,o)):null}let kc=(()=>{class i{}return i.__NG_ELEMENT_ID__=Uv,i})();function Uv(){return $v(hn(),Ae())}const QC=kc,jm=class extends QC{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Ac(this._hostTNode,this._hostLView)}get injector(){return new io(this._hostTNode,this._hostLView)}get parentInjector(){const o=Rs(this._hostTNode,this._hostLView);if(ld(o)){const a=un(o,this._hostLView),l=ji(o);return new io(a[1].data[l+8],a)}return new io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Bv(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,p){const _=o&&!function ao(i){return"function"==typeof i}(o);let w;if(_)w=a;else{const k=a||{};w=k.index,l=k.injector,d=k.projectableNodes,p=k.ngModuleRef}const I=_?o:new Rv(Ln(o)),T=l||this.parentInjector;if(!p&&null==I.ngModule){const U=(_?T:this.parentInjector).get(Oc,null);U&&(p=U)}const M=I.create(T,d,void 0,p);return this.insert(M.hostView,w),M}insert(o,a){const l=o._lView,d=l[1];if(function Sa(i){return Ri(i[3])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const k=l[3],U=new jm(k,k[6],k[3]);U.detach(U.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function rc(i,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],Zo(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function Zu(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const w=o[19];null!==w&&w.insertView(i),o[2]|=128}(d,l,_,p);const w=i_(p,_),I=l[11],T=zi(I,_[7]);return null!==T&&function sf(i,o,a,l,d,p){l[0]=d,l[6]=o,Sg(i,l,a,1,d,p)}(d,_[6],I,l,T,w),o.attachToViewContainerRef(),Zo(jv(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Bv(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Jy(this._lContainer,a);l&&(uo(jv(this._lContainer),a),Xy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Jy(this._lContainer,a);return l&&null!=uo(jv(this._lContainer),a)?new xc(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Bv(i){return i[8]}function jv(i){return i[8]||(i[8]=[])}function $v(i,o){let a;const l=o[i.index];if(Ri(l))a=l;else{let d;if(8&i.type)d=Qt(l);else{const p=o[11];d=p.createComment("");const _=Xn(i,o);cs(p,zi(p,_),d,function wD(i,o){return sn(i)?i.nextSibling(o):o.nextSibling}(p,_),!1)}o[i.index]=a=R_(l,o,d,i),vf(o,a)}return new jm(a,i,o)}class $m{constructor(o){this.queryList=o,this.matches=null}clone(){return new $m(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gv{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new Gv(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Vb(o,a).matches&&this.queries[a].setDirty()}}class zv{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class qv{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new qv(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class wl{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new wl(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,fh(a,p)),this.matchTNodeWithReadOption(o,a,qo(a,o,p,!1,!1))}else l===lp?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,qo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===ml||d===kc||d===lp&&4&a.type)this.addMatch(a.index,-2);else{const p=qo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function fh(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Hm(i,o,a,l){return-1===a?function Wv(i,o){return 11&i.type?Ac(i,o):4&i.type?El(i,o):null}(o,i):-2===a?function Pb(i,o,a){return a===ml?Ac(o,i):a===lp?El(o,i):a===kc?$v(o,i):void 0}(i,o,l):Wo(i,i[1],a,o)}function Kv(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=i.data,_=a.matches,w=[];for(let I=0;I<_.length;I+=2){const T=_[I];w.push(T<0?null:Hm(o,p[T],_[I+1],a.metadata.read))}d.matches=w}return d.matches}function Gm(i,o,a,l){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const _=Kv(i,o,d,a);for(let w=0;w<p.length;w+=2){const I=p[w];if(I>0)l.push(_[w/2]);else{const T=p[w+1],M=o[-I];for(let k=10;k<M.length;k++){const U=M[k];U[17]===U[3]&&Gm(U[1],U,T,l)}if(null!==M[9]){const k=M[9];for(let U=0;U<k.length;U++){const Q=k[U];Gm(Q[1],Q,T,l)}}}}}return l}function kb(i){const o=Ae(),a=Pt(),l=Bl();ka(l+1);const d=Vb(a,l);if(i.dirty&&Xs(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Gm(a,o,l,[]):Kv(a,o,d,l);i.reset(p,Sc),i.notifyOnChanges()}return!0}return!1}function Fb(i,o,a,l){const d=Pt();if(d.firstCreatePass){const p=hn();(function qm(i,o,a){null===i.queries&&(i.queries=new qv),i.queries.track(new wl(o,a))})(d,new zv(o,a,l),p.index),function Fr(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Lb(i,o,a){const l=new Bm(4==(4&a));U0(i,o,l,l.destroy),null===o[19]&&(o[19]=new Gv),o[19].queries.push(new $m(l))}(d,Ae(),a)}function zm(){return function JC(i,o){return i[19].queries[o].queryList}(Ae(),Bl())}function Vb(i,o){return i.queries.getByIndex(o)}function sy(...i){}const sE=new fn("Application Initializer");let oE=(()=>{class i{constructor(a){this.appInits=a,this.resolve=sy,this.reject=sy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Vf(p))a.push(p);else if(Yd(p)){const _=new Promise((w,I)=>{p.subscribe({complete:w,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ve(sE,8))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const oy=new fn("AppId",{providedIn:"root",factory:function Wb(){return`${aE()}${aE()}${aE()}`}});function aE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ay=new fn("Platform Initializer"),Zb=new fn("Platform ID"),uy=new fn("appBootstrapListener");let ly=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();const pp=new fn("LocaleId",{providedIn:"root",factory:()=>dt(pp,mt.Optional|mt.SkipSelf)||function uE(){return"undefined"!=typeof $localize&&$localize.locale||Dm}()}),vh=new fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Eh{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Qb=(()=>{class i{compileModuleSync(a){return new Fm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=ls(Vn(a).declarations).reduce((_,w)=>{const I=Ln(w);return I&&_.push(new Rv(I)),_},[]);return new Eh(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const lT=(()=>Promise.resolve(0))();function mp(i){"undefined"==typeof Zone?lT.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class gs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yi(!1),this.onMicrotaskEmpty=new Yi(!1),this.onStable=new Yi(!1),this.onError=new Yi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function lE(){let i=Vt.requestAnimationFrame,o=Vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function hE(i){const o=()=>{!function cT(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Vt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,yp(i),i.isCheckStableRunning=!0,dE(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),yp(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,_,w)=>{try{return Jb(i),a.invokeTask(d,p,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),fE(i)}},onInvoke:(a,l,d,p,_,w,I)=>{try{return Jb(i),a.invoke(d,p,_,w,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),fE(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,yp(i),dE(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(gs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,cE,sy,sy);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const cE={};function dE(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function yp(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Jb(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function fE(i){i._nesting--,dE(i)}class dT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yi,this.onMicrotaskEmpty=new Yi,this.onStable=new Yi,this.onError=new Yi}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let pE=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gs.assertNotInAngularZone(),mp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())mp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ve(gs))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})(),gE=(()=>{class i{constructor(){this._applications=new Map,mE.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return mE.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();class Xb{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function eI(i){mE=i}let bo,mE=new Xb;const cy=new fn("AllowMultipleToken");class _E{constructor(o,a){this.name=o,this.token=a}}function dy(i,o,a=[]){const l=`Platform: ${o}`,d=new fn(l);return(p=[])=>{let _=vE();if(!_||_.injector.get(cy,!1))if(i)i(a.concat(p).concat({provide:d,useValue:!0}));else{const w=a.concat(p).concat({provide:d,useValue:!0},{provide:V_,useValue:"platform"});!function fT(i){if(bo&&!bo.destroyed&&!bo.injector.get(cy,!1))throw new Oe(400,"");bo=i.get(hy);const o=i.get(ay,null);o&&o.forEach(a=>a())}(_o.create({providers:w,name:l}))}return function pT(i){const o=vE();if(!o)throw new Oe(401,"");return o}()}}function vE(){return bo&&!bo.destroyed?bo:null}let hy=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function nI(i,o){let a;return a="noop"===i?new dT:("zone.js"===i?void 0:i)||new gs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:gs,useValue:w}];return w.run(()=>{const T=_o.create({providers:I,parent:this.injector,name:a.moduleType.name}),M=a.create(T),k=M.injector.get(Ad,null);if(!k)throw new Oe(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Q=>{k.handleError(Q)}});M.onDestroy(()=>{_p(this._modules,M),U.unsubscribe()})}),function gT(i,o,a){try{const l=a();return Vf(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(k,w,()=>{const U=M.injector.get(oE);return U.runInitializers(),U.donePromise.then(()=>(function Gs(i){Lt(i,"Expected localeId to be defined"),"string"==typeof i&&(Gw=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(pp,Dm)||Dm),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const d=fy({},l);return function hT(i,o,a){const l=new Fm(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(EE);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ve(_o))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac}),i})();function fy(i,o){return Array.isArray(o)?o.reduce(fy,i):Object.assign(Object.assign({},i),o)}let EE=(()=>{class i{constructor(a,l,d,p,_){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new P.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),I=new P.y(T=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{gs.assertNotInAngularZone(),mp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{gs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{M.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ue.T)(w,I.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Oe(405,"");let d;d=a instanceof br?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function yE(i){return i.isBoundToModule}(d)?void 0:this._injector.get(Oc),w=d.create(_o.NULL,[],l||d.selector,p),I=w.location.nativeElement,T=w.injector.get(pE,null),M=T&&w.injector.get(gE);return T&&M&&M.registerApplication(I,T),w.onDestroy(()=>{this.detachView(w.hostView),_p(this.components,w),M&&M.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;_p(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(uy,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ve(gs),Ve(_o),Ve(Ad),Ve(np),Ve(oE))},i.\u0275prov=Yt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function _p(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let iI=!0,py=!1;function bE(){return py=!0,iI}function IE(){if(py)throw new Error("Cannot enable prod mode after platform setup.");iI=!1}let yT=(()=>{class i{}return i.__NG_ELEMENT_ID__=DE,i})();function DE(i){return function hu(i,o,a){if(qc(i)&&!a){const l=er(i.index,o);return new xc(l,l)}return 47&i.type?new xc(o[16],o):null}(hn(),Ae(),16==(16&i))}class dI{constructor(){}supports(o){return hs(o)}create(o){return new fI(o)}}const hI=(i,o)=>o;class fI{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||hI}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<wp(l,d,p)?a:l,w=wp(_,d,p),I=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const T=w-d,M=I-d;if(T!=M){for(let U=0;U<T;U++){const Q=U<p.length?p[U]:p[U]=0,se=Q+U;M<=se&&se<T&&(p[U]=Q+1)}p[_.previousIndex]=M-T}}w!==I&&o(_,w,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!hs(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],_=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,w),l=!0),a=a._next}else d=0,function QD(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[ru()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{_=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new vT(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new xE),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xE),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class vT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ME{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class xE{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new ME,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wp(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class pI{constructor(){}supports(o){return o instanceof Map||Rf(o)}create(){return new ET}}class ET{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Rf(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const l=new wT(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class wT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gI(){return new Ey([new dI])}let Ey=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||gI()),deps:[[i,new oi,new ii]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Oe(901,"")}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:gI}),i})();function NE(){return new bp([new pI])}let bp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||NE()),deps:[[i,new oi,new ii]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Oe(901,"")}}return i.\u0275prov=Yt({token:i,providedIn:"root",factory:NE}),i})();const kE=dy(null,"core",[{provide:Zb,useValue:"unknown"},{provide:hy,deps:[_o]},{provide:gE,deps:[]},{provide:ly,deps:[]}]);let _I=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ve(EE))},i.\u0275mod=Cr({type:i}),i.\u0275inj=qt({}),i})()},3942:(Xe,we,O)=>{O.d(we,{Z:()=>Oe});var f=O(2090),X=O(4859),P=O(9681),ue=O(1877);class re{constructor(fe,Ce){this._delegate=fe,this.firebase=Ce,(0,P._addComponent)(fe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(fe,Ce=P._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(fe);return!Ye.isInitialized()&&"EXPLICIT"===(null===(qe=Ye.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:Ce})}_removeServiceInstance(fe,Ce=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(Ce)}_addComponent(fe){(0,P._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,P._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function de(){const je=function oe(je){const fe={},Ce={__esModule:!0,initializeApp:function Te($e,j={}){const ve=P.initializeApp($e,j);if((0,f.r3)(fe,ve.name))return fe[ve.name];const K=new je(ve,Ce);return fe[ve.name]=K,K},app:Ye,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ie($e){const j=$e.name,ve=j.replace("-compat","");if(P._registerComponent($e)&&"PUBLIC"===$e.type){const K=(ie=Ye())=>{if("function"!=typeof ie[ve])throw le.create("invalid-app-argument",{appName:j});return ie[ve]()};void 0!==$e.serviceProps&&(0,f.ZB)(K,$e.serviceProps),Ce[ve]=K,je.prototype[ve]=function(...ie){return this._getService.bind(this,j).apply(this,$e.multipleInstances?ie:[])}}return"PUBLIC"===$e.type?Ce[ve]:null},removeApp:function qe($e){delete fe[$e]},useAsService:function He($e,j){return"serverAuth"===j?null:j},modularAPIs:P}};function Ye($e){if(!(0,f.r3)(fe,$e=$e||P._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:$e});return fe[$e]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function Ee(){return Object.keys(fe).map($e=>fe[$e])}}),Ye.App=je,Ce}(re);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:de,extendNamespace:function fe(Ce){(0,f.ZB)(je,Ce)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),je}(),B=new ue.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=$;!function Me(je){(0,P.registerVersion)("@firebase/app-compat","0.1.25",je)}()},9681:(Xe,we,O)=>{O.r(we),O.d(we,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Si,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>nn,_addOrOverwriteComponent:()=>Yt,_apps:()=>Jt,_clearComponents:()=>Ji,_components:()=>Tn,_getProvider:()=>qt,_registerComponent:()=>Ir,_removeServiceInstance:()=>kt,deleteApp:()=>mt,getApp:()=>Kr,getApps:()=>Mi,initializeApp:()=>Is,onLog:()=>An,registerVersion:()=>vn,setLogLevel:()=>qs});var f=O(5861),X=O(4859),P=O(1877),ue=O(2090),re=O(8766);class ge{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Ne=>{if(function le(H){const J=H.getComponent();return"VERSION"===(null==J?void 0:J.type)}(Ne)){const Je=Ne.getImmediate();return`${Je.library}/${Je.version}`}return null}).filter(Ne=>Ne).join(" ")}}const oe="@firebase/app",$=new P.Yd("@firebase/app"),Lt="[DEFAULT]",Qe={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Jt=new Map,Tn=new Map;function nn(H,J){try{H.container.addComponent(J)}catch(Ne){$.debug(`Component ${J.name} failed to register with FirebaseApp ${H.name}`,Ne)}}function Yt(H,J){H.container.addOrOverwriteComponent(J)}function Ir(H){const J=H.name;if(Tn.has(J))return $.debug(`There were multiple attempts to register component ${J}.`),!1;Tn.set(J,H);for(const Ne of Jt.values())nn(Ne,H);return!0}function qt(H,J){const Ne=H.container.getProvider("heartbeat").getImmediate({optional:!0});return Ne&&Ne.triggerHeartbeat(),H.container.getProvider(J)}function kt(H,J,Ne=Lt){qt(H,J).clearInstance(Ne)}function Ji(){Tn.clear()}const lr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Dr{constructor(J,Ne,Je){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Ne),this._name=Ne.name,this._automaticDataCollectionEnabled=Ne.automaticDataCollectionEnabled,this._container=Je,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}const Si="9.8.1";function Is(H,J={}){"object"!=typeof J&&(J={name:J});const Ne=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},J),Je=Ne.name;if("string"!=typeof Je||!Je)throw lr.create("bad-app-name",{appName:String(Je)});const ht=Jt.get(Je);if(ht){if((0,ue.vZ)(H,ht.options)&&(0,ue.vZ)(Ne,ht.config))return ht;throw lr.create("duplicate-app",{appName:Je})}const Dt=new X.H0(Je);for(const Et of Tn.values())Dt.addComponent(Et);const cn=new Dr(H,Ne,Dt);return Jt.set(Je,cn),cn}function Kr(H=Lt){const J=Jt.get(H);if(!J)throw lr.create("no-app",{appName:H});return J}function Mi(){return Array.from(Jt.values())}function mt(H){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,f.Z)(function*(H){const J=H.name;Jt.has(J)&&(Jt.delete(J),yield Promise.all(H.container.getProviders().map(Ne=>Ne.delete())),H.isDeleted=!0)})).apply(this,arguments)}function vn(H,J,Ne){var Je;let ht=null!==(Je=Qe[H])&&void 0!==Je?Je:H;Ne&&(ht+=`-${Ne}`);const Dt=ht.match(/\s|\//),cn=J.match(/\s|\//);if(Dt||cn){const Et=[`Unable to register library "${ht}" with version "${J}":`];return Dt&&Et.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),Dt&&cn&&Et.push("and"),cn&&Et.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void $.warn(Et.join(" "))}Ir(new X.wA(`${ht}-version`,()=>({library:ht,version:J}),"VERSION"))}function An(H,J){if(null!==H&&"function"!=typeof H)throw lr.create("invalid-log-argument");(0,P.Am)(H,J)}function qs(H){(0,P.Ub)(H)}const Nn="firebase-heartbeat-store";let mi=null;function To(){return mi||(mi=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(H,J)=>{0===J&&H.createObjectStore(Nn)}}).catch(H=>{throw lr.create("storage-open",{originalErrorMessage:H.message})})),mi}function it(){return(it=(0,f.Z)(function*(H){try{return(yield To()).transaction(Nn).objectStore(Nn).get(Qr(H))}catch(J){throw lr.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function vt(H,J){return cr.apply(this,arguments)}function cr(){return(cr=(0,f.Z)(function*(H,J){try{const Je=(yield To()).transaction(Nn,"readwrite");return yield Je.objectStore(Nn).put(J,Qr(H)),Je.done}catch(Ne){throw lr.create("storage-set",{originalErrorMessage:Ne.message})}})).apply(this,arguments)}function Qr(H){return`${H.name}!${H.options.appId}`}class dr{constructor(J){this.container=J,this._heartbeatsCache=null;const Ne=this.container.getProvider("app").getImmediate();this._storage=new G(Ne),this._heartbeatsCachePromise=this._storage.read().then(Je=>(this._heartbeatsCache=Je,Je))}triggerHeartbeat(){var J=this;return(0,f.Z)(function*(){const Je=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=hr();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==ht&&!J._heartbeatsCache.heartbeats.some(Dt=>Dt.date===ht))return J._heartbeatsCache.heartbeats.push({date:ht,agent:Je}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(Dt=>{const cn=new Date(Dt.date).valueOf();return Date.now()-cn<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,f.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Ne=hr(),{heartbeatsToSend:Je,unsentEntries:ht}=function V(H,J=1024){const Ne=[];let Je=H.slice();for(const ht of H){const Dt=Ne.find(cn=>cn.agent===ht.agent);if(Dt){if(Dt.dates.push(ht.date),z(Ne)>J){Dt.dates.pop();break}}else if(Ne.push({agent:ht.agent,dates:[ht.date]}),z(Ne)>J){Ne.pop();break}Je=Je.slice(1)}return{heartbeatsToSend:Ne,unsentEntries:Je}}(J._heartbeatsCache.heartbeats),Dt=(0,ue.L)(JSON.stringify({version:2,heartbeats:Je}));return J._heartbeatsCache.lastSentHeartbeatDate=Ne,ht.length>0?(J._heartbeatsCache.heartbeats=ht,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),Dt})()}}function hr(){return(new Date).toISOString().substring(0,10)}class G{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,f.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function Gt(H){return it.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Ne=this;return(0,f.Z)(function*(){var Je;if(yield Ne._canUseIndexedDBPromise){const Dt=yield Ne.read();return vt(Ne.app,{lastSentHeartbeatDate:null!==(Je=J.lastSentHeartbeatDate)&&void 0!==Je?Je:Dt.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Ne=this;return(0,f.Z)(function*(){var Je;if(yield Ne._canUseIndexedDBPromise){const Dt=yield Ne.read();return vt(Ne.app,{lastSentHeartbeatDate:null!==(Je=J.lastSentHeartbeatDate)&&void 0!==Je?Je:Dt.lastSentHeartbeatDate,heartbeats:[...Dt.heartbeats,...J.heartbeats]})}})()}}function z(H){return(0,ue.L)(JSON.stringify({version:2,heartbeats:H})).length}!function De(H){Ir(new X.wA("platform-logger",J=>new ge(J),"PRIVATE")),Ir(new X.wA("heartbeat",J=>new dr(J),"PRIVATE")),vn(oe,"0.7.24",H),vn(oe,"0.7.24","esm2017"),vn("fire-js","")}("")},4859:(Xe,we,O)=>{O.d(we,{wA:()=>P,H0:()=>oe});var f=O(5861),X=O(2090);class P{constructor($,B,te){this.name=$,this.instanceFactory=B,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class re{constructor($,B){this.name=$,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const B=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(B)){const te=new X.BH;if(this.instancesDeferred.set(B,te),this.isInitialized(B)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:B});ze&&te.resolve(ze)}catch(ze){}}return this.instancesDeferred.get(B).promise}getImmediate($){var B;const te=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),ze=null!==(B=null==$?void 0:$.optional)&&void 0!==B&&B;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Me){if(ze)return null;throw Me}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function le(de){return"EAGER"===de.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(B){}for(const[B,te]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(B);try{const Me=this.getOrInitializeService({instanceIdentifier:ze});te.resolve(Me)}catch(Me){}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const B=Array.from($.instances.values());yield Promise.all([...B.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...B.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:B={}}=$,te=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:te,options:B});for(const[Me,Oe]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Me)&&Oe.resolve(ze);return ze}onInit($,B){var te;const ze=this.normalizeInstanceIdentifier(B),Me=null!==(te=this.onInitCallbacks.get(ze))&&void 0!==te?te:new Set;Me.add($),this.onInitCallbacks.set(ze,Me);const Oe=this.instances.get(ze);return Oe&&$(Oe,ze),()=>{Me.delete($)}}invokeOnInitCallbacks($,B){const te=this.onInitCallbacks.get(B);if(te)for(const ze of te)try{ze($,B)}catch(Me){}}getOrInitializeService({instanceIdentifier:$,options:B={}}){let te=this.instances.get($);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(de=$,de===ue?void 0:de),options:B}),this.instances.set($,te),this.instancesOptions.set($,B),this.invokeOnInitCallbacks(te,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,te)}catch(ze){}var de;return te||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor($){this.name=$,this.providers=new Map}addComponent($){const B=this.getProvider($.name);if(B.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);B.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const B=new re($,this);return this.providers.set($,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(Xe,we,O)=>{O.d(we,{in:()=>X,Yd:()=>le,Ub:()=>oe,Am:()=>de});const f=[];var X=(()=>{return($=X||(X={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",X;var $})();const P={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ue=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},ge=($,B,...te)=>{if(B<$.logLevel)return;const ze=(new Date).toISOString(),Me=re[B];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Me](`[${ze}]  ${$.name}:`,...te)};class le{constructor(B){this.name=B,this._logLevel=ue,this._logHandler=ge,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in X))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?P[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...B),this._logHandler(this,X.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...B),this._logHandler(this,X.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,X.INFO,...B),this._logHandler(this,X.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,X.WARN,...B),this._logHandler(this,X.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...B),this._logHandler(this,X.ERROR,...B)}}function oe($){f.forEach(B=>{B.setLogLevel($)})}function de($,B){for(const te of f){let ze=null;B&&B.level&&(ze=P[B.level]),te.userLogHandler=null===$?null:(Me,Oe,...je)=>{const fe=je.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(qe){return null}}).filter(Ce=>Ce).join(" ");Oe>=(null!=ze?ze:Me.logLevel)&&$({level:X[Oe].toLowerCase(),message:fe,args:je,type:Me.name})}}}},8766:(Xe,we,O)=>{O.d(we,{Lj:()=>Te,X3:()=>Ye});var f=O(5861);let P,ue;const le=new WeakMap,oe=new WeakMap,de=new WeakMap,$=new WeakMap,B=new WeakMap;let Me={get(j,ve,K){if(j instanceof IDBTransaction){if("done"===ve)return oe.get(j);if("objectStoreNames"===ve)return j.objectStoreNames||de.get(j);if("store"===ve)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Ce(j[ve])},set:(j,ve,K)=>(j[ve]=K,!0),has:(j,ve)=>j instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in j};function fe(j){return"function"==typeof j?function je(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...ve){return j.apply(qe(this),ve),Ce(le.get(this))}:function(...ve){return Ce(j.apply(qe(this),ve))}:function(ve,...K){const ie=j.call(qe(this),ve,...K);return de.set(ie,ve.sort?ve.sort():[ve]),Ce(ie)}}(j):(j instanceof IDBTransaction&&function ze(j){if(oe.has(j))return;const ve=new Promise((K,ie)=>{const ee=()=>{j.removeEventListener("complete",ye),j.removeEventListener("error",ae),j.removeEventListener("abort",ae)},ye=()=>{K(),ee()},ae=()=>{ie(j.error||new DOMException("AbortError","AbortError")),ee()};j.addEventListener("complete",ye),j.addEventListener("error",ae),j.addEventListener("abort",ae)});oe.set(j,ve)}(j),((j,ve)=>ve.some(K=>j instanceof K))(j,function re(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Me):j)}function Ce(j){if(j instanceof IDBRequest)return function te(j){const ve=new Promise((K,ie)=>{const ee=()=>{j.removeEventListener("success",ye),j.removeEventListener("error",ae)},ye=()=>{K(Ce(j.result)),ee()},ae=()=>{ie(j.error),ee()};j.addEventListener("success",ye),j.addEventListener("error",ae)});return ve.then(K=>{K instanceof IDBCursor&&le.set(K,j)}).catch(()=>{}),B.set(ve,j),ve}(j);if($.has(j))return $.get(j);const ve=fe(j);return ve!==j&&($.set(j,ve),B.set(ve,j)),ve}const qe=j=>B.get(j);function Ye(j,ve,{blocked:K,upgrade:ie,blocking:ee,terminated:ye}={}){const ae=indexedDB.open(j,ve),Pe=Ce(ae);return ie&&ae.addEventListener("upgradeneeded",ut=>{ie(Ce(ae.result),ut.oldVersion,ut.newVersion,Ce(ae.transaction))}),K&&ae.addEventListener("blocked",()=>K()),Pe.then(ut=>{ye&&ut.addEventListener("close",()=>ye()),ee&&ut.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Pe}function Te(j,{blocked:ve}={}){const K=indexedDB.deleteDatabase(j);return ve&&K.addEventListener("blocked",()=>ve()),Ce(K).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],He=new Map;function $e(j,ve){if(!(j instanceof IDBDatabase)||ve in j||"string"!=typeof ve)return;if(He.get(ve))return He.get(ve);const K=ve.replace(/FromIndex$/,""),ie=ve!==K,ee=Ie.includes(K);if(!(K in(ie?IDBIndex:IDBObjectStore).prototype)||!ee&&!Ee.includes(K))return;const ye=function(){var ae=(0,f.Z)(function*(Pe,...ut){const Ht=this.transaction(Pe,ee?"readwrite":"readonly");let Lt=Ht.store;return ie&&(Lt=Lt.index(ut.shift())),(yield Promise.all([Lt[K](...ut),ee&&Ht.done]))[0]});return function(ut){return ae.apply(this,arguments)}}();return He.set(ve,ye),ye}!function Oe(j){Me=j(Me)}(j=>hR(dR({},j),{get:(ve,K,ie)=>$e(ve,K)||j.get(ve,K,ie),has:(ve,K)=>!!$e(ve,K)||j.has(ve,K)}))},5861:(Xe,we,O)=>{function f(P,ue,re,ge,le,oe,de){try{var $=P[oe](de),B=$.value}catch(te){return void re(te)}$.done?ue(B):Promise.resolve(B).then(ge,le)}function X(P){return function(){var ue=this,re=arguments;return new Promise(function(ge,le){var oe=P.apply(ue,re);function de(B){f(oe,ge,le,de,$,"next",B)}function $(B){f(oe,ge,le,de,$,"throw",B)}de(void 0)})}}O.d(we,{Z:()=>X})}},Xe=>{Xe(Xe.s=3723)}]);