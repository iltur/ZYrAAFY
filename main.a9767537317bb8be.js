"use strict";var iL=Object.defineProperty,sL=Object.defineProperties,oL=Object.getOwnPropertyDescriptors,hR=Object.getOwnPropertySymbols,aL=Object.prototype.hasOwnProperty,uL=Object.prototype.propertyIsEnumerable,fR=(Xe,we,O)=>we in Xe?iL(Xe,we,{enumerable:!0,configurable:!0,writable:!0,value:O}):Xe[we]=O,pR=(Xe,we)=>{for(var O in we||(we={}))aL.call(we,O)&&fR(Xe,O,we[O]);if(hR)for(var O of hR(we))uL.call(we,O)&&fR(Xe,O,we[O]);return Xe},gR=(Xe,we)=>sL(Xe,oL(we));(self.webpackChunkHACKATON=self.webpackChunkHACKATON||[]).push([[179],{2011:(Xe,we,O)=>{O.d(we,{hO:()=>ze,xv:()=>ce,Dh:()=>se,GT:()=>pe,cc:()=>Me,on:()=>$,pX:()=>re});var f=O(5e3),X=O(127),P=O(5813);Xe=O.hmd(Xe);const ae=["ngOnDestroy"],re=(Ce,qe,Ye,Te={})=>new Proxy(Ce,{get:(Ee,Ie)=>Ye.runOutsideAngular(()=>{var $e;if(Ce[Ie])return(null===($e=null==Te?void 0:Te.spy)||void 0===$e?void 0:$e.get)&&Te.spy.get(Ie,Ce[Ie]),Ce[Ie];if(ae.indexOf(Ie)>-1)return()=>{};const je=qe.toPromise().then(j=>{const ve=j&&j[Ie];return"function"==typeof ve?ve.bind(j):ve&&ve.then?ve.then(K=>Ye.run(()=>K)):Ye.run(()=>ve)});return new Proxy(()=>{},{get:(j,ve)=>je[ve],apply:(j,ve,K)=>je.then(ie=>{var ee;const me=ie&&ie(...K);return(null===(ee=null==Te?void 0:Te.spy)||void 0===ee?void 0:ee.apply)&&Te.spy.apply(Ie,K,me),me})})})}),pe=(Ce,qe)=>{qe.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Te=>{Object.defineProperty(Ce.prototype,Te,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Te))})})};class ue{constructor(qe){return qe}}const se=new f.OlP("angularfire2.app.options"),ce=new f.OlP("angularfire2.app.name");function $(Ce,qe,Ye){const Ee="object"==typeof Ye&&Ye||{};Ee.name=Ee.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const $e=X.Z.apps.filter(je=>je&&je.name===Ee.name)[0]||qe.runOutsideAngular(()=>X.Z.initializeApp(Ce,Ee));try{JSON.stringify(Ce)!==JSON.stringify($e.options)&&B("error",`${$e.name} Firebase App already initialized with different options${Xe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new ue($e)}const B=(Ce,...qe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ce](...qe)},te={provide:ue,useFactory:$,deps:[se,f.R0b,[new f.FiY,ce]]};let ze=(()=>{class Ce{constructor(Ye){X.Z.registerVersion("angularfire",P.q4.full,"core"),X.Z.registerVersion("angularfire",P.q4.full,"app-compat"),X.Z.registerVersion("angular",f.q4F.full,Ye.toString())}static initializeApp(Ye,Te){return{ngModule:Ce,providers:[{provide:se,useValue:Ye},{provide:ce,useValue:Te}]}}}return Ce.\u0275fac=function(Ye){return new(Ye||Ce)(f.LFG(f.Lbi))},Ce.\u0275mod=f.oAB({type:Ce}),Ce.\u0275inj=f.cJS({providers:[te]}),Ce})();function Me(Ce,qe,Ye,Te,Ee){const[,Ie,$e]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===Ce)||[];if(Ie)return function Re(Ce,qe){try{return Ce.toString()===qe.toString()}catch(Ye){return Ce===qe}}(Ee,$e)||(he("error",`${qe} was already initialized on the ${Ye} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:Ee,was:$e})),Ie;{const je=Te();return globalThis.\u0275AngularfireInstanceCache.push([Ce,je,Ee]),je}}const Ue=!!Xe.hot,he=(Ce,...qe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ce](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Xe,we,O)=>{O.d(we,{q4:()=>oo,iC:()=>Jo,HU:()=>yd,vb:()=>md,JM:()=>cg});var f=O(5e3),X=O(5867),P=O(5861),ae=O(9681),re=O(2090),pe=O(4859),ue=O(1877),se=O(8766);const ce="@firebase/installations",$="0.5.9",te=`w:${$}`,ze="FIS_v2",qe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Te({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ee(D){return{token:D.token,requestStatus:2,expiresIn:ie(D.expiresIn),creationTime:Date.now()}}function Ie(D,C){return $e.apply(this,arguments)}function $e(){return($e=(0,P.Z)(function*(D,C){const F=(yield C.json()).error;return qe.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function j(D,{refreshToken:C}){const N=je(D);return N.append("Authorization",function ee(D){return`${ze} ${D}`}(C)),N}function ve(D){return K.apply(this,arguments)}function K(){return(K=(0,P.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function ie(D){return Number(D.replace("s","000"))}function me(D,C){return oe.apply(this,arguments)}function oe(){return(oe=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:N}){const F=Te(D),Y=je(D),ne=C.getImmediate({optional:!0});if(ne){const dt=yield ne.getHeartbeatsHeader();dt&&Y.append("x-firebase-client",dt)}const Ve={method:"POST",headers:Y,body:JSON.stringify({fid:N,authVersion:ze,appId:D.appId,sdkVersion:te})},Tt=yield ve(()=>fetch(F,Ve));if(Tt.ok){const dt=yield Tt.json();return{fid:dt.fid||N,registrationStatus:2,refreshToken:dt.refreshToken,authToken:Ee(dt.authToken)}}throw yield Ie("Create Installation",Tt)})).apply(this,arguments)}function Oe(D){return new Promise(C=>{setTimeout(C,D)})}const Ht=/^[cdef][\w-]{21}$/;function Qe(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const N=function Qt(D){return function lt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Ht.test(N)?N:""}catch(D){return""}}function Sn(D){return`${D.appName}!${D.appId}`}const en=new Map;function Zt(D,C){const N=Sn(D);Vt(N,C),function qi(D,C){const N=function fr(){return!Kr&&"BroadcastChannel"in self&&(Kr=new BroadcastChannel("[Firebase] FID Change"),Kr.onmessage=D=>{Vt(D.data.key,D.data.fid)}),Kr}();N&&N.postMessage({key:D,fid:C}),function Ir(){0===en.size&&Kr&&(Kr.close(),Kr=null)}()}(N,C)}function Vt(D,C){const N=en.get(D);if(N)for(const F of N)F(C)}let Kr=null;const Zr="firebase-installations-store";let Ai=null;function yt(){return Ai||(Ai=(0,se.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Zr)}})),Ai}function Yr(D,C){return bn.apply(this,arguments)}function bn(){return(bn=(0,P.Z)(function*(D,C){const N=Sn(D),Y=(yield yt()).transaction(Zr,"readwrite"),ne=Y.objectStore(Zr),ge=yield ne.get(N);return yield ne.put(C,N),yield Y.done,(!ge||ge.fid!==C.fid)&&Zt(D,C.fid),C})).apply(this,arguments)}function Mn(D){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,P.Z)(function*(D){const C=Sn(D),F=(yield yt()).transaction(Zr,"readwrite");yield F.objectStore(Zr).delete(C),yield F.done})).apply(this,arguments)}function Qr(D,C){return qn.apply(this,arguments)}function qn(){return(qn=(0,P.Z)(function*(D,C){const N=Sn(D),Y=(yield yt()).transaction(Zr,"readwrite"),ne=Y.objectStore(Zr),ge=yield ne.get(N),Ve=C(ge);return void 0===Ve?yield ne.delete(N):yield ne.put(Ve,N),yield Y.done,Ve&&(!ge||ge.fid!==Ve.fid)&&Zt(D,Ve.fid),Ve})).apply(this,arguments)}function kn(D){return _i.apply(this,arguments)}function _i(){return(_i=(0,P.Z)(function*(D){let C;const N=yield Qr(D.appConfig,F=>{const Y=Ao(F),ne=Gt(D,Y);return C=ne.registrationPromise,ne.installationEntry});return""===N.fid?{installationEntry:yield C}:{installationEntry:N,registrationPromise:C}})).apply(this,arguments)}function Ao(D){return zs(D||{fid:Qe(),registrationStatus:0})}function Gt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(qe.create("app-offline"))};const N={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(D,C){return vt.apply(this,arguments)}(D,N);return{installationEntry:N,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:pr(D)}:{installationEntry:C}}function vt(){return(vt=(0,P.Z)(function*(D,C){try{const N=yield me(D,C);return Yr(D.appConfig,N)}catch(N){throw Ye(N)&&409===N.customData.serverCode?yield Mn(D.appConfig):yield Yr(D.appConfig,{fid:C.fid,registrationStatus:0}),N}})).apply(this,arguments)}function pr(D){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,P.Z)(function*(D){let C=yield jt(D.appConfig);for(;1===C.registrationStatus;)yield Oe(100),C=yield jt(D.appConfig);if(0===C.registrationStatus){const{installationEntry:N,registrationPromise:F}=yield kn(D);return F||N}return C})).apply(this,arguments)}function jt(D){return Qr(D,C=>{if(!C)throw qe.create("installation-not-found");return zs(C)})}function zs(D){return function gr(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function mr(D,C){return V.apply(this,arguments)}function V(){return(V=(0,P.Z)(function*({appConfig:D,heartbeatServiceProvider:C},N){const F=G(D,N),Y=j(D,N),ne=C.getImmediate({optional:!0});if(ne){const dt=yield ne.getHeartbeatsHeader();dt&&Y.append("x-firebase-client",dt)}const Ve={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:te,appId:D.appId}})},Tt=yield ve(()=>fetch(F,Ve));if(Tt.ok)return Ee(yield Tt.json());throw yield Ie("Generate Auth Token",Tt)})).apply(this,arguments)}function G(D,{fid:C}){return`${Te(D)}/${C}/authTokens:generate`}function z(D){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(D,C=!1){let N;const F=yield Qr(D.appConfig,ne=>{if(!Ct(ne))throw qe.create("not-registered");const ge=ne.authToken;if(!C&&ln(ge))return ne;if(1===ge.requestStatus)return N=H(D,C),ne;{if(!navigator.onLine)throw qe.create("app-offline");const Ve=jn(ne);return N=Je(D,Ve),Ve}});return N?yield N:F.authToken})).apply(this,arguments)}function H(D,C){return J.apply(this,arguments)}function J(){return(J=(0,P.Z)(function*(D,C){let N=yield Ne(D.appConfig);for(;1===N.authToken.requestStatus;)yield Oe(100),N=yield Ne(D.appConfig);const F=N.authToken;return 0===F.requestStatus?z(D,C):F})).apply(this,arguments)}function Ne(D){return Qr(D,C=>{if(!Ct(C))throw qe.create("not-registered");return function Dr(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Je(D,C){return ht.apply(this,arguments)}function ht(){return(ht=(0,P.Z)(function*(D,C){try{const N=yield mr(D,C),F=Object.assign(Object.assign({},C),{authToken:N});return yield Yr(D.appConfig,F),N}catch(N){if(!Ye(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Yr(D.appConfig,F)}else yield Mn(D.appConfig);throw N}})).apply(this,arguments)}function Ct(D){return void 0!==D&&2===D.registrationStatus}function ln(D){return 2===D.requestStatus&&!function Et(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function jn(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function _a(){return(_a=(0,P.Z)(function*(D){const C=D,{installationEntry:N,registrationPromise:F}=yield kn(C);return F?F.catch(console.error):z(C).catch(console.error),N.fid})).apply(this,arguments)}function va(){return(va=(0,P.Z)(function*(D,C=!1){const N=D;return yield $n(N),(yield z(N,C)).token})).apply(this,arguments)}function $n(D){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,P.Z)(function*(D){const{registrationPromise:C}=yield kn(D);C&&(yield C)})).apply(this,arguments)}function So(D){return qe.create("missing-app-config-values",{valueName:D})}const Lr="installations",at=D=>{const C=D.getProvider("app").getImmediate(),N=function rr(D){if(!D||!D.options)throw So("App Configuration");if(!D.name)throw So("App Name");const C=["projectId","apiKey","appId"];for(const N of C)if(!D.options[N])throw So(N);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:N,heartbeatServiceProvider:(0,ae._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Jt=D=>{const C=D.getProvider("app").getImmediate(),N=(0,ae._getProvider)(C,Lr).getImmediate();return{getId:()=>function gu(D){return _a.apply(this,arguments)}(N),getToken:Y=>function mu(D){return va.apply(this,arguments)}(N,Y)}};(function Vr(){(0,ae._registerComponent)(new pe.wA(Lr,at,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("installations-internal",Jt,"PRIVATE"))})(),(0,ae.registerVersion)(ce,$),(0,ae.registerVersion)(ce,$,"esm2017");const Si="@firebase/remote-config",xn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xp{constructor(C,N,F,Y){this.client=C,this.storage=N,this.storageCache=F,this.logger=Y}isCachedDataFresh(C,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-N,Y=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Y}.`),Y}fetch(C){var N=this;return(0,P.Z)(function*(){const[F,Y]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(Y&&N.isCachedDataFresh(C.cacheMaxAgeMillis,F))return Y;C.eTag=Y&&Y.eTag;const ne=yield N.client.fetch(C),ge=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&ge.push(N.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(ge),ne})()}}function Yc(D=navigator){return D.languages&&D.languages[0]||D.language}class yr{constructor(C,N,F,Y,ne,ge){this.firebaseInstallations=C,this.sdkVersion=N,this.namespace=F,this.projectId=Y,this.apiKey=ne,this.appId=ge}fetch(C){var N=this;return(0,P.Z)(function*(){const[F,Y]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),ge=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Ve={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},Tt={sdk_version:N.sdkVersion,app_instance_id:F,app_instance_id_token:Y,app_id:N.appId,language_code:Yc()},dt={method:"POST",headers:Ve,body:JSON.stringify(Tt)},$t=fetch(ge,dt),wt=new Promise((oi,ai)=>{C.signal.addEventListener(()=>{const Vu=new Error("The operation was aborted.");Vu.name="AbortError",ai(Vu)})});let vr;try{yield Promise.race([$t,wt]),vr=yield $t}catch(oi){let ai="fetch-client-network";throw"AbortError"===oi.name&&(ai="fetch-timeout"),xn.create(ai,{originalErrorMessage:oi.message})}let Yn=vr.status;const ts=vr.headers.get("ETag")||void 0;let Hr,si;if(200===vr.status){let oi;try{oi=yield vr.json()}catch(ai){throw xn.create("fetch-client-parse",{originalErrorMessage:ai.message})}Hr=oi.entries,si=oi.state}if("INSTANCE_STATE_UNSPECIFIED"===si?Yn=500:"NO_CHANGE"===si?Yn=304:("NO_TEMPLATE"===si||"EMPTY_CONFIG"===si)&&(Hr={}),304!==Yn&&200!==Yn)throw xn.create("fetch-status",{httpStatus:Yn});return{status:Yn,eTag:ts,config:Hr}})()}}class eg{constructor(C,N){this.client=C,this.storage=N}fetch(C){var N=this;return(0,P.Z)(function*(){const F=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:N,backoffCount:F}){var Y=this;return(0,P.Z)(function*(){yield function bs(D,C){return new Promise((N,F)=>{const Y=Math.max(C-Date.now(),0),ne=setTimeout(N,Y);D.addEventListener(()=>{clearTimeout(ne),F(xn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,N);try{const ne=yield Y.client.fetch(C);return yield Y.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function Qc(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ne))throw ne;const ge={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield Y.storage.setThrottleMetadata(ge),Y.attemptFetch(C,ge)}})()}}class Jc{constructor(C,N,F,Y,ne){this.app=C,this._client=N,this._storageCache=F,this._storage=Y,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _l(D,C){const N=D.target.error||void 0;return xn.create(C,{originalErrorMessage:N&&N.message})}const Is="app_namespace_store";class rg{constructor(C,N,F,Y=function ng(){return new Promise((D,C)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=F=>{C(_l(F,"storage-open"))},N.onsuccess=F=>{D(F.target.result)},N.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Is,{keyPath:"compositeKey"})}}catch(N){C(xn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=C,this.appName=N,this.namespace=F,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var N=this;return(0,P.Z)(function*(){const F=yield N.openDbPromise;return new Promise((Y,ne)=>{const Ve=F.transaction([Is],"readonly").objectStore(Is),Tt=N.createCompositeKey(C);try{const dt=Ve.get(Tt);dt.onerror=$t=>{ne(_l($t,"storage-get"))},dt.onsuccess=$t=>{const wt=$t.target.result;Y(wt?wt.value:void 0)}}catch(dt){ne(xn.create("storage-get",{originalErrorMessage:dt&&dt.message}))}})})()}set(C,N){var F=this;return(0,P.Z)(function*(){const Y=yield F.openDbPromise;return new Promise((ne,ge)=>{const Tt=Y.transaction([Is],"readwrite").objectStore(Is),dt=F.createCompositeKey(C);try{const $t=Tt.put({compositeKey:dt,value:N});$t.onerror=wt=>{ge(_l(wt,"storage-set"))},$t.onsuccess=()=>{ne()}}catch($t){ge(xn.create("storage-set",{originalErrorMessage:$t&&$t.message}))}})})()}delete(C){var N=this;return(0,P.Z)(function*(){const F=yield N.openDbPromise;return new Promise((Y,ne)=>{const Ve=F.transaction([Is],"readwrite").objectStore(Is),Tt=N.createCompositeKey(C);try{const dt=Ve.delete(Tt);dt.onerror=$t=>{ne(_l($t,"storage-delete"))},dt.onsuccess=()=>{Y()}}catch(dt){ne(xn.create("storage-delete",{originalErrorMessage:dt&&dt.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class ed{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const N=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),Y=C.storage.getActiveConfig(),ne=yield N;ne&&(C.lastFetchStatus=ne);const ge=yield F;ge&&(C.lastSuccessfulFetchTimestampMillis=ge);const Ve=yield Y;Ve&&(C.activeConfig=Ve)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function wu(){return td.apply(this,arguments)}function td(){return(td=(0,P.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Mo(){(0,ae._registerComponent)(new pe.wA("remote-config",function D(C,{instanceIdentifier:N}){const F=C.getProvider("app").getImmediate(),Y=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw xn.create("registration-window");if(!(0,re.hl)())throw xn.create("indexed-db-unavailable");const{projectId:ne,apiKey:ge,appId:Ve}=F.options;if(!ne)throw xn.create("registration-project-id");if(!ge)throw xn.create("registration-api-key");if(!Ve)throw xn.create("registration-app-id");const Tt=new rg(Ve,F.name,N=N||"firebase"),dt=new ed(Tt),$t=new ue.Yd(Si);$t.logLevel=ue.in.ERROR;const wt=new yr(Y,ae.SDK_VERSION,N,ne,ge,Ve),vr=new eg(wt,Tt),Yn=new Xp(vr,Tt,dt,$t),ts=new Jc(F,Yn,dt,Tt,$t);return function tn(D){const C=(0,re.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(ts),ts},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Si,"0.3.8"),(0,ae.registerVersion)(Si,"0.3.8","esm2017")}();const nd="/firebase-messaging-sw.js",_r="/firebase-cloud-messaging-push-scope",Ks="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xo="google.c.a.c_id",rd="google.c.a.c_l",Gh="google.c.a.ts",Gn="google.c.a.e";var No=(()=>{return(D=No||(No={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",No;var D})();function Tr(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function id(D){const N=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(N),Y=new Uint8Array(F.length);for(let ne=0;ne<F.length;++ne)Y[ne]=F.charCodeAt(ne);return Y}const Ar="fcm_token_details_db",Xr="fcm_token_object_Store";function vl(D){return sd.apply(this,arguments)}function sd(){return sd=(0,P.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Ar))return null;let C=null;return(yield(0,se.X3)(Ar,5,{upgrade:(F=(0,P.Z)(function*(Y,ne,ge,Ve){var Tt;if(ne<2||!Y.objectStoreNames.contains(Xr))return;const dt=Ve.objectStore(Xr),$t=yield dt.index("fcmSenderId").get(D);if(yield dt.clear(),$t)if(2===ne){const wt=$t;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;C={token:wt.fcmToken,createTime:null!==(Tt=wt.createTime)&&void 0!==Tt?Tt:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:Tr(wt.vapidKey)}}}else if(3===ne){const wt=$t;C={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Tr(wt.auth),p256dh:Tr(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Tr(wt.vapidKey)}}}else if(4===ne){const wt=$t;C={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:Tr(wt.auth),p256dh:Tr(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:Tr(wt.vapidKey)}}}}),function(ne,ge,Ve,Tt){return F.apply(this,arguments)})})).close(),yield(0,se.Lj)(Ar),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),El(C)?C:null;var F}),sd.apply(this,arguments)}function El(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Pi="firebase-messaging-store";let zh=null;function nn(){return zh||(zh=(0,se.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Pi)}})),zh}function Da(D){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,P.Z)(function*(D){const C=sr(D),F=yield(yield nn()).transaction(Pi).objectStore(Pi).get(C);if(F)return F;{const Y=yield vl(D.appConfig.senderId);if(Y)return yield Yt(D,Y),Y}})).apply(this,arguments)}function Yt(D,C){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,P.Z)(function*(D,C){const N=sr(D),Y=(yield nn()).transaction(Pi,"readwrite");return yield Y.objectStore(Pi).put(C,N),yield Y.done,C})).apply(this,arguments)}function bu(D){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,P.Z)(function*(D){const C=sr(D),F=(yield nn()).transaction(Pi,"readwrite");yield F.objectStore(Pi).delete(C),yield F.done})).apply(this,arguments)}function sr({appConfig:D}){return D.appId}const gn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ki(D,C){return or.apply(this,arguments)}function or(){return(or=(0,P.Z)(function*(D,C){const N=yield Po(D),F=ko(C),Y={method:"POST",headers:N,body:JSON.stringify(F)};let ne;try{ne=yield(yield fetch(Fi(D.appConfig),Y)).json()}catch(ge){throw gn.create("token-subscribe-failed",{errorInfo:ge})}if(ne.error)throw gn.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw gn.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function Qs(D,C){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,P.Z)(function*(D,C){const N=yield Po(D),F=ko(C.subscriptionOptions),Y={method:"PATCH",headers:N,body:JSON.stringify(F)};let ne;try{ne=yield(yield fetch(`${Fi(D.appConfig)}/${C.token}`,Y)).json()}catch(ge){throw gn.create("token-update-failed",{errorInfo:ge})}if(ne.error)throw gn.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw gn.create("token-update-no-token");return ne.token})).apply(this,arguments)}function Ta(D,C){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,P.Z)(function*(D,C){const F={method:"DELETE",headers:yield Po(D)};try{const ne=yield(yield fetch(`${Fi(D.appConfig)}/${C}`,F)).json();if(ne.error)throw gn.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Y){throw gn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function Fi({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Po(D){return ft.apply(this,arguments)}function ft(){return(ft=(0,P.Z)(function*({appConfig:D,installations:C}){const N=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function ko({p256dh:D,auth:C,endpoint:N,vapidKey:F}){const Y={web:{endpoint:N,auth:C,p256dh:D}};return F!==Ks&&(Y.web.applicationPubKey=F),Y}const Iu=6048e5;function Aa(D){return Il.apply(this,arguments)}function Il(){return(Il=(0,P.Z)(function*(D){const C=yield dn(D.swRegistration,D.vapidKey),N={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:Tr(C.getKey("auth")),p256dh:Tr(C.getKey("p256dh"))},F=yield Da(D.firebaseDependencies);if(F){if(Js(F.subscriptionOptions,N))return Date.now()>=F.createTime+Iu?Cl(D,{token:F.token,createTime:Date.now(),subscriptionOptions:N}):F.token;try{yield Ta(D.firebaseDependencies,F.token)}catch(Y){console.warn(Y)}return Ft(D.firebaseDependencies,N)}return Ft(D.firebaseDependencies,N)})).apply(this,arguments)}function Sa(D){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,P.Z)(function*(D){const C=yield Da(D.firebaseDependencies);C&&(yield Ta(D.firebaseDependencies,C.token),yield bu(D.firebaseDependencies));const N=yield D.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Cl(D,C){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,P.Z)(function*(D,C){try{const N=yield Qs(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:N,createTime:Date.now()});return yield Yt(D.firebaseDependencies,F),N}catch(N){throw yield Sa(D),N}})).apply(this,arguments)}function Ft(D,C){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,P.Z)(function*(D,C){const F={token:yield ki(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Yt(D,F),F.token})).apply(this,arguments)}function dn(D,C){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,P.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:id(C)})})).apply(this,arguments)}function Js(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function ei(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Ma(D,C){if(!C.notification)return;D.notification={};const N=C.notification.title;N&&(D.notification.title=N);const F=C.notification.body;F&&(D.notification.body=F);const Y=C.notification.image;Y&&(D.notification.image=Y)}(C,D),function Al(D,C){!C.data||(D.data=C.data)}(C,D),function ig(D,C){if(!C.fcmOptions)return;D.fcmOptions={};const N=C.fcmOptions.link;N&&(D.fcmOptions.link=N);const F=C.fcmOptions.analytics_label;F&&(D.fcmOptions.analyticsLabel=F)}(C,D),C}function Du(D){return"object"==typeof D&&!!D&&xo in D}function xa(D,C){const N=[];for(let F=0;F<D.length;F++)N.push(D.charAt(F)),F<C.length&&N.push(C.charAt(F));return N.join("")}function Nn(D){return gn.create("missing-app-config-values",{valueName:D})}xa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Yi{constructor(C,N,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Cu(D){if(!D||!D.options)throw Nn("App Configuration Object");if(!D.name)throw Nn("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:N}=D;for(const F of C)if(!N[F])throw Nn(F);return{appName:D.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Y,installations:N,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Na(D){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,P.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(nd,{scope:_r}),D.swRegistration.update().catch(()=>{})}catch(C){throw gn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function wi(D,C){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,P.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Na(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw gn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function Tu(D,C){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,P.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=Ks)})).apply(this,arguments)}function Ra(){return(Ra=(0,P.Z)(function*(D,C){if(!navigator)throw gn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw gn.create("permission-blocked");return yield Tu(D,null==C?void 0:C.vapidKey),yield wi(D,null==C?void 0:C.serviceWorkerRegistration),Aa(D)})).apply(this,arguments)}function Lo(D,C,N){return xl.apply(this,arguments)}function xl(){return(xl=(0,P.Z)(function*(D,C,N){const F=Oa(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:N[xo],message_name:N[rd],message_time:N[Gh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Oa(D){switch(D){case No.NOTIFICATION_CLICKED:return"notification_open";case No.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Nl(){return(Nl=(0,P.Z)(function*(D,C){const N=C.data;if(!N.isFirebaseMessaging)return;D.onMessageHandler&&N.messageType===No.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ei(N)):D.onMessageHandler.next(ei(N)));const F=N.data;Du(F)&&"1"===F[Gn]&&(yield Lo(D,N.messageType,F))})).apply(this,arguments)}const Vo="@firebase/messaging",od=D=>{const C=new Yi(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function sg(D,C){return Nl.apply(this,arguments)}(C,N)),C},Uo=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function Au(D,C){return Ra.apply(this,arguments)}(C,F)}};function Bo(){return Li.apply(this,arguments)}function Li(){return(Li=(0,P.Z)(function*(){try{yield(0,re.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ad(){(0,ae._registerComponent)(new pe.wA("messaging",od,"PUBLIC")),(0,ae._registerComponent)(new pe.wA("messaging-internal",Uo,"PRIVATE")),(0,ae.registerVersion)(Vo,"0.9.13"),(0,ae.registerVersion)(Vo,"0.9.13","esm2017")}();const ud="analytics",og="firebase_id",Qi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jo="https://www.googletagmanager.com/gtag/js",Kn=new ue.Yd("@firebase/analytics");function Kh(D){return Promise.all(D.map(C=>C.catch(N=>N)))}function Xs(D,C){const N=document.createElement("script");N.src=`${jo}?l=${D}&id=${C}`,N.async=!0,document.head.appendChild(N)}function cd(D,C,N,F,Y,ne){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,P.Z)(function*(D,C,N,F,Y,ne){const ge=F[Y];try{if(ge)yield C[ge];else{const Tt=(yield Kh(N)).find(dt=>dt.measurementId===Y);Tt&&(yield C[Tt.appId])}}catch(Ve){Kn.error(Ve)}D("config",Y,ne)})).apply(this,arguments)}function xu(D,C,N,F,Y){return eo.apply(this,arguments)}function eo(){return(eo=(0,P.Z)(function*(D,C,N,F,Y){try{let ne=[];if(Y&&Y.send_to){let ge=Y.send_to;Array.isArray(ge)||(ge=[ge]);const Ve=yield Kh(N);for(const Tt of ge){const dt=Ve.find(wt=>wt.measurementId===Tt),$t=dt&&C[dt.appId];if(!$t){ne=[];break}ne.push($t)}}0===ne.length&&(ne=Object.values(C)),yield Promise.all(ne),D("event",F,Y||{})}catch(ne){Kn.error(ne)}})).apply(this,arguments)}function mn(){const D=window.document.getElementsByTagName("script");for(const C of Object.values(D))if(C.src&&C.src.includes(jo))return C;return null}const tt=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Rl=new class Vn{constructor(C={},N=1e3){this.throttleMetadata=C,this.intervalMillis=N}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,N){this.throttleMetadata[C]=N}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function hd(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Ui(D){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,P.Z)(function*(D){var C;const{appId:N,apiKey:F}=D,Y={method:"GET",headers:hd(F)},ne=Qi.replace("{app-id}",N),ge=yield fetch(ne,Y);if(200!==ge.status&&304!==ge.status){let Ve="";try{const Tt=yield ge.json();(null===(C=Tt.error)||void 0===C?void 0:C.message)&&(Ve=Tt.error.message)}catch(Tt){}throw tt.create("config-fetch-failed",{httpStatus:ge.status,responseMessage:Ve})}return ge.json()})).apply(this,arguments)}function on(D){return La.apply(this,arguments)}function La(){return(La=(0,P.Z)(function*(D,C=Rl,N){const{appId:F,apiKey:Y,measurementId:ne}=D.options;if(!F)throw tt.create("no-app-id");if(!Y){if(ne)return{measurementId:ne,appId:F};throw tt.create("no-api-key")}const ge=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new pd;return setTimeout((0,P.Z)(function*(){Ve.abort()}),void 0!==N?N:6e4),bi({appId:F,apiKey:Y,measurementId:ne},ge,Ve,C)})).apply(this,arguments)}function bi(D,C,N){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,P.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:N},F,Y=Rl){const{appId:ne,measurementId:ge}=D;try{yield Nu(F,C)}catch(Ve){if(ge)return Kn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ge} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ne,measurementId:ge};throw Ve}try{const Ve=yield Ui(D);return Y.deleteThrottleMetadata(ne),Ve}catch(Ve){if(!fd(Ve)){if(Y.deleteThrottleMetadata(ne),ge)return Kn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ge} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ne,measurementId:ge};throw Ve}const Tt=503===Number(Ve.customData.httpStatus)?(0,re.$s)(N,Y.intervalMillis,30):(0,re.$s)(N,Y.intervalMillis),dt={throttleEndTimeMillis:Date.now()+Tt,backoffCount:N+1};return Y.setThrottleMetadata(ne,dt),Kn.debug(`Calling attemptFetch again in ${Tt} millis`),bi(D,dt,F,Y)}})).apply(this,arguments)}function Nu(D,C){return new Promise((N,F)=>{const Y=Math.max(C-Date.now(),0),ne=setTimeout(N,Y);D.addEventListener(()=>{clearTimeout(ne),F(tt.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function fd(D){if(!(D instanceof re.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class pd{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function Pl(){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,P.Z)(function*(){if(!(0,re.hl)())return Kn.warn(tt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return Kn.warn(tt.create("indexeddb-unavailable",{errorInfo:D}).message),!1}return!0})).apply(this,arguments)}function Ho(){return(Ho=(0,P.Z)(function*(D,C,N,F,Y,ne,ge){var Ve;const Tt=on(D);Tt.then(Yn=>{N[Yn.measurementId]=Yn.appId,D.options.measurementId&&Yn.measurementId!==D.options.measurementId&&Kn.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Yn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Yn=>Kn.error(Yn)),C.push(Tt);const dt=Pl().then(Yn=>{if(Yn)return F.getId()}),[$t,wt]=yield Promise.all([Tt,dt]);mn()||Xs(ne,$t.measurementId),Y("js",new Date);const vr=null!==(Ve=null==ge?void 0:ge.config)&&void 0!==Ve?Ve:{};return vr.origin="firebase",vr.update=!0,null!=wt&&(vr[og]=wt),Y("config",$t.measurementId,vr),$t.measurementId})).apply(this,arguments)}class Ts{constructor(C){this.app=C}_delete(){return delete ar[this.app.options.appId],Promise.resolve()}}let ar={},Ru=[];const Ji={};let zo,to,Go="dataLayer",qo=!1;function Va(D,C,N){!function Ko(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,Y)=>`(${Y+1}) ${F}`).join(" "),N=tt.create("invalid-analytics-context",{errorInfo:C});Kn.warn(N.message)}}();const F=D.options.appId;if(!F)throw tt.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw tt.create("no-api-key");Kn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ar[F])throw tt.create("already-exists",{id:F});if(!qo){!function Su(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Go);const{wrappedGtag:ne,gtagCore:ge}=function ag(D,C,N,F,Y){let ne=function(...ge){window[F].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ne=window[Y]),window[Y]=function dd(D,C,N,F){function ne(){return(ne=(0,P.Z)(function*(ge,Ve,Tt){try{"event"===ge?yield xu(D,C,N,Ve,Tt):"config"===ge?yield cd(D,C,N,F,Ve,Tt):D("set",Ve)}catch(dt){Kn.error(dt)}})).apply(this,arguments)}return function Y(ge,Ve,Tt){return ne.apply(this,arguments)}}(ne,D,C,N),{gtagCore:ne,wrappedGtag:window[Y]}}(ar,Ru,Ji,Go,"gtag");to=ne,zo=ge,qo=!0}return ar[F]=function $o(D,C,N,F,Y,ne,ge){return Ho.apply(this,arguments)}(D,Ru,Ji,C,zo,Go,N),new Ts(D)}function ur(){return(ur=(0,P.Z)(function*(D,C,N,F,Y){if(Y&&Y.global)D("event",N,F);else{const ne=yield C;D("event",N,Object.assign(Object.assign({},F),{send_to:ne}))}})).apply(this,arguments)}function Pu(){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,P.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(D){return!1}})).apply(this,arguments)}const $r="@firebase/analytics";!function Ms(){(0,ae._registerComponent)(new pe.wA(ud,(C,{options:N})=>Va(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ae._registerComponent)(new pe.wA("analytics-internal",function D(C){try{const N=C.getProvider(ud).getImmediate();return{logEvent:(F,Y,ne)=>function Zo(D,C,N,F){D=(0,re.m9)(D),function Ss(D,C,N,F,Y){return ur.apply(this,arguments)}(to,ar[D.app.options.appId],C,N,F).catch(Y=>Kn.error(Y))}(N,F,Y,ne)}}catch(N){throw tt.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ae.registerVersion)($r,"0.7.9"),(0,ae.registerVersion)($r,"0.7.9","esm2017")}();var io=O(4408),yn=O(7565);const so=new class kl extends yn.v{}(class ku extends io.o{constructor(C,N){super(C,N),this.scheduler=C,this.work=N}schedule(C,N=0){return N>0?super.schedule(C,N):(this.delay=N,this.state=C,this.scheduler.flush(this),this)}execute(C,N){return N>0||this.closed?super.execute(C,N):this._execute(C,N)}requestAsyncId(C,N,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,N,F):C.flush(this)}});var Fl=O(4986),ri=O(8505),ii=O(9468),Yo=O(5363);const oo=new f.GfV("7.3.0"),ao="__angularfire_symbol__analyticsIsSupportedValue",Qo="__angularfire_symbol__analyticsIsSupported",uo="__angularfire_symbol__remoteConfigIsSupportedValue",es="__angularfire_symbol__remoteConfigIsSupported",Ba="__angularfire_symbol__messagingIsSupportedValue",Pt="__angularfire_symbol__messagingIsSupported";function cg(D,C,N){if(C){if(1===C.length)return C[0];const ne=C.filter(ge=>ge.app===N);if(1===ne.length)return ne[0]}return N.container.getProvider(D).getImmediate({optional:!0})}globalThis[Qo]||(globalThis[Qo]=Pu().then(D=>globalThis[ao]=D).catch(()=>globalThis[ao]=!1)),globalThis[Pt]||(globalThis[Pt]=Bo().then(D=>globalThis[Ba]=D).catch(()=>globalThis[Ba]=!1)),globalThis[es]||(globalThis[es]=wu().then(D=>globalThis[uo]=D).catch(()=>globalThis[uo]=!1));const md=(D,C)=>{const N=C?[C]:(0,X.C6)(),F=[];return N.forEach(Y=>{Y.container.getProvider(D).instances.forEach(ge=>{F.includes(ge)||F.push(ge)})}),F};function Ns(){}class Ii{constructor(C,N=so){this.zone=C,this.delegate=N}now(){return this.delegate.now()}schedule(C,N,F){const Y=this.zone;return this.delegate.schedule(function(ge){Y.runGuarded(()=>{C.apply(this,[ge])})},N,F)}}class Lu{constructor(C){this.zone=C,this.task=null}call(C,N){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ns,{},Ns,Ns)),N.pipe((0,ri.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let yd=(()=>{class D{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new Ii(Zone.current)),this.insideAngular=N.run(()=>new Ii(Zone.current,Fl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(N){return new(N||D)(f.LFG(f.R0b))},D.\u0275prov=f.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function $i(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Jo(D){return $i(),function Xo(D){return function(N){return(N=N.lift(new Lu(D.ngZone))).pipe((0,ii.R)(D.outsideAngular),(0,Yo.Q)(D.insideAngular))}}($i())(D)}},2090:(Xe,we,O)=>{O.d(we,{BH:()=>ze,LL:()=>oe,ZR:()=>me,zI:()=>K,US:()=>pe,tV:()=>ce,L:()=>se,$s:()=>jt,r3:()=>br,Sg:()=>Me,ne:()=>Ai,vZ:()=>Kr,ZB:()=>B,pd:()=>ys,m9:()=>mr,z$:()=>Re,jU:()=>Ce,ru:()=>qe,d:()=>Te,xb:()=>Vt,w1:()=>Ee,hl:()=>j,uI:()=>Ue,UG:()=>he,b$:()=>Ye,G6:()=>je,Mn:()=>Ie,xO:()=>Ir,zd:()=>Ti,eu:()=>ve});const ae=function(V){const G=[];let z=0;for(let De=0;De<V.length;De++){let H=V.charCodeAt(De);H<128?G[z++]=H:H<2048?(G[z++]=H>>6|192,G[z++]=63&H|128):55296==(64512&H)&&De+1<V.length&&56320==(64512&V.charCodeAt(De+1))?(H=65536+((1023&H)<<10)+(1023&V.charCodeAt(++De)),G[z++]=H>>18|240,G[z++]=H>>12&63|128,G[z++]=H>>6&63|128,G[z++]=63&H|128):(G[z++]=H>>12|224,G[z++]=H>>6&63|128,G[z++]=63&H|128)}return G},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,G){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let H=0;H<V.length;H+=3){const J=V[H],Ne=H+1<V.length,Je=Ne?V[H+1]:0,ht=H+2<V.length,Ct=ht?V[H+2]:0;let jn=(15&Je)<<2|Ct>>6,Dr=63&Ct;ht||(Dr=64,Ne||(jn=64)),De.push(z[J>>2],z[(3&J)<<4|Je>>4],z[jn],z[Dr])}return De.join("")},encodeString(V,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(V):this.encodeByteArray(ae(V),G)},decodeString(V,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(V):function(V){const G=[];let z=0,De=0;for(;z<V.length;){const H=V[z++];if(H<128)G[De++]=String.fromCharCode(H);else if(H>191&&H<224){const J=V[z++];G[De++]=String.fromCharCode((31&H)<<6|63&J)}else if(H>239&&H<365){const ht=((7&H)<<18|(63&V[z++])<<12|(63&V[z++])<<6|63&V[z++])-65536;G[De++]=String.fromCharCode(55296+(ht>>10)),G[De++]=String.fromCharCode(56320+(1023&ht))}else{const J=V[z++],Ne=V[z++];G[De++]=String.fromCharCode((15&H)<<12|(63&J)<<6|63&Ne)}}return G.join("")}(this.decodeStringToByteArray(V,G))},decodeStringToByteArray(V,G){this.init_();const z=G?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let H=0;H<V.length;){const J=z[V.charAt(H++)],Je=H<V.length?z[V.charAt(H)]:0;++H;const Ct=H<V.length?z[V.charAt(H)]:64;++H;const Et=H<V.length?z[V.charAt(H)]:64;if(++H,null==J||null==Je||null==Ct||null==Et)throw Error();De.push(J<<2|Je>>4),64!==Ct&&(De.push(Je<<4&240|Ct>>2),64!==Et&&De.push(Ct<<6&192|Et))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}},se=function(V){return function(V){const G=ae(V);return pe.encodeByteArray(G,!0)}(V).replace(/\./g,"")},ce=function(V){try{return pe.decodeString(V,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function B(V,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return G}for(const z in G)!G.hasOwnProperty(z)||!te(z)||(V[z]=B(V[z],G[z]));return V}function te(V){return"__proto__"!==V}class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,z)=>{this.resolve=G,this.reject=z})}wrapCallback(G){return(z,De)=>{z?this.reject(z):this.resolve(De),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(z):G(z,De))}}}function Me(V,G){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=G||"demo-project",H=V.iat||0,J=V.sub||V.user_id;if(!J)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ne=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:H,exp:H+3600,auth_time:H,sub:J,user_id:J,firebase:{sign_in_provider:"custom",identities:{}}},V);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(Ne)),""].join(".")}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(V){return!1}}function Ce(){return"object"==typeof self&&self.self===self}function qe(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){return Re().indexOf("Electron/")>=0}function Ee(){const V=Re();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function Ie(){return Re().indexOf("MSAppHost/")>=0}function je(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){return"object"==typeof indexedDB}function ve(){return new Promise((V,G)=>{try{let z=!0;const De="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(De);H.onsuccess=()=>{H.result.close(),z||self.indexedDB.deleteDatabase(De),V(!0)},H.onupgradeneeded=()=>{z=!1},H.onerror=()=>{var J;G((null===(J=H.error)||void 0===J?void 0:J.message)||"")}}catch(z){G(z)}})}function K(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(G,z,De){super(z),this.code=G,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oe.prototype.create)}}class oe{constructor(G,z,De){this.service=G,this.serviceName=z,this.errors=De}create(G,...z){const De=z[0]||{},H=`${this.service}/${G}`,J=this.errors[G],Ne=J?function Oe(V,G){return V.replace(lt,(z,De)=>{const H=G[De];return null!=H?String(H):`<${De}?>`})}(J,De):"Error";return new me(H,`${this.serviceName}: ${Ne} (${H}).`,De)}}const lt=/\{\$([^}]+)}/g;function br(V,G){return Object.prototype.hasOwnProperty.call(V,G)}function Vt(V){for(const G in V)if(Object.prototype.hasOwnProperty.call(V,G))return!1;return!0}function Kr(V,G){if(V===G)return!0;const z=Object.keys(V),De=Object.keys(G);for(const H of z){if(!De.includes(H))return!1;const J=V[H],Ne=G[H];if(fr(J)&&fr(Ne)){if(!Kr(J,Ne))return!1}else if(J!==Ne)return!1}for(const H of De)if(!z.includes(H))return!1;return!0}function fr(V){return null!==V&&"object"==typeof V}function Ir(V){const G=[];for(const[z,De]of Object.entries(V))Array.isArray(De)?De.forEach(H=>{G.push(encodeURIComponent(z)+"="+encodeURIComponent(H))}):G.push(encodeURIComponent(z)+"="+encodeURIComponent(De));return G.length?"&"+G.join("&"):""}function Ti(V){const G={};return V.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[H,J]=De.split("=");G[decodeURIComponent(H)]=decodeURIComponent(J)}}),G}function ys(V){const G=V.indexOf("?");if(!G)return"";const z=V.indexOf("#",G);return V.substring(G,z>0?z:void 0)}function Ai(V,G){const z=new yt(V,G);return z.subscribe.bind(z)}class yt{constructor(G,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{G(this)}).catch(De=>{this.error(De)})}next(G){this.forEachObserver(z=>{z.next(G)})}error(G){this.forEachObserver(z=>{z.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,z,De){let H;if(void 0===G&&void 0===z&&void 0===De)throw new Error("Missing Observer.");H=function bn(V,G){if("object"!=typeof V||null===V)return!1;for(const z of G)if(z in V&&"function"==typeof V[z])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:z,complete:De},void 0===H.next&&(H.next=Mn),void 0===H.error&&(H.error=Mn),void 0===H.complete&&(H.complete=Mn);const J=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(Ne){}}),this.observers.push(H),J}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,G)}sendOne(G,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{z(this.observers[G])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mn(){}function jt(V,G=1e3,z=2){const De=G*Math.pow(z,V),H=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+H)}function mr(V){return V&&V._delegate?V._delegate:V}},7468:(Xe,we,O)=>{var f=O(5e3);let X=null;function P(){return X}const ue=new f.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ce(){return(0,f.LFG)(B)}()},providedIn:"platform"}),n})();const $=new f.OlP("Location Initialized");let B=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,s){te()?this._history.pushState(t,r,s):this.location.hash=s}replaceState(t,r,s){te()?this._history.replaceState(t,r,s):this.location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ze(){return new B((0,f.LFG)(ue))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,f.LFG)(ue).location;return new Ye((0,f.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new f.OlP("appBaseHref");let Ye=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const c=this.prepareExternalUrl(s+Ue(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){const c=this.prepareExternalUrl(s+Ue(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(qe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let c=this.prepareExternalUrl(s+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,s,u){let c=this.prepareExternalUrl(s+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformLocation).historyGo)||void 0===s||s.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(qe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const s=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(je(s)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function $e(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._platformStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),s)}replaceState(t,r="",s=null){this._platformStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),s)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,s;null===(s=(r=this._platformStrategy).historyGo)||void 0===s||s.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Me,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ie(){return new Ee((0,f.LFG)(he),(0,f.LFG)(se))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}class Es{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ln=(()=>{class n{constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,c)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Es(s.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,c),Ws(g,s)}});for(let s=0,u=r.length;s<u;s++){const g=r.get(s).context;g.index=s,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Ws(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ws(n,e){n.context.$implicit=e.item}let ir=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){_u("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){_u("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class tn{constructor(){this.$implicit=null,this.ngIf=null}}function _u(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}class bs{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Qc{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const eg=new Qc,Ki=new bs;let Eu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,f.QGY)(t))return eg;if((0,f.F4k)(t))return Ki;throw function yr(n,e){return new f.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.sBO,16))},n.\u0275pipe=f.Yjl({name:"async",type:n,pure:!1}),n})(),Gn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Ro(n){return"server"===n}let El=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Oo((0,f.LFG)(ue),window)}),n})();class Oo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Pi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=wl(this.window.history)||wl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function wl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ys extends class Da extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){X||(X=n)}(new Ys)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ca(){return Yt=Yt||document.querySelector("base"),Yt?Yt.getAttribute("href"):null}();return null==t?null:function Ds(n){bu=bu||document.createElement("a"),bu.setAttribute("href",n);const e=bu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Yt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function wa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let bu,Yt=null;const sr=new f.OlP("TRANSITION_ID"),gn=[{provide:f.ip1,useFactory:function bl(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=P(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[sr,ue,f.zs3],multi:!0}];class ki{static init(){(0,f.VLi)(new ki)}addToWindow(e){f.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const s=f.dqk.getAllAngularTestabilities();let u=s.length,c=!1;const g=function(v){c=c||v,u--,0==u&&r(c)};s.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const s=e.getTestability(t);return null!=s?s:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let or=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Qs=new f.OlP("EventManagerPlugins");let Zi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>s.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const c=s[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Qs),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ta{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=P().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let Ei=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(s=>{this._stylesSet.has(s)||(this._stylesSet.add(s),r.add(s))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Fi=(()=>{class n extends Ei{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,s){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,s.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Po),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,s)=>{this._addStylesToHost(t,s,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Po))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Po(n){P().remove(n)}const ft={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ko=/%COMP%/g;function Ae(n,e,t){for(let r=0;r<e.length;r++){let s=e[r];Array.isArray(s)?Ae(n,s,t):(s=s.replace(ko,n),t.push(s))}return t}function Ft(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let dn=(()=>{class n{constructor(t,r,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.rendererByCompId=new Map,this.defaultRenderer=new Fo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let s=this.rendererByCompId.get(r.id);return s||(s=new Ma(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,s)),s.applyToHost(t),s}case 1:case f.ifc.ShadowDom:return new Al(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const s=Ae(r.id,r.styles,[]);this.sharedStylesHost.addStyles(s),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Zi),f.LFG(Fi),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Fo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ft[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=ft[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=ft[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,s&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ft(r)):this.eventManager.addEventListener(e,t,Ft(r))}}class Ma extends Fo{constructor(e,t,r,s){super(e),this.component=r;const u=Ae(s+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Dl(n){return"_ngcontent-%COMP%".replace(ko,n)}(s+"-"+r.id),this.hostAttr=function Cl(n){return"_nghost-%COMP%".replace(ko,n)}(s+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Al extends Fo{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ae(s.id,s.styles,[]);for(let c=0;c<u.length;c++){const g=document.createElement("style");g.textContent=u[c],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ig=(()=>{class n extends Ta{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Du=["alt","control","meta","shift"],Cu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Nn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Yi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Na=(()=>{class n extends Ta{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let c="";if(Du.forEach(v=>{const I=r.indexOf(v);I>-1&&(r.splice(I,1),c+=v+".")}),c+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=s,g.fullKey=c,g}static getEventFullKey(t){let r="",s=function Cs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Nn.hasOwnProperty(e)&&(e=Nn[e]))}return Cu[e]||e}(t);return s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Du.forEach(u=>{u!=s&&Yi[u](t)&&(r+=u+".")}),r+=s,r}static eventCallback(t,r,s){return u=>{n.getEventFullKey(u)===t&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Au=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function wi(){Ys.makeCurrent(),ki.init()},multi:!0},{provide:ue,useFactory:function Tu(){return(0,f.RDi)(document),document},deps:[]}]),Ra=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Sl(){return new f.qLn},deps:[]},{provide:Qs,useClass:ig,multi:!0,deps:[ue,f.R0b,f.Lbi]},{provide:Qs,useClass:Na,multi:!0,deps:[ue]},{provide:dn,useClass:dn,deps:[Zi,Fi,f.AFp]},{provide:f.FYo,useExisting:dn},{provide:Ei,useExisting:Fi},{provide:Fi,useClass:Fi,deps:[ue]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:Zi,useClass:Zi,deps:[Qs,f.R0b]},{provide:class nn{},useClass:or,deps:[]}];let Lo=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:sr,useExisting:f.AFp},gn]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Ra,imports:[Gn,f.hGG]}),n})();"undefined"!=typeof window&&window;var mn=O(8996),Fa=O(7669);function tt(...n){const e=(0,Fa.yG)(n);return(0,mn.D)(n,e)}var ti=O(7579);class Br extends ti.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Vn=O(8306);const{isArray:Rl}=Array,{getPrototypeOf:hd,prototype:Ui,keys:Ol}=Object;function on(n){if(1===n.length){const e=n[0];if(Rl(e))return{args:e,keys:null};if(function La(n){return n&&"object"==typeof n&&hd(n)===Ui}(e)){const t=Ol(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var bi=O(4671),Mt=O(4004);const{isArray:Nu}=Array;function pd(n){return(0,Mt.U)(e=>function fd(n,e){return Nu(e)?n(...e):n(e)}(n,e))}function Pl(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var Rn=O(5403),$o=O(9672);function ar(n,e,t){n?(0,$o.f)(t,n,e):e()}var Ru=O(576);function Ji(n,e){const t=(0,Ru.m)(n)?n:()=>n,r=s=>s.error(t());return new Vn.y(e?s=>e.schedule(r,0,s):r)}const As=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var zo=O(8189);function qo(...n){return function to(){return(0,zo.J)(1)}()((0,mn.D)(n,(0,Fa.yG)(n)))}var Wo=O(8421);function Ko(n){return new Vn.y(e=>{(0,Wo.Xf)(n()).subscribe(e)})}var Va=O(515),Ss=O(727),ur=O(4482);function no(){return(0,ur.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Rn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ou extends Vn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ur.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ss.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Rn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ss.w0.EMPTY)}return e}refCount(){return no()(this)}}function Dn(n,e){return(0,ur.e)((t,r)=>{let s=null,u=0,c=!1;const g=()=>c&&!s&&r.complete();t.subscribe((0,Rn.x)(r,v=>{null==s||s.unsubscribe();let I=0;const S=u++;(0,Wo.Xf)(n(v,S)).subscribe(s=(0,Rn.x)(r,x=>r.next(e?e(v,x,S,I++):x),()=>{s=null,g()}))},()=>{c=!0,g()}))})}var ro=O(5698);function Bi(...n){const e=(0,Fa.yG)(n);return(0,ur.e)((t,r)=>{(e?qo(n,t,e):qo(n,t)).subscribe(r)})}function Xi(n,e,t,r,s){return(u,c)=>{let g=t,v=e,I=0;u.subscribe((0,Rn.x)(c,S=>{const x=I++;v=g?n(v,S,x):(g=!0,S),r&&c.next(v)},s&&(()=>{g&&c.next(v),c.complete()})))}}function ji(n,e){return(0,ur.e)(Xi(n,e,arguments.length>=2,!0))}function jr(n,e){return(0,ur.e)((t,r)=>{let s=0;t.subscribe((0,Rn.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}function ni(n){return(0,ur.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Rn.x)(t,void 0,void 0,c=>{u=(0,Wo.Xf)(n(c,ni(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Cn=O(5577);function Pu(n,e){return(0,Ru.m)(e)?(0,Cn.z)(n,e,1):(0,Cn.z)(n,1)}function Ua(n){return n<=0?()=>Va.E:(0,ur.e)((e,t)=>{let r=[];e.subscribe((0,Rn.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function hn(n=ug){return(0,ur.e)((e,t)=>{let r=!1;e.subscribe((0,Rn.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function ug(){return new As}function lg(n){return(0,ur.e)((e,t)=>{let r=!1;e.subscribe((0,Rn.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Zo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?jr((s,u)=>n(s,u,r)):bi.y,(0,ro.q)(1),t?lg(e):hn(()=>new As))}var $r=O(8505);class Ms{constructor(e,t){this.id=e,this.url=t}}class io extends Ms{constructor(e,t,r="imperative",s=null){super(e,t),this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ku extends Ms{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yn extends Ms{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kl extends Ms{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class so extends Ms{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ay extends Ms{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fl extends Ms{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ri extends Ms{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ii extends Ms{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yo{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oo{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ao{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qo{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class es{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ba{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pt="primary";class Fu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Zn(n){return new Fu(n)}const ja="ngNavigationCancelingError";function xs(n){const e=Error("NavigationCancelingError: "+n);return e[ja]=!0,e}function md(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const c=r[u],g=n[u];if(c.startsWith(":"))s[c.substring(1)]=g;else if(c!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Ii(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!Lu(n[s],e[s]))return!1;return!0}function Lu(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function yd(n){return Array.prototype.concat.apply([],n)}function $i(n){return n.length>0?n[n.length-1]:null}function an(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function lr(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,mn.D)(Promise.resolve(n)):tt(n)}const Jo={exact:function D(n,e,t){if(!dt(n.segments,e.segments)||!Y(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!D(n.children[r],e.children[r],t))return!1;return!0},subset:N},Xo={exact:function _d(n,e){return Ii(n,e)},subset:function C(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Lu(n[t],e[t]))},ignored:()=>!0};function lo(n,e,t){return Jo[t.paths](n.root,e.root,t.matrixParams)&&Xo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function N(n,e,t){return F(n,e,e.segments,t)}function F(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!dt(s,t)||e.hasChildren()||!Y(s,t,r))}if(n.segments.length===t.length){if(!dt(n.segments,t)||!Y(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!N(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(dt(n.segments,s)&&Y(n.segments,s,r)&&n.children[Pt])&&F(n.children[Pt],e,u,r)}}function Y(n,e,t){return e.every((r,s)=>Xo[t](n[s].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap}toString(){return Yn.serialize(this)}}class ge{constructor(e,t){this.segments=e,this.children=t,this.parent=null,an(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ts(this)}}class Ve{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Zn(this.parameters)),this._parameterMap}toString(){return Bu(this)}}function dt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class wt{}class vr{parse(e){const t=new xy(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Hr(e.root,!0)}`,r=function hg(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${oi(t)}=${oi(s)}`).join("&"):`${oi(t)}=${oi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function ai(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Yn=new vr;function ts(n){return n.segments.map(e=>Bu(e)).join("/")}function Hr(n,e){if(!n.hasChildren())return ts(n);if(e){const t=n.children[Pt]?Hr(n.children[Pt],!1):"",r=[];return an(n.children,(s,u)=>{u!==Pt&&r.push(`${u}:${Hr(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $t(n,e){let t=[];return an(n.children,(r,s)=>{s===Pt&&(t=t.concat(e(r,s)))}),an(n.children,(r,s)=>{s!==Pt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Pt?[Hr(n.children[Pt],!1)]:[`${s}:${Hr(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${ts(n)}/${t[0]}`:`${ts(n)}/(${t.join("//")})`}}function si(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oi(n){return si(n).replace(/%3B/gi,";")}function Vu(n){return si(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Uu(n){return decodeURIComponent(n)}function Vl(n){return Uu(n.replace(/\+/g,"%20"))}function Bu(n){return`${Vu(n.path)}${function dg(n){return Object.keys(n).map(e=>`;${Vu(e)}=${Vu(n[e])}`).join("")}(n.parameters)}`}const Zh=/^[^\/()?;=#]+/;function co(n){const e=n.match(Zh);return e?e[0]:""}const Ul=/^[^=?&#]+/,fg=/^[^&#]+/;class xy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ge([],{}):new ge([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pt]=new ge(e,t)),r}parseSegment(){const e=co(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ve(Uu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=co(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=co(this.remaining);s&&(r=s,this.capture(r))}e[Uu(t)]=Uu(r)}parseQueryParam(e){const t=function My(n){const e=n.match(Ul);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function pg(n){const e=n.match(fg);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const s=Vl(t),u=Vl(r);if(e.hasOwnProperty(s)){let c=e[s];Array.isArray(c)||(c=[c],e[s]=c),c.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=co(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Pt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Pt]:new ge([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class gg{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Yh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Yh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ju(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return ju(e,this._root).map(t=>t.value)}}function Yh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Yh(n,t);if(r)return r}return null}function ju(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ju(n,t);if(r.length)return r.unshift(e),r}return[]}class ho{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function fo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class vd extends gg{constructor(e,t){super(e),this.snapshot=t,wd(this,e)}toString(){return this.snapshot.toString()}}function $a(n,e){const t=function Ny(n,e){const c=new ea([],{},{},"",{},Pt,e,null,n.root,-1,{});return new Qh("",new ho(c,[]))}(n,e),r=new Br([new Ve("",{})]),s=new Br({}),u=new Br({}),c=new Br({}),g=new Br(""),v=new $u(r,s,c,g,u,Pt,e,t.root);return v.snapshot=t.root,new vd(new ho(v,[]),t)}class $u{constructor(e,t,r,s,u,c,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=g,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Mt.U)(e=>Zn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Mt.U)(e=>Zn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ry(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Ed(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ea{constructor(e,t,r,s,u,c,g,v,I,S,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=c,this.component=g,this.routeConfig=v,this._urlSegment=I,this._lastPathIndex=S,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Qh extends gg{constructor(e,t){super(t),this.url=e,wd(this,t)}toString(){return Jh(this._root)}}function wd(n,e){e.value._routerState=n,e.children.forEach(t=>wd(n,t))}function Jh(n){const e=n.children.length>0?` { ${n.children.map(Jh).join(", ")} } `:"";return`${n.value}${e}`}function bd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ii(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ii(e.params,t.params)||n.params.next(t.params),function Ns(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ii(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ii(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Xh(n,e){const t=Ii(n.params,e.params)&&function Tt(n,e){return dt(n,e)&&n.every((t,r)=>Ii(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Xh(n.parent,e.parent))}function Bl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Oy(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Bl(n,r,s);return Bl(n,r)})}(n,e,t);return new ho(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(g=>Bl(n,g)),c}}const r=function Py(n){return new $u(new Br(n.url),new Br(n.params),new Br(n.queryParams),new Br(n.fragment),new Br(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Bl(n,u));return new ho(r,s)}}function Rs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function jl(n){return"object"==typeof n&&null!=n&&n.outlets}function Id(n,e,t,r,s){let u={};if(r&&an(r,(g,v)=>{u[v]=Array.isArray(g)?g.map(I=>`${I}`):`${g}`}),n===e)return new ne(t,u,s);const c=ky(n,e,t);return new ne(c,u,s)}function ky(n,e,t){const r={};return an(n.children,(s,u)=>{r[u]=s===e?t:ky(s,e,t)}),new ge(n.segments,r)}class yg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Rs(r[0]))throw new Error("Root segment cannot have matrix parameters");const s=r.find(jl);if(s&&s!==$i(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Dd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function wg(n,e,t){if(n||(n=new ge([],{})),0===n.segments.length&&n.hasChildren())return Cd(n,e,t);const r=function zE(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const c=n.segments[s],g=t[r];if(jl(g))break;const v=`${g}`,I=r<t.length-1?t[r+1]:null;if(s>0&&void 0===v)break;if(v&&I&&"object"==typeof I&&void 0===I.outlets){if(!ns(v,I,c))return u;r+=2}else{if(!ns(v,{},c))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new ge(n.segments.slice(0,r.pathIndex),{});return u.children[Pt]=new ge(n.segments.slice(r.pathIndex),n.children),Cd(u,0,s)}return r.match&&0===s.length?new ge(n.segments,{}):r.match&&!n.hasChildren()?bg(n,e,t):r.match?Cd(n,0,s):bg(n,e,t)}function Cd(n,e,t){if(0===t.length)return new ge(n.segments,{});{const r=function Eg(n){return jl(n[0])?n[0].outlets:{[Pt]:n}}(t),s={};return an(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[c]=wg(n.children[c],e,u))}),an(n.children,(u,c)=>{void 0===r[c]&&(s[c]=u)}),new ge(n.segments,s)}}function bg(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(jl(u)){const v=Os(u.outlets);return new ge(r,v)}if(0===s&&Rs(t[0])){r.push(new Ve(n.segments[e].path,ef(t[0]))),s++;continue}const c=jl(u)?u.outlets[Pt]:`${u}`,g=s<t.length-1?t[s+1]:null;c&&g&&Rs(g)?(r.push(new Ve(c,ef(g))),s+=2):(r.push(new Ve(c,{})),s++)}return new ge(r,{})}function Os(n){const e={};return an(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=bg(new ge([],{}),0,t))}),e}function ef(n){const e={};return an(n,(t,r)=>e[r]=`${t}`),e}function ns(n,e,t){return n==t.path&&Ii(e,t.parameters)}class Ig{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),bd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=fo(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,s[c],r),delete s[c]}),an(s,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const c=r.getContext(s.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=fo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);if(r&&r.outlet){const c=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=fo(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],s);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=fo(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new es(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Qo(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(bd(s),s===u)if(s.component){const c=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const c=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),c.children.onOutletReAttached(g.contexts),c.attachRef=g.componentRef,c.route=g.route.value,c.outlet&&c.outlet.attach(g.componentRef,g.route.value),bd(g.route.value),this.activateChildRoutes(e,null,c.children)}else{const g=function Td(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(s.snapshot),v=g?g.module.componentFactoryResolver:null;c.attachRef=null,c.route=s,c.resolver=v,c.outlet&&c.outlet.activateWith(s,v),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Ad{constructor(e,t){this.routes=e,this.module=t}}function Ga(n){return"function"==typeof n}function Hu(n){return n instanceof ne}const Sd=Symbol("INITIAL_VALUE");function Gu(){return Dn(n=>function Ho(...n){const e=(0,Fa.yG)(n),t=(0,Fa.jO)(n),{args:r,keys:s}=on(n);if(0===r.length)return(0,mn.D)([],e);const u=new Vn.y(function Ts(n,e,t=bi.y){return r=>{ar(e,()=>{const{length:s}=n,u=new Array(s);let c=s,g=s;for(let v=0;v<s;v++)ar(e,()=>{const I=(0,mn.D)(n[v],e);let S=!1;I.subscribe((0,Rn.x)(r,x=>{u[v]=x,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,s?c=>Pl(s,c):bi.y));return t?u.pipe(pd(t)):u}(n.map(e=>e.pipe((0,ro.q)(1),Bi(Sd)))).pipe(ji((e,t)=>{let r=!1;return t.reduce((s,u,c)=>s!==Sd?s:(u===Sd&&(r=!0),r||!1!==u&&c!==t.length-1&&!Hu(u)?s:u),e)},Sd),jr(e=>e!==Sd),(0,Mt.U)(e=>Hu(e)?e:!0===e),(0,ro.q)(1)))}class Fy{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new zu,this.attachRef=null}}class zu{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Fy,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Hl=(()=>{class n{constructor(t,r,s,u,c){this.parentContexts=t,this.location=r,this.resolver=s,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),g=this.parentContexts.getOrCreateContext(this.name).children,v=new Ly(t,g,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(zu),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Ly{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$u?this.route:e===zu?this.childContexts:this.parent.get(e,t)}}let rf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[Hl],encapsulation:2}),n})();function za(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];sf(r,of(e,r))}}function sf(n,e){n.children&&za(n.children,e)}function of(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function af(n){const e=n.children&&n.children.map(af),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=rf),t}function zt(n){return n.outlet||Pt}function Cg(n,e){const t=n.filter(r=>zt(r)===e);return t.push(...n.filter(r=>zt(r)!==e)),t}const Tg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function qu(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Tg):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||md)(t,n,e);if(!u)return Object.assign({},Tg);const c={};an(u.posParams,(v,I)=>{c[I]=v.path});const g=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:g,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Wu(n,e,t,r,s="corrected"){if(t.length>0&&function By(n,e,t){return t.some(r=>qa(n,e,r)&&zt(r)!==Pt)}(n,t,r)){const c=new ge(e,function Uy(n,e,t,r){const s={};s[Pt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&zt(u)!==Pt){const c=new ge([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,s[zt(u)]=c}return s}(n,e,r,new ge(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function jy(n,e,t){return t.some(r=>qa(n,e,r))}(n,t,r)){const c=new ge(n.segments,function Vy(n,e,t,r,s,u){const c={};for(const g of r)if(qa(n,t,g)&&!s[zt(g)]){const v=new ge([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[zt(g)]=v}return Object.assign(Object.assign({},s),c)}(n,e,t,r,n.children,s));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new ge(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function qa(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function $y(n,e,t,r){return!!(zt(n)===r||r!==Pt&&qa(e,t,n))&&("**"===n.path||qu(e,n,t).matched)}function Ag(n,e,t){return 0===e.length&&!n.children[t]}class na{constructor(e){this.segmentGroup=e||null}}class Sr{constructor(e){this.urlTree=e}}function Wa(n){return Ji(new na(n))}function uf(n){return Ji(new Sr(n))}class Md{constructor(e,t,r,s,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Wu(this.urlTree.root,[],[],this.config).segmentGroup,t=new ge(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Pt).pipe((0,Mt.U)(u=>this.createUrlTree(Gl(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ni(u=>{if(u instanceof Sr)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof na?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Pt).pipe((0,Mt.U)(s=>this.createUrlTree(Gl(s),e.queryParams,e.fragment))).pipe(ni(s=>{throw s instanceof na?this.noMatchError(s):s}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const s=e.segments.length>0?new ge([],{[Pt]:e}):e;return new ne(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Mt.U)(u=>new ge([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,mn.D)(s).pipe(Pu(u=>{const c=r.children[u],g=Cg(t,u);return this.expandSegmentGroup(e,g,c,u).pipe((0,Mt.U)(v=>({segment:v,outlet:u})))}),ji((u,c)=>(u[c.outlet]=c.segment,u),{}),function Ty(n,e){const t=arguments.length>=2;return r=>r.pipe(n?jr((s,u)=>n(s,u,r)):bi.y,Ua(1),t?lg(e):hn(()=>new As))}())}expandSegment(e,t,r,s,u,c){return(0,mn.D)(r).pipe(Pu(g=>this.expandSegmentAgainstRoute(e,t,r,g,s,u,c).pipe(ni(I=>{if(I instanceof na)return tt(null);throw I}))),Zo(g=>!!g),ni((g,v)=>{if(g instanceof As||"EmptyError"===g.name)return Ag(t,s,u)?tt(new ge([],{})):Wa(t);throw g}))}expandSegmentAgainstRoute(e,t,r,s,u,c,g){return $y(s,t,u,c)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,c):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c):Wa(t):Wa(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?uf(u):this.lineralizeSegments(r,u).pipe((0,Cn.z)(c=>{const g=new ge(c,{});return this.expandSegment(e,g,t,c,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,c){const{matched:g,consumedSegments:v,remainingSegments:I,positionalParamSegments:S}=qu(t,s,u);if(!g)return Wa(t);const x=this.applyRedirectCommands(v,s.redirectTo,S);return s.redirectTo.startsWith("/")?uf(x):this.lineralizeSegments(s,x).pipe((0,Cn.z)(L=>this.expandSegment(e,t,r,L.concat(I),c,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?tt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Mt.U)(x=>(r._loadedConfig=x,new ge(s,{})))):tt(new ge(s,{}));const{matched:c,consumedSegments:g,remainingSegments:v}=qu(t,r,s);return c?this.getChildConfig(e,r,s).pipe((0,Cn.z)(S=>{const x=S.module,L=S.routes,{segmentGroup:q,slicedSegments:Z}=Wu(t,g,v,L),ye=new ge(q.segments,q.children);if(0===Z.length&&ye.hasChildren())return this.expandChildren(x,L,ye).pipe((0,Mt.U)(It=>new ge(g,It)));if(0===L.length&&0===Z.length)return tt(new ge(g,{}));const Pe=zt(r)===u;return this.expandSegment(x,ye,L,Z,Pe?Pt:u,!0).pipe((0,Mt.U)(mt=>new ge(g.concat(mt.segments),mt.children)))})):Wa(t)}getChildConfig(e,t,r){return t.children?tt(new Ad(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?tt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Cn.z)(s=>s?this.configLoader.load(e.injector,t).pipe((0,Mt.U)(u=>(t._loadedConfig=u,u))):function cr(n){return Ji(xs(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):tt(new Ad([],e))}runCanLoadGuards(e,t,r){const s=t.canLoad;return s&&0!==s.length?tt(s.map(c=>{const g=e.get(c);let v;if(function tf(n){return n&&Ga(n.canLoad)}(g))v=g.canLoad(t,r);else{if(!Ga(g))throw new Error("Invalid CanLoad guard");v=g(t,r)}return lr(v)})).pipe(Gu(),(0,$r.b)(c=>{if(!Hu(c))return;const g=xs(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw g.url=c,g}),(0,Mt.U)(c=>!0===c)):tt(!0)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return tt(r);if(s.numberOfChildren>1||!s.children[Pt])return Ji(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));s=s.children[Pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new ne(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return an(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const g=s.substring(1);r[u]=t[g]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let c={};return an(t.children,(g,v)=>{c[v]=this.createSegmentGroup(e,g,r,s)}),new ge(u,c)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}function Gl(n){const e={};for(const r of Object.keys(n.children)){const u=Gl(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Hy(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new ge(n.segments.concat(e.segments),e.children)}return n}(new ge(n.segments,e))}class ui{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class po{constructor(e,t){this.component=e,this.route=t}}function Mg(n,e,t){const r=n._root;return Za(r,e?e._root:null,t,[r.value])}function Ku(n,e,t){const r=function cf(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Za(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=fo(e);return n.children.forEach(c=>{(function Ng(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const v=function Gy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!dt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!dt(n.url,e.url)||!Ii(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xh(n,e)||!Ii(n.queryParams,e.queryParams);default:return!Xh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);v?s.canActivateChecks.push(new ui(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Za(n,e,u.component?g?g.children:null:t,r,s),v&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new po(g.outlet.component,c))}else c&&li(e,g,s),s.canActivateChecks.push(new ui(r)),Za(n,null,u.component?g?g.children:null:t,r,s)})(c,u[c.value.outlet],t,r.concat([c.value]),s),delete u[c.value.outlet]}),an(u,(c,g)=>li(c,t.getContext(g),s)),s}function li(n,e,t){const r=fo(n),s=n.value;an(r,(u,c)=>{li(u,s.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new po(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}class Pg{}function Ps(n){return new Vn.y(e=>e.error(n))}class kg{constructor(e,t,r,s,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=Wu(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Pt);if(null===t)return null;const r=new ea([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new ho(r,t),u=new Qh(this.url,s);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Ry(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],g=Cg(e,u),v=this.processSegmentGroup(g,c,u);if(null===v)return null;r.push(...v)}const s=Lg(r);return function Fg(n){n.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}processSegment(e,t,r,s){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,s);if(null!==c)return c}return Ag(t,r,s)?[]:null}processSegmentAgainstRoute(e,t,r,s){if(e.redirectTo||!$y(e,t,r,s))return null;let u,c=[],g=[];if("**"===e.path){const q=r.length>0?$i(r).parameters:{};u=new ea(r,q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),zt(e),e.component,e,Ya(t),rs(t)+r.length,h(e))}else{const q=qu(t,e,r);if(!q.matched)return null;c=q.consumedSegments,g=q.remainingSegments,u=new ea(c,q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,y(e),zt(e),e.component,e,Ya(t),rs(t)+c.length,h(e))}const v=function Wy(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:I,slicedSegments:S}=Wu(t,c,g,v.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution);if(0===S.length&&I.hasChildren()){const q=this.processChildren(v,I);return null===q?null:[new ho(u,q)]}if(0===v.length&&0===S.length)return[new ho(u,[])];const x=zt(e)===s,L=this.processSegment(v,I,S,x?Pt:s);return null===L?null:[new ho(u,L)]}}function ff(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Lg(n){const e=[],t=new Set;for(const r of n){if(!ff(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=Lg(r.children);e.push(new ho(r.value,s))}return e.filter(r=>!t.has(r))}function Ya(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function rs(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function y(n){return n.data||{}}function h(n){return n.resolve||{}}function W(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Le(n){return Dn(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,Mt.U)(()=>e)):tt(e)})}class ct extends class _t{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Tn=new f.OlP("ROUTES");class di{constructor(e,t,r,s){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=s}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const s=this.loadModuleFactory(t.loadChildren).pipe((0,Mt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Ad(yd(c.injector.get(Tn,void 0,f.XFs.Self|f.XFs.Optional)).map(af),c)}),ni(u=>{throw t._loader$=void 0,u}));return t._loader$=new Ou(s,()=>new ti.x).pipe(no()),t._loader$}loadModuleFactory(e){return lr(e()).pipe((0,Cn.z)(t=>t instanceof f.YKP?tt(t):(0,mn.D)(this.compiler.compileModuleAsync(t))))}}class Ky{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function ra(n){throw n}function Nd(n,e,t){return e.parse("/")}function Rd(n,e){return tt(null)}const pf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Od={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hi=(()=>{class n{constructor(t,r,s,u,c,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=s,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ti.x,this.errorHandler=ra,this.malformedUriErrorHandler=Nd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Rd,afterPreactivation:Rd},this.urlHandlingStrategy=new Ky,this.routeReuseStrategy=new ct,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(f.h0i),this.console=c.get(f.c2e);const x=c.get(f.R0b);this.isNgZoneEnabled=x instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function Sy(){return new ne(new ge([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new di(c,g,L=>this.triggerEvent(new Yo(L)),L=>this.triggerEvent(new oo(L))),this.routerState=$a(this.currentUrlTree,this.rootComponentType),this.transitions=new Br({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(jr(s=>0!==s.id),(0,Mt.U)(s=>Object.assign(Object.assign({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Dn(s=>{let u=!1,c=!1;return tt(s).pipe((0,$r.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.currentRawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Dn(g=>{const v=this.browserUrlTree.toString(),I=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return mf(g.source)&&(this.browserUrlTree=g.extractedUrl),tt(g).pipe(Dn(x=>{const L=this.transitions.getValue();return r.next(new io(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),L!==this.transitions.getValue()?Va.E:Promise.resolve(x)}),function Sg(n,e,t,r){return Dn(s=>function Ka(n,e,t,r,s){return new Md(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,Mt.U)(u=>Object.assign(Object.assign({},s),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,$r.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function m(n,e,t,r,s){return(0,Cn.z)(u=>function zl(n,e,t,r,s="emptyOnly",u="legacy"){try{const c=new kg(n,e,t,r,s,u).recognize();return null===c?Ps(new Pg):tt(c)}catch(c){return Ps(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,s).pipe((0,Mt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,$r.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const q=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(q,x)}this.browserUrlTree=x.urlAfterRedirects}const L=new so(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(L)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:q,source:Z,restoredState:ye,extras:Pe}=g,pt=new io(L,this.serializeUrl(q),Z,ye);r.next(pt);const mt=$a(q,this.rootComponentType).snapshot;return tt(Object.assign(Object.assign({},g),{targetSnapshot:mt,urlAfterRedirects:q,extras:Object.assign(Object.assign({},Pe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=g.rawUrl,g.resolve(null),Va.E}),Le(g=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:L,replaceUrl:q}}=g;return this.hooks.beforePreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!L,replaceUrl:!!q})}),(0,$r.b)(g=>{const v=new Ay(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,Mt.U)(g=>Object.assign(Object.assign({},g),{guards:Mg(g.targetSnapshot,g.currentSnapshot,this.rootContexts)})),function Rg(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?tt(Object.assign(Object.assign({},t),{guardsResult:!0})):function zy(n,e,t,r){return(0,mn.D)(n).pipe((0,Cn.z)(s=>function hf(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?tt(u.map(g=>{const v=Ku(g,e,s);let I;if(function qE(n){return n&&Ga(n.canDeactivate)}(v))I=lr(v.canDeactivate(n,e,t,r));else{if(!Ga(v))throw new Error("Invalid CanDeactivate guard");I=lr(v(n,e,t,r))}return I.pipe(Zo())})).pipe(Gu()):tt(!0)}(s.component,s.route,t,e,r)),Zo(s=>!0!==s,!0))}(c,r,s,n).pipe((0,Cn.z)(g=>g&&function Dg(n){return"boolean"==typeof n}(g)?function xd(n,e,t,r){return(0,mn.D)(e).pipe(Pu(s=>qo(function Og(n,e){return null!==n&&e&&e(new ao(n)),tt(!0)}(s.route.parent,r),function qy(n,e){return null!==n&&e&&e(new uo(n)),tt(!0)}(s.route,r),function df(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function xg(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Ko(()=>tt(c.guards.map(v=>{const I=Ku(v,c.node,t);let S;if(function nf(n){return n&&Ga(n.canActivateChild)}(I))S=lr(I.canActivateChild(r,n));else{if(!Ga(I))throw new Error("Invalid CanActivateChild guard");S=lr(I(r,n))}return S.pipe(Zo())})).pipe(Gu())));return tt(u).pipe(Gu())}(n,s.path,t),function ci(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return tt(!0);const s=r.map(u=>Ko(()=>{const c=Ku(u,e,t);let g;if(function $l(n){return n&&Ga(n.canActivate)}(c))g=lr(c.canActivate(e,n));else{if(!Ga(c))throw new Error("Invalid CanActivate guard");g=lr(c(e,n))}return g.pipe(Zo())}));return tt(s).pipe(Gu())}(n,s.route,t))),Zo(s=>!0!==s,!0))}(r,u,n,e):tt(g)),(0,Mt.U)(g=>Object.assign(Object.assign({},t),{guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,$r.b)(g=>{if(Hu(g.guardsResult)){const I=xs(`Redirecting to "${this.serializeUrl(g.guardsResult)}"`);throw I.url=g.guardsResult,I}const v=new Fl(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),jr(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,""),!1)),Le(g=>{if(g.guards.canActivateChecks.length)return tt(g).pipe((0,$r.b)(v=>{const I=new ri(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}),Dn(v=>{let I=!1;return tt(v).pipe(function E(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return tt(t);let u=0;return(0,mn.D)(s).pipe(Pu(c=>function A(n,e,t,r){return function R(n,e,t,r){const s=W(n);if(0===s.length)return tt({});const u={};return(0,mn.D)(s).pipe((0,Cn.z)(c=>function fe(n,e,t,r){const s=Ku(n,e,r);return lr(s.resolve?s.resolve(e,t):s(e,t))}(n[c],e,t,r).pipe((0,$r.b)(g=>{u[c]=g}))),Ua(1),(0,Cn.z)(()=>W(u).length===s.length?tt(u):Va.E))}(n._resolve,n,e,r).pipe((0,Mt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Ry(n,t).resolve),null)))}(c.route,r,n,e)),(0,$r.b)(()=>u++),Ua(1),(0,Cn.z)(c=>u===s.length?tt(t):Va.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,$r.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),(0,$r.b)(v=>{const I=new ii(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(I)}))}),Le(g=>{const{targetSnapshot:v,id:I,extractedUrl:S,rawUrl:x,extras:{skipLocationChange:L,replaceUrl:q}}=g;return this.hooks.afterPreactivation(v,{navigationId:I,appliedUrlTree:S,rawUrlTree:x,skipLocationChange:!!L,replaceUrl:!!q})}),(0,Mt.U)(g=>{const v=function mg(n,e,t){const r=Bl(n,e._root,t?t._root:void 0);return new vd(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return Object.assign(Object.assign({},g),{targetRouterState:v})}),(0,$r.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,Mt.U)(r=>(new Ig(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,$r.b)({next(){u=!0},complete(){u=!0}}),function gd(n){return(0,ur.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var g;u||c||this.cancelNavigationTransition(s,`Navigation ID ${s.id} is not equal to the current navigation id ${this.navigationId}`),(null===(g=this.currentNavigation)||void 0===g?void 0:g.id)===s.id&&(this.currentNavigation=null)}),ni(g=>{if(c=!0,function cg(n){return n&&n[ja]}(g)){const v=Hu(g.url);v||(this.navigated=!0,this.restoreHistory(s,!0));const I=new yn(s.id,this.serializeUrl(s.extractedUrl),g.message);r.next(I),v?setTimeout(()=>{const S=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),x={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||mf(s.source)};this.scheduleNavigation(S,"imperative",null,x,{resolve:s.resolve,reject:s.reject,promise:s.promise})},0):s.resolve(!1)}else{this.restoreHistory(s,!0);const v=new kl(s.id,this.serializeUrl(s.extractedUrl),g);r.next(v);try{s.resolve(this.errorHandler(g))}catch(I){s.reject(I)}}return Va.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var s;const u={replaceUrl:!0},c=(null===(s=t.state)||void 0===s?void 0:s.navigationId)?t.state:null;if(c){const v=Object.assign({},c);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(u.state=v)}const g=this.parseUrl(t.url);this.scheduleNavigation(g,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){za(t),this.config=t.map(af),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:c,queryParamsHandling:g,preserveFragment:v}=r,I=s||this.routerState.root,S=v?this.currentUrlTree.fragment:c;let x=null;switch(g){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=u||null}return null!==x&&(x=this.removeEmptyProps(x)),function ta(n,e,t,r,s){if(0===t.length)return Id(e.root,e.root,e.root,r,s);const u=function GE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yg(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return an(u.outlets,(v,I)=>{g[I]="string"==typeof v?v.split("/"):v}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===c?(u.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new yg(t,e,r)}(t);if(u.toRoot())return Id(e.root,e.root,new ge([],{}),r,s);const c=function _g(n,e,t){if(n.isAbsolute)return new Dd(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Dd(u,u===e.root,0)}const r=Rs(n.commands[0])?0:1;return function vg(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new Error("Invalid number of '../'");s=r.segments.length}return new Dd(r,!1,s-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),g=c.processChildren?Cd(c.segmentGroup,c.index,u.commands):wg(c.segmentGroup,c.index,u.commands);return Id(e.root,c.segmentGroup,g,r,s)}(I,this.currentUrlTree,t,x,null!=S?S:null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Hu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function gf(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?Object.assign({},pf):!1===r?Object.assign({},Od):r,Hu(t))return lo(this.currentUrlTree,t,s);const u=this.parseUrl(t);return lo(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ku(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,s,u,c){var g,v;if(this.disposed)return Promise.resolve(!1);let I,S,x;c?(I=c.resolve,S=c.reject,x=c.promise):x=new Promise((Z,ye)=>{I=Z,S=ye});const L=++this.navigationId;let q;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(s=this.location.getState()),q=s&&s.\u0275routerPageId?s.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(g=this.browserPageId)&&void 0!==g?g:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):q=0,this.setTransition({id:L,targetPageId:q,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:I,reject:S,promise:x,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),x.catch(Z=>Promise.reject(Z))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl?this.location.replaceState(s,"",u):this.location.go(s,"",u)}restoreHistory(t,r=!1){var s,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const s=new yn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function mf(n){return"imperative"!==n}let Zu=(()=>{class n{constructor(t,r,s,u,c){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new ti.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,s=this.el.nativeElement;null!==t?r.setAttribute(s,"tabindex",t):r.removeAttribute(s,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Yu(this.skipLocationChange),replaceUrl:Yu(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Yu(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(hi),f.Y36($u),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function Yu(n){return""===n||!!n}class Yy{}class ZE{preload(e,t){return tt(null)}}let YE=(()=>{class n{constructor(t,r,s,u){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=new di(s,r,v=>t.triggerEvent(new Yo(v)),v=>t.triggerEvent(new oo(v)))}setUpPreloading(){this.subscription=this.router.events.pipe(jr(t=>t instanceof ku),Pu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;s.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?s.push(this.preloadConfig(t,u)):u.children&&s.push(this.processRoutes(t,u.children));return(0,mn.D)(s).pipe((0,zo.J)(),(0,Mt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?tt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Cn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(hi),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Yy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Vg=(()=>{class n{constructor(t,r,s={}){this.router=t,this.viewportScroller=r,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof io?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ku&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ba&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ba(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const is=new f.OlP("ROUTER_CONFIGURATION"),Jy=new f.OlP("ROUTER_FORROOT_GUARD"),QE=[Ee,{provide:wt,useClass:vr},{provide:hi,useFactory:function e_(n,e,t,r,s,u,c={},g,v){const I=new hi(null,n,e,t,r,s,yd(u));return g&&(I.urlHandlingStrategy=g),v&&(I.routeReuseStrategy=v),function e0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,I),c.enableTracing&&I.events.subscribe(S=>{var x,L;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${S.constructor.name}`),console.log(S.toString()),console.log(S),null===(L=console.groupEnd)||void 0===L||L.call(console)}),I},deps:[wt,zu,Ee,f.zs3,f.Sil,Tn,is,[class ql{},new f.FiY],[class Ke{},new f.FiY]]},zu,{provide:$u,useFactory:function Ug(n){return n.routerState.root},deps:[hi]},YE,ZE,class Qy{preload(e,t){return t().pipe(ni(()=>tt(null)))}},{provide:is,useValue:{enableTracing:!1}}];function gD(){return new f.PXZ("Router",hi)}let Di=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[QE,Xy(t),{provide:Jy,useFactory:XE,deps:[[hi,new f.FiY,new f.tp0]]},{provide:is,useValue:r||{}},{provide:he,useFactory:JE,deps:[se,[new f.tBr(qe),new f.FiY],is]},{provide:Vg,useFactory:mD,deps:[hi,El,is]},{provide:Yy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:ZE},{provide:f.PXZ,multi:!0,useFactory:gD},[Pd,{provide:f.ip1,multi:!0,useFactory:t0,deps:[Pd]},{provide:n_,useFactory:t_,deps:[Pd]},{provide:f.tb,multi:!0,useExisting:n_}]]}}static forChild(t){return{ngModule:n,providers:[Xy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Jy,8),f.LFG(hi,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function mD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Vg(n,e,t)}function JE(n,e,t={}){return t.useHash?new Te(n,e):new Ye(n,e)}function XE(n){return"guarded"}function Xy(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Tn,multi:!0,useValue:n}]}let Pd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ti.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const s=new Promise(g=>r=g),u=this.injector.get(hi),c=this.injector.get(is);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?tt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),s})}bootstrapListener(t){const r=this.injector.get(is),s=this.injector.get(YE),u=this.injector.get(Vg),c=this.injector.get(hi),g=this.injector.get(f.z2F);t===g.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),s.setUpPreloading(),u.init(),c.resetRootComponentType(g.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function t0(n){return n.appInitializer.bind(n)}function t_(n){return n.bootstrapListener.bind(n)}const n_=new f.OlP("Router Initializer");let yD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn]]}),n})();var n0=O(4986),dr=O(5813);function i_(){return(0,ur.e)((n,e)=>{let t,r=!1;n.subscribe((0,Rn.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function s_(n,e){return n===e}var nt,ss=O(2011),s0=(O(7092),O(3942)),be=O(5861),Qu=O(9681),jg=O(4859),Ju=O(1877),At=O(2090),_D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ia={},o_=o_||{},Rt=_D||self;function $g(){}function Hg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function yf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var a_="closure_uid_"+(1e9*Math.random()>>>0),Ot=0;function o0(n,e,t){return n.call.apply(n.bind,arguments)}function a0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Mr(n,e,t){return(Mr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o0:a0).apply(null,arguments)}function Kl(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function fn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,s,u){for(var c=Array(arguments.length-2),g=2;g<arguments.length;g++)c[g-2]=arguments[g];return e.prototype[s].apply(r,c)}}function Qa(){this.s=this.s,this.o=this.o}var u_={};Qa.prototype.s=!1,Qa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function vD(n){return Object.prototype.hasOwnProperty.call(n,a_)&&n[a_]||(n[a_]=++Ot)}(this);delete u_[n]}},Qa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sa=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Gg=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,s="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in s&&e.call(t,s[u],u,n)};function zg(n){return Array.prototype.concat.apply([],arguments)}function l0(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function _f(n){return/^[\s\xa0]*$/.test(n)}var Gr,wD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function xr(n,e){return-1!=n.indexOf(e)}function kd(n,e){return n<e?-1:n>e?1:0}e:{var qg=Rt.navigator;if(qg){var Wg=qg.userAgent;if(Wg){Gr=Wg;break e}}Gr=""}function c0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function d0(n){const e={};for(const t in n)e[t]=n[t];return e}var h0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function f0(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<h0.length;u++)t=h0[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function l_(n){return l_[" "](n),n}l_[" "]=$g;var d_,n,KA=xr(Gr,"Opera"),Fd=xr(Gr,"Trident")||xr(Gr,"MSIE"),bD=xr(Gr,"Edge"),Kg=bD||Fd,c_=xr(Gr,"Gecko")&&!(xr(Gr.toLowerCase(),"webkit")&&!xr(Gr,"Edge"))&&!(xr(Gr,"Trident")||xr(Gr,"MSIE"))&&!xr(Gr,"Edge"),ID=xr(Gr.toLowerCase(),"webkit")&&!xr(Gr,"Edge");function Zg(){var n=Rt.document;return n?n.documentMode:void 0}e:{var g0="",m0=(n=Gr,c_?/rv:([^\);]+)(\)|;)/.exec(n):bD?/Edge\/([\d\.]+)/.exec(n):Fd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ID?/WebKit\/(\S+)/.exec(n):KA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(m0&&(g0=m0?m0[1]:""),Fd){var y0=Zg();if(null!=y0&&y0>parseFloat(g0)){d_=String(y0);break e}}d_=g0}var ZA={};var QA=Rt.document&&Fd&&(Zg()||parseInt(d_,10))||void 0,JA=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",$g,e),Rt.removeEventListener("test",$g,e)}catch(t){}return n}();function Un(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Zl(n,e){if(Un.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(c_){e:{try{l_(e.nodeName);var s=!0;break e}catch(u){}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:CD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Zl.Z.h.call(this)}}Un.prototype.h=function(){this.defaultPrevented=!0},fn(Zl,Un);var CD={2:"touch",3:"pen",4:"mouse"};Zl.prototype.h=function(){Zl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ld="closure_listenable_"+(1e6*Math.random()|0),h_=0;function v0(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=s,this.key=++h_,this.ca=this.fa=!1}function Vd(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Yg(n){this.src=n,this.g={},this.h=0}function oa(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=sa(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Vd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Qg(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return s}return-1}Yg.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Qg(n,e,r,s);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new v0(e,this.src,u,!!r,s)).fa=t,n.push(e)),e};var f_="closure_lm_"+(1e6*Math.random()|0),vf={};function E0(n,e,t,r,s){if(r&&r.once)return w0(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)E0(n,e[u],t,r,s);return null}return t=g_(t),n&&n[Ld]?n.N(e,t,yf(r)?!!r.capture:!!r,s):p_(n,e,t,!1,r,s)}function p_(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var c=yf(s)?!!s.capture:!!s,g=Yl(n);if(g||(n[f_]=g=new Yg(n)),(t=g.add(e,t,r,c,u)).proxy)return t;if(r=function TD(){var e=Bd;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)JA||(s=c),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(Jg(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function w0(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)w0(n,e[u],t,r,s);return null}return t=g_(t),n&&n[Ld]?n.O(e,t,yf(r)?!!r.capture:!!r,s):p_(n,e,t,!0,r,s)}function Ud(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ud(n,e[u],t,r,s);else r=yf(r)?!!r.capture:!!r,t=g_(t),n&&n[Ld]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Qg(u=n.g[e],t,r,s))&&(Vd(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Yl(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Qg(e,t,r,s)),(t=-1<n?e[n]:null)&&Xu(t))}function Xu(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ld])oa(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Jg(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Yl(e))?(oa(t,n),0==t.h&&(t.src=null,e[f_]=null)):Vd(n)}}}function Jg(n){return n in vf?vf[n]:vf[n]="on"+n}function Bd(n,e){if(n.ca)n=!0;else{e=new Zl(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Xu(n),n=t.call(r,e)}return n}function Yl(n){return(n=n[f_])instanceof Yg?n:null}var el="__closure_events_fn_"+(1e9*Math.random()>>>0);function g_(n){return"function"==typeof n?n:(n[el]||(n[el]=function(e){return n.handleEvent(e)}),n[el])}function Er(){Qa.call(this),this.i=new Yg(this),this.P=this,this.I=null}function Nr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Un(e,n);else if(e instanceof Un)e.target=e.target||n;else{var s=e;f0(e=new Un(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];s=jd(c,r,!0,e)&&s}if(s=jd(c=e.g=n,r,!0,e)&&s,s=jd(c,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=jd(c=e.g=t[u],r,!1,e)&&s}function jd(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var g=c.listener,v=c.ia||c.src;c.fa&&oa(n.i,c),s=!1!==g.call(v,r)&&s}}return s&&!r.defaultPrevented}fn(Er,Qa),Er.prototype[Ld]=!0,Er.prototype.removeEventListener=function(n,e,t,r){Ud(this,n,e,t,r)},Er.prototype.M=function(){if(Er.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Vd(t[r]);delete n.g[e],n.h--}}this.I=null},Er.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Er.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ef=Rt.JSON.stringify;function b0(){var n=C0;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var tm,I0=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new D0,n=>n.reset());class D0{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function XA(n){Rt.setTimeout(()=>{throw n},0)}function em(n,e){tm||function AD(){var n=Rt.Promise.resolve(void 0);tm=function(){n.then(SD)}}(),nm||(tm(),nm=!0),C0.add(n,e)}var nm=!1,C0=new class Xg{constructor(){this.h=this.g=null}add(e,t){const r=I0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function SD(){for(var n;n=b0();){try{n.h.call(n.g)}catch(t){XA(t)}var e=I0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}nm=!1}function fi(n,e){Er.call(this),this.h=n||1,this.g=e||Rt,this.j=Mr(this.kb,this),this.l=Date.now()}function m_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function y_(n,e,t){if("function"==typeof n)t&&(n=Mr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Mr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function MD(n){n.g=y_(()=>{n.g=null,n.i&&(n.i=!1,MD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}fn(fi,Er),(nt=fi.prototype).da=!1,nt.S=null,nt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Nr(this,"tick"),this.da&&(m_(this),this.start()))}},nt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){fi.Z.M.call(this),m_(this),delete this.g};class eS extends Qa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:MD(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $d(n){Qa.call(this),this.h=n,this.g={}}fn($d,Qa);var xD=[];function T0(n,e,t,r){Array.isArray(t)||(t&&(xD[0]=t.toString()),t=xD);for(var s=0;s<t.length;s++){var u=E0(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function rm(n){c0(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xu(e)},n),n.g={}}function wf(){this.g=!0}function Hd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function OD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<s.length;c++)s[c]=""}}}return Ef(t)}catch(g){return e}}(n,t)+(r?" "+r:"")})}$d.prototype.M=function(){$d.Z.M.call(this),rm(this)},$d.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wf.prototype.Aa=function(){this.g=!1},wf.prototype.info=function(){};var tl={},S0=null;function im(){return S0=S0||new Er}function __(n){Un.call(this,tl.Ma,n)}function Gd(n){const e=im();Nr(e,new __(e,n))}function M0(n,e){Un.call(this,tl.STAT_EVENT,n),this.stat=e}function On(n){const e=im();Nr(e,new M0(e,n))}function sm(n,e){Un.call(this,tl.Na,n),this.size=e}function bf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}tl.Ma="serverreachability",fn(__,Un),tl.STAT_EVENT="statevent",fn(M0,Un),tl.Na="timingevent",fn(sm,Un);var om={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},PD={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function am(){}function N0(){}am.prototype.h=null;var E_,If={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Df(){Un.call(this,"d")}function v_(){Un.call(this,"c")}function Ql(){}function Jl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new $d(this),this.P=w_,this.W=new fi(n=Kg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new R0}function R0(){this.i=null,this.g="",this.h=!1}fn(Df,Un),fn(v_,Un),fn(Ql,am),Ql.prototype.g=function(){return new XMLHttpRequest},Ql.prototype.i=function(){return{}},E_=new Ql;var w_=45e3,Cf={},Tf={};function b_(n,e,t){n.K=1,n.v=Zd(Xa(e)),n.s=t,n.U=!0,O0(n,null)}function O0(n,e){n.F=Date.now(),zd(n),n.A=Xa(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),S_(t.h,"t",r),n.C=0,t=n.l.H,n.h=new R0,n.g=oc(n.l,t?e:null,!n.s),0<n.O&&(n.L=new eS(Mr(n.Ia,n,n.g),n.O)),T0(n.V,n.g,"readystatechange",n.gb),e=n.H?d0(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Gd(1),function ND(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var c="",g=u.split("&"),v=0;v<g.length;v++){var I=g[v].split("=");if(1<I.length){var S=I[0];I=I[1];var x=S.split("_");c=2<=x.length&&"type"==x[1]?c+(S+"=")+I+"&":c+(S+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function um(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function kD(n,e,t){let s,r=!0;for(;!n.I&&n.C<t.length;){if(s=FD(n,t),s==Tf){4==e&&(n.o=4,On(14),r=!1),Hd(n.j,n.m,null,"[Incomplete Response]");break}if(s==Cf){n.o=4,On(15),Hd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Hd(n.j,n.m,s,null),go(n,s)}um(n)&&s!=Tf&&s!=Cf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,On(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),il(e),e.L=!0,On(11))):(Hd(n.j,n.m,t,"[Invalid Chunked Response]"),nl(n),qd(n))}function FD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Tf:(t=Number(e.substring(t,r)),isNaN(t)?Cf:(r+=1)+t>e.length?Tf:(e=e.substr(r,t),n.C=r+t,e))}function zd(n){n.Y=Date.now()+n.P,I_(n,n.P)}function I_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bf(Mr(n.eb,n),e)}function Af(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function qd(n){0==n.l.G||n.I||nc(n.l,n)}function nl(n){Af(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,m_(n.W),rm(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function go(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||dm(t.i,n)))if(t.I=n.N,!n.J&&dm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0])e:if(t.u)t.ta=s[1],0<t.ta-t.U&&37500>s[2]&&t.N&&0==t.A&&!t.v&&(t.v=bf(Mr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;tu(t),ym(t)}kf(t),On(18)}if(1>=j0(t.i)&&t.ka){try{t.ka()}catch(I){}t.ka=void 0}}else Ls(t,11)}else if((n.J||t.g==n)&&tu(t),!_f(e))for(s=t.Ca.g.parse(e),e=0;e<s.length;e++){let I=s[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const S=I[3];null!=S&&(t.ma=S,t.h.info("VER="+t.ma));const x=I[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const Z=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Z){var u=r.i;!u.g&&(xr(Z,"spdy")||xr(Z,"quic")||xr(Z,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&($0(u,u.h),u.h=null))}if(r.D){const ye=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.sa=ye,Pn(r.F,r.D,ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=sc(r,r.H?r.la:null,r.W),c.J){M_(r.i,c);var g=c,v=r.K;v&&g.setTimeout(v),g.B&&(Af(g),zd(g)),r.g=c}else as(r);0<t.l.length&&os(t)}else"stop"!=I[0]&&"close"!=I[0]||Ls(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?Ls(t,7):ec(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}Gd(4)}catch(I){}}function D_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Hg(n)||"string"==typeof n)Gg(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Hg(n)||"string"==typeof n){t=[];for(var r=n.length,s=0;s<r;s++)t.push(s)}else for(s in t=[],r=0,n)t[r++]=s;r=function lm(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Hg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length;for(var u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}}function Wd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Wd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function P0(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ja(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var s={};for(t=e=0;e<n.g.length;)Ja(s,r=n.g[e])||(n.g[t++]=r,s[r]=1),e++;n.g.length=t}}function Ja(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(nt=Jl.prototype).setTimeout=function(n){this.P=n},nt.gb=function(n){n=n.target;const e=this.L;e&&3==eu(n)?e.l():this.Ia(n)},nt.Ia=function(n){try{if(n==this.g)e:{const S=eu(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>S)&&(3!=S||Kg||this.g&&(this.h.h||this.g.ga()||Y0(this.g)))){this.I||4!=S||7==e||Gd(8==e||0>=x?3:2),Af(this);var t=this.g.ba();this.N=t;t:if(um(this)){var r=Y0(this.g);n="";var s=r.length,u=4==eu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){nl(this),qd(this);var c="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function RD(n,e,t,r,s,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,S,t),this.i){if(this.$&&!this.J){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_f(g)){var I=g;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,On(12),nl(this),qd(this);break e}Hd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,go(this,t)}this.U?(kD(this,S,c),Kg&&this.i&&3==S&&(T0(this.V,this.W,"tick",this.fb),this.W.start())):(Hd(this.j,this.m,c,null),go(this,c)),4==S&&nl(this),this.i&&!this.I&&(4==S?nc(this.l,this):(this.i=!1,zd(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,On(12)):(this.o=0,On(13)),nl(this),qd(this)}}}catch(S){}},nt.fb=function(){if(this.g){var n=eu(this.g),e=this.g.ga();this.C<e.length&&(Af(this),kD(this,n,e),this.i&&4!=n&&zd(this))}},nt.cancel=function(){this.I=!0,nl(this)},nt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function A0(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Gd(3),On(17)),nl(this),this.o=2,qd(this)):I_(this,this.Y-n)},(nt=Wd.prototype).R=function(){P0(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},nt.T=function(){return P0(this),this.g.concat()},nt.get=function(n,e){return Ja(this.h,n)?this.h[n]:e},nt.set=function(n,e){Ja(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},nt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var s=t[r],u=this.get(s);n.call(e,u,s,this)}};var C_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mo(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof mo){this.g=void 0!==e?e:n.g,Kd(this,n.j),this.s=n.s,Sf(this,n.i),Mf(this,n.m),this.l=n.l,e=n.h;var t=new xf;t.i=e.i,e.g&&(t.g=new Wd(e.g),t.h=e.h),A_(this,t),this.o=n.o}else n&&(t=String(n).match(C_))?(this.g=!!e,Kd(this,t[1]||"",!0),this.s=Yd(t[2]||""),Sf(this,t[3]||"",!0),Mf(this,t[4]),this.l=Yd(t[5]||"",!0),A_(this,t[6]||"",!0),this.o=Yd(t[7]||"")):(this.g=!!e,this.h=new xf(null,this.g))}function Xa(n){return new mo(n)}function Kd(n,e,t){n.j=t?Yd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Sf(n,e,t){n.i=t?Yd(e,!0):e}function Mf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function A_(n,e,t){e instanceof xf?(n.h=e,function L0(n,e){e&&!n.j&&(rl(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(ks(this,r),S_(this,s,t))},n)),n.j=e}(n.h,n.g)):(t||(e=aa(e,BD)),n.h=new xf(e,n.g))}function Pn(n,e,t){n.h.set(e,t)}function Zd(n){return Pn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Yd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function aa(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,k0),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function k0(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}mo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(aa(e,F0,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(aa(e,F0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(aa(t,"/"==t.charAt(0)?Qd:UD,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",aa(t,jD)),n.join("")};var F0=/[#\/\?@]/g,UD=/[#\?:]/g,Qd=/[#\?]/g,BD=/[#\?@]/g,jD=/#/g;function xf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function rl(n){n.g||(n.g=new Wd,n.h=0,n.i&&function T_(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ks(n,e){rl(n),e=Xl(n,e),Ja(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ja((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&P0(n)))}function cm(n,e){return rl(n),e=Xl(n,e),Ja(n.g.h,e)}function S_(n,e,t){ks(n,e),0<t.length&&(n.i=null,n.g.set(Xl(n,e),l0(t)),n.h+=t.length)}function Xl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function U0(n){this.l=n||$D,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=xf.prototype).add=function(n,e){rl(this),this.i=null,n=Xl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){rl(this),this.g.forEach(function(t,r){Gg(t,function(s){n.call(e,s,r,this)},this)},this)},nt.T=function(){rl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var s=n[r],u=0;u<s.length;u++)t.push(e[r]);return t},nt.R=function(n){rl(this);var e=[];if("string"==typeof n)cm(this,n)&&(e=zg(e,this.g.get(Xl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=zg(e,n[t])}return e},nt.set=function(n,e){return rl(this),this.i=null,cm(this,n=Xl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],s=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=s;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var $D=10;function B0(n){return!!n.h||!!n.g&&n.g.size>=n.j}function j0(n){return n.h?1:n.g?n.g.size:0}function dm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function $0(n,e){n.g?n.g.add(e):n.h=e}function M_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function H0(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return l0(n.i)}function x_(){}function tS(){this.g=new x_}function nS(n,e,t){const r=t||"";try{D_(n,function(s,u){let c=s;yf(s)&&(c=Ef(s)),e.push(r+u+"="+encodeURIComponent(c))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function hm(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch(u){}}function Jd(n){this.l=n.$b||null,this.j=n.ib||!1}function Nf(n,e){Er.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=G0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}U0.prototype.cancel=function(){if(this.i=H0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},x_.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},x_.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},fn(Jd,am),Jd.prototype.g=function(){return new Nf(this.l,this.j)},Jd.prototype.i=function(n){return function(){return n}}({}),fn(Nf,Er);var G0=0;function Fs(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function fm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,pm(n)}function pm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=Nf.prototype).open=function(n,e){if(this.readyState!=G0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,pm(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fm(this)),this.readyState=G0},nt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,pm(this)),this.g&&(this.readyState=3,pm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Fs(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},nt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?fm(this):pm(this),3==this.readyState&&Fs(this)}},nt.Ua=function(n){this.g&&(this.response=this.responseText=n,fm(this))},nt.Ta=function(n){this.g&&(this.response=n,fm(this))},nt.ha=function(){this.g&&fm(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Nf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var z0=Rt.JSON.parse;function Qn(n){Er.call(this),this.headers=new Wd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=R_,this.K=this.L=!1}fn(Qn,Er);var R_="",HD=/^https?$/i,rS=["POST","PUT"];function O_(n){return"content-type"==n.toLowerCase()}function W0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,gm(n),mm(n)}function gm(n){n.D||(n.D=!0,Nr(n,"complete"),Nr(n,"error"))}function K0(n){if(n.h&&void 0!==o_&&(!n.C[1]||4!=eu(n)||2!=n.ba()))if(n.v&&4==eu(n))y_(n.Fa,0,n);else if(Nr(n,"readystatechange"),4==eu(n)){n.h=!1;try{const g=n.ba();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var s=String(n.H).match(C_)[1]||null;if(!s&&Rt.self&&Rt.self.location){var u=Rt.self.location.protocol;s=u.substr(0,u.length-1)}r=!HD.test(s?s.toLowerCase():"")}t=r}if(t)Nr(n,"complete"),Nr(n,"success");else{n.m=6;try{var c=2<eu(n)?n.g.statusText:""}catch(v){c=""}n.j=c+" ["+n.ba()+"]",gm(n)}}finally{mm(n)}}}function mm(n,e){if(n.g){Z0(n);const t=n.g,r=n.C[0]?$g:null;n.g=null,n.C=null,e||Nr(n,"ready");try{t.onreadystatechange=r}catch(s){}}}function Z0(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function eu(n){return n.g?n.g.readyState:0}function Y0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case R_:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Xd(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function GD(n){let e="";return c0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Pn(n,e,t))}function ua(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Q0(n){this.za=0,this.l=[],this.h=new wf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ua("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ua("baseRetryDelayMs",5e3,n),this.$a=ua("retryDelaySeedMs",1e4,n),this.Ya=ua("forwardChannelMaxRetries",2,n),this.ra=ua("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new U0(n&&n.concurrentRequestLimit),this.Ca=new tS,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function ec(n){if(J0(n),3==n.G){var e=n.V++,t=Xa(n.F);Pn(t,"SID",n.J),Pn(t,"RID",e),Pn(t,"TYPE","terminate"),yo(n,t),(e=new Jl(n,n.h,e,void 0)).K=2,e.v=Zd(Xa(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=oc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),zd(e)}ic(n)}function ym(n){n.g&&(il(n),n.g.cancel(),n.g=null)}function J0(n){ym(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),tu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function Rf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&os(n)}function os(n){B0(n.i)||n.m||(n.m=!0,em(n.Ha,n),n.C=0)}function zr(n,e){var t;t=e?e.m:n.V++;const r=Xa(n.F);Pn(r,"SID",n.J),Pn(r,"RID",t),Pn(r,"AID",n.U),yo(n,r),n.o&&n.s&&Xd(r,n.o,n.s),t=new Jl(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Pf(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),$0(n.i,t),b_(t,r,e)}function yo(n,e){n.j&&D_({},function(t,r){Pn(e,r,t)})}function Pf(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Mr(n.j.Oa,n.j,n):null;e:{var s=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=s[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let g=!0;for(let v=0;v<t;v++){let I=s[v].h;const S=s[v].g;if(I-=u,0>I)u=Math.max(0,s[v].h-100),g=!1;else try{nS(S,c,"req"+I+"_")}catch(x){r&&r(S)}}if(g){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function as(n){n.g||n.u||(n.Y=1,em(n.Ga,n),n.A=0)}function kf(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=bf(Mr(n.Ga,n),rc(n,n.A)),n.A++,0))}function il(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function tc(n){n.g=new Jl(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Xa(n.oa);Pn(e,"RID","rpc"),Pn(e,"SID",n.J),Pn(e,"CI",n.N?"0":"1"),Pn(e,"AID",n.U),yo(n,e),Pn(e,"TYPE","xmlhttp"),n.o&&n.s&&Xd(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Zd(Xa(e)),t.s=null,t.U=!0,O0(t,n)}function tu(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function nc(n,e){var t=null;if(n.g==e){tu(n),il(n),n.g=null;var r=2}else{if(!dm(n.i,e))return;t=e.D,M_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;Nr(r=im(),new sm(r,t,e,s)),os(n)}else as(n);else if(3==(s=e.o)||0==s&&0<n.I||!(1==r&&function Of(n,e){return!(j0(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=bf(Mr(n.Ha,n,e),rc(n,n.C)),n.C++,0)))}(n,e)||2==r&&kf(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Ls(n,5);break;case 4:Ls(n,10);break;case 3:Ls(n,6);break;default:Ls(n,2)}}function rc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ls(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Mr(n.jb,n);t||(t=new mo("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||Kd(t,"https"),Zd(t)),function N_(n,e){const t=new wf;if(Rt.Image){const r=new Image;r.onload=Kl(hm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Kl(hm,t,r,"TestLoadImage: error",!1,e),r.onabort=Kl(hm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Kl(hm,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else On(2);n.G=0,n.j&&n.j.va(e),ic(n),J0(n)}function ic(n){n.G=0,n.I=-1,n.j&&((0!=H0(n.i).length||0!=n.l.length)&&(n.i.i.length=0,l0(n.l),n.l.length=0),n.j.ua())}function sc(n,e,t){let r=function LD(n){return n instanceof mo?Xa(n):new mo(n,void 0)}(t);if(""!=r.i)e&&Sf(r,e+"."+r.i),Mf(r,r.m);else{const s=Rt.location;r=function VD(n,e,t,r){var s=new mo(null,void 0);return n&&Kd(s,n),e&&Sf(s,e),t&&Mf(s,t),r&&(s.l=r),s}(s.protocol,e?e+"."+s.hostname:s.hostname,+s.port,t)}return n.aa&&c0(n.aa,function(s,u){Pn(r,u,s)}),t=n.sa,(e=n.D)&&t&&Pn(r,e,t),Pn(r,"VER",n.ma),yo(n,r),r}function oc(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qn(t&&n.Ba&&!n.qa?new Jd({ib:!0}):n.qa)).L=n.H,e}function P_(){}function Ff(){if(Fd&&!(10<=Number(QA)))throw Error("Environmental error: no available transport.")}function Hi(n,e){Er.call(this),this.g=new Q0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!_f(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_f(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ac(this)}function k_(n){Df.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function F_(){v_.call(this),this.status=1}function ac(n){this.g=n}(nt=Qn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():E_.g(),this.C=function x0(n){return n.h||(n.h=n.i())}(this.u?this.u:E_),this.g.onreadystatechange=Mr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void W0(this,u)}n=t||"";const s=new Wd(this.headers);r&&D_(r,function(u,c){s.set(c,u)}),r=function u0(n){e:{var e=O_;const t=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<t;s++)if(s in r&&e.call(void 0,r[s],s,n)){e=s;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(s.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=sa(rS,e))||r||t||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Z0(this),0<this.B&&((this.K=function q0(n){return Fd&&function YA(){return function p0(n){var e=ZA;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=wD(String(d_)).split("."),t=wD("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var s=e[c]||"",u=t[c]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=kd(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||kd(0==s[2].length,0==u[2].length)||kd(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mr(this.pa,this)):this.A=y_(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){W0(this,u)}},nt.pa=function(){void 0!==o_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nr(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Nr(this,"complete"),Nr(this,"abort"),mm(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mm(this,!0)),Qn.Z.M.call(this)},nt.Fa=function(){this.s||(this.F||this.v||this.l?K0(this):this.cb())},nt.cb=function(){K0(this)},nt.ba=function(){try{return 2<eu(this)?this.g.status:-1}catch(n){return-1}},nt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},nt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),z0(e)}},nt.Da=function(){return this.m},nt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=Q0.prototype).ma=8,nt.G=1,nt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},nt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const s=new Jl(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=d0(u),f0(u,this.P)):u=this.P),null===this.o&&(s.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Pf(this,s,e),Pn(t=Xa(this.F),"RID",n),Pn(t,"CVER",22),this.D&&Pn(t,"X-HTTP-Session-Id",this.D),yo(this,t),this.o&&u&&Xd(t,this.o,u),$0(this.i,s),this.Ra&&Pn(t,"TYPE","init"),this.ja?(Pn(t,"$req",e),Pn(t,"SID","null"),s.$=!0,b_(s,t,null)):b_(s,t,e),this.G=2}}else 3==this.G&&(n?zr(this,n):0==this.l.length||B0(this.i)||zr(this))},nt.Ga=function(){if(this.u=null,tc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=bf(Mr(this.bb,this),n)}},nt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,On(10),ym(this),tc(this))},nt.ab=function(){null!=this.v&&(this.v=null,ym(this),kf(this),On(19))},nt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),On(2)):(this.h.info("Failed to ping google.com"),On(1))},(nt=P_.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Oa=function(){},Ff.prototype.g=function(n,e){return new Hi(n,e)},fn(Hi,Er),Hi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),em(Mr(n.hb,n,e))),On(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=sc(n,null,n.W),os(n)},Hi.prototype.close=function(){ec(this.g)},Hi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Rf(this.g,e)}else this.v?((e={}).__data__=Ef(n),Rf(this.g,e)):Rf(this.g,n)},Hi.prototype.M=function(){this.g.j=null,delete this.j,ec(this.g),delete this.g,Hi.Z.M.call(this)},fn(k_,Df),fn(F_,v_),fn(ac,P_),ac.prototype.xa=function(){Nr(this.g,"a")},ac.prototype.wa=function(n){Nr(this.g,new k_(n))},ac.prototype.va=function(n){Nr(this.g,new F_(n))},ac.prototype.ua=function(){Nr(this.g,"b")},Ff.prototype.createWebChannel=Ff.prototype.g,Hi.prototype.send=Hi.prototype.u,Hi.prototype.open=Hi.prototype.m,Hi.prototype.close=Hi.prototype.close,om.NO_ERROR=0,om.TIMEOUT=8,om.HTTP_ERROR=6,PD.COMPLETE="complete",N0.EventType=If,If.OPEN="a",If.CLOSE="b",If.ERROR="c",If.MESSAGE="d",Er.prototype.listen=Er.prototype.N,Qn.prototype.listenOnce=Qn.prototype.O,Qn.prototype.getLastError=Qn.prototype.La,Qn.prototype.getLastErrorCode=Qn.prototype.Da,Qn.prototype.getStatus=Qn.prototype.ba,Qn.prototype.getResponseJson=Qn.prototype.Qa,Qn.prototype.getResponseText=Qn.prototype.ga,Qn.prototype.send=Qn.prototype.ea;var X0=ia.createWebChannelTransport=function(){return new Ff},ew=ia.getStatEventTarget=function(){return im()},_m=ia.ErrorCode=om,zD=ia.EventType=PD,tw=ia.Event=tl,nw=ia.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},qD=ia.FetchXmlHttpFactory=Jd,Lf=ia.WebChannel=N0,WD=ia.XhrIo=Qn;const rw="@firebase/firestore";class Rr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");let eh="9.8.0";const nu=new Ju.Yd("@firebase/firestore");function L_(){return nu.logLevel}function Fe(n,...e){if(nu.logLevel<=Ju.in.DEBUG){const t=e.map(Vf);nu.debug(`Firestore (${eh}): ${n}`,...t)}}function hr(n,...e){if(nu.logLevel<=Ju.in.ERROR){const t=e.map(Vf);nu.error(`Firestore (${eh}): ${n}`,...t)}}function uc(n,...e){if(nu.logLevel<=Ju.in.WARN){const t=e.map(Vf);nu.warn(`Firestore (${eh}): ${n}`,...t)}}function Vf(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${eh}) INTERNAL ASSERTION FAILED: `+n;throw hr(e),new Error(e)}function xt(n,e){n||rt()}function Ze(n,e){return n}const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends At.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class iw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class th{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rr.UNAUTHENTICATED))}shutdown(){}}class ZD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class sw{constructor(e){this.t=e,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=I=>this.i!==s?(s=this.i,t(I)):Promise.resolve();let c=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new qr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const I=c;e.enqueueRetryable((0,be.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},v=I=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(I=>v(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?v(I):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new qr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xt("string"==typeof r.accessToken),new iw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xt(null===e||"string"==typeof e),new Rr(e)}}class YD{constructor(e,t,r){this.type="FirstParty",this.user=Rr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const s=e.auth.getAuthHeaderValueForFirstParty([]);s&&this.headers.set("Authorization",s),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class ow{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new YD(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?s(u):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(xt("string"==typeof t.token),this.p=t.token,new Uf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class us{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function XD(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}us.A=-1;class aw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=XD(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function nh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function V_(n){return n+"\0"}class Jn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jn.fromMillis(Date.now())}static fromDate(e){return Jn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Jn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Jn(0,0))}static max(){return new bt(new Jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function U_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ru(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function eC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class lc{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===lc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof lc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),c=t.get(s);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Wt extends lc{construct(e,t,r){return new Wt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Wt(t)}static emptyPath(){return new Wt([])}}const sS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends lc{construct(e,t,r){return new Bn(e,t,r)}static isValidIdentifier(e){return sS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new xe(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new xe(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[s+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new xe(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,s+=2}else"`"===g?(c=!c,s++):"."!==g||c?(r+=g,s++):(u(),s++)}if(u(),c)throw new xe(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(t)}static emptyPath(){return new Bn([])}}class cc{constructor(e){this.fields=e,e.sort(Bn.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Xn(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Xn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const tC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _o(n){if(xt(!!n),"string"==typeof n){let e=0;const t=tC.exec(n);if(xt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:An(n.seconds),nanos:An(n.nanos)}}function An(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function iu(n){return"string"==typeof n?Xn.fromBase64String(n):Xn.fromUint8Array(n)}function uw(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function lw(n){const e=n.mapValue.fields.__previous_value__;return uw(e)?lw(e):e}function dc(n){const e=_o(n.mapValue.fields.__local_write_time__.timestampValue);return new Jn(e.seconds,e.nanos)}class j_{constructor(e,t,r,s,u,c,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class la{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new la("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}function Bf(n){return null==n}function hc(n){return 0===n&&1/n==-1/0}function $_(n){return"number"==typeof n&&Number.isInteger(n)&&!hc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class He{constructor(e){this.path=e}static fromPath(e){return new He(Wt.fromString(e))}static fromName(e){return new He(Wt.fromString(e).popFirst(5))}static empty(){return new He(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Wt(e.slice()))}}const ca={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},jf={nullValue:"NULL_VALUE"};function fc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?uw(n)?4:q_(n)?9007199254740991:10:rt()}function vo(n,e){if(n===e)return!0;const t=fc(n);if(t!==fc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dc(n).isEqual(dc(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=_o(r.timestampValue),c=_o(s.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,iu(n.bytesValue).isEqual(iu(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return An(r.geoPointValue.latitude)===An(s.geoPointValue.latitude)&&An(r.geoPointValue.longitude)===An(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return An(r.integerValue)===An(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=An(r.doubleValue),c=An(s.doubleValue);return u===c?hc(u)===hc(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return nh(n.arrayValue.values||[],e.arrayValue.values||[],vo);case 10:return function(r,s){const u=r.mapValue.fields||{},c=s.mapValue.fields||{};if(U_(u)!==U_(c))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===c[g]||!vo(u[g],c[g])))return!1;return!0}(n,e);default:return rt()}var s}function rh(n,e){return void 0!==(n.values||[]).find(t=>vo(t,e))}function da(n,e){if(n===e)return 0;const t=fc(n),r=fc(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const c=An(s.integerValue||s.doubleValue),g=An(u.integerValue||u.doubleValue);return c<g?-1:c>g?1:c===g?0:isNaN(c)?isNaN(g)?0:-1:1}(n,e);case 3:return cw(n.timestampValue,e.timestampValue);case 4:return cw(dc(n),dc(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(s,u){const c=iu(s),g=iu(u);return c.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const c=s.split("/"),g=u.split("/");for(let v=0;v<c.length&&v<g.length;v++){const I=Lt(c[v],g[v]);if(0!==I)return I}return Lt(c.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const c=Lt(An(s.latitude),An(u.latitude));return 0!==c?c:Lt(An(s.longitude),An(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const c=s.values||[],g=u.values||[];for(let v=0;v<c.length&&v<g.length;++v){const I=da(c[v],g[v]);if(I)return I}return Lt(c.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===ca.mapValue&&u===ca.mapValue)return 0;if(s===ca.mapValue)return 1;if(u===ca.mapValue)return-1;const c=s.fields||{},g=Object.keys(c),v=u.fields||{},I=Object.keys(v);g.sort(),I.sort();for(let S=0;S<g.length&&S<I.length;++S){const x=Lt(g[S],I[S]);if(0!==x)return x;const L=da(c[g[S]],v[I[S]]);if(0!==L)return L}return Lt(g.length,I.length)}(n.mapValue,e.mapValue);default:throw rt()}}function cw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=_o(n),r=_o(e),s=Lt(t.seconds,r.seconds);return 0!==s?s:Lt(t.nanos,r.nanos)}function ih(n){return H_(n)}function H_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=_o(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?iu(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const c of r.values||[])u?u=!1:s+=",",s+=H_(c);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const g of s)c?c=!1:u+=",",u+=`${g}:${H_(r.fields[g])}`;return u+"}"}(n.mapValue):rt();var e}function pc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $f(n){return!!n&&"integerValue"in n}function gc(n){return!!n&&"arrayValue"in n}function G_(n){return!!n&&"nullValue"in n}function z_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hf(n){return!!n&&"mapValue"in n}function sh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ru(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=sh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=sh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function q_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function dw(n){return"nullValue"in n?jf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?pc(la.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function hw(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?pc(la.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ca:rt()}function W_(n,e){const t=da(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function nC(n,e){const t=da(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class pi{constructor(e){this.value=e}static empty(){return new pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sh(t)}setAll(e){let t=Bn.emptyPath(),r={},s=[];e.forEach((c,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,s),r={},s=[],t=g.popLast()}c?r[g.lastSegment()]=sh(c):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Hf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Hf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ru(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new pi(sh(this.value))}}function fw(n){const e=[];return ru(n.fields,(t,r)=>{const s=new Bn([t]);if(Hf(r)){const u=fw(r.mapValue).fields;if(0===u.length)e.push(s);else for(const c of u)e.push(s.child(c))}else e.push(s)}),new cc(e)}class _n{constructor(e,t,r,s,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.data=u,this.documentState=c}static newInvalidDocument(e){return new _n(e,0,bt.min(),bt.min(),pi.empty(),0)}static newFoundDocument(e,t,r){return new _n(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new _n(e,2,t,bt.min(),pi.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,bt.min(),pi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function er(n){return n.fields.find(e=>2===e.kind)}function sl(n){return n.fields.filter(e=>2!==e.kind)}vm.UNKNOWN_ID=-1;class Em{constructor(e,t){this.fieldPath=e,this.kind=t}}class Gf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Gf(0,Vs.min())}}function K_(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=bt.fromTimestamp(1e9===r?new Jn(t+1,0):new Jn(t,r));return new Vs(s,He.empty(),e)}function rC(n){return new Vs(n.readTime,n.key,-1)}class Vs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vs(bt.min(),He.empty(),-1)}static max(){return new Vs(bt.max(),He.empty(),-1)}}function Z_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}class vn{constructor(e,t){this.comparator=e,this.root=t||Wr.EMPTY}insert(e,t){return new vn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wr.BLACK,null,null))}remove(e){return new vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wm(this.root,e,this.comparator,!1)}getReverseIterator(){return new wm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wm(this.root,e,this.comparator,!0)}}class wm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wr{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=null!=r?r:Wr.RED,this.left=null!=s?s:Wr.EMPTY,this.right=null!=u?u:Wr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Wr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Wr.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}Wr.EMPTY=null,Wr.RED=!0,Wr.BLACK=!1,Wr.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Wr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pn{constructor(e){this.comparator=e,this.data=new vn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pw(this.data.getIterator())}getIteratorFrom(e){return new pw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class pw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function mc(n){return n.hasNext()?n.getNext():void 0}class oS{constructor(e,t=null,r=[],s=[],u=null,c=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=c,this.endAt=g,this.P=null}}function Y_(n,e=null,t=[],r=[],s=null,u=null,c=null){return new oS(n,e,t,r,s,u,c)}function su(n){const e=Ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(s=r).field.canonicalString()+s.op.toString()+ih(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Bf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ih(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ih(r)).join(",")),e.P=t}return e.P}function zf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!yw(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(r=e.filters[s]).op||!t.field.isEqual(r.field)||!vo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Wf(n.startAt,e.startAt)&&Wf(n.endAt,e.endAt)}function bm(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ls(n,e){return n.filters.filter(t=>t instanceof Or&&t.field.isEqual(e))}function Us(n,e,t){let r=jf,s=!0;for(const u of ls(n,e)){let c=jf,g=!0;switch(u.op){case"<":case"<=":c=dw(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,g=!1;break;case"!=":case"not-in":c=jf}W_({value:r,inclusive:s},{value:c,inclusive:g})<0&&(r=c,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];W_({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}function Bs(n,e,t){let r=ca,s=!0;for(const u of ls(n,e)){let c=ca,g=!0;switch(u.op){case">=":case">":c=hw(u.value),g=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,g=!1;break;case"!=":case"not-in":c=ca}nC({value:r,inclusive:s},{value:c,inclusive:g})>0&&(r=c,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];nC({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}return{value:r,inclusive:s}}class Or extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new gw(e,t,r):"array-contains"===t?new oC(e,r):"in"===t?new Q_(e,r):"not-in"===t?new qf(e,r):"array-contains-any"===t?new aC(e,r):new Or(e,t,r)}static V(e,t,r){return"in"===t?new iC(e,r):new sC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(da(t,this.value)):null!==t&&fc(this.value)===fc(t)&&this.v(da(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class gw extends Or{constructor(e,t,r){super(e,t,r),this.key=He.fromName(r.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.v(t)}}class iC extends Or{constructor(e,t){super(e,"in",t),this.keys=mw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sC extends Or{constructor(e,t){super(e,"not-in",t),this.keys=mw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>He.fromName(r.referenceValue))}class oC extends Or{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gc(t)&&rh(t.arrayValue,this.value)}}class Q_ extends Or{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rh(this.value.arrayValue,t)}}class qf extends Or{constructor(e,t){super(e,"not-in",t)}matches(e){if(rh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rh(this.value.arrayValue,t)}}class aC extends Or{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rh(this.value.arrayValue,r))}}class ou{constructor(e,t){this.position=e,this.inclusive=t}}class oh{constructor(e,t="asc"){this.field=e,this.dir=t}}function yw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function J_(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],c=n.position[s];if(r=u.field.isKeyField()?He.comparator(He.fromName(c.referenceValue),t.key):da(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Wf(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vo(n.position[t],e.position[t]))return!1;return!0}class au{constructor(e,t=null,r=[],s=[],u=null,c="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=c,this.startAt=g,this.endAt=v,this.D=null,this.C=null}}function X_(n,e,t,r,s,u,c,g){return new au(n,e,t,r,s,u,c,g)}function yc(n){return new au(n)}function ah(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Im(n){for(const e of n.filters)if(e.S())return e.field;return null}function Dm(n){return null!==n.collectionGroup}function _c(n){const e=Ze(n);if(null===e.D){e.D=[];const t=Im(e),r=ah(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new oh(t)),e.D.push(new oh(Bn.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new oh(Bn.keyField(),u))}}}return e.D}function cs(n){const e=Ze(n);if(!e.C)if("F"===e.limitType)e.C=Y_(e.path,e.collectionGroup,_c(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of _c(e))t.push(new oh(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new ou(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ou(e.startAt.position,e.startAt.inclusive):null;e.C=Y_(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e.C}function tv(n,e,t){return new au(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uh(n,e){return zf(cs(n),cs(e))&&n.limitType===e.limitType}function nv(n){return`${su(cs(n))}|lt:${n.limitType}`}function Cm(n){return`Query(target=${function ha(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${ih(r.value)}`;var r}).join(", ")}]`),Bf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>ih(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>ih(t)).join(",")),`Target(${e})`}(cs(n))}; limitType=${n.limitType})`}function rv(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):He.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,c){const g=J_(s,u,c);return s.inclusive?g<=0:g<0}(t.startAt,_c(t),r)||t.endAt&&!function(s,u,c){const g=J_(s,u,c);return s.inclusive?g>=0:g>0}(t.endAt,_c(t),r)));var t,r}function _w(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vw(n){return(e,t)=>{let r=!1;for(const s of _c(n)){const u=uC(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function uC(n,e,t){const r=n.field.isKeyField()?He.comparator(e.key,t.key):function(s,u,c){const g=u.data.field(s),v=c.data.field(s);return null!==g&&null!==v?da(g,v):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function Ew(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function ww(n){return{integerValue:""+n}}function bw(n,e){return $_(e)?ww(e):Ew(n,e)}class Tm{constructor(){this._=void 0}}function lC(n,e,t){return n instanceof lh?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof vc?Dw(n,e):n instanceof Ec?Cw(n,e):function(r,s){const u=Iw(r,s),c=Tw(u)+Tw(r.k);return $f(u)&&$f(r.k)?ww(c):Ew(r.M,c)}(n,e)}function cC(n,e,t){return n instanceof vc?Dw(n,e):n instanceof Ec?Cw(n,e):t}function Iw(n,e){return n instanceof ch?$f(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class lh extends Tm{}class vc extends Tm{constructor(e){super(),this.elements=e}}function Dw(n,e){const t=iv(e);for(const r of n.elements)t.some(s=>vo(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ec extends Tm{constructor(e){super(),this.elements=e}}function Cw(n,e){let t=iv(e);for(const r of n.elements)t=t.filter(s=>!vo(s,r));return{arrayValue:{values:t}}}class ch extends Tm{constructor(e,t){super(),this.M=e,this.k=t}}function Tw(n){return An(n.integerValue||n.doubleValue)}function iv(n){return gc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class dh{constructor(e,t){this.field=e,this.transform=t}}class Sw{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Zf{}function Mw(n,e,t){n instanceof Yf?function(r,s,u){const c=r.value.clone(),g=dC(r.fieldTransforms,s,u.transformResults);c.setAll(g),s.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof wc?function(r,s,u){if(!Kf(r.precondition,s))return void s.convertToUnknownDocument(u.version);const c=dC(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(bc(r)),g.setAll(c),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Am(n,e,t){var s;n instanceof Yf?function(r,s,u){if(!Kf(r.precondition,s))return;const c=r.value.clone(),g=Sm(r.fieldTransforms,u,s);c.setAll(g),s.convertToFoundDocument(ol(s),c).setHasLocalMutations()}(n,e,t):n instanceof wc?function(r,s,u){if(!Kf(r.precondition,s))return;const c=Sm(r.fieldTransforms,u,s),g=s.data;g.setAll(bc(r)),g.setAll(c),s.convertToFoundDocument(ol(s),g).setHasLocalMutations()}(n,e,t):Kf(n.precondition,s=e)&&s.convertToNoDocument(bt.min())}function xw(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=Iw(r.transform,s||null);null!=u&&(null==t&&(t=pi.empty()),t.set(r.field,u))}return t||null}function sv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&nh(t,r,(s,u)=>function Aw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof vc&&r instanceof vc||t instanceof Ec&&r instanceof Ec?nh(t.elements,r.elements,vo):t instanceof ch&&r instanceof ch?vo(t.k,r.k):t instanceof lh&&r instanceof lh);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function ol(n){return n.isFoundDocument()?n.version:bt.min()}class Yf extends Zf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}}class wc extends Zf{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}}function bc(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function dC(n,e,t){const r=new Map;xt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],c=u.transform,g=e.data.field(u.field);r.set(u.field,cC(c,g,t[s]))}return r}function Sm(n,e,t){const r=new Map;for(const s of n){const u=s.transform,c=t.data.field(s.field);r.set(s.field,lC(u,c,e))}return r}class Mm extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class xm extends Zf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Nw{constructor(e){this.count=e}}var wr,Be;function Rw(n){switch(n){default:return rt();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function Ow(n){if(void 0===n)return hr("GRPC error has no .code"),le.UNKNOWN;switch(n){case wr.OK:return le.OK;case wr.CANCELLED:return le.CANCELLED;case wr.UNKNOWN:return le.UNKNOWN;case wr.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case wr.INTERNAL:return le.INTERNAL;case wr.UNAVAILABLE:return le.UNAVAILABLE;case wr.UNAUTHENTICATED:return le.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case wr.NOT_FOUND:return le.NOT_FOUND;case wr.ALREADY_EXISTS:return le.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return le.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case wr.ABORTED:return le.ABORTED;case wr.OUT_OF_RANGE:return le.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return le.UNIMPLEMENTED;case wr.DATA_LOSS:return le.DATA_LOSS;default:return rt()}}(Be=wr||(wr={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";class al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ru(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return eC(this.inner)}size(){return this.innerSize}}const Nm=new vn(He.comparator);function js(){return Nm}const Rm=new vn(He.comparator);function hh(...n){let e=Rm;for(const t of n)e=e.insert(t.key,t);return e}function En(){return new al(n=>n.toString(),(n,e)=>n.isEqual(e))}const aS=new vn(He.comparator),Pw=new pn(He.comparator);function rn(...n){let e=Pw;for(const t of n)e=e.add(t);return e}const hC=new pn(Lt);function Qf(){return hC}class fh{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ph.createSynthesizedTargetChangeForCurrentChange(e,t)),new fh(bt.min(),r,Qf(),js(),rn())}}class ph{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ph(Xn.EMPTY_BYTE_STRING,t,rn(),rn(),rn())}}class Jf{constructor(e,t,r,s){this.O=e,this.removedTargetIds=t,this.key=r,this.F=s}}class kw{constructor(e,t){this.targetId=e,this.$=t}}class Fw{constructor(e,t,r=Xn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Lw{constructor(){this.B=0,this.L=Uw(),this.U=Xn.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=rn(),t=rn(),r=rn();return this.L.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:rt()}}),new ph(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Uw()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Xf{constructor(e){this.nt=e,this.st=new Map,this.it=js(),this.rt=Vw(),this.ot=new pn(Lt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,s)=>{this.ft(s)&&t(s)})}_t(e){const t=e.targetId,r=e.$.count,s=this.wt(t);if(s){const u=s.target;if(bm(u))if(0===r){const c=new He(u.path);this.ct(t,c,_n.newNoDocument(c,bt.min()))}else xt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const g=this.wt(c);if(g){if(u.current&&bm(g.target)){const v=new He(g.target.path);null!==this.it.get(v)||this.It(c,v)||this.ct(c,v,_n.newNoDocument(v,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=rn();this.rt.forEach((u,c)=>{let g=!0;c.forEachWhile(v=>{const I=this.wt(v);return!I||2===I.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const s=new fh(e,t,this.ot,this.it,r);return this.it=js(),this.rt=Vw(),this.ot=new pn(Lt),s}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const s=this.lt(e);this.It(e,t)?s.Y(t,1):s.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Lw,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new pn(Lt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new Lw),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Vw(){return new vn(He.comparator)}function Uw(){return new vn(He.comparator)}const fC={asc:"ASCENDING",desc:"DESCENDING"},Om={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Bw{constructor(e,t){this.databaseId=e,this.N=t}}function gh(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ov(n,e){return n.N?e.toBase64():e.toUint8Array()}function pC(n,e){return gh(n,e.toTimestamp())}function zn(n){return xt(!!n),bt.fromTimestamp(function(e){const t=_o(e);return new Jn(t.seconds,t.nanos)}(n))}function Ic(n,e){return(t=n,new Wt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function jw(n){const e=Wt.fromString(n);return xt(Ww(e)),e}function ep(n,e){return Ic(n.databaseId,e.path)}function fa(n,e){const t=jw(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He($w(t))}function Pm(n,e){return Ic(n.databaseId,e)}function av(n){const e=jw(n);return 4===e.length?Wt.emptyPath():$w(e)}function mh(n){return new Wt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $w(n){return xt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function uv(n,e,t){return{name:ep(n,e),fields:t.value.mapValue.fields}}function Hw(n,e,t){const r=fa(n,e.name),s=zn(e.updateTime),u=new pi({mapValue:{fields:e.fields}}),c=_n.newFoundDocument(r,s,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function km(n,e){let t;if(e instanceof Yf)t={update:uv(n,e.key,e.value)};else if(e instanceof Mm)t={delete:ep(n,e.key)};else if(e instanceof wc)t={update:uv(n,e.key,e.data),updateMask:qw(e.fieldMask)};else{if(!(e instanceof xm))return rt();t={verify:ep(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const c=u.transform;if(c instanceof lh)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ec)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ch)return{fieldPath:u.field.canonicalString(),increment:c.k};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:pC(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:rt()),t;var s}function Gw(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?tr.updateTime(zn(s.updateTime)):void 0!==s.exists?tr.exists(s.exists):tr.none():tr.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,c){let g=null;"setToServerValue"in c?(xt("REQUEST_TIME"===c.setToServerValue),g=new lh):"appendMissingElements"in c?g=new vc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?g=new Ec(c.removeAllFromArray.values||[]):"increment"in c?g=new ch(u,c.increment):rt();const v=Bn.fromServerFormat(c.fieldPath);return new dh(v,g)}(n,s)):[];var s;if(e.update){const s=fa(n,e.update.name),u=new pi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new cc((e.updateMask.fieldPaths||[]).map(I=>Bn.fromServerFormat(I)));return new wc(s,u,c,t,r)}return new Yf(s,u,t,r)}if(e.delete){const s=fa(n,e.delete);return new Mm(s,t)}if(e.verify){const s=fa(n,e.verify);return new xm(s,t)}return rt()}function lv(n,e){return{documents:[Pm(n,e.path)]}}function tp(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Pm(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Pm(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(v){if(0===v.length)return;const I=v.map(S=>function(x){if("=="===x.op){if(z_(x.value))return{unaryFilter:{field:yh(x.field),op:"IS_NAN"}};if(G_(x.value))return{unaryFilter:{field:yh(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(z_(x.value))return{unaryFilter:{field:yh(x.field),op:"IS_NOT_NAN"}};if(G_(x.value))return{unaryFilter:{field:yh(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yh(x.field),op:yC(x.op),value:x.value}}}(S));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);s&&(t.structuredQuery.where=s);const u=function(v){if(0!==v.length)return v.map(I=>{return{field:yh((S=I).field),direction:np(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(I=e.limit,n.N||Bf(I)?I:{value:I});var I,g,v;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function zw(n){let e=av(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){xt(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=cv(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(S=>{return new oh(_h((x=S).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let g=null;t.limit&&(g=function(S){let x;return x="object"==typeof S?S.value:S,Bf(x)?null:x}(t.limit));let v=null;var S;t.startAt&&(v=new ou((S=t.startAt).values||[],!!S.before));let I=null;return t.endAt&&(I=function(S){return new ou(S.values||[],!S.before)}(t.endAt)),X_(e,s,c,u,g,"F",v,I)}function cv(n){return n?void 0!==n.unaryFilter?[vC(n)]:void 0!==n.fieldFilter?[_C(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>cv(e)).reduce((e,t)=>e.concat(t)):rt():[]}function np(n){return fC[n]}function yC(n){return Om[n]}function yh(n){return{fieldPath:n.canonicalString()}}function _h(n){return Bn.fromServerFormat(n.fieldPath)}function _C(n){return Or.create(_h(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(n.fieldFilter.op),n.fieldFilter.value)}function vC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=_h(n.unaryFilter.field);return Or.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=_h(n.unaryFilter.field);return Or.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=_h(n.unaryFilter.field);return Or.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=_h(n.unaryFilter.field);return Or.create(s,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}function qw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ww(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ci(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Kw(e)),e=vh(n.get(t),e);return Kw(e)}function vh(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Kw(n){return n+"\x01\x01"}function Eo(n){const e=n.length;if(xt(e>=2),2===e)return xt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Wt.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&rt(),n.charAt(c+1)){case"\x01":const g=n.substring(u,c);let v;0===s.length?v=g:(s+=g,v=s,s=""),r.push(v);break;case"\x10":s+=n.substring(u,c),s+="\0";break;case"\x11":s+=n.substring(u,c+1);break;default:rt()}u=c+2}return new Wt(r)}const Zw=["userId","batchId"];function rp(n,e){return[n,Ci(e)]}function Yw(n,e,t){return[n,Ci(e),t]}const Qw={},EC=["prefixPath","collectionGroup","readTime","documentId"],dv=["prefixPath","collectionGroup","documentId"],wC=["collectionGroup","readTime","prefixPath","documentId"],Jw=["canonicalId","targetId"],Xw=["targetId","path"],bC=["path","targetId"],IC=["collectionId","parent"],DC=["indexId","uid"],hv=["uid","sequenceNumber"],CC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eb=["indexId","uid","orderedDocumentKey"],TC=["userId","collectionPath","documentId"],AC=["userId","collectionPath","largestBatchId"],SC=["userId","collectionGroup","largestBatchId"],tb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],MC=[...tb,"documentOverlays"],nb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xC=[...nb,"indexConfiguration","indexState","indexEntries"],rb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let s=0,u=0,c=!1;e.forEach(g=>{++s,g.next(()=>{++u,c&&u===s&&t()},v=>r(v))}),c=!0,u===s&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(s=>s?de.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}}class Fm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new qr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new ip(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const s=Vm(r.target.error);this.At.reject(new ip(e,s))}}static open(e,t,r,s){try{return new Fm(t,e.transaction(s,r))}catch(u){throw new ip(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new NC(t)}}class wo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===wo.Vt((0,At.z$)())&&hr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),uu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,At.hl)())return!1;if(wo.St())return!0;const e=(0,At.z$)(),t=wo.Vt(e),r=0<t&&t<10,s=wo.Dt(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,be.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{s(new ip(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const g=c.target.error;s("VersionError"===g.name?new xe(le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new xe(le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new ip(e,g))},u.onupgradeneeded=c=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,be.Z)(function*(){const c="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.Nt(e);const v=Fm.open(u.db,e,c?"readonly":"readwrite",r),I=s(v).next(S=>(v.bt(),S)).catch(S=>(v.abort(S),de.reject(S))).toPromise();return I.catch(()=>{}),yield v.Rt,I}catch(v){const I="FirebaseError"!==v.name&&g<3;if(Fe("SimpleDb","Transaction failed with error:",v.message,"Retrying:",I),u.close(),!I)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ib{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return uu(this.Ft.delete())}}class ip extends xe{constructor(e,t){super(le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dc(n){return"IndexedDbTransactionError"===n.name}class NC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uu(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),uu(this.store.add(e))}get(e){return uu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),uu(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),uu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.Kt(s,(c,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new de((u,c)=>{s.onerror=g=>{c(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((s,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{s(c.target.result)}})}Qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const s=this.cursor(r);return this.Kt(s,(u,c,g)=>g.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.Kt(s,t)}zt(e){const t=this.cursor({});return new de((r,s)=>{t.onerror=u=>{const c=Vm(u.target.error);s(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(g=>{g?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new de((s,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const g=c.target.result;if(!g)return void s();const v=new ib(g),I=t(g.primaryKey,g.value,v);if(I instanceof de){const S=I.catch(x=>(v.done(),de.reject(x)));r.push(S)}v.isDone?s():null===v.Lt?g.continue():g.continue(v.Lt)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uu(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=Vm(r.target.error);t(s)}})}let Lm=!1;function Vm(n){const e=wo.Vt((0,At.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Lm||(Lm=!0,setTimeout(()=>{throw r},0)),r}}return n}class Um extends fv{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Pr(n,e){const t=Ze(n);return wo.xt(t.Ht,e)}class pv{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&Mw(u,e,r[s])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Am(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Am(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),s=r;this.applyToLocalView(s),r.isValidDocument()||s.convertToNoDocument(bt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rn())}isEqual(e){return this.batchId===e.batchId&&nh(this.mutations,e.mutations,(t,r)=>sv(t,r))&&nh(this.baseMutations,e.baseMutations,(t,r)=>sv(t,r))}}class sp{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){xt(e.mutations.length===r.length);let s=aS;const u=e.mutations;for(let c=0;c<u.length;c++)s=s.insert(u[c].key,r[c].version);return new sp(e,t,r,s)}}class gv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lu{constructor(e,t,r,s,u=bt.min(),c=bt.min(),g=Xn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=g}withSequenceNumber(e){return new lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class sb{constructor(e){this.Jt=e}}function ab(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:op(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:ep(s=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:gh(s,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Eh(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:Eh(e.version)}}var s,u;return r}function op(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Eh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Cc(n){const e=new Jn(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function cu(n,e){const t=(e.baseMutations||[]).map(u=>Gw(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Gw(n.Jt,u)),s=Jn.fromMillis(e.localWriteTimeMs);return new pv(e.batchId,s,t,r)}function ap(n){const e=Cc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Cc(n.lastLimboFreeSnapshotVersion):bt.min();let r;var s;return void 0!==n.query.documents?(xt(1===(s=n.query).documents.length),r=cs(yc(av(s.documents[0])))):r=cs(zw(n.query)),new lu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Xn.fromBase64String(n.resumeToken))}function Tc(n,e){const t=Eh(e.snapshotVersion),r=Eh(e.lastLimboFreeSnapshotVersion);let s;s=bm(e.target)?lv(n.Jt,e.target):tp(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:su(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Ac(n){const e=zw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?tv(e,e.limit,"L"):e}function mv(n,e){return new gv(e.largestBatchId,Gw(n.Jt,e.overlayMutation))}function RC(n,e){const t=e.path.lastSegment();return[n,Ci(e.path.popLast()),t]}class ub{getBundleMetadata(e,t){return lb(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Cc(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return lb(e).put({bundleId:(r=t).id,createTime:Eh(zn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return cb(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:Ac(s.bundledQuery),readTime:Cc(s.readTime)};var s})}saveNamedQuery(e,t){return cb(e).put({name:(r=t).name,readTime:Eh(zn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function lb(n){return Pr(n,"bundles")}function cb(n){return Pr(n,"namedQueries")}class yv{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new yv(e,t.uid||"")}getOverlay(e,t){return up(e).get(RC(this.userId,t)).next(r=>r?mv(this.M,r):null)}saveOverlays(e,t,r){const s=[];return r.forEach((u,c)=>{const g=new gv(t,c);s.push(this.Xt(e,g))}),de.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(c=>s.add(Ci(c.getCollectionPath())));const u=[];return s.forEach(c=>{const g=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(up(e).Qt("collectionPathOverlayIndex",g))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const s=En(),u=Ci(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return up(e).qt("collectionPathOverlayIndex",c).next(g=>{for(const v of g){const I=mv(this.M,v);s.set(I.getKey(),I)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=En();let c;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return up(e).Wt({index:"collectionGroupOverlayIndex",range:g},(v,I,S)=>{const x=mv(this.M,I);u.size()<s||x.largestBatchId===c?(u.set(x.getKey(),x),c=x.largestBatchId):S.done()}).next(()=>u)}Xt(e,t){return up(e).put(function(r,s,u){const[c,g,v]=RC(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:km(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function up(n){return Pr(n,"documentOverlays")}class ul{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(An(e.integerValue));else if("doubleValue"in e){const r=An(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),hc(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(iu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?q_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):rt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const s of Object.keys(r))this.re(s,t),this.te(r[s],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const s of r)this.te(s,t)}ae(e,t){this.ne(t,37),He.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function db(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Bm(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=db(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}ul.fe=new ul;class jm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const s=t.codePointAt(0);this._e(240|s>>>18),this._e(128|63&s>>>12),this._e(128|63&s>>>6),this._e(128|63&s)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const s=t.codePointAt(0);this.ge(240|s>>>18),this.ge(128|63&s>>>12),this.ge(128|63&s>>>6),this.ge(128|63&s)}}this.ye()}Te(e){const t=this.Ee(e),r=Bm(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Re(e){const t=this.Ee(e),r=Bm(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class lp{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class OC{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class wh{constructor(){this.De=new jm,this.Ce=new lp(this.De),this.xe=new OC(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class ll{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ll(this.indexId,this.documentKey,this.arrayValue,r)}}function Sc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=hb(n.arrayValue,e.arrayValue),0!==t?t:(t=hb(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function hb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class _v{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=er(e);if(void 0!==t&&!this.Be(t))return!1;const r=sl(e);let s=0,u=0;for(;s<r.length&&this.Be(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Fe){const c=r[s];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++s}for(;s<r.length;++s){const c=r[s];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class PC{constructor(){this.qe=new fb}addToCollectionParentIndex(e,t){return this.qe.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Vs.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class fb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new pn(Wt.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new pn(Wt.comparator)).toArray()}}const $m=new Uint8Array(0);class kC{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new fb,this.Ge=new al(r=>su(r),(r,s)=>zf(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Ci(s)};return Mc(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[V_(t),""],!1,!0);return Mc(e).qt(s).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Eo(c.parent))}return r})}addFieldIndex(e,t){const r=du(e),s={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete s.indexId,r.add(s).next()}deleteFieldIndex(e,t){const r=du(e),s=vv(e),u=bh(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=bh(e);let s=!0;const u=new Map;return de.forEach(this.Qe(t),c=>this.je(e,c).next(g=>{s&&(s=!!g),u.set(c,g)})).next(()=>{if(s){let c=rn();const g=[];return de.forEach(u,(v,I)=>{var S;Fe("IndexedDbIndexManager",`Using index ${S=v,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(It=>`${It.fieldPath}:${It.kind}`).join(",")}`} to execute ${su(t)}`);const x=function(It,ut){const kt=er(ut);if(void 0===kt)return null;for(const Ut of ls(It,kt.fieldPath))switch(Ut.op){case"array-contains-any":return Ut.value.arrayValue.values||[];case"array-contains":return[Ut.value]}return null}(I,v),L=function(It,ut){const kt=new Map;for(const Ut of sl(ut))for(const sn of ls(It,Ut.fieldPath))switch(sn.op){case"==":case"in":kt.set(Ut.fieldPath.canonicalString(),sn.value);break;case"not-in":case"!=":return kt.set(Ut.fieldPath.canonicalString(),sn.value),Array.from(kt.values())}return null}(I,v),q=function(It,ut){const kt=[];let Ut=!0;for(const sn of sl(ut)){const gs=0===sn.kind?Us(It,sn.fieldPath,It.startAt):Bs(It,sn.fieldPath,It.startAt);kt.push(gs.value),Ut&&(Ut=gs.inclusive)}return new ou(kt,Ut)}(I,v),Z=function(It,ut){const kt=[];let Ut=!0;for(const sn of sl(ut)){const gs=0===sn.kind?Bs(It,sn.fieldPath,It.endAt):Us(It,sn.fieldPath,It.endAt);kt.push(gs.value),Ut&&(Ut=gs.inclusive)}return new ou(kt,Ut)}(I,v),ye=this.We(v,I,q),Pe=this.We(v,I,Z),pt=this.ze(v,I,L),mt=this.He(v.indexId,x,ye,q.inclusive,Pe,Z.inclusive,pt);return de.forEach(mt,It=>r.Gt(It,t.limit).next(ut=>{ut.forEach(kt=>{const Ut=He.fromSegments(kt.documentKey);c.has(Ut)||(c=c.add(Ut),g.push(Ut))})}))}).next(()=>g)}return de.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,s,u,c,g){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),I=v/(null!=t?t.length:1),S=[];for(let x=0;x<v;++x){const L=t?this.Je(t[x/I]):$m,q=this.Ye(e,L,r[x%I],s),Z=this.Xe(e,L,u[x%I],c),ye=g.map(Pe=>this.Ye(e,L,Pe,!0));S.push(...this.createRange(q,Z,ye))}return S}Ye(e,t,r,s){const u=new ll(e,He.empty(),t,r);return s?u:u.ke()}Xe(e,t,r,s){const u=new ll(e,He.empty(),t,r);return s?u.ke():u}je(e,t){const r=new _v(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let c=null;for(const g of u)r.$e(g)&&(!c||g.fields.length>c.fields.length)&&(c=g);return c})}getIndexType(e,t){let r=2;return de.forEach(this.Qe(t),s=>this.je(e,s).next(u=>{u?0!==r&&u.fields.length<function(c){let g=new pn(Bn.comparator),v=!1;for(const I of c.filters){const S=I;S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?v=!0:g=g.add(S.field))}for(const I of c.orderBy)I.field.isKeyField()||(g=g.add(I.field));return g.size+(v?1:0)}(s)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new wh;for(const s of sl(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const c=r.Ne(s.kind);ul.fe.Zt(u,c)}return r.Se()}Je(e){const t=new wh;return ul.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new wh;return ul.fe.Zt(pc(this.databaseId,t),r.Ne(function(s){const u=sl(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let s=[];s.push(new wh);let u=0;for(const c of sl(e)){const g=r[u++];for(const v of s)if(this.en(t,c.fieldPath)&&gc(g))s=this.nn(s,c,g);else{const I=v.Ne(c.kind);ul.fe.Zt(g,I)}}return this.sn(s)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const s=[...e],u=[];for(const c of r.arrayValue.values||[])for(const g of s){const v=new wh;v.seed(g.Se()),ul.fe.Zt(c,v.Ne(t.kind)),u.push(v)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Or&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=du(e),s=vv(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return de.forEach(u,g=>s.get([g.indexId,this.uid]).next(v=>{c.push(function(I,S){const x=S?new Gf(S.sequenceNumber,new Vs(Cc(S.readTime),new He(Eo(S.documentKey)),S.largestBatchId)):Gf.empty(),L=I.fields.map(([q,Z])=>new Em(Bn.fromServerFormat(q),Z));return new vm(I.indexId,I.collectionGroup,L,x)}(g,v))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Lt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=du(e),u=vv(e);return this.rn(e).next(c=>s.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>de.forEach(g,v=>{return u.put({indexId:v.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Eh((L=r).readTime),documentKey:Ci(L.documentKey.path),largestBatchId:L.largestBatchId});var L})))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(s,u)=>{const c=r.get(s.collectionGroup);return(c?de.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),de.forEach(g,v=>this.on(e,s,v).next(I=>{const S=this.un(u,v);return I.isEqual(S)?de.resolve():this.an(e,u,v,I,S)}))))})}cn(e,t,r,s){return bh(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,s){return bh(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const s=bh(e);let u=new pn(Sc);return s.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,g)=>{u=u.add(new ll(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}un(e,t){let r=new pn(Sc);const s=this.Ze(t,e);if(null==s)return r;const u=er(t);if(null!=u){const c=e.data.field(u.fieldPath);if(gc(c))for(const g of c.arrayValue.values||[])r=r.add(new ll(t.indexId,e.key,this.Je(g),s))}else r=r.add(new ll(t.indexId,e.key,$m,s));return r}an(e,t,r,s,u){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(g,v,I,S,x){const L=g.getIterator(),q=v.getIterator();let Z=mc(L),ye=mc(q);for(;Z||ye;){let Pe=!1,pt=!1;if(Z&&ye){const mt=I(Z,ye);mt<0?pt=!0:mt>0&&(Pe=!0)}else null!=Z?pt=!0:Pe=!0;Pe?(S(ye),ye=mc(q)):pt?(x(Z),Z=mc(L)):(Z=mc(L),ye=mc(q))}}(s,u,Sc,g=>{c.push(this.cn(e,t,r,g))},g=>{c.push(this.hn(e,t,r,g))}),de.waitFor(c)}rn(e){let t=1;return vv(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,g)=>Sc(c,g)).filter((c,g,v)=>!g||0!==Sc(c,v[g-1]));const s=[];s.push(e);for(const c of r){const g=Sc(c,e),v=Sc(c,t);if(0===g)s[0]=e.ke();else if(g>0&&v<0)s.push(c),s.push(c.ke());else if(v>0)break}s.push(t);const u=[];for(let c=0;c<s.length;c+=2)u.push(IDBKeyRange.bound([s[c].indexId,this.uid,s[c].arrayValue,s[c].directionalValue,$m,[]],[s[c+1].indexId,this.uid,s[c+1].arrayValue,s[c+1].directionalValue,$m,[]]));return u}getMinOffset(e,t){let r;return de.forEach(this.Qe(t),s=>this.je(e,s).next(u=>{u?(!r||Z_(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Vs.min()})).next(()=>r)}}function Mc(n){return Pr(n,"collectionParents")}function bh(n){return Pr(n,"indexEntries")}function du(n){return Pr(n,"indexConfiguration")}function vv(n){return Pr(n,"indexState")}const Ev={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gi(e,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function FC(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let g=0;const v=r.Wt({range:c},(S,x,L)=>(g++,L.delete()));u.push(v.next(()=>{xt(1===g)}));const I=[];for(const S of t.mutations){const x=Yw(e,S.key.path,t.batchId);u.push(s.delete(x)),I.push(S.key)}return de.waitFor(u).next(()=>I)}function cp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Gi.DEFAULT_COLLECTION_PERCENTILE=10,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gi.DEFAULT=new Gi(41943040,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gi.DISABLED=new Gi(-1,0,0);class pb{constructor(e,t,r,s){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=s,this.ln={}}static Yt(e,t,r,s){xt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new pb(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pa(e).Wt({index:"userMutationsIndex",range:r},(s,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Ih(e),c=pa(e);return c.add({}).next(g=>{xt("number"==typeof g);const v=new pv(g,t,r,s),I=function(L,q,Z){const ye=Z.baseMutations.map(pt=>km(L.Jt,pt)),Pe=Z.mutations.map(pt=>km(L.Jt,pt));return{userId:q,batchId:Z.batchId,localWriteTimeMs:Z.localWriteTime.toMillis(),baseMutations:ye,mutations:Pe}}(this.M,this.userId,v),S=[];let x=new pn((L,q)=>Lt(L.canonicalString(),q.canonicalString()));for(const L of s){const q=Yw(this.userId,L.key.path,g);x=x.add(L.key.path.popLast()),S.push(c.put(I)),S.push(u.put(q,Qw))}return x.forEach(L=>{S.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.ln[g]=v.keys()}),de.waitFor(S).next(()=>v)})}lookupMutationBatch(e,t){return pa(e).get(t).next(r=>r?(xt(r.userId===this.userId),cu(this.M,r)):null)}fn(e,t){return this.ln[t]?de.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.ln[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return pa(e).Wt({index:"userMutationsIndex",range:s},(c,g,v)=>{g.userId===this.userId&&(xt(g.batchId>=r),u=cu(this.M,g)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return pa(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(s,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pa(e).qt("userMutationsIndex",t).next(r=>r.map(s=>cu(this.M,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=rp(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Ih(e).Wt({range:s},(c,g,v)=>{const[I,S,x]=c,L=Eo(S);if(I===this.userId&&t.path.isEqual(L))return pa(e).get(x).next(q=>{if(!q)throw rt();xt(q.userId===this.userId),u.push(cu(this.M,q))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Lt);const s=[];return t.forEach(u=>{const c=rp(this.userId,u.path),g=IDBKeyRange.lowerBound(c),v=Ih(e).Wt({range:g},(I,S,x)=>{const[L,q,Z]=I,ye=Eo(q);L===this.userId&&u.path.isEqual(ye)?r=r.add(Z):x.done()});s.push(v)}),de.waitFor(s).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=rp(this.userId,r),c=IDBKeyRange.lowerBound(u);let g=new pn(Lt);return Ih(e).Wt({range:c},(v,I,S)=>{const[x,L,q]=v,Z=Eo(L);x===this.userId&&r.isPrefixOf(Z)?Z.length===s&&(g=g.add(q)):S.done()}).next(()=>this.dn(e,g))}dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(pa(e).get(u).next(c=>{if(null===c)throw rt();xt(c.userId===this.userId),r.push(cu(this.M,c))}))}),de.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return FC(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),de.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Ih(e).Wt({range:r},(u,c,g)=>{if(u[0]===this.userId){const v=Eo(u[1]);s.push(v)}else g.done()}).next(()=>{xt(0===s.length)})})}containsKey(e,t){return wv(e,this.userId,t)}wn(e){return gb(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function wv(n,e,t){const r=rp(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Ih(n).Wt({range:u,jt:!0},(g,v,I)=>{const[S,x,L]=g;S===e&&x===s&&(c=!0),I.done()}).next(()=>c)}function pa(n){return Pr(n,"mutations")}function Ih(n){return Pr(n,"documentMutations")}function gb(n){return Pr(n,"mutationQueues")}class xc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new xc(0)}static yn(){return new xc(-1)}}class LC{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new xc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>bt.fromTimestamp(new Jn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.In(e,s)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Dh(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(xt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Dh(e).Wt((c,g)=>{const v=ap(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(s++,u.push(this.removeTargetData(e,v)))}).next(()=>de.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Dh(e).Wt((r,s)=>{const u=ap(s);t(u)})}pn(e){return mb(e).get("targetGlobalKey").next(t=>(xt(null!==t),t))}In(e,t){return mb(e).put("targetGlobalKey",t)}Tn(e,t){return Dh(e).put(Tc(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=su(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Dh(e).Wt({range:s,index:"queryTargetsIndex"},(c,g,v)=>{const I=ap(g);zf(t,I.target)&&(u=I,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=cl(e);return t.forEach(c=>{const g=Ci(c.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,c))}),de.waitFor(s)}removeMatchingKeys(e,t,r){const s=cl(e);return de.forEach(t,u=>{const c=Ci(u.path);return de.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=cl(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=cl(e);let u=rn();return s.Wt({range:r,jt:!0},(c,g,v)=>{const I=Eo(c[1]),S=new He(I);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=Ci(t.path),s=IDBKeyRange.bound([r],[V_(r)],!1,!0);let u=0;return cl(e).Wt({index:"documentTargetsIndex",jt:!0,range:s},([c,g],v,I)=>{0!==c&&(u++,I.done())}).next(()=>u>0)}Et(e,t){return Dh(e).get(t).next(r=>r?ap(r):null)}}function Dh(n){return Pr(n,"targets")}function mb(n){return Pr(n,"targetGlobal")}function cl(n){return Pr(n,"targetDocuments")}function Nc(n){return bv.apply(this,arguments)}function bv(){return bv=(0,be.Z)(function*(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==rb)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),bv.apply(this,arguments)}function yb([n,e],[t,r]){const s=Lt(n,t);return 0===s?Lt(e,r):s}class dp{constructor(e){this.An=e,this.buffer=new pn(yb),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();yb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _b{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,be.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(s){Dc(s)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Nc(s)}yield t.Sn(e)}))}}class vb{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(us.A);const r=new dp(t);return this.Dn.forEachTarget(e,s=>r.Pn(s.sequenceNumber)).next(()=>this.Dn.xn(e,s=>r.Pn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(Ev)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ev):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,s,u,c,g,v,I;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,c=Date.now(),this.nthSequenceNumber(e,s))).next(x=>(r=x,g=Date.now(),this.removeTargets(e,r,t))).next(x=>(u=x,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(I=Date.now(),L_()<=Ju.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-S}ms\n\tDetermined least recently used ${s} in `+(g-c)+`ms\n\tRemoved ${u} targets in `+(v-g)+`ms\n\tRemoved ${x} documents in `+(I-v)+`ms\nTotal Duration: ${I-S}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:x})))}}class Eb{constructor(e,t){this.db=e,this.garbageCollector=new vb(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,s)=>t(s))}addReference(e,t,r){return hp(e,r)}removeReference(e,t,r){return hp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return hp(e,t)}On(e,t){return function(r,s){let u=!1;return gb(r).zt(c=>wv(r,c,s).next(g=>(g&&(u=!0),de.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Mn(e,(c,g)=>{if(g<=t){const v=this.On(e,c).next(I=>{if(!I)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,bt.min()),cl(e).delete([0,Ci(c.path)])))});s.push(v)}}).next(()=>de.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return hp(e,t)}Mn(e,t){const r=cl(e);let s,u=us.A;return r.Wt({index:"documentTargetsIndex"},([c,g],{path:v,sequenceNumber:I})=>{0===c?(u!==us.A&&t(new He(Eo(s)),u),u=I,s=v):u=us.A}).next(()=>{u!==us.A&&t(new He(Eo(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hp(n,e){return cl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ci(e.path),sequenceNumber:r}));var r}class Iv{constructor(){this.changes=new al(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class wb{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Rc(e).put(r)}removeEntry(e,t,r){return Rc(e).delete(function(s,u){const c=s.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],op(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=_n.newInvalidDocument(t);return Rc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(fp(t))},(s,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:_n.newInvalidDocument(t)};return Rc(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(fp(t))},(s,u)=>{r={document:this.$n(t,u),size:cp(u)}}).next(()=>r)}getEntries(e,t){let r=js();return this.Ln(e,t,(s,u)=>{const c=this.$n(s,u);r=r.insert(s,c)}).next(()=>r)}Un(e,t){let r=js(),s=new vn(He.comparator);return this.Ln(e,t,(u,c)=>{const g=this.$n(u,c);r=r.insert(u,g),s=s.insert(u,cp(c))}).next(()=>({documents:r,qn:s}))}Ln(e,t,r){if(t.isEmpty())return de.resolve();let s=new pn(Ib);t.forEach(v=>s=s.add(v));const u=IDBKeyRange.bound(fp(s.first()),fp(s.last())),c=s.getIterator();let g=c.getNext();return Rc(e).Wt({index:"documentKeyIndex",range:u},(v,I,S)=>{const x=He.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;g&&Ib(g,x)<0;)r(g,null),g=c.getNext();g&&g.isEqual(x)&&(r(g,I),g=c.hasNext()?c.getNext():null),g?S.Ut(fp(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const s=[t.popLast().toArray(),t.lastSegment(),op(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rc(e).qt(IDBKeyRange.bound(s,u,!0)).next(c=>{let g=js();for(const v of c){const I=this.$n(He.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);g=g.insert(I.key,I)}return g})}getAllFromCollectionGroup(e,t,r,s){let u=js();const c=bb(t,r),g=bb(t,Vs.max());return Rc(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,g,!0)},(v,I,S)=>{const x=this.$n(He.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(x.key,x),u.size===s&&S.done()}).next(()=>u)}newChangeBuffer(e){return new VC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Dv(e).get("remoteDocumentGlobalKey").next(t=>(xt(!!t),t))}Fn(e,t){return Dv(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function ob(n,e){let t;if(e.document)t=Hw(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=He.fromSegments(e.noDocument.path),s=Cc(e.noDocument.readTime);t=_n.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=He.fromSegments(e.unknownDocument.path),s=Cc(e.unknownDocument.version);t=_n.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new Jn(r[0],r[1]);return bt.fromTimestamp(s)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return _n.newInvalidDocument(e)}}class VC extends Iv{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new al(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new pn((u,c)=>Lt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const g=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,g.readTime)),c.isValidDocument()){const v=ab(this.Kn.M,c);s=s.add(u.path.popLast()),r+=cp(v)-g.size,t.push(this.Kn.addEntry(e,u,v))}else if(r-=g.size,this.trackRemovals){const v=ab(this.Kn.M,c.convertToNoDocument(bt.min()));t.push(this.Kn.addEntry(e,u,v))}}),s.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:s})=>(s.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Dv(n){return Pr(n,"remoteDocumentGlobal")}function Rc(n){return Pr(n,"remoteDocumentsV14")}function fp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function bb(n,e){const t=e.documentKey.path.toArray();return[n,op(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Ib(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Lt(t[u],r[u]),s)return s;return s=Lt(t.length,r.length),s||(s=Lt(t[t.length-2],r[r.length-2]),s||Lt(t[t.length-1],r[r.length-1]))}class pp{constructor(e){this.M=e}kt(e,t,r,s){const u=new Fm("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zw,{unique:!0}),g.createObjectStore("documentMutations"),Db(e),function(g){g.createObjectStore("remoteDocuments")}(e));let c=de.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),Db(e)),c=c.next(()=>function(g){const v=g.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",I)}(u))),r<4&&s>=4&&(0!==r&&(c=c.next(()=>function(g,v){return v.store("mutations").qt().next(I=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Zw,{unique:!0});const S=v.store("mutations"),x=I.map(L=>S.put(L));return de.waitFor(x)})}(e,u))),c=c.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(c=c.next(()=>this.Qn(u))),r<6&&s>=6&&(c=c.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&s>=7&&(c=c.next(()=>this.Wn(u))),r<8&&s>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&s>=9&&(c=c.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(c=c.next(()=>this.Hn(u))),r<11&&s>=11&&(c=c.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(c=c.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:TC});v.createIndex("collectionPathOverlayIndex",AC,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",SC,{unique:!1})}(e)})),r<13&&s>=13&&(c=c.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:EC});v.createIndex("documentKeyIndex",dv),v.createIndex("collectionGroupIndex",wC)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(c=c.next(()=>{!function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:DC}).createIndex("sequenceNumberIndex",hv,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:CC}).createIndex("documentKeyIndex",eb,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,s)=>{t+=cp(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(s=>de.forEach(s,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(g=>de.forEach(g,v=>{xt(v.userId===u.userId);const I=cu(this.M,v);return FC(e,u.userId,I).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.Wt((c,g)=>{const v=new Wt(c),I=[0,Ci(v)];u.push(t.get(I).next(S=>S?de.resolve():t.put({targetId:0,path:Ci(v),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:IC});const r=t.store("collectionParents"),s=new fb,u=c=>{if(s.add(c)){const g=c.lastSegment(),v=c.popLast();return r.put({collectionId:g,parent:Ci(v)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,g)=>{const v=new Wt(c);return u(v.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,g,v],I)=>{const S=Eo(g);return u(S.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,s)=>{const u=ap(s),c=Tc(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),s=[];return r.Wt((u,c)=>{const g=t.store("remoteDocumentsV14"),v=(I=c,I.document?new He(Wt.fromString(I.document.name).popFirst(5)):I.noDocument?He.fromSegments(I.noDocument.path):I.unknownDocument?He.fromSegments(I.unknownDocument.path):rt()).path.toArray();var I;const S={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(g.put(S))}).next(()=>de.waitFor(s))}}function Db(n){n.createObjectStore("targetDocuments",{keyPath:Xw}).createIndex("documentTargetsIndex",bC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Jw,{unique:!0}),n.createObjectStore("targetGlobal")}const gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class $s{constructor(e,t,r,s,u,c,g,v,I,S,x=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=g,this.Xn=I,this.Zn=S,this.ts=x,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=L=>Promise.resolve(),!$s.vt())throw new xe(le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Eb(this,s),this.hs=t+"main",this.M=new sb(v),this.ls=new wo(this.hs,this.ts,new pp(this.M)),this.fs=new LC(this.referenceDelegate,this.M),this.ds=new wb(this.M),this._s=new ub,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===S&&hr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,gp);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new us(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,be.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ch(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Dc(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return mp(e).get("owner").next(t=>de.resolve(this.Ps(t)))}Vs(e){return Ch(e).delete(this.clientId)}vs(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Pr(r,"clientMetadata");return s.qt().next(u=>{const c=e.Ds(u,18e5),g=u.filter(v=>-1===c.indexOf(v));return de.forEach(g,v=>s.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?de.resolve(!0):mp(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new xe(le.FAILED_PRECONDITION,gp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ch(e).qt().next(r=>void 0===this.Ds(r,5e3).find(s=>{if(this.clientId!==s.clientId){const c=!this.inForeground&&s.inForeground,g=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||c&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Um(t,us.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Ch(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return pb.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new kC(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return yv.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?xC:13===c?nb:12===c?MC:11===c?tb:void rt();var c;let g;return this.ls.runTransaction(e,s,u,v=>(g=new Um(v,this.es?this.es.next():us.A),"readwrite-primary"===t?this.Es(g).next(I=>!!I||this.As(g)).next(I=>{if(!I)throw hr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new xe(le.FAILED_PRECONDITION,rb);return r(g)}).next(I=>this.bs(g).next(()=>I)):this.$s(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}$s(e){return mp(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(le.FAILED_PRECONDITION,gp)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mp(e).put("owner",t)}static vt(){return wo.vt()}Rs(e){const t=mp(e);return t.get("owner").next(r=>this.Ps(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(hr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,At.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return hr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){hr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mp(n){return Pr(n,"owner")}function Ch(n){return Pr(n,"clientMetadata")}function Oc(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class UC{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(s=>{for(const u of r)u.applyToLocalView(s);return s})}qs(e,t){e.forEach((r,s)=>{for(const u of t)u.applyToLocalView(s)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return He.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.js(e,t.path):Dm(t)?this.Ws(e,t,r):this.zs(e,t,r);var s}js(e,t){return this.Ls(e,new He(t)).next(r=>{let s=hh();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}Ws(e,t,r){const s=t.collectionGroup;let u=hh();return this.indexManager.getCollectionParents(e,s).next(c=>de.forEach(c,g=>{const v=(I=t,S=g.child(s),new au(S,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,S;return this.zs(e,v,r).next(I=>{I.forEach((S,x)=>{u=u.insert(S,x)})})}).next(()=>u))}zs(e,t,r){let s;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(s=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const g of c.mutations){const v=g.key;let I=s.get(v);null==I&&(I=_n.newInvalidDocument(v),s=s.insert(v,I)),Am(g,I,c.localWriteTime),I.isFoundDocument()||(s=s.remove(v))}}).next(()=>(s.forEach((u,c)=>{rv(t,c)||(s=s.remove(u))}),s))}}class Cv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=s}static Ys(e,t){let r=rn(),s=rn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new Cv(e,t.fromCache,r,s)}}class Cb{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,s){return this.ti(e,t).next(u=>u||this.ei(e,t,s,r)).next(u=>u||this.ni(e,t))}ti(e,t){return de.resolve(null)}ei(e,t,r,s){return function ev(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||s.isEqual(bt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const c=this.si(t,u);return this.ii(t,c,r,s)?this.ni(e,t):(L_()<=Ju.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Cm(t)),this.ri(e,c,t,K_(s,-1)))})}si(e,t){let r=new pn(vw(e));return t.forEach((s,u)=>{rv(e,u)&&(r=r.add(u))}),r}ii(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}ni(e,t){return L_()<=Ju.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Cm(t)),this.Zs.Qs(e,t,Vs.min())}ri(e,t,r,s){return this.Zs.Qs(e,r,s).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class Hm{constructor(e,t,r,s){this.persistence=e,this.oi=t,this.M=s,this.ui=new vn(Lt),this.ai=new al(u=>su(u),zf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new UC(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function yp(n,e,t,r){return new Hm(n,e,t,r)}function Tb(n,e){return Tv.apply(this,arguments)}function Tv(){return Tv=(0,be.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.Bs.getAllMutationBatches(r).next(u=>(s=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],g=[];let v=rn();for(const I of s){c.push(I.batchId);for(const S of I.mutations)v=v.add(S.key)}for(const I of u){g.push(I.batchId);for(const S of I.mutations)v=v.add(S.key)}return t.fi.Ks(r,v).next(I=>({di:I,removedBatchIds:c,addedBatchIds:g}))})})}),Tv.apply(this,arguments)}function Ab(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,g,v,I){const S=v.batch,x=S.keys();let L=de.resolve();return x.forEach(q=>{L=L.next(()=>I.getEntry(g,q)).next(Z=>{const ye=v.docVersions.get(q);xt(null!==ye),Z.version.compareTo(ye)<0&&(S.applyToRemoteDocument(Z,v),Z.isValidDocument()&&(Z.setReadTime(v.commitVersion),I.addEntry(Z)))})}),L.next(()=>c.Bs.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,s))})}function Av(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Sv(n,e){const t=Ze(n),r=e.snapshotVersion;let s=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});s=t.ui;const g=[];e.targetChanges.forEach((I,S)=>{const x=s.get(S);if(!x)return;g.push(t.fs.removeMatchingKeys(u,I.removedDocuments,S).next(()=>t.fs.addMatchingKeys(u,I.addedDocuments,S)));let L=x.withSequenceNumber(u.currentSequenceNumber);var q,Z,ye;e.targetMismatches.has(S)?L=L.withResumeToken(Xn.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):I.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(I.resumeToken,r)),s=s.insert(S,L),Z=L,ye=I,(0===(q=x).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&g.push(t.fs.updateTargetData(u,L))});let v=js();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,I))}),g.push(Mv(u,c,e.documentUpdates).next(I=>{v=I})),!r.isEqual(bt.min())){const I=t.fs.getLastRemoteSnapshotVersion(u).next(S=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(I)}return de.waitFor(g).next(()=>c.apply(u)).next(()=>t.fi.Gs(u,v)).next(()=>v)}).then(u=>(t.ui=s,u))}function Mv(n,e,t){let r=rn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=js();return t.forEach((c,g)=>{const v=s.get(c);g.isNoDocument()&&g.version.isEqual(bt.min())?(e.removeEntry(c,g.readTime),u=u.insert(c,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||0===g.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(g),u=u.insert(c,g)):Fe("LocalStore","Ignoring outdated watch update for ",c,". Current version:",v.version," Watch version:",g.version)}),u})}function BC(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Th(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.fs.getTargetData(r,e).next(u=>u?(s=u,de.resolve(s)):t.fs.allocateTargetId(r).next(c=>(s=new lu(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ui.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function _p(n,e,t){return vp.apply(this,arguments)}function vp(){return vp=(0,be.Z)(function*(n,e,t){const r=Ze(n),s=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Dc(c))throw c;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(s.target)}),vp.apply(this,arguments)}function Ah(n,e,t){const r=Ze(n);let s=bt.min(),u=rn();return r.persistence.runTransaction("Execute query","readonly",c=>function(g,v,I){const S=Ze(g),x=S.ai.get(I);return void 0!==x?de.resolve(S.ui.get(x)):S.fs.getTargetData(v,I)}(r,c,cs(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,g.targetId).next(v=>{u=v})}).next(()=>r.oi.Qs(c,e,t?s:bt.min(),t?u:rn())).next(g=>(zm(r,_w(e),g),{documents:g,_i:u})))}function xv(n,e){const t=Ze(n),r=Ze(t.fs),s=t.ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function Gm(n,e){const t=Ze(n),r=t.ci.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.hi.getAllFromCollectionGroup(s,e,K_(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(zm(t,e,s),s))}function zm(n,e,t){let r=bt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function Nv(){return Nv=(0,be.Z)(function*(n,e,t,r){const s=Ze(n);let u=rn(),c=js();for(const I of t){const S=e.wi(I.metadata.name);I.document&&(u=u.add(S));const x=e.mi(I);x.setReadTime(e.gi(I.metadata.readTime)),c=c.insert(S,x)}const g=s.hi.newChangeBuffer({trackRemovals:!0}),v=yield Th(s,(I=r,cs(yc(Wt.fromString(`__bundle__/docs/${I}`)))));var I;return s.persistence.runTransaction("Apply bundle documents","readwrite",I=>Mv(I,g,c).next(S=>(g.apply(I),S)).next(S=>s.fs.removeMatchingKeysForTargetId(I,v.targetId).next(()=>s.fs.addMatchingKeys(I,u,v.targetId)).next(()=>s.fi.Gs(I,S)).next(()=>S)))}),Nv.apply(this,arguments)}function $C(n,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,be.Z)(function*(n,e,t=rn()){const r=yield Th(n,cs(Ac(e.bundledQuery))),s=Ze(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const c=zn(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return s._s.saveNamedQuery(u,e);const g=r.withResumeToken(Xn.EMPTY_BYTE_STRING,c);return s.ui=s.ui.insert(g.targetId,g),s.fs.updateTargetData(u,g).next(()=>s.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.fs.addMatchingKeys(u,t,r.targetId)).next(()=>s._s.saveNamedQuery(u,e))})}),Rv.apply(this,arguments)}class Sb{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return de.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:zn(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Ac(r.bundledQuery),readTime:zn(r.readTime)}),de.resolve();var r}}class Ov{constructor(){this.overlays=new vn(He.comparator),this.Ii=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.Xt(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Ii.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const s=En(),u=t.length+1,c=new He(t.child("")),g=this.overlays.getIteratorFrom(c);for(;g.hasNext();){const v=g.getNext().value,I=v.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&v.largestBatchId>r&&s.set(v.getKey(),v)}return de.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new vn((I,S)=>I-S);const c=this.overlays.getIterator();for(;c.hasNext();){const I=c.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let S=u.get(I.largestBatchId);null===S&&(S=En(),u=u.insert(I.largestBatchId,S)),S.set(I.getKey(),I)}}const g=En(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((I,S)=>g.set(I,S)),!(g.size()>=s)););return de.resolve(g)}Xt(e,t,r){if(null===r)return;const s=this.overlays.get(r.key);if(null!==s){const c=this.Ii.get(s.largestBatchId).delete(r.key);this.Ii.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new gv(t,r));let u=this.Ii.get(t);void 0===u&&(u=rn(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class qm{constructor(){this.Ti=new pn(kr.Ei),this.Ai=new pn(kr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new kr(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new kr(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new He(new Wt([])),r=new kr(t,e),s=new kr(t,e+1),u=[];return this.Ai.forEachInRange([r,s],c=>{this.Pi(c),u.push(c.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new He(new Wt([])),r=new kr(t,e),s=new kr(t,e+1);let u=rn();return this.Ai.forEachInRange([r,s],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new kr(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class kr{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return He.comparator(e.key,t.key)||Lt(e.Ci,t.Ci)}static Ri(e,t){return Lt(e.Ci,t.Ci)||He.comparator(e.key,t.key)}}class Mb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new pn(kr.Ei)}checkEmpty(e){return de.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,s){const u=this.xi;this.xi++;const c=new pv(u,t,r,s);this.Bs.push(c);for(const g of s)this.Ni=this.Ni.add(new kr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,t){return de.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.Mi(t+1),u=s<0?0:s;return de.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return de.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new kr(t,0),s=new kr(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,s],c=>{const g=this.ki(c.Ci);u.push(g)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Lt);return t.forEach(s=>{const u=new kr(s,0),c=new kr(s,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,c],g=>{r=r.add(g.Ci)})}),de.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;He.isDocumentKey(u)||(u=u.child(""));const c=new kr(new He(u),0);let g=new pn(Lt);return this.Ni.forEachWhile(v=>{const I=v.key.path;return!!r.isPrefixOf(I)&&(I.length===s&&(g=g.add(v.Ci)),!0)},c),de.resolve(this.Oi(g))}Oi(e){const t=[];return e.forEach(r=>{const s=this.ki(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){xt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return de.forEach(t.mutations,s=>{const u=new kr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new kr(t,0),s=this.Ni.firstAfterOrEqual(r);return de.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return de.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class xb{constructor(e){this.$i=e,this.docs=new vn(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=js();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():_n.newInvalidDocument(s))}),de.resolve(r)}getAllFromCollection(e,t,r){let s=js();const u=new He(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:g,value:{document:v}}=c.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||Z_(rC(v),r)<=0||(s=s.insert(v.key,v.mutableCopy()))}return de.resolve(s)}getAllFromCollectionGroup(e,t,r,s){rt()}Bi(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new HC(this)}getSize(e){return de.resolve(this.size)}}class HC extends Iv{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Kn.addEntry(e,s)):this.Kn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Nb{constructor(e){this.persistence=e,this.Li=new al(t=>su(t),zf),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new qm,this.targetCount=0,this.Ki=xc.gn()}forEachTarget(e,t){return this.Li.forEach((r,s)=>t(s)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),de.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new xc(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Tn(t),de.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Li.forEach((c,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Li.delete(c),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),de.waitFor(u).next(()=>s)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(c=>{u.push(s.markPotentiallyOrphaned(e,c))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.qi.containsKey(t))}}class Rb{constructor(e,t){this.Gi={},this.overlays={},this.es=new us(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Nb(this),this.indexManager=new PC,this.ds=new xb(r=>this.referenceDelegate.Qi(r)),this.M=new sb(t),this._s=new Sb(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ov,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new Mb(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const s=new GC(this.es.next());return this.referenceDelegate.ji(),r(s).next(u=>this.referenceDelegate.Wi(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}zi(e,t){return de.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class GC extends fv{constructor(e){super(),this.currentSequenceNumber=e}}class Wm{constructor(e){this.persistence=e,this.Hi=new qm,this.Ji=null}static Yi(e){return new Wm(e)}get Xi(){if(this.Ji)return this.Ji;throw rt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(s=>this.Xi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Xi,r=>{const s=He.fromPath(r);return this.Zi(e,s).next(u=>{u||t.removeEntry(s,bt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return de.or([()=>de.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Ob(n,e){return`firestore_clients_${n}_${e}`}function gi(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function dl(n,e){return`firestore_targets_${n}_${e}`}class Km{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static tr(e,t,r){const s=JSON.parse(r);let u,c="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return c&&s.error&&(c="string"==typeof s.error.message&&"string"==typeof s.error.code,c&&(u=new xe(s.error.code,s.error.message))),c?new Km(e,t,s.state,u):(hr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ep{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new xe(r.error.code,r.error.message))),u?new Ep(e,r.state,s):(hr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Pv{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=Qf();for(let c=0;s&&c<r.activeTargetIds.length;++c)s=$_(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return s?new Pv(e,u):(hr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Pc{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Pc(t.clientId,t.onlineState):(hr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class kv{constructor(){this.activeTargetIds=Qf()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wp{constructor(e,t,r,s,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new vn(Lt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=Ob(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new kv),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.Fs();for(const s of t){if(s===e.ir)continue;const u=e.getItem(Ob(e.persistenceKey,s));if(u){const c=Pv.tr(s,u);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const s=e.pr(r);s&&e.Ir(s)}for(const s of e.cr)e.ur(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(dl(this.persistenceKey,e));if(r){const s=Ep.tr(e,r);s&&(t=s.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(dl(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Ar(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void hr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const s=t.vr(r.key);return t.Sr(s,null)}{const s=t.Dr(r.key,r.newValue);if(s)return t.Sr(s.clientId,s)}}else if(t._r.test(r.key)){if(null!==r.newValue){const s=t.Cr(r.key,r.newValue);if(s)return t.Nr(s)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const s=t.kr(r.key,r.newValue);if(s)return t.Mr(s)}}else if(r.key===t.mr){if(null!==r.newValue){const s=t.pr(r.newValue);if(s)return t.Ir(s)}}else if(r.key===t.lr){const s=function(u){let c=us.A;if(null!=u)try{const g=JSON.parse(u);xt("number"==typeof g),c=g}catch(g){hr("SharedClientState","Failed to read sequence number from WebStorage",g)}return c}(r.newValue);s!==us.A&&t.sequenceNumberHandler(s)}else if(r.key===t.gr){const s=t.Or(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const s=new Km(this.currentUser,e,t,r),u=gi(this.persistenceKey,this.currentUser,e);this.setItem(u,s.er())}Ar(e){const t=gi(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const s=dl(this.persistenceKey,e),u=new Ep(e,t,r);this.setItem(s,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Pv.tr(r,t)}Cr(e,t){const r=this._r.exec(e),s=Number(r[1]);return Km.tr(new Rr(void 0!==r[2]?r[2]:null),s,t)}kr(e,t){const r=this.wr.exec(e),s=Number(r[1]);return Ep.tr(s,t)}pr(e){return Pc.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),s=this.Tr(this.ar),u=this.Tr(r),c=[],g=[];return u.forEach(v=>{s.has(v)||c.push(v)}),s.forEach(v=>{u.has(v)||g.push(v)}),this.syncEngine.Lr(c,g).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Qf();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class Pb{constructor(){this.Ur=new kv,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new kv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class kb{Kr(e){}shutdown(){}}class Fb{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const zC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Fv{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class Lb extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,s,u){const c=this.ho(e,t);Fe("RestConnection","Sending: ",c,r);const g={};return this.lo(g,s,u),this.fo(e,c,g,r).then(v=>(Fe("RestConnection","Received: ",v),v),v=>{throw uc("RestConnection",`${e} failed with error: `,v,"url: ",c,"request:",r),v})}_o(e,t,r,s,u){return this.co(e,t,r,s,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+eh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}ho(e,t){return`${this.uo}/v1/${t}:${zC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,s){return new Promise((u,c)=>{const g=new WD;g.listenOnce(zD.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case _m.NO_ERROR:const I=g.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(I)),u(I);break;case _m.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),c(new xe(le.DEADLINE_EXCEEDED,"Request time out"));break;case _m.HTTP_ERROR:const S=g.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){const x=g.getResponseJson().error;if(x&&x.status&&x.message){const L=function(q){const Z=q.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(Z)>=0?Z:le.UNKNOWN}(x.status);c(new xe(L,x.message))}else c(new xe(le.UNKNOWN,"Server responded with status "+g.getStatus()))}else c(new xe(le.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(s);g.send(t,"POST",v,r,15)})}wo(e,t,r){const s=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=X0(),c=ew(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new qD({})),this.lo(g.initMessageHeaders,t,r),(0,At.uI)()||(0,At.b$)()||(0,At.d)()||(0,At.w1)()||(0,At.Mn)()||(0,At.ru)()||(g.httpHeadersOverwriteParam="$httpHeaders");const v=s.join("");Fe("Connection","Creating WebChannel: "+v,g);const I=u.createWebChannel(v,g);let S=!1,x=!1;const L=new Fv({Jr:Z=>{x?Fe("Connection","Not sending because WebChannel is closed:",Z):(S||(Fe("Connection","Opening WebChannel transport."),I.open(),S=!0),Fe("Connection","WebChannel sending:",Z),I.send(Z))},Yr:()=>I.close()}),q=(Z,ye,Pe)=>{Z.listen(ye,pt=>{try{Pe(pt)}catch(mt){setTimeout(()=>{throw mt},0)}})};return q(I,Lf.EventType.OPEN,()=>{x||Fe("Connection","WebChannel transport opened.")}),q(I,Lf.EventType.CLOSE,()=>{x||(x=!0,Fe("Connection","WebChannel transport closed"),L.ro())}),q(I,Lf.EventType.ERROR,Z=>{x||(x=!0,uc("Connection","WebChannel transport errored:",Z),L.ro(new xe(le.UNAVAILABLE,"The operation could not be completed")))}),q(I,Lf.EventType.MESSAGE,Z=>{var ye;if(!x){const Pe=Z.data[0];xt(!!Pe);const pt=Pe,mt=pt.error||(null===(ye=pt[0])||void 0===ye?void 0:ye.error);if(mt){Fe("Connection","WebChannel received error:",mt);const It=mt.status;let ut=function(Ut){const sn=wr[Ut];if(void 0!==sn)return Ow(sn)}(It),kt=mt.message;void 0===ut&&(ut=le.INTERNAL,kt="Unknown error status: "+It+" with message "+mt.message),x=!0,L.ro(new xe(ut,kt)),I.close()}else Fe("Connection","WebChannel received:",Pe),L.oo(Pe)}}),q(c,tw.STAT_EVENT,Z=>{Z.stat===nw.PROXY?Fe("Connection","Detected buffering proxy"):Z.stat===nw.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.io()},0),L}}function Lv(){return"undefined"!=typeof window?window:null}function kc(){return"undefined"!=typeof document?document:null}function Fc(n){return new Bw(n,!0)}class Vb{constructor(e,t,r=1e3,s=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=s,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-r);s>0&&Fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Vv{constructor(e,t,r,s,u,c,g,v){this.Yn=e,this.Vo=r,this.vo=s,this.So=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Vb(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,be.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,be.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(hr(t.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===le.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Do===t&&this.Qo(r,s)},r=>{e(()=>{const s=new xe(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(s)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(s=>{r(()=>this.jo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.No.Ro((0,be.Z)(function*(){e.state=0,e.start()}))}jo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qC extends Vv{constructor(e,t,r,s,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function uS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:rt(),s=e.targetChange.targetIds||[],u=function(v,I){return v.N?(xt(void 0===I||"string"==typeof I),Xn.fromBase64String(I||"")):(xt(void 0===I||I instanceof Uint8Array),Xn.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,g=c&&function(v){const I=void 0===v.code?le.UNKNOWN:Ow(v.code);return new xe(I,v.message||"")}(c);t=new Fw(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=fa(n,r.document.name),u=zn(r.document.updateTime),c=new pi({mapValue:{fields:r.document.fields}}),g=_n.newFoundDocument(s,u,c);t=new Jf(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,s=fa(n,r.document),u=r.readTime?zn(r.readTime):bt.min(),c=_n.newNoDocument(s,u);t=new Jf([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,s=fa(n,r.document);t=new Jf([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return rt();{const r=e.filter,u=new Nw(r.count||0);t=new kw(r.targetId,u)}}var v;return t}(this.M,e),r=function(s){if(!("targetChange"in s))return bt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?bt.min():u.readTime?zn(u.readTime):bt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=mh(this.M),t.addTarget=function(s,u){let c;const g=u.target;return c=bm(g)?{documents:lv(s,g)}:{query:tp(s,g)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=ov(s,u.resumeToken):u.snapshotVersion.compareTo(bt.min())>0&&(c.readTime=gh(s,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function mC(n,e){const t=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=mh(this.M),t.removeTarget=e,this.Lo(t)}}class Ub extends Vv{constructor(e,t,r,s,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(xt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function lS(n,e){return n&&n.length>0?(xt(void 0!==e),n.map(t=>function(r,s){let u=zn(r.updateTime?r.updateTime:s);return u.isEqual(bt.min())&&(u=zn(s)),new Sw(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=zn(e.commitTime);return this.listener.tu(r,t)}return xt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=mh(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>km(this.M,r))};this.Lo(t)}}class Zm extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=s,this.su=!1}iu(){if(this.su)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.So.co(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(le.UNKNOWN,s.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.So._o(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(le.UNKNOWN,s.toString())})}terminate(){this.su=!0}}class Bb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(hr(t),this.uu=!1):Fe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class WC{constructor(e,t,r,s,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(g=>{r.enqueueAndForget((0,be.Z)(function*(){var v;hl(c)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,be.Z)(function*(I){const S=Ze(I);S.wu.add(4),yield Ip(S),S.yu.set("Unknown"),S.wu.delete(4),yield Lc(S)}),function(I){return v.apply(this,arguments)})(c))}))}),this.yu=new Bb(r,s)}}function Lc(n){return bp.apply(this,arguments)}function bp(){return bp=(0,be.Z)(function*(n){if(hl(n))for(const e of n.mu)yield e(!0)}),bp.apply(this,arguments)}function Ip(n){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,be.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Uv.apply(this,arguments)}function Ym(n,e){const t=Ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Xm(t)?Jm(t):Uc(t).Mo()&&Qm(t,e))}function Sh(n,e){const t=Ze(n),r=Uc(t);t._u.delete(e),r.Mo()&&jb(t,e),0===t._u.size&&(r.Mo()?r.$o():hl(t)&&t.yu.set("Unknown"))}function Qm(n,e){n.pu.Z(e.targetId),Uc(n).Ho(e)}function jb(n,e){n.pu.Z(e),Uc(n).Jo(e)}function Jm(n){n.pu=new Xf({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Uc(n).start(),n.yu.au()}function Xm(n){return hl(n)&&!Uc(n).ko()&&n._u.size>0}function hl(n){return 0===Ze(n).wu.size}function $b(n){n.pu=void 0}function Hb(n){return Bv.apply(this,arguments)}function Bv(){return Bv=(0,be.Z)(function*(n){n._u.forEach((e,t)=>{Qm(n,e)})}),Bv.apply(this,arguments)}function Gb(n,e){return ey.apply(this,arguments)}function ey(){return ey=(0,be.Z)(function*(n,e){$b(n),Xm(n)?(n.yu.lu(e),Jm(n)):n.yu.set("Unknown")}),ey.apply(this,arguments)}function zb(n,e,t){return ty.apply(this,arguments)}function ty(){return ty=(0,be.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof Fw&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(s,u){const c=u.cause;for(const g of u.targetIds)s._u.has(g)&&(yield s.remoteSyncer.rejectListen(g,c),s._u.delete(g),s.pu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ny(n,r)}else if(e instanceof Jf?n.pu.ut(e):e instanceof kw?n.pu._t(e):n.pu.ht(e),!t.isEqual(bt.min()))try{const r=yield Av(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const c=s.pu.yt(u);return c.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const I=s._u.get(v);I&&s._u.set(v,I.withResumeToken(g.resumeToken,u))}}),c.targetMismatches.forEach(g=>{const v=s._u.get(g);if(!v)return;s._u.set(g,v.withResumeToken(Xn.EMPTY_BYTE_STRING,v.snapshotVersion)),jb(s,g);const I=new lu(v.target,g,1,v.sequenceNumber);Qm(s,I)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield ny(n,r)}var r}),ty.apply(this,arguments)}function ny(n,e,t){return jv.apply(this,arguments)}function jv(){return jv=(0,be.Z)(function*(n,e,t){if(!Dc(e))throw e;n.wu.add(1),yield Ip(n),n.yu.set("Offline"),t||(t=()=>Av(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Lc(n)}))}),jv.apply(this,arguments)}function KC(n,e){return e().catch(t=>ny(n,t,e))}function Vc(n){return qb.apply(this,arguments)}function qb(){return qb=(0,be.Z)(function*(n){const e=Ze(n),t=hu(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;cS(e);)try{const s=yield BC(e.localStore,r);if(null===s){0===e.du.length&&t.$o();break}r=s.batchId,dS(e,s)}catch(s){yield ny(e,s)}ZC(e)&&YC(e)}),qb.apply(this,arguments)}function cS(n){return hl(n)&&n.du.length<10}function dS(n,e){n.du.push(e);const t=hu(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function ZC(n){return hl(n)&&!hu(n).ko()&&n.du.length>0}function YC(n){hu(n).start()}function hS(n){return Wb.apply(this,arguments)}function Wb(){return Wb=(0,be.Z)(function*(n){hu(n).nu()}),Wb.apply(this,arguments)}function fS(n){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,be.Z)(function*(n){const e=hu(n);for(const t of n.du)e.Zo(t.mutations)}),Mh.apply(this,arguments)}function pS(n,e,t){return ry.apply(this,arguments)}function ry(){return ry=(0,be.Z)(function*(n,e,t){const r=n.du.shift(),s=sp.from(r,e,t);yield KC(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Vc(n)}),ry.apply(this,arguments)}function $v(n,e){return iy.apply(this,arguments)}function iy(){return iy=(0,be.Z)(function*(n,e){var t;e&&hu(n).Xo&&(yield(t=(0,be.Z)(function*(r,s){if(Rw(u=s.code)&&u!==le.ABORTED){const c=r.du.shift();hu(r).Fo(),yield KC(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,s)),yield Vc(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),ZC(n)&&YC(n)}),iy.apply(this,arguments)}function Hv(n,e){return Kb.apply(this,arguments)}function Kb(){return Kb=(0,be.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=hl(t);t.wu.add(3),yield Ip(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Lc(t)}),Kb.apply(this,arguments)}function Dp(n,e){return sy.apply(this,arguments)}function sy(){return sy=(0,be.Z)(function*(n,e){const t=Ze(n);e?(t.wu.delete(2),yield Lc(t)):e||(t.wu.add(2),yield Ip(t),t.yu.set("Unknown"))}),sy.apply(this,arguments)}function Uc(n){return n.Iu||(n.Iu=function(e,t,r){const s=Ze(e);return s.iu(),new qC(t,s.So,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Xr:Hb.bind(null,n),eo:Gb.bind(null,n),zo:zb.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Fo(),Xm(n)?Jm(n):n.yu.set("Unknown")):(yield n.Iu.stop(),$b(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function hu(n){return n.Tu||(n.Tu=function(e,t,r){const s=Ze(e);return s.iu(),new Ub(t,s.So,s.authCredentials,s.appCheckCredentials,s.M,r)}(n.datastore,n.asyncQueue,{Xr:hS.bind(null,n),eo:$v.bind(null,n),eu:fS.bind(null,n),tu:pS.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Tu.Fo(),yield Vc(n)):(yield n.Tu.stop(),n.du.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class Zb{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,s,u){const c=Date.now()+r,g=new Zb(e,t,c,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bc(n,e){if(hr("AsyncQueue",`${e}: ${n}`),Dc(n))return new xe(le.UNAVAILABLE,`${e}: ${n}`);throw n}class xh{constructor(e){this.comparator=e?(t,r)=>e(t,r)||He.comparator(t.key,r.key):(t,r)=>He.comparator(t.key,r.key),this.keyedMap=hh(),this.sortedSet=new vn(this.comparator)}static emptySet(e){return new xh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new xh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class oy{constructor(){this.Eu=new vn(He.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):rt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Nh{constructor(e,t,r,s,u,c,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=g,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,s){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new Nh(e,t,xh.emptySet(t),u,r,s,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class gS{constructor(){this.Ru=void 0,this.listeners=[]}}class mS{constructor(){this.queries=new al(e=>nv(e),uh),this.onlineState="Unknown",this.bu=new Set}}function Yb(n,e){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,be.Z)(function*(n,e){const t=Ze(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new gS),s)try{u.Ru=yield t.onListen(r)}catch(c){const g=Bc(c,`Initialization of query '${Cm(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&Cp(t)}),Gv.apply(this,arguments)}function zv(n,e){return qv.apply(this,arguments)}function qv(){return qv=(0,be.Z)(function*(n,e){const t=Ze(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),qv.apply(this,arguments)}function yS(n,e){const t=Ze(n);let r=!1;for(const s of e){const c=t.queries.get(s.query);if(c){for(const g of c.listeners)g.Vu(s)&&(r=!0);c.Ru=s}}r&&Cp(t)}function QC(n,e,t){const r=Ze(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function Cp(n){n.bu.forEach(e=>{e.next()})}class Wv{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Nh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Nh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class bo{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class Qb{constructor(e){this.M=e}wi(e){return fa(this.M,e)}mi(e){return e.metadata.exists?Hw(this.M,e.document,!1):_n.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return zn(e)}}class Kv{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Jb(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Wt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Qb(this.M);for(const s of e)if(s.metadata.queries){const u=r.wi(s.metadata.name);for(const c of s.metadata.queries){const g=(t.get(c)||rn()).add(u);t.set(c,g)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function jC(n,e,t,r){return Nv.apply(this,arguments)}(e.localStore,new Qb(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const s of e.queries)yield $C(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Jb(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Xb{constructor(e){this.key=e}}class ay{constructor(e){this.key=e}}class Zv{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=rn(),this.mutatedKeys=rn(),this.Gu=vw(e),this.Qu=new xh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new oy,s=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=s,g=!1;const v="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,I="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,x)=>{const L=s.get(S),q=rv(this.query,x)?x:null,Z=!!L&&this.mutatedKeys.has(L.key),ye=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Pe=!1;L&&q?L.data.isEqual(q.data)?Z!==ye&&(r.track({type:3,doc:q}),Pe=!0):this.Hu(L,q)||(r.track({type:2,doc:q}),Pe=!0,(v&&this.Gu(q,v)>0||I&&this.Gu(q,I)<0)&&(g=!0)):!L&&q?(r.track({type:0,doc:q}),Pe=!0):L&&!q&&(r.track({type:1,doc:L}),Pe=!0,(v||I)&&(g=!0)),Pe&&(q?(c=c.add(q),u=ye?u.add(S):u.delete(S)):(c=c.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const S="F"===this.query.limitType?c.last():c.first();c=c.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:c,zu:r,ii:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((I,S)=>function(x,L){const q=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return q(x)-q(L)}(I.type,S.type)||this.Gu(I.doc,S.doc)),this.Ju(r);const c=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,v=g!==this.qu;return this.qu=g,0!==u.length||v?{snapshot:new Nh(this.query,e.Qu,s,u,e.mutatedKeys,0===g,v,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new oy,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=rn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new ay(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Xb(r))}),t}ta(e){this.Uu=e._i,this.Ku=rn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Nh.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class eI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JC{constructor(e){this.key=e,this.na=!1}}class tI{constructor(e,t,r,s,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new al(g=>nv(g),uh),this.ra=new Map,this.oa=new Set,this.ua=new vn(He.comparator),this.aa=new Map,this.ca=new qm,this.ha={},this.la=new Map,this.fa=xc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function nI(n,e){return Yv.apply(this,arguments)}function Yv(){return Yv=(0,be.Z)(function*(n,e){const t=lE(n);let r,s;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.ea();else{const c=yield Th(t.localStore,cs(e));t.isPrimaryClient&&Ym(t.remoteStore,c);const g=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,s=yield Qv(t,e,r,"current"===g)}return s}),Yv.apply(this,arguments)}function Qv(n,e,t,r){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,be.Z)(function*(n,e,t,r){n._a=(S,x,L)=>{return(q=(0,be.Z)(function*(Z,ye,Pe,pt){let mt=ye.view.Wu(Pe);mt.ii&&(mt=yield Ah(Z.localStore,ye.query,!1).then(({documents:kt})=>ye.view.Wu(kt,mt)));const It=pt&&pt.targetChanges.get(ye.targetId),ut=ye.view.applyChanges(mt,Z.isPrimaryClient,It);return cy(Z,ye.targetId,ut.Xu),ut.snapshot}),function(Z,ye,Pe,pt){return q.apply(this,arguments)})(n,S,x,L);var q};const s=yield Ah(n.localStore,e,!0),u=new Zv(e,s._i),c=u.Wu(s.documents),g=ph.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=u.applyChanges(c,n.isPrimaryClient,g);cy(n,t,v.Xu);const I=new eI(e,t,u);return n.ia.set(e,I),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),v.snapshot}),Tp.apply(this,arguments)}function Io(n,e){return Jv.apply(this,arguments)}function Jv(){return Jv=(0,be.Z)(function*(n,e){const t=Ze(n),r=t.ia.get(e),s=t.ra.get(r.targetId);if(s.length>1)return t.ra.set(r.targetId,s.filter(u=>!uh(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield _p(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Sh(t.remoteStore,r.targetId),jc(t,r.targetId)}).catch(Nc))):(jc(t,r.targetId),yield _p(t.localStore,r.targetId,!0))}),Jv.apply(this,arguments)}function Xv(){return Xv=(0,be.Z)(function*(n,e,t){const r=Np(n);try{const s=yield function(u,c){const g=Ze(u),v=Jn.now(),I=c.reduce((x,L)=>x.add(L.key),rn());let S;return g.persistence.runTransaction("Locally write mutations","readwrite",x=>g.fi.Ks(x,I).next(L=>{S=L;const q=[];for(const Z of c){const ye=xw(Z,S.get(Z.key));null!=ye&&q.push(new wc(Z.key,ye,fw(ye.value.mapValue),tr.exists(!0)))}return g.Bs.addMutationBatch(x,v,q,c)})).then(x=>(x.applyToLocalDocumentSet(S),{batchId:x.batchId,changes:S}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,g){let v=u.ha[u.currentUser.toKey()];v||(v=new vn(Lt)),v=v.insert(c,g),u.ha[u.currentUser.toKey()]=v}(r,s.batchId,t),yield fu(r,s.changes),yield Vc(r.remoteStore)}catch(s){const u=Bc(s,"Failed to persist write");t.reject(u)}}),Xv.apply(this,arguments)}function eE(n,e){return tE.apply(this,arguments)}function tE(){return tE=(0,be.Z)(function*(n,e){const t=Ze(n);try{const r=yield Sv(t.localStore,e);e.targetChanges.forEach((s,u)=>{const c=t.aa.get(u);c&&(xt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?c.na=!0:s.modifiedDocuments.size>0?xt(c.na):s.removedDocuments.size>0&&(xt(c.na),c.na=!1))}),yield fu(t,r,e)}catch(r){yield Nc(r)}}),tE.apply(this,arguments)}function rI(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ia.forEach((u,c)=>{const g=c.view.Pu(e);g.snapshot&&s.push(g.snapshot)}),function(u,c){const g=Ze(u);g.onlineState=c;let v=!1;g.queries.forEach((I,S)=>{for(const x of S.listeners)x.Pu(c)&&(v=!0)}),v&&Cp(g)}(r.eventManager,e),s.length&&r.sa.zo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iI(n,e,t){return nE.apply(this,arguments)}function nE(){return nE=(0,be.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.aa.get(e),u=s&&s.key;if(u){let c=new vn(He.comparator);c=c.insert(u,_n.newNoDocument(u,bt.min()));const g=rn().add(u),v=new fh(bt.min(),new Map,new pn(Lt),c,g);yield eE(r,v),r.ua=r.ua.remove(u),r.aa.delete(e),iE(r)}else yield _p(r.localStore,e,!1).then(()=>jc(r,e,t)).catch(Nc)}),nE.apply(this,arguments)}function vS(n,e){return uy.apply(this,arguments)}function uy(){return uy=(0,be.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const s=yield Ab(t.localStore,e);Sp(t,r,null),Ap(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fu(t,s)}catch(s){yield Nc(s)}}),uy.apply(this,arguments)}function sI(n,e,t){return rE.apply(this,arguments)}function rE(){return rE=(0,be.Z)(function*(n,e,t){const r=Ze(n);try{const s=yield function(u,c){const g=Ze(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return g.Bs.lookupMutationBatch(v,c).next(S=>(xt(null!==S),I=S.keys(),g.Bs.removeMutationBatch(v,S))).next(()=>g.Bs.performConsistencyCheck(v)).next(()=>g.fi.Ks(v,I))})}(r.localStore,e);Sp(r,e,t),Ap(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fu(r,s)}catch(s){yield Nc(s)}}),rE.apply(this,arguments)}function ly(){return ly=(0,be.Z)(function*(n,e){const t=Ze(n);hl(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ze(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>c.Bs.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.la.get(r)||[];s.push(e),t.la.set(r,s)}catch(r){const s=Bc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),ly.apply(this,arguments)}function Ap(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function Sp(n,e,t){const r=Ze(n);let s=r.ha[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.ha[r.currentUser.toKey()]=s}}function jc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||oI(n,r)})}function oI(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Sh(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),iE(n))}function cy(n,e,t){for(const r of t)r instanceof Xb?(n.ca.addReference(r.key,e),aI(n,r)):r instanceof ay?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||oI(n,r.key)):rt()}function aI(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.oa.add(r),iE(n))}function iE(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new He(Wt.fromString(e)),r=n.fa.next();n.aa.set(r,new JC(t)),n.ua=n.ua.insert(t,r),Ym(n.remoteStore,new lu(cs(yc(t.path)),r,2,us.A))}}function fu(n,e,t){return uI.apply(this,arguments)}function uI(){return uI=(0,be.Z)(function*(n,e,t){const r=Ze(n),s=[],u=[],c=[];var g;r.ia.isEmpty()||(r.ia.forEach((g,v)=>{c.push(r._a(v,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,I.fromCache?"not-current":"current"),s.push(I);const S=Cv.Ys(v.targetId,I);u.push(S)}}))}),yield Promise.all(c),r.sa.zo(s),yield(g=(0,be.Z)(function*(v,I){const S=Ze(v);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>de.forEach(I,L=>de.forEach(L.Hs,q=>S.persistence.referenceDelegate.addReference(x,L.targetId,q)).next(()=>de.forEach(L.Js,q=>S.persistence.referenceDelegate.removeReference(x,L.targetId,q)))))}catch(x){if(!Dc(x))throw x;Fe("LocalStore","Failed to update sequence numbers: "+x)}for(const x of I){const L=x.targetId;if(!x.fromCache){const q=S.ui.get(L),ye=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);S.ui=S.ui.insert(L,ye)}}}),function(v,I){return g.apply(this,arguments)})(r.localStore,u))}),uI.apply(this,arguments)}function ES(n,e){return dy.apply(this,arguments)}function dy(){return dy=(0,be.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield Tb(t.localStore,e);t.currentUser=e,(s=t).la.forEach(c=>{c.forEach(g=>{g.reject(new xe(le.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fu(t,r.di)}var s}),dy.apply(this,arguments)}function eT(n,e){const t=Ze(n),r=t.aa.get(e);if(r&&r.na)return rn().add(r.key);{let s=rn();const u=t.ra.get(e);if(!u)return s;for(const c of u){const g=t.ia.get(c);s=s.unionWith(g.view.ju)}return s}}function tT(n,e){return sE.apply(this,arguments)}function sE(){return sE=(0,be.Z)(function*(n,e){const t=Ze(n),r=yield Ah(t.localStore,e.query,!0),s=e.view.ta(r);return t.isPrimaryClient&&cy(t,e.targetId,s.Xu),s}),sE.apply(this,arguments)}function wS(n,e){return lI.apply(this,arguments)}function lI(){return lI=(0,be.Z)(function*(n,e){const t=Ze(n);return Gm(t.localStore,e).then(r=>fu(t,r))}),lI.apply(this,arguments)}function bS(n,e,t,r){return cI.apply(this,arguments)}function cI(){return cI=(0,be.Z)(function*(n,e,t,r){const s=Ze(n),u=yield function(c,g){const v=Ze(c),I=Ze(v.Bs);return v.persistence.runTransaction("Lookup mutation documents","readonly",S=>I.fn(S,g).next(x=>x?v.fi.Ks(S,x):de.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield Vc(s.remoteStore):"acknowledged"===t||"rejected"===t?(Sp(s,e,r||null),Ap(s,e),g=e,Ze(Ze(s.localStore).Bs)._n(g)):rt(),yield fu(s,u)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),cI.apply(this,arguments)}function oE(){return oE=(0,be.Z)(function*(n,e){const t=Ze(n);if(lE(t),Np(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield Mp(t,r.toArray());t.da=!0,yield Dp(t.remoteStore,!0);for(const u of s)Ym(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let s=Promise.resolve();t.ra.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):s=s.then(()=>(jc(t,c),_p(t.localStore,c,!0))),Sh(t.remoteStore,c)}),yield s,yield Mp(t,r),function(u){const c=Ze(u);c.aa.forEach((g,v)=>{Sh(c.remoteStore,v)}),c.ca.Si(),c.aa=new Map,c.ua=new vn(He.comparator)}(t),t.da=!1,yield Dp(t.remoteStore,!1)}}),oE.apply(this,arguments)}function Mp(n,e,t){return aE.apply(this,arguments)}function aE(){return aE=(0,be.Z)(function*(n,e,t){const r=Ze(n),s=[],u=[];for(const c of e){let g;const v=r.ra.get(c);if(v&&0!==v.length){g=yield Th(r.localStore,cs(v[0]));for(const I of v){const S=r.ia.get(I),x=yield tT(r,S);x.snapshot&&u.push(x.snapshot)}}else{const I=yield xv(r.localStore,c);g=yield Th(r.localStore,I),yield Qv(r,dI(I),c,!1)}s.push(g)}return r.sa.zo(u),s}),aE.apply(this,arguments)}function dI(n){return X_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function hI(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Fs()}function $c(n,e,t,r){return hy.apply(this,arguments)}function hy(){return hy=(0,be.Z)(function*(n,e,t,r){const s=Ze(n);if(s.da)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const u=s.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Gm(s.localStore,_w(u[0])),g=fh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield fu(s,c,g);break}case"rejected":yield _p(s.localStore,e,!0),jc(s,e,r);break;default:rt()}}),hy.apply(this,arguments)}function uE(n,e,t){return xp.apply(this,arguments)}function xp(){return xp=(0,be.Z)(function*(n,e,t){const r=lE(n);if(r.da){for(const s of e){if(r.ra.has(s)){Fe("SyncEngine","Adding an already active target "+s);continue}const u=yield xv(r.localStore,s),c=yield Th(r.localStore,u);yield Qv(r,dI(u),c.targetId,!1),Ym(r.remoteStore,c)}for(const s of t)r.ra.has(s)&&(yield _p(r.localStore,s,!1).then(()=>{Sh(r.remoteStore,s),jc(r,s)}).catch(Nc))}}),xp.apply(this,arguments)}function lE(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iI.bind(null,e),e.sa.zo=yS.bind(null,e.eventManager),e.sa.wa=QC.bind(null,e.eventManager),e}function Np(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sI.bind(null,e),e}class Rp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.M=Fc(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return yp(this.persistence,new Cb,e.initialUser,this.M)}ya(e){return new Rb(Wm.Yi,this.M)}ga(e){return new Pb}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class nT extends Rp{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield Np(r.Ta.syncEngine),yield Vc(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return yp(this.persistence,new Cb,e.initialUser,this.M)}pa(e){return new _b(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Oc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new $s(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Lv(),kc(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Pb}}class DS extends nT{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const s=r.Ta.syncEngine;r.sharedClientState instanceof wp&&(r.sharedClientState.syncEngine={$r:bS.bind(null,s),Br:$c.bind(null,s),Lr:uE.bind(null,s),Fs:hI.bind(null,s),Fr:wS.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,be.Z)(function*(c){yield function IS(n,e){return oE.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}ga(e){const t=Lv();if(!wp.vt(t))throw new xe(le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Oc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wp(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class fI{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>rI(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=ES.bind(null,r.syncEngine),yield Dp(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new mS}createDatastore(e){const t=Fc(e.databaseInfo.databaseId),r=new Lb(e.databaseInfo);return new Zm(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>rI(this.syncEngine,g,0),c=Fb.vt()?new Fb:new kb,new WC(t,r,s,u,c);var t,r,s,u,c}createSyncEngine(e,t){return function(r,s,u,c,g,v,I){const S=new tI(r,s,u,c,g,v);return I&&(S.da=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=Ze(t);Fe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Ip(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function rT(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Op{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class iT{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new qr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,be.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),s=Number(r);isNaN(s)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(s);return new bo(JSON.parse(u),t.length+s)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,be.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,be.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class sT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,be.Z)(function*(u,c){const g=Ze(u),v=mh(g.M)+"/documents",I={documents:c.map(q=>ep(g.M,q))},S=yield g._o("BatchGetDocuments",v,I),x=new Map;S.forEach(q=>{const Z=function gC(n,e){return"found"in e?function(t,r){xt(!!r.found);const s=fa(t,r.found.name),u=zn(r.found.updateTime),c=new pi({mapValue:{fields:r.found.fields}});return _n.newFoundDocument(s,u,c)}(n,e):"missing"in e?function(t,r){xt(!!r.missing),xt(!!r.readTime);const s=fa(t,r.missing),u=zn(r.readTime);return _n.newNoDocument(s,u)}(n,e):rt()}(g.M,q);x.set(Z.key.toString(),Z)});const L=[];return c.forEach(q=>{const Z=x.get(q.toString());xt(!!Z),L.push(Z)}),L}),function(u,c){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=He.fromPath(s);e.mutations.push(new xm(u,e.precondition(u)))}),yield(r=(0,be.Z)(function*(s,u){const c=Ze(s),g=mh(c.M)+"/documents",v={writes:u.map(I=>km(c.M,I))};yield c.co("Commit",g,v)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?tr.updateTime(t):tr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new xe(le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tr.updateTime(t)}return tr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class oT{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.xa=r.maxAttempts,this.No=new Vb(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,be.Z)(function*(){const t=new sT(e.datastore),r=e.ka(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Ma(u)}))}).catch(s=>{e.Ma(s)})}))}ka(e){try{const t=this.updateFunction(e);return!Bf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Rw(t)}return!1}}class aT{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Rr.UNAUTHENTICATED,this.clientId=aw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,be.Z)(function*(g){Fe("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Fe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(le.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Bc(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function dE(n,e){return fy.apply(this,arguments)}function fy(){return fy=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,be.Z)(function*(u){r.isEqual(u)||(yield Tb(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),fy.apply(this,arguments)}function hE(n,e){return fE.apply(this,arguments)}function fE(){return fE=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield pE(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>Hv(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>Hv(e.remoteStore,u)),n.onlineComponents=e}),fE.apply(this,arguments)}function pE(n){return py.apply(this,arguments)}function py(){return py=(0,be.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield dE(n,new Rp)),n.offlineComponents}),py.apply(this,arguments)}function Rh(n){return pI.apply(this,arguments)}function pI(){return pI=(0,be.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield hE(n,new fI)),n.onlineComponents}),pI.apply(this,arguments)}function gE(n){return pE(n).then(e=>e.persistence)}function Pp(n){return pE(n).then(e=>e.localStore)}function gI(n){return Rh(n).then(e=>e.remoteStore)}function mE(n){return Rh(n).then(e=>e.syncEngine)}function kp(n){return mI.apply(this,arguments)}function mI(){return mI=(0,be.Z)(function*(n){const e=yield Rh(n),t=e.eventManager;return t.onListen=nI.bind(null,e.syncEngine),t.onUnlisten=Io.bind(null,e.syncEngine),t}),mI.apply(this,arguments)}function cT(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(s,u,c,g,v){const I=new Op({next:x=>{u.enqueueAndForget(()=>zv(s,S));const L=x.docs.has(c);!L&&x.fromCache?v.reject(new xe(le.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&x.fromCache&&g&&"server"===g.source?v.reject(new xe(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new Wv(yc(c.path),I,{includeMetadataChanges:!0,ku:!0});return Yb(s,S)}(yield kp(n),n.asyncQueue,e,t,r)})),r.promise}function dT(n,e,t={}){const r=new qr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(s,u,c,g,v){const I=new Op({next:x=>{u.enqueueAndForget(()=>zv(s,S)),x.fromCache&&"server"===g.source?v.reject(new xe(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new Wv(c,I,{includeMetadataChanges:!0,ku:!0});return Yb(s,S)}(yield kp(n),n.asyncQueue,e,t,r)})),r.promise}const fT=new Map;function yI(n,e,t){if(!t)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function pT(n,e,t,r){if(!0===e&&!0===r)throw new xe(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function i(n){if(!He.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function o(n){if(He.isDocumentKey(n))throw new xe(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function a(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function l(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=a(n);throw new xe(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function d(n,e){if(e<=0)throw new xe(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class p{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,pT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p({}),this._settingsFrozen=!1,e instanceof la?this._databaseId=e:(this._app=e,this._databaseId=function(s){if(!Object.prototype.hasOwnProperty.apply(s.options,["projectId"]))throw new xe(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(s.options.projectId)}(e))}get app(){if(!this._app)throw new xe(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new th;switch(t.type){case"gapi":const r=t.client;return xt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new ow(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xe(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=fT.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),fT.delete(e),t.terminate())}(this),Promise.resolve()}}class b{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new M(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new b(this.firestore,e,this._key)}}class T{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new T(this.firestore,e,this._query)}}class M extends T{constructor(e,t,r){super(e,t,yc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new b(this.firestore,null,new He(e))}withConverter(e){return new M(this.firestore,e,this._path)}}function k(n,e,...t){if(n=(0,At.m9)(n),yI("collection","path",e),n instanceof _){const r=Wt.fromString(e,...t);return o(r),new M(n,null,r)}{if(!(n instanceof b||n instanceof M))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return o(r),new M(n.firestore,null,r)}}function Q(n,e,...t){if(n=(0,At.m9)(n),1===arguments.length&&(e=aw.R()),yI("doc","path",e),n instanceof _){const r=Wt.fromString(e,...t);return i(r),new b(n,null,new He(r))}{if(!(n instanceof b||n instanceof M))throw new xe(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Wt.fromString(e,...t));return i(r),new b(n.firestore,n instanceof M?n.converter:null,new He(r))}}function _e(n,e){return n=(0,At.m9)(n),e=(0,At.m9)(e),(n instanceof b||n instanceof M)&&(e instanceof b||e instanceof M)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ke(n,e){return n=(0,At.m9)(n),e=(0,At.m9)(e),n instanceof T&&e instanceof T&&n.firestore===e.firestore&&uh(n._query,e._query)&&n.converter===e.converter}class Ge{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Vb(this,"async_queue_retry"),this.Qa=()=>{const t=kc();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=kc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=kc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new qr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,be.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Dc(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,hr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const s=Zb.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(s),s}ja(){this.Ua&&rt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function et(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class Se{constructor(){this._progressObserver={},this._taskCompletionResolver=new qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class st extends _{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new Ge,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||gy(this),this._firestoreClient.terminate()}}function wn(n){return n._firestoreClient||gy(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function gy(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new j_(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new aT(n._authCredentials,n._appCheckCredentials,n._queue,r)}function my(n,e,t){const r=new qr;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield dE(n,t),yield hE(n,e),r.resolve()}catch(s){if(!("FirebaseError"===(u=s).name?u.code===le.FAILED_PRECONDITION||u.code===le.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function xS(n){if(n._initialized||n._terminated)throw new xe(le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fl(Xn.fromBase64String(e))}catch(t){throw new xe(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fl(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fp{constructor(e){this._methodName=e}}class vI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const vR=/^__.*__$/;class ER{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new wc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yf(e,this.data,t,this.fieldTransforms)}}class NS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function RS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class EI{constructor(e,t,r,s,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=s,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new EI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.nc({path:r,ic:!1});return s.rc(e),s}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.nc({path:r,ic:!1});return s.tc(),s}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return II(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(RS(this.ec)&&vR.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class wR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Fc(e)}lc(e,t,r,s=!1){return new EI({ec:e,methodName:t,hc:r,path:Bn.emptyPath(),ic:!1,cc:s},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Lp(n){const e=n._freezeSettings(),t=Fc(n._databaseId);return new wR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wI(n,e,t,r,s,u={}){const c=n.lc(u.merge||u.mergeFields?2:0,e,t,s);_T("Data must be an object, but it was:",c,r);const g=kS(r,c);let v,I;if(u.merge)v=new cc(c.fieldMask),I=c.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const L=vT(e,x,t);if(!c.contains(L))throw new xe(le.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);LS(S,L)||S.push(L)}v=new cc(S),I=c.fieldTransforms.filter(x=>v.covers(x.field))}else v=null,I=c.fieldTransforms;return new ER(new pi(g),v,I)}class IE extends Fp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof IE}}function OS(n,e,t){return new EI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class gT extends Fp{_toFieldTransform(e){return new dh(e.path,new lh)}isEqual(e){return e instanceof gT}}class bR extends Fp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=OS(this,e,!0),r=this.fc.map(u=>Vp(u,t)),s=new vc(r);return new dh(e.path,s)}isEqual(e){return this===e}}class IR extends Fp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=OS(this,e,!0),r=this.fc.map(u=>Vp(u,t)),s=new Ec(r);return new dh(e.path,s)}isEqual(e){return this===e}}class DR extends Fp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new ch(e.M,bw(e.M,this.dc));return new dh(e.path,t)}isEqual(e){return this===e}}function mT(n,e,t,r){const s=n.lc(1,e,t);_T("Data must be an object, but it was:",s,r);const u=[],c=pi.empty();ru(r,(v,I)=>{const S=bI(e,v,t);I=(0,At.m9)(I);const x=s.oc(S);if(I instanceof IE)u.push(S);else{const L=Vp(I,x);null!=L&&(u.push(S),c.set(S,L))}});const g=new cc(u);return new NS(c,g,s.fieldTransforms)}function yT(n,e,t,r,s,u){const c=n.lc(1,e,t),g=[vT(e,r,t)],v=[s];if(u.length%2!=0)throw new xe(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)g.push(vT(e,u[L])),v.push(u[L+1]);const I=[],S=pi.empty();for(let L=g.length-1;L>=0;--L)if(!LS(I,g[L])){const q=g[L];let Z=v[L];Z=(0,At.m9)(Z);const ye=c.oc(q);if(Z instanceof IE)I.push(q);else{const Pe=Vp(Z,ye);null!=Pe&&(I.push(q),S.set(q,Pe))}}const x=new cc(I);return new NS(S,x,c.fieldTransforms)}function PS(n,e,t,r=!1){return Vp(t,n.lc(r?4:3,e))}function Vp(n,e){if(FS(n=(0,At.m9)(n)))return _T("Unsupported field value:",e,n),kS(n,e);if(n instanceof Fp)return function(t,r){if(!RS(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const c of t){let g=Vp(c,r.uc(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,At.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Jn.fromDate(t);return{timestampValue:gh(r.M,s)}}if(t instanceof Jn){const s=new Jn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gh(r.M,s)}}if(t instanceof vI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fl)return{bytesValue:ov(r.M,t._byteString)};if(t instanceof b){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ic(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${a(t)}`)}(n,e)}function kS(n,e){const t={};return eC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ru(n,(r,s)=>{const u=Vp(s,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function FS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Jn||n instanceof vI||n instanceof fl||n instanceof b||n instanceof Fp)}function _T(n,e,t){if(!FS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=a(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function vT(n,e,t){if((e=(0,At.m9)(e))instanceof Hc)return e._internalPath;if("string"==typeof e)return bI(n,e);throw II("Field path arguments must be of type string or ",n,!1,void 0,t)}const CR=new RegExp("[~\\*/\\[\\]]");function bI(n,e,t){if(e.search(CR)>=0)throw II(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hc(...e.split("."))._internalPath}catch(r){throw II(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function II(n,e,t,r,s){const u=r&&!r.isEmpty(),c=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||c)&&(v+=" (found",u&&(v+=` in field ${r}`),c&&(v+=` in document ${s}`),v+=")"),new xe(le.INVALID_ARGUMENT,g+n+v)}function LS(n,e){return n.some(t=>t.isEqual(e))}class DE{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new b(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new TR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(DI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class TR extends DE{data(){return super.data()}}function DI(n,e){return"string"==typeof e?bI(n,e):e instanceof Hc?e._internalPath:e._delegate._internalPath}class Up{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gc extends DE{constructor(e,t,r,s,u,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new CE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(DI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class CE extends Gc{data(e={}){return super.data(e)}}class Oh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Up(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new CE(this._firestore,this._userDataWriter,r.key,r,new Up(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new CE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Up(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||3!==c.type).map(c=>{const g=new CE(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Up(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,I=-1;return 0!==c.type&&(v=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),I=u.indexOf(c.doc.key)),{type:AR(c.type),doc:g,oldIndex:v,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function AR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function VS(n,e){return n instanceof Gc&&e instanceof Gc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Oh&&e instanceof Oh&&n._firestore===e._firestore&&ke(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function US(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class TE{}function Ph(n,...e){for(const t of e)n=t._apply(n);return n}class SR extends TE{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Lp(e.firestore),r=function(s,u,c,g,v,I,S){let x;if(v.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){zS(S,I);const q=[];for(const Z of S)q.push(GS(g,s,Z));x={arrayValue:{values:q}}}else x=GS(g,s,S)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||zS(S,I),x=PS(c,"where",S,"in"===I||"not-in"===I);const L=Or.create(v,I,x);return function(q,Z){if(Z.S()){const Pe=Im(q);if(null!==Pe&&!Pe.isEqual(Z.field))throw new xe(le.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pe.toString()}' and '${Z.field.toString()}'`);const pt=ah(q);null!==pt&&qS(0,Z.field,pt)}const ye=function(Pe,pt){for(const mt of Pe.filters)if(pt.indexOf(mt.op)>=0)return mt.op;return null}(q,function(Pe){switch(Pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Z.op));if(null!==ye)throw new xe(le.INVALID_ARGUMENT,ye===Z.op?`Invalid query. You cannot use more than one '${Z.op.toString()}' filter.`:`Invalid query. You cannot use '${Z.op.toString()}' filters with '${ye.toString()}' filters.`)}(s,L),L}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new T(e.firestore,e.converter,function(s,u){const c=s.filters.concat([u]);return new au(s.path,s.collectionGroup,s.explicitOrderBy.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}class xR extends TE{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new oh(s,u);return function(g,v){if(null===ah(g)){const I=Im(g);null!==I&&qS(0,I,v.field)}}(r,c),c}(e._query,this._c,this.gc);return new T(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new au(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class BS extends TE{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new T(e.firestore,e.converter,tv(e._query,this.yc,this.Ic))}}class jS extends TE{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=HS(e,this.type,this.Tc,this.Ec);return new T(e.firestore,e.converter,(s=t,new au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class $S extends TE{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=HS(e,this.type,this.Tc,this.Ec);return new T(e.firestore,e.converter,(s=t,new au((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function HS(n,e,t,r){if(t[0]=(0,At.m9)(t[0]),t[0]instanceof DE)return function(s,u,c,g,v){if(!g)throw new xe(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const I=[];for(const S of _c(s))if(S.field.isKeyField())I.push(pc(u,g.key));else{const x=g.data.field(S.field);if(uw(x))throw new xe(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const L=S.field.canonicalString();throw new xe(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(x)}return new ou(I,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Lp(n.firestore);return function(u,c,g,v,I,S){const x=u.explicitOrderBy;if(I.length>x.length)throw new xe(le.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let q=0;q<I.length;q++){const Z=I[q];if(x[q].field.isKeyField()){if("string"!=typeof Z)throw new xe(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof Z}`);if(!Dm(u)&&-1!==Z.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${Z}' contains a slash.`);const ye=u.path.child(Wt.fromString(Z));if(!He.isDocumentKey(ye))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const Pe=new He(ye);L.push(pc(c,Pe))}else{const ye=PS(g,v,Z);L.push(ye)}}return new ou(L,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function GS(n,e,t){if("string"==typeof(t=(0,At.m9)(t))){if(""===t)throw new xe(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dm(e)&&-1!==t.indexOf("/"))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Wt.fromString(t));if(!He.isDocumentKey(r))throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pc(n,new He(r))}if(t instanceof b)return pc(n,t._key);throw new xe(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${a(t)}.`)}function zS(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(le.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function qS(n,e,t){if(!t.isEqual(e))throw new xe(le.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const VR={maxAttempts:5};class ET{convertValue(e,t="none"){switch(fc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(iu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return ru(e.fields,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new vI(An(e.latitude),An(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=lw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dc(e));default:return null}}convertTimestamp(e){const t=_o(e);return new Jn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Wt.fromString(e);xt(Ww(r));const s=new la(r.get(1),r.get(3)),u=new He(r.popFirst(5));return s.isEqual(t)||hr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function CI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UR extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new b(this.firestore,null,t)}}class WS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lp(e)}set(e,t,r){this._verifyNotCommitted();const s=kh(e,this._firestore),u=CI(s.converter,t,r),c=wI(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(c.toMutation(s._key,tr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=kh(e,this._firestore);let c;return c="string"==typeof(t=(0,At.m9)(t))||t instanceof Hc?yT(this._dataReader,"WriteBatch.update",u._key,t,r,s):mT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kh(e,this._firestore);return this._mutations=this._mutations.concat(new Mm(t._key,tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kh(n,e){if((n=(0,At.m9)(n)).firestore!==e)throw new xe(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Bp extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new b(this.firestore,null,t)}}function KS(n,e,t){n=l(n,b);const r=l(n.firestore,st),s=CI(n.converter,e,t);return yy(r,[wI(Lp(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,tr.none())])}function ZS(n,e,t,...r){n=l(n,b);const s=l(n.firestore,st),u=Lp(s);let c;return c="string"==typeof(e=(0,At.m9)(e))||e instanceof Hc?yT(u,"updateDoc",n._key,e,t,r):mT(u,"updateDoc",n._key,e),yy(s,[c.toMutation(n._key,tr.exists(!0))])}function YS(n,...e){var t,r,s;n=(0,At.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||et(e[c])||(u=e[c],c++);const g={includeMetadataChanges:u.includeMetadataChanges};if(et(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(s=x.complete)||void 0===s?void 0:s.bind(x)}let v,I,S;if(n instanceof b)I=l(n.firestore,st),S=yc(n._key.path),v={next:x=>{e[c]&&e[c](wT(I,n,x))},error:e[c+1],complete:e[c+2]};else{const x=l(n,T);I=l(x.firestore,st),S=x._query;const L=new Bp(I);v={next:q=>{e[c]&&e[c](new Oh(I,L,x,q))},error:e[c+1],complete:e[c+2]},US(n._query)}return function(x,L,q,Z){const ye=new Op(Z),Pe=new Wv(L,ye,q);return x.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Yb(yield kp(x),Pe)})),()=>{ye.Aa(),x.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return zv(yield kp(x),Pe)}))}}(wn(I),S,g,v)}function yy(n,e){return function(t,r){const s=new qr;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function _S(n,e,t){return Xv.apply(this,arguments)}(yield mE(t),r,s)})),s.promise}(wn(n),e)}function wT(n,e,t){const r=t.docs.get(e._key),s=new Bp(n);return new Gc(n,s,e._key,r,new Up(t.hasPendingWrites,t.fromCache),e.converter)}class ZR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Lp(e)}get(e){const t=kh(e,this._firestore),r=new UR(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return rt();const u=s[0];if(u.isFoundDocument())return new DE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new DE(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const s=kh(e,this._firestore),u=CI(s.converter,t,r),c=wI(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,c),this}update(e,t,r,...s){const u=kh(e,this._firestore);let c;return c="string"==typeof(t=(0,At.m9)(t))||t instanceof Hc?yT(this._dataReader,"Transaction.update",u._key,t,r,s):mT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=kh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=kh(e,this._firestore),r=new Bp(this._firestore);return super.get(e).then(s=>new Gc(this._firestore,r,t._key,s._document,new Up(!1,!1),t.converter))}}function bT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function JS(){if("undefined"==typeof Uint8Array)throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function XS(){if(!function B_(){return"undefined"!=typeof atob}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){eh=Qu.SDK_VERSION,(0,Qu._registerComponent)(new jg.wA("firestore",(t,{options:r})=>{const s=t.getProvider("app").getImmediate(),u=new st(s,new sw(t.getProvider("auth-internal")),new QD(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,Qu.registerVersion)(rw,"3.4.9",n),(0,Qu.registerVersion)(rw,"3.4.9","esm2017")}();class AE{constructor(e){this._delegate=e}static fromBase64String(e){return XS(),new AE(fl.fromBase64String(e))}static fromUint8Array(e){return JS(),new AE(fl.fromUint8Array(e))}toBase64(){return XS(),this._delegate.toBase64()}toUint8Array(){return JS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function IT(n){return function iO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class sO{enableIndexedDbPersistence(e,t){return function yE(n,e){xS(n=l(n,st));const t=wn(n),r=n._freezeSettings(),s=new fI;return my(t,s,new nT(s,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function _E(n){xS(n=l(n,st));const e=wn(n),t=n._freezeSettings(),r=new fI;return my(e,r,new DS(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function vE(n){if(n._initialized&&!n._terminated)throw new xe(le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!wo.vt())return Promise.resolve();const s=r+"main";yield wo.delete(s)}),function(r){return t.apply(this,arguments)})(Oc(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class eM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof la||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&uc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function w(n,e,t,r={}){var s;const u=(n=l(n,_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&uc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,g;if("string"==typeof r.mockUserToken)c=r.mockUserToken,g=Rr.MOCK_USER;else{c=(0,At.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new xe(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Rr(v)}n._authCredentials=new ZD(new iw(c,g))}}(this._delegate,e,t,r)}enableNetwork(){return function wE(n){return function CS(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield gE(n),t=yield gI(n);return e.setNetworkEnabled(!0),function(r){const s=Ze(r);return s.wu.delete(0),Lc(s)}(t)}))}(wn(n=l(n,st)))}(this._delegate)}disableNetwork(){return function bE(n){return function uT(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield gE(n),t=yield gI(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(s){const u=Ze(s);u.wu.add(0),yield Ip(u),u.yu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(wn(n=l(n,st)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,pT("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function EE(n){return function(e){const t=new qr;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function XC(n,e){return ly.apply(this,arguments)}(yield mE(e),t)})),t.promise}(wn(n=l(n,st)))}(this._delegate)}onSnapshotsInSync(e){return function KR(n,e){return function AS(n,e){const t=new Op(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield kp(n),s=t,Ze(r).bu.add(s),void s.next();var r,s})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield kp(n),s=t,void Ze(r).bu.delete(s);var r,s}))}}(wn(n=l(n,st)),et(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _y(this,k(this._delegate,e))}catch(t){throw ds(t,"collection()","Firestore.collection()")}}doc(e){try{return new ga(this,Q(this._delegate,e))}catch(t){throw ds(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hs(this,function U(n,e){if(n=l(n,_),yI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new T(n,null,(t=e,new au(Wt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ds(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function YR(n,e,t){n=l(n,st);const r=Object.assign(Object.assign({},VR),t);return function(s){if(s.maxAttempts<1)throw new xe(le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function SS(n,e,t){const r=new qr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const s=yield(u=n,Rh(u).then(c=>c.datastore));var u;new oT(n.asyncQueue,s,t,e,r).run()})),r.promise}(wn(n),s=>e(new ZR(n,s)),r)}(this._delegate,t=>e(new tM(this,t)))}batch(){return wn(this._delegate),new nM(new WS(this._delegate,e=>yy(this._delegate,e)))}loadBundle(e){return function yR(n,e){const t=wn(n=l(n,st)),r=new Se;return function hT(n,e,t,r){const s=function(u,c){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,I){if(v instanceof Uint8Array)return rT(v,I);if(v instanceof ArrayBuffer)return rT(new Uint8Array(v),I);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new iT(v,c);var v}(t,Fc(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function cE(n,e,t){const r=Ze(n);var s;(s=(0,be.Z)(function*(u,c,g){try{const v=yield c.getMetadata();if(yield function(L,q){const Z=Ze(L),ye=zn(q.createTime);return Z.persistence.runTransaction("hasNewerBundle","readonly",Pe=>Z._s.getBundleMetadata(Pe,q.id)).then(Pe=>!!Pe&&Pe.createTime.compareTo(ye)>=0)}(u.localStore,v))return yield c.close(),g._completeWith({taskState:"Success",documentsLoaded:(L=v).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);g._updateProgress(Jb(v));const I=new Kv(v,u.localStore,c.M);let S=yield c.ma();for(;S;){const L=yield I.Fu(S);L&&g._updateProgress(L),S=yield c.ma()}const x=yield I.complete();return yield fu(u,x.Lu,void 0),yield function(L,q){const Z=Ze(L);return Z.persistence.runTransaction("Save bundle","readwrite",ye=>Z._s.saveBundleMetadata(ye,q))}(u.localStore,v),g._completeWith(x.progress),Promise.resolve(x.Bu)}catch(v){return uc("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var L}),function(u,c,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield mE(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _R(n,e){return function MS(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const s=Ze(t);return s.persistence.runTransaction("Get named query","readonly",u=>s._s.getNamedQuery(u,r))}(yield Pp(n),e)}))}(wn(n=l(n,st)),e).then(t=>t?new T(n,null,t.query):null)}(this._delegate,e).then(t=>t?new hs(this,t):null)}}class TI extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new AE(new fl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ga.forKey(t,this.firestore,null)}}class tM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new TI(e)}get(e){const t=$p(e);return this._delegate.get(t).then(r=>new SE(this._firestore,new Gc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=$p(e);return r?(bT("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=$p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=$p(e);return this._delegate.delete(t),this}}class nM{constructor(e){this._delegate=e}set(e,t,r){const s=$p(e);return r?(bT("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=$p(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=$p(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new CE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ME(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=jp.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new jp(e,new TI(e),t),s.set(t,u)),u}}jp.INSTANCES=new WeakMap;class ga{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new TI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ga(t,new b(t._delegate,r,new He(e)))}static forKey(e,t,r){return new ga(t,new b(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new _y(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _y(this.firestore,k(this._delegate,e))}catch(t){throw ds(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,At.m9)(e))instanceof b&&_e(this._delegate,e)}set(e,t){t=bT("DocumentReference.set",t);try{return t?KS(this._delegate,e,t):KS(this._delegate,e)}catch(r){throw ds(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ZS(this._delegate,e):ZS(this._delegate,e,t,...r)}catch(s){throw ds(s,"updateDoc()","DocumentReference.update()")}}delete(){return function qR(n){return yy(l(n.firestore,st),[new Mm(n._key,tr.none())])}(this._delegate)}onSnapshot(...e){const t=rM(e),r=iM(e,s=>new SE(this.firestore,new Gc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return YS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jR(n){n=l(n,b);const e=l(n.firestore,st),t=wn(e),r=new Bp(e);return function lT(n,e){const t=new qr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(s,u,c){try{const g=yield function(v,I){const S=Ze(v);return S.persistence.runTransaction("read document","readonly",x=>S.fi.Ls(x,I))}(s,u);g.isFoundDocument()?c.resolve(g):g.isNoDocument()?c.resolve(null):c.reject(new xe(le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=Bc(g,`Failed to get document '${u} from cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield Pp(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Gc(e,r,n._key,s,new Up(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function $R(n){n=l(n,b);const e=l(n.firestore,st);return cT(wn(e),n._key,{source:"server"}).then(t=>wT(e,n,t))}(this._delegate):function BR(n){n=l(n,b);const e=l(n.firestore,st);return cT(wn(e),n._key).then(t=>wT(e,n,t))}(this._delegate),t.then(r=>new SE(this.firestore,new Gc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ga(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function ds(n,e,t){return n.message=n.message.replace(e,t),n}function rM(n){for(const e of n)if("object"==typeof e&&!IT(e))return e;return{}}function iM(n,e){var t,r;let s;return s=IT(n[0])?n[0]:IT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class SE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return VS(this._delegate,e._delegate)}}class ME extends SE{data(e){const t=this._delegate.data(e);return function iS(n,e){n||rt()}(void 0!==t),t}}class hs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new TI(e)}where(e,t,r){try{return new hs(this.firestore,Ph(this._delegate,function MR(n,e,t){const r=e,s=DI("where",n);return new SR(s,r,t)}(e,t,r)))}catch(s){throw ds(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new hs(this.firestore,Ph(this._delegate,function NR(n,e="asc"){const t=e,r=DI("orderBy",n);return new xR(r,t)}(e,t)))}catch(r){throw ds(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hs(this.firestore,Ph(this._delegate,function RR(n){return d("limit",n),new BS("limit",n,"F")}(e)))}catch(t){throw ds(t,"limit()","Query.limit()")}}limitToLast(e){try{return new hs(this.firestore,Ph(this._delegate,function OR(n){return d("limitToLast",n),new BS("limitToLast",n,"L")}(e)))}catch(t){throw ds(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hs(this.firestore,Ph(this._delegate,function PR(...n){return new jS("startAt",n,!0)}(...e)))}catch(t){throw ds(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hs(this.firestore,Ph(this._delegate,function kR(...n){return new jS("startAfter",n,!1)}(...e)))}catch(t){throw ds(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hs(this.firestore,Ph(this._delegate,function FR(...n){return new $S("endBefore",n,!1)}(...e)))}catch(t){throw ds(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hs(this.firestore,Ph(this._delegate,function LR(...n){return new $S("endAt",n,!0)}(...e)))}catch(t){throw ds(t,"endAt()","Query.endAt()")}}isEqual(e){return ke(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function GR(n){n=l(n,T);const e=l(n.firestore,st),t=wn(e),r=new Bp(e);return function TS(n,e){const t=new qr;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(s,u,c){try{const g=yield Ah(s,u,!0),v=new Zv(u,g._i),I=v.Wu(g.documents),S=v.applyChanges(I,!1);c.resolve(S.snapshot)}catch(g){const v=Bc(g,`Failed to execute query '${u} against cache`);c.reject(v)}}),function(s,u,c){return r.apply(this,arguments)})(yield Pp(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Oh(e,r,n,s))}(this._delegate):"server"===(null==e?void 0:e.source)?function zR(n){n=l(n,T);const e=l(n.firestore,st),t=wn(e),r=new Bp(e);return dT(t,n._query,{source:"server"}).then(s=>new Oh(e,r,n,s))}(this._delegate):function HR(n){n=l(n,T);const e=l(n.firestore,st),t=wn(e),r=new Bp(e);return US(n._query),dT(t,n._query).then(s=>new Oh(e,r,n,s))}(this._delegate),t.then(r=>new DT(this.firestore,new Oh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=rM(e),r=iM(e,s=>new DT(this.firestore,new Oh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return YS(this._delegate,t,r)}withConverter(e){return new hs(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}class aO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ME(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class DT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new hs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ME(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new aO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ME(this._firestore,r))})}isEqual(e){return VS(this._delegate,e._delegate)}}class _y extends hs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ga(this.firestore,e):null}doc(e){try{return new ga(this.firestore,void 0===e?Q(this._delegate):Q(this._delegate,e))}catch(t){throw ds(t,"doc()","CollectionReference.doc()")}}add(e){return function WR(n,e){const t=l(n.firestore,st),r=Q(n),s=CI(n.converter,e);return yy(t,[wI(Lp(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,tr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ga(this.firestore,t))}isEqual(e){return _e(this._delegate,e._delegate)}withConverter(e){return new _y(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function $p(n){return l(n,b)}class CT{constructor(...e){this._delegate=new Hc(...e)}static documentId(){return new CT(Bn.keyField().canonicalString())}isEqual(e){return(e=(0,At.m9)(e))instanceof Hc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function JR(){return new gT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Hp(e)}static delete(){const e=function QR(){return new IE("deleteField")}();return e._methodName="FieldValue.delete",new Hp(e)}static arrayUnion(...e){const t=function XR(...n){return new bR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Hp(t)}static arrayRemove(...e){const t=function eO(...n){return new IR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Hp(t)}static increment(e){const t=function tO(n){return new DR("increment",n)}(e);return t._methodName="FieldValue.increment",new Hp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const uO={Firestore:eM,GeoPoint:vI,Timestamp:Jn,Blob:AE,Transaction:tM,WriteBatch:nM,DocumentReference:ga,DocumentSnapshot:SE,Query:hs,QueryDocumentSnapshot:ME,QuerySnapshot:DT,CollectionReference:_y,FieldPath:CT,FieldValue:Hp,setLogLevel:function oO(n){!function KD(n){nu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function cO(n){(function lO(n,e){n.INTERNAL.registerComponent(new jg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},uO)))})(n,(e,t)=>new eM(e,t,new sO)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(s0.Z);var dO=O(6451),AI=O(5363),hO=O(6063);class fO extends ti.x{constructor(e=1/0,t=1/0,r=hO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!s&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const c=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=c;v+=2)g=v;g&&r.splice(0,g+1)}}}var pO=O(3099);function sM(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,pO.B)({connector:()=>new fO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function oM(n,e){return(0,Ru.m)(e)?Dn(()=>n,e):Dn(()=>n)}var TT=O(9468),AT=O(5867);const aM=new Map,vO={activated:!1,tokenObservers:[]},EO={initialized:!1,enabled:!1};function mi(n){return aM.get(n)||vO}function pu(n,e){aM.set(n,e)}function SI(){return EO}class CO{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new At.BH,yield function TO(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new At.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const fs=new At.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function lM(n){if(!mi(n).activated)throw fs.create("use-before-activation",{appName:n.name})}function NT(n,e){return RT.apply(this,arguments)}function RT(){return RT=(0,be.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const x=yield s.getHeartbeatsHeader();x&&(r["X-Firebase-Client"]=x)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,g;try{c=yield fetch(n,u)}catch(x){throw fs.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw fs.create("fetch-status-error",{httpStatus:c.status});try{g=yield c.json()}catch(x){throw fs.create("fetch-parse-error",{originalErrorMessage:x.message})}const v=g.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw fs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const I=1e3*Number(v[1]),S=Date.now();return{token:g.token,expireTimeMillis:S+I,issuedAtTimeMillis:S}}),RT.apply(this,arguments)}function NO(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${s}`,body:{debug_token:e}}}const NE="firebase-app-check-store";let NI=null;function dM(){return NI||(NI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(fs.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(NE,{keyPath:"compositeKey"})}}catch(t){e(fs.create("storage-open",{originalErrorMessage:t.message}))}}),NI)}function OT(){return OT=(0,be.Z)(function*(n,e){const r=(yield dM()).transaction(NE,"readwrite"),u=r.objectStore(NE).put({compositeKey:n,value:e});return new Promise((c,g)=>{u.onsuccess=v=>{c()},r.onerror=v=>{var I;g(fs.create("storage-set",{originalErrorMessage:null===(I=v.target.error)||void 0===I?void 0:I.message}))}})}),OT.apply(this,arguments)}const RE=new Ju.Yd("@firebase/app-check");function gM(n,e){return(0,At.hl)()?function kO(n,e){return function hM(n,e){return OT.apply(this,arguments)}(function pM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{RE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function mM(){return SI().enabled}function yM(){return LT.apply(this,arguments)}function LT(){return LT=(0,be.Z)(function*(){const n=SI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),LT.apply(this,arguments)}const jO={error:"UNKNOWN_ERROR"};function $O(n){return At.US.encodeString(JSON.stringify(n),!1)}function RI(n){return VT.apply(this,arguments)}function VT(){return VT=(0,be.Z)(function*(n,e=!1){const t=n.app;lM(t);const r=mi(t);let u,s=r.token;if(!s){const v=yield r.cachedTokenPromise;v&&OI(v)&&(s=v)}if(!e&&s&&OI(s))return{token:s.token};let g,c=!1;if(mM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=NT(NO(t,yield yM()),n.heartbeatServiceProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),c=!0);const v=yield r.exchangeTokenPromise;return yield gM(t,v),pu(t,Object.assign(Object.assign({},r),{token:v})),{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(v=>(r.exchangeTokenPromise=void 0,v)),c=!0),s=yield r.exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?RE.warn(v.message):RE.error(v),u=v}return s?(g={token:s.token},pu(t,Object.assign(Object.assign({},r),{token:s})),yield gM(t,s)):g=GO(u),c&&vM(t,g),g}),VT.apply(this,arguments)}function BT(n,e){const t=mi(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),pu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function _M(n){const{app:e}=n,t=mi(e);let r=t.tokenRefresher;r||(r=function HO(n){const{app:e}=n;return new CO((0,be.Z)(function*(){let r;if(r=mi(e).token?yield RI(n,!0):yield RI(n),r.error)throw r.error}),()=>!0,()=>{const t=mi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),pu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vM(n,e){const t=mi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(s){}}function OI(n){return n.expireTimeMillis-Date.now()>0}function GO(n){return{token:$O(jO),error:n}}class zO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=mi(this.app);for(const t of e)BT(this.app,t.next);return Promise.resolve()}}const AM="app-check-internal";!function sP(){(0,Qu._registerComponent)(new jg.wA("app-check",n=>function qO(n,e){return new zO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(AM).initialize()})),(0,Qu._registerComponent)(new jg.wA(AM,n=>function WO(n){return{getToken:e=>RI(n,e),addTokenListener:e=>function UT(n,e,t,r){const{app:s}=n,u=mi(s),c={next:t,error:r,type:e};if(pu(s,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&OI(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),_M(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>_M(n))}(n,"INTERNAL",e),removeTokenListener:e=>BT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Qu.registerVersion)("@firebase/app-check","0.5.8")}();class GT{constructor(){return(0,dr.vb)("app-check")}}"undefined"!=typeof window&&window;var cP=O(127);const MM=new f.OlP("angularfire2.auth.use-emulator"),xM=new f.OlP("angularfire2.auth.settings"),NM=new f.OlP("angularfire2.auth.tenant-id"),RM=new f.OlP("angularfire2.auth.langugage-code"),OM=new f.OlP("angularfire2.auth.use-device-language"),PM=new f.OlP("angularfire.auth.persistence"),kM=(n,e,t,r,s,u,c,g)=>(0,ss.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=s,u&&v.useDeviceLanguage(),c)for(const[I,S]of Object.entries(c))v.settings[I]=S;return g&&v.setPersistence(g),v},[t,r,s,u,c,g]);let FM=(()=>{class n{constructor(t,r,s,u,c,g,v,I,S,x,L,q){const Z=new ti.x,ye=tt(void 0).pipe((0,AI.Q)(c.outsideAngular),Dn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,7092)))),(0,Mt.U)(()=>(0,ss.on)(t,u,r)),(0,Mt.U)(Pe=>kM(Pe,u,g,I,S,x,v,L)),sM({bufferSize:1,refCount:!1}));if(Ro(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{ye.pipe(Zo()).subscribe();const pt=ye.pipe(Dn(ut=>ut.getRedirectResult().then(kt=>kt,()=>null)),dr.iC,sM({bufferSize:1,refCount:!1})),mt=ye.pipe(Dn(ut=>new Vn.y(kt=>({unsubscribe:u.runOutsideAngular(()=>ut.onAuthStateChanged(Ut=>kt.next(Ut),Ut=>kt.error(Ut),()=>kt.complete()))})))),It=ye.pipe(Dn(ut=>new Vn.y(kt=>({unsubscribe:u.runOutsideAngular(()=>ut.onIdTokenChanged(Ut=>kt.next(Ut),Ut=>kt.error(Ut),()=>kt.complete()))}))));this.authState=pt.pipe(oM(mt),(0,TT.R)(c.outsideAngular),(0,AI.Q)(c.insideAngular)),this.user=pt.pipe(oM(It),(0,TT.R)(c.outsideAngular),(0,AI.Q)(c.insideAngular)),this.idToken=this.user.pipe(Dn(ut=>ut?(0,mn.D)(ut.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(Dn(ut=>ut?(0,mn.D)(ut.getIdTokenResult()):tt(null))),this.credential=(0,dO.T)(pt,Z,this.authState.pipe(jr(ut=>!ut))).pipe((0,Mt.U)(ut=>(null==ut?void 0:ut.user)?ut:null),(0,TT.R)(c.outsideAngular),(0,AI.Q)(c.insideAngular))}return(0,ss.pX)(this,ye,u,{spy:{apply:(Pe,pt,mt)=>{(Pe.startsWith("signIn")||Pe.startsWith("createUser"))&&mt.then(It=>Z.next(It))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ss.Dh),f.LFG(ss.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(dr.HU),f.LFG(MM,8),f.LFG(xM,8),f.LFG(NM,8),f.LFG(RM,8),f.LFG(OM,8),f.LFG(PM,8),f.LFG(GT,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function LM(n,e){return function hP(n,e=n0.z){return new Vn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function qT(n,e){return LM(n,e).pipe((0,Mt.U)(t=>({payload:t,type:"query"})))}function kI(n,e){return qT(n,e).pipe(Bi(void 0),i_(),(0,Mt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,g)=>{const v=s.find(S=>S.doc.ref.isEqual(c.ref)),I=null==t?void 0:t.payload.docs.find(S=>S.ref.isEqual(c.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(c.metadata)||!v&&I&&JSON.stringify(I.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:c}})}),u}))}function VM(n,e,t){return kI(n,t).pipe(ji((r,s)=>function pP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function gP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return WT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return WT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return WT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function r0(n,e=bi.y){return n=null!=n?n:s_,(0,ur.e)((t,r)=>{let s,u=!0;t.subscribe((0,Rn.x)(r,c=>{const g=e(c);(u||!n(s,g))&&(u=!1,s=g,r.next(c))}))})}(),(0,Mt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function WT(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function UM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class BM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=kI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Mt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Bi(void 0),i_(),jr(([r,s])=>s.length>0||!r),(0,Mt.U)(([r,s])=>s),dr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ji((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UM(e);return VM(this.query,t,this.afs.schedulers.outsideAngular).pipe(dr.iC)}valueChanges(e={}){return qT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),dr.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(dr.iC)}add(e){return this.ref.add(e)}doc(e){return new jM(this.ref.doc(e),this.afs)}}class jM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=GM(r,t);return new BM(s,u,this.afs)}snapshotChanges(){return function fP(n,e){return LM(n,e).pipe(Bi(void 0),i_(),(0,Mt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(dr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(dr.iC)}}class mP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?kI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),jr(t=>t.length>0),dr.iC):kI(this.query,this.afs.schedulers.outsideAngular).pipe(dr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ji((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=UM(e);return VM(this.query,t,this.afs.schedulers.outsideAngular).pipe(dr.iC)}valueChanges(e={}){return qT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Mt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),dr.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(dr.iC)}}const $M=new f.OlP("angularfire2.enableFirestorePersistence"),HM=new f.OlP("angularfire2.firestore.persistenceSettings"),yP=new f.OlP("angularfire2.firestore.settings"),_P=new f.OlP("angularfire2.firestore.use-emulator");function GM(n,e=(t=>t)){return{query:e(n),ref:n}}let vy=(()=>{class n{constructor(t,r,s,u,c,g,v,I,S,x,L,q,Z,ye,Pe,pt,mt){this.schedulers=v;const It=(0,ss.on)(t,g,r),ut=S;x&&kM(It,g,L,Z,ye,Pe,q,pt),[this.firestore,this.persistenceEnabled$]=(0,ss.cc)(`${It.name}.firestore`,"AngularFirestore",It.name,()=>{const kt=g.runOutsideAngular(()=>It.firestore());if(u&&kt.settings(u),ut&&kt.useEmulator(...ut),s&&!Ro(c)){const Ut=()=>{try{return(0,mn.D)(kt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(sn){return"undefined"!=typeof console&&console.warn(sn),tt(!1)}};return[kt,g.runOutsideAngular(Ut)]}return[kt,tt(!1)]},[u,ut,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=GM(s,r),g=this.schedulers.ngZone.run(()=>u);return new BM(g,c,this)}collectionGroup(t,r){const s=r||(c=>c),u=this.firestore.collectionGroup(t);return new mP(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new jM(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ss.Dh),f.LFG(ss.xv,8),f.LFG($M,8),f.LFG(yP,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(dr.HU),f.LFG(HM,8),f.LFG(_P,8),f.LFG(FM,8),f.LFG(MM,8),f.LFG(xM,8),f.LFG(NM,8),f.LFG(RM,8),f.LFG(OM,8),f.LFG(PM,8),f.LFG(GT,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),OE=(()=>{class n{constructor(){cP.Z.registerVersion("angularfire",dr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:$M,useValue:!0},{provide:HM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[vy]}),n})(),zM=(()=>{class n{constructor(t){this._client=t}getAll(){return this._client.collection("heroes").valueChanges({idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const qM=new f.OlP("GETS_ALL_HERO_DTO");let WM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[zM,{provide:qM,useExisting:zM}],imports:[[OE]]}),n})(),vP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn,Di]]}),n})(),KT=(()=>{class n{constructor(t){this._client=t}getAll(){return this._client.collection("products").valueChanges({idField:"id"})}getOne(t){return this._client.doc("products/"+t).valueChanges({idField:"id"}).pipe(Dn(r=>r?tt(r):Ji(new Error("Item does not exist in firebase"))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const KM=new f.OlP("GETS_ALL_PRODUCT_DTO"),ZM=new f.OlP("GETS_ONE_PRODUCT_DTO");let ZT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[KT,{provide:KM,useExisting:KT},{provide:ZM,useExisting:KT}],imports:[[OE]]}),n})(),EP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn]]}),n})(),YT=(()=>{class n{constructor(){this._subject=new Br({})}select(){return this._subject.asObservable().pipe(jr(t=>t!=={}))}setState(t){return tt(this._subject.next(t)).pipe((0,Mt.U)(()=>{}))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const YM=new f.OlP("SELECTS_PRODUCT_CONTEXT_STORAGE"),QM=new f.OlP("SETS_STATE_PRODUCT_CONTEXT_STORAGE");let wP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[YT,{provide:YM,useExisting:YT},{provide:QM,useExisting:YT}],imports:[[]]}),n})(),JM=(()=>{class n{constructor(t){this._setsStateProductContextStorage=t}resolve(t,r){return this._setsStateProductContextStorage.setState({productId:t.params.productId}).pipe((0,Mt.U)(s=>!0))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(QM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),bP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[JM],imports:[[]]}),n})(),IP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn]]}),n})(),DP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn]]}),n})(),CP=(()=>{class n{constructor(t){this._getsAllHeroDto=t,this.image$=this._getsAllHeroDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(qM))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-hero"]],decls:19,vars:0,consts:[[1,"center","container-fluid","scbackground"],[1,"container"],[1,"row"],[1,"col"],[1,"col","herotext"],[1,"fw-bold"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1),f._UZ(2,"br")(3,"br")(4,"br")(5,"br")(6,"br")(7,"br")(8,"br")(9,"br"),f.TgZ(10,"div",2),f._UZ(11,"div",3)(12,"div",3),f.TgZ(13,"div",4)(14,"h1")(15,"span",5),f._uU(16," STYLIST PICKS UP "),f._UZ(17,"br"),f._uU(18," THE HEAT"),f.qZA()()()()()())},encapsulation:2,changeDetection:0}),n})();function TP(n,e){if(1&n&&(f.TgZ(0,"div",6)(1,"div",7),f._UZ(2,"img",8),f.TgZ(3,"div",9)(4,"h5",10),f._uU(5),f.qZA(),f.TgZ(6,"p",11),f._uU(7),f.qZA(),f.TgZ(8,"button",12),f.O4$(),f.TgZ(9,"svg",13),f._UZ(10,"path",14),f.qZA(),f._uU(11," KUP "),f.qZA()()()()),2&n){const t=e.$implicit;f.xp6(2),f.s9C("src",t.imageUrl,f.LSH),f.Q6J("routerLink","details/"+t.id),f.xp6(3),f.Oqu(t.name),f.xp6(2),f.hij("",t.price," z\u0142"),f.xp6(1),f.Q6J("routerLink","./confirmation")}}let AP=(()=>{class n{constructor(t){this._getsAllProductDto=t,this.products$=this._getsAllProductDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(KM))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-product-list"]],decls:12,vars:3,consts:[[1,"border","bg-light","w-100"],[1,"col","herotext"],[1,"fw-bold"],[1,"container"],[1,"row"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card","background","text-white",2,"width","15rem"],[1,"card-img-top","background","productimgs",3,"routerLink","src"],[1,"card-body"],[1,"card-title","navtext","fw-bold"],[1,"card-text","navtext"],["type","button",1,"background","navtext",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag-heart","text-white"],["fill-rule","evenodd","d","M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5Zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0ZM14 14V5H2v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1ZM8 7.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132Z"]],template:function(t,r){1&t&&(f._UZ(0,"p",0),f.TgZ(1,"div",1)(2,"h1")(3,"span",2),f._uU(4," DISCOVER OUR PRODUCTS"),f.qZA()(),f.TgZ(5,"h4"),f._uU(6,"THE LATEST FASHION ONLY"),f.qZA()(),f._UZ(7,"p",0),f.TgZ(8,"div",3)(9,"div",4),f.YNc(10,TP,12,5,"div",5),f.ALo(11,"async"),f.qZA()()),2&t&&(f.xp6(10),f.Q6J("ngForOf",f.lcZ(11,1,r.products$)))},directives:[Ln,Zu],pipes:[Eu],encapsulation:2,changeDetection:0}),n})(),SP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-topsellers"]],decls:6,vars:0,consts:[[1,"border","bg-light","w-100"],[1,"col","herotext"],[1,"fw-bold"]],template:function(t,r){1&t&&(f._UZ(0,"p",0),f.TgZ(1,"div",1)(2,"h1")(3,"span",2),f._uU(4," DON'T MISS OUR TOPSELLERS"),f.qZA()()(),f._UZ(5,"p",0))},encapsulation:2,changeDetection:0}),n})(),MP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-home-page"]],decls:5,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-hero")(1,"br")(2,"lib-product-list")(3,"br")(4,"lib-topsellers")},directives:[CP,AP,SP],encapsulation:2,changeDetection:0}),n})(),XM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn,yD,Di.forChild([{path:"",component:MP}]),vP,ZT,WM,ZT,DP]]}),n})(),ex=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn]]}),n})(),tx=(()=>{class n{constructor(t){this._client=t}getAll(){return this._client.collection("team").valueChanges({idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const nx=new f.OlP("GETS_ALL_OURTEAM_DTO");let xP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[tx,{provide:nx,useExisting:tx}],imports:[[OE]]}),n})(),PE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn,Di]]}),n})(),rx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn]]}),n})(),ix=(()=>{class n{constructor(t){this._client=t}getAll(){return this._client.collection("testimonials").valueChanges({idField:"id"})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const sx=new f.OlP("GETS_ALL_OPINIONS_DTO");let NP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[ix,{provide:sx,useExisting:ix}],imports:[[OE]]}),n})();function RP(n,e){if(1&n&&(f.TgZ(0,"div",6)(1,"div",7),f._UZ(2,"img",8),f.TgZ(3,"div",9)(4,"h3",10),f._uU(5),f._UZ(6,"br"),f.qZA(),f.TgZ(7,"h4",10),f._uU(8),f._UZ(9,"br"),f.qZA()()()()),2&n){const t=e.$implicit;f.xp6(2),f.Q6J("src",t.imageUrl,f.LSH),f.xp6(3),f.Oqu(t.name),f.xp6(3),f.Oqu(t.description)}}let OP=(()=>{class n{constructor(t){this._getsAllOurteamDto=t,this.team$=this._getsAllOurteamDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(nx))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-ourteam"]],decls:11,vars:3,consts:[[1,"border","bg-light","w-100"],[1,"col","herotext"],[1,"fw-bold"],[1,"center","container-fluid","background"],[1,"row"],["class","col-md",4,"ngFor","ngForOf"],[1,"col-md"],[1,"card","background",2,"width","42rem"],[1,"photo",3,"src"],[1,"card-body","background","containertext"],[1,"card-title","fw-bold"]],template:function(t,r){1&t&&(f._UZ(0,"p",0),f.TgZ(1,"div",1)(2,"h1")(3,"span",2),f._uU(4," FOUNDERS"),f.qZA()(),f._UZ(5,"p",0)(6,"br"),f.qZA(),f.TgZ(7,"div",3)(8,"div",4),f.YNc(9,RP,10,3,"div",5),f.ALo(10,"async"),f.qZA()()),2&t&&(f.xp6(9),f.Q6J("ngForOf",f.lcZ(10,1,r.team$)))},directives:[Ln],pipes:[Eu],encapsulation:2,changeDetection:0}),n})();function PP(n,e){if(1&n&&(f.TgZ(0,"div",4)(1,"div",5)(2,"div",6),f._UZ(3,"img",7),f.qZA(),f.TgZ(4,"div",8)(5,"h3",9),f._uU(6),f._UZ(7,"br"),f.qZA(),f.TgZ(8,"h5",10)(9,"em"),f._uU(10),f.qZA()()()()()),2&n){const t=e.$implicit;f.xp6(3),f.Q6J("src",t.imageUrl,f.LSH),f.xp6(3),f.Oqu(t.name),f.xp6(4),f.Oqu(t.text)}}let kP=(()=>{class n{constructor(t){this._getsAllOpinionsDto=t,this.opinion$=this._getsAllOpinionsDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(sx))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-opinions"]],decls:9,vars:3,consts:[[1,"border","bg-light","w-100"],[1,"col","herotext"],[1,"fw-bold"],["class","container",4,"ngFor","ngForOf"],[1,"container"],[1,"row"],[1,"col"],[1,"testimg",3,"src"],[1,"col","text-white"],[1,"card-title","fw-bold"],[1,""]],template:function(t,r){1&t&&(f._UZ(0,"p",0),f.TgZ(1,"div",1)(2,"h1")(3,"span",2),f._uU(4," EVERY OPINION IS REALLY IMPORTANT TO US"),f.qZA()()(),f._UZ(5,"p",0)(6,"br"),f.YNc(7,PP,11,3,"div",3),f.ALo(8,"async")),2&t&&(f.xp6(7),f.Q6J("ngForOf",f.lcZ(8,1,r.opinion$)))},directives:[Ln],pipes:[Eu],encapsulation:2,changeDetection:0}),n})(),FI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-goback"]],decls:5,vars:1,consts:[[1,"border","bg-light","w-100"],[1,"d-flex"],["type","button",1,"background","navtext",3,"routerLink"]],template:function(t,r){1&t&&(f._UZ(0,"p",0),f.TgZ(1,"div",1)(2,"button",2),f._uU(3," MAIN "),f.qZA()(),f._UZ(4,"p",0)),2&t&&(f.xp6(2),f.Q6J("routerLink","/"))},directives:[Zu],encapsulation:2,changeDetection:0}),n})(),FP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-aboutus-page"]],decls:5,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-ourteam")(1,"br")(2,"lib-opinions")(3,"br")(4,"lib-goback")},directives:[OP,kP,FI],encapsulation:2,changeDetection:0}),n})(),LP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn,ex,PE,rx,Di.forChild([{path:"",component:FP}]),xP,NP,PE,ex,rx]]}),n})(),ox=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Gp=(()=>{class n extends ox{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const pl=new f.OlP("NgValueAccessor"),BP={provide:pl,useExisting:(0,f.Gpc)(()=>LI),multi:!0},$P=new f.OlP("CompositionEventMode");let LI=(()=>{class n extends ox{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jP(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36($P,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([BP]),f.qOj]}),n})();function Fh(n){return null==n||0===n.length}function ux(n){return null!=n&&"number"==typeof n.length}const zi=new f.OlP("NgValidators"),Lh=new f.OlP("NgAsyncValidators"),HP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class QT{static min(e){return function lx(n){return e=>{if(Fh(e.value)||Fh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function cx(n){return e=>{if(Fh(e.value)||Fh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function dx(n){return Fh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function hx(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function fx(n){return Fh(n.value)||HP.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function px(n){return e=>Fh(e.value)||!ux(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function gx(n){return e=>ux(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function mx(n){if(!n)return VI;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Fh(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return bx(e)}static composeAsync(e){return Ix(e)}}function VI(n){return null}function yx(n){return null!=n}function _x(n){const e=(0,f.QGY)(n)?(0,mn.D)(n):n;return(0,f.CqO)(e),e}function vx(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ex(n,e){return e.map(t=>t(n))}function wx(n){return n.map(e=>function GP(n){return!n.validate}(e)?e:t=>e.validate(t))}function bx(n){if(!n)return null;const e=n.filter(yx);return 0==e.length?null:function(t){return vx(Ex(t,e))}}function JT(n){return null!=n?bx(wx(n)):null}function Ix(n){if(!n)return null;const e=n.filter(yx);return 0==e.length?null:function(t){return function VP(...n){const e=(0,Fa.jO)(n),{args:t,keys:r}=on(n),s=new Vn.y(u=>{const{length:c}=t;if(!c)return void u.complete();const g=new Array(c);let v=c,I=c;for(let S=0;S<c;S++){let x=!1;(0,Wo.Xf)(t[S]).subscribe((0,Rn.x)(u,L=>{x||(x=!0,I--),g[S]=L},()=>v--,void 0,()=>{(!v||!x)&&(I||u.next(r?Pl(r,g):g),u.complete())}))}});return e?s.pipe(pd(e)):s}(Ex(t,e).map(_x)).pipe((0,Mt.U)(vx))}}function XT(n){return null!=n?Ix(wx(n)):null}function Dx(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Cx(n){return n._rawValidators}function Tx(n){return n._rawAsyncValidators}function eA(n){return n?Array.isArray(n)?n:[n]:[]}function UI(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ax(n,e){const t=eA(e);return eA(n).forEach(s=>{UI(t,s)||t.push(s)}),t}function Sx(n,e){return eA(e).filter(t=>!UI(n,t))}class Mx{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=XT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vh extends Mx{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ps extends Mx{get formDirective(){return null}get path(){return null}}class xx{constructor(e){this._cd=e}is(e){var t,r,s;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(s=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===s?void 0:s[e])}}let Nx=(()=>{class n extends xx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Vh,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),Rx=(()=>{class n extends xx{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ps,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function kE(n,e){rA(n,e),e.valueAccessor.writeValue(n.value),function JP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Px(n,e)})}(n,e),function e1(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function XP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Px(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function QP(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function $I(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),GI(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function HI(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function rA(n,e){const t=Cx(n);null!==e.validator?n.setValidators(Dx(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Tx(n);null!==e.asyncValidator?n.setAsyncValidators(Dx(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();HI(e._rawValidators,s),HI(e._rawAsyncValidators,s)}function GI(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=Cx(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(c=>c!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=Tx(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(c=>c!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return HI(e._rawValidators,r),HI(e._rawAsyncValidators,r),t}function Px(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function oA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const FE="VALID",zI="INVALID",Ey="PENDING",LE="DISABLED";function uA(n){return(qI(n)?n.validators:n)||null}function Vx(n){return Array.isArray(n)?JT(n):n||null}function lA(n,e){return(qI(e)?e.asyncValidators:n)||null}function Ux(n){return Array.isArray(n)?XT(n):n||null}function qI(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Bx=n=>n instanceof VE,cA=n=>n instanceof WI;function jx(n){return Bx(n)?n.value:n.getRawValue()}function $x(n,e){const t=cA(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function Hx(n,e){cA(n),n._forEachChild((r,s)=>{if(void 0===e[s])throw new f.vHH(1002,"")})}class dA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Vx(this._rawValidators),this._composedAsyncValidatorFn=Ux(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===FE}get invalid(){return this.status===zI}get pending(){return this.status==Ey}get disabled(){return this.status===LE}get enabled(){return this.status!==LE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Vx(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Ux(e)}addValidators(e){this.setValidators(Ax(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ax(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Sx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Sx(e,this._rawAsyncValidators))}hasValidator(e){return UI(this._rawValidators,e)}hasAsyncValidator(e){return UI(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ey,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=LE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=FE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===FE||this.status===Ey)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?LE:FE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ey,this._hasOwnPendingAsyncValidator=!0;const t=_x(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function i1(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(s=>{r=cA(r)?r.controls.hasOwnProperty(s)?r.controls[s]:null:(n=>n instanceof o1)(r)&&r.at(s)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?LE:this.errors?zI:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ey)?Ey:this._anyControlsHaveStatus(zI)?zI:FE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){qI(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class VE extends dA{constructor(e=null,t,r){super(uA(t),lA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),qI(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){oA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){oA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class WI extends dA{constructor(e,t,r){super(uA(t),lA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Hx(this,e),Object.keys(e).forEach(r=>{$x(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=jx(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class o1 extends dA{constructor(e,t,r){super(uA(t),lA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Hx(this,e),e.forEach((r,s)=>{$x(this,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>jx(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let Kx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Yx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const fA=new f.OlP("NgModelWithFormControlWarning"),g1={provide:ps,useExisting:(0,f.Gpc)(()=>KI)};let KI=(()=>{class n extends ps{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(GI(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return kE(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){$I(t.control||null,t,!1),oA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Lx(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&($I(r||null,t),Bx(s)&&(kE(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function kx(n,e){rA(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function t1(n,e){return GI(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){rA(this.form,this),this._oldForm&&GI(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(zi,10),f.Y36(Lh,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([g1]),f.qOj,f.TTD]}),n})();const _1={provide:Vh,useExisting:(0,f.Gpc)(()=>mA)};let mA=(()=>{class n extends Vh{constructor(t,r,s,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function sA(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===LI?t=u:function r1(n){return Object.getPrototypeOf(n.constructor)===Gp}(u)?r=u:s=u}),s||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function iA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function jI(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(ps,13),f.Y36(zi,10),f.Y36(Lh,10),f.Y36(pl,10),f.Y36(fA,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([_1]),f.qOj,f.TTD]}),n})(),P1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Yx]]}),n})(),k1=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:fA,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[P1]}),n})(),hN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn,k1]]}),n})(),fN=(()=>{class n{constructor(t){this._client=t}add(t){return(0,mn.D)(this._client.collection("messages").add(t)).pipe((0,Mt.U)(()=>{}))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const pN=new f.OlP("ADDS_MESSAGES_DTO");let gN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[fN,{provide:pN,useExisting:fN}],imports:[[OE]]}),n})(),F1=(()=>{class n{constructor(t){this._addsMessagesDto=t,this.contact=new WI({name:new VE("",[QT.required]),email:new VE("",[QT.required]),text:new VE("",[QT.required])})}onMessageSubmited(t){var r,s,u;t.invalid||(this._addsMessagesDto.add({name:null===(r=t.get("name"))||void 0===r?void 0:r.value,email:null===(s=t.get("email"))||void 0===s?void 0:s.value,text:null===(u=t.get("text"))||void 0===u?void 0:u.value}),this.contact.reset())}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pN))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-contactus"]],decls:19,vars:1,consts:[[1,"border","bg-light","w-100"],[1,"col","herotext"],[1,"fw-bold"],[1,"container-fluid"],[1,"col-1"],[3,"formGroup","ngSubmit"],[1,"p-3","background"],["type","text","formControlName","name","placeholder","Name"],["type","text","formControlName","email","placeholder","Email"],["type","text","formControlName","text","placeholder","Text",1,"formmessage"],["type","submit","value","Send message",1,"background","text-white"]],template:function(t,r){1&t&&(f._UZ(0,"p",0),f.TgZ(1,"div",1)(2,"h1")(3,"span",2),f._uU(4,"DROP US A LINE"),f.qZA()(),f._UZ(5,"p",0)(6,"br"),f.TgZ(7,"div",3)(8,"div",4)(9,"form",5),f.NdJ("ngSubmit",function(){return r.onMessageSubmited(r.contact)}),f.qZA(),f.TgZ(10,"div",6),f._UZ(11,"input",7),f.qZA()(),f.TgZ(12,"div",4)(13,"div",6),f._UZ(14,"input",8),f.qZA()(),f.TgZ(15,"div",4)(16,"div",6),f._UZ(17,"input",9),f.qZA(),f._UZ(18,"input",10),f.qZA()()()),2&t&&(f.xp6(9),f.Q6J("formGroup",r.contact))},directives:[Kx,Rx,KI,LI,Nx,mA],encapsulation:2,changeDetection:0}),n})(),L1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-contactus-page"]],decls:3,vars:0,template:function(t,r){1&t&&f._UZ(0,"lib-contactus")(1,"br")(2,"lib-goback")},directives:[F1,FI],encapsulation:2,changeDetection:0}),n})(),V1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn,hN,ss.hO,gN,hN,Di.forChild([{path:"",component:L1}]),PE]]}),n})();function U1(n,e){if(1&n&&(f.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"h5",3),f._uU(4),f.qZA(),f.TgZ(5,"h6",4),f._uU(6),f.qZA(),f.TgZ(7,"h6",4),f._uU(8),f.qZA(),f._UZ(9,"img",5),f.TgZ(10,"a",6),f._uU(11,"Dodaj do koszyka"),f.qZA()()()()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.name),f.xp6(2),f.Oqu(t.description),f.xp6(2),f.hij("",t.price," z\u0142"),f.xp6(1),f.Q6J("src",t.imageUrl,f.LSH)}}let B1=(()=>{class n{constructor(t,r){this._getsOneProductDto=t,this._selectsProductContextStorage=r,this.productDetail$=this._selectsProductContextStorage.select().pipe(Dn(s=>this._getsOneProductDto.getOne(s.productId)))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ZM),f.Y36(YM))},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-product-detail"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"card",2,"width","18rem"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"],["width","100","height","200",3,"src"],["href","#",1,"card-link"]],template:function(t,r){1&t&&(f.YNc(0,U1,12,4,"div",0),f.ALo(1,"async")),2&t&&f.Q6J("ngIf",f.lcZ(1,1,r.productDetail$))},directives:[ir],pipes:[Eu],encapsulation:2,changeDetection:0}),n})(),j1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-productdetail-page"]],decls:5,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"h1"),f._uU(1,"ProductdetailPage"),f.qZA(),f._UZ(2,"lib-product-detail")(3,"lib-goback"),f._uU(4,">\n"))},directives:[B1,FI],encapsulation:2,changeDetection:0}),n})(),$1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn,EP,ZT,wP,bP,Di.forChild([{path:"",component:j1,resolve:[JM]}]),PE]]}),n})(),H1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-confirmation-page"]],decls:2,vars:0,template:function(t,r){1&t&&(f._UZ(0,"lib-goback"),f._uU(1,">\n"))},directives:[FI],encapsulation:2,changeDetection:0}),n})(),G1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn,Di.forChild([{path:"",component:H1}]),PE]]}),n})(),z1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-cart"]],decls:6,vars:0,consts:[[1,"border","bg-light","w-100"],[1,"col","herotext"],[1,"fw-bold"]],template:function(t,r){1&t&&(f._UZ(0,"p",0),f.TgZ(1,"div",1)(2,"h1")(3,"span",2),f._uU(4," YOUR SHOPPING CART"),f.qZA()()(),f._UZ(5,"p",0))},encapsulation:2,changeDetection:0}),n})(),q1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-cart-page"]],decls:2,vars:0,template:function(t,r){1&t&&(f._UZ(0,"lib-cart"),f._uU(1,">\n"))},directives:[z1],encapsulation:2,changeDetection:0}),n})(),W1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn,Di.forChild([{path:"",component:q1}]),IP]]}),n})();const K1=[{path:"home",loadChildren:()=>XM},{path:"aboutus",loadChildren:()=>LP},{path:"contactus",loadChildren:()=>V1},{path:"details/:productId",loadChildren:()=>$1},{path:"confirmation",loadChildren:()=>G1},{path:"",loadChildren:()=>XM},{path:"shoppingcart",loadChildren:()=>W1}];let Z1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Di.forRoot(K1)],Di]}),n})(),Y1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["lib-button"]],decls:10,vars:3,consts:[[1,"border","bg-light","w-100"],[1,"container-fluid"],["type","button",1,"background","navtext","navpaddingsright",3,"routerLink"],["type","button",1,"background","navtext","navpaddingsleft",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","40","height","40","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-bag-heart","text-white"],["fill-rule","evenodd","d","M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5Zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0ZM14 14V5H2v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1ZM8 7.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132Z"]],template:function(t,r){1&t&&(f._UZ(0,"p",0),f.TgZ(1,"div",1)(2,"button",2),f._uU(3," ABOUT "),f.qZA(),f.TgZ(4,"button",2),f._uU(5," CONTACT "),f.qZA(),f.TgZ(6,"button",3),f.O4$(),f.TgZ(7,"svg",4),f._UZ(8,"path",5),f.qZA()()(),f.kcU(),f._UZ(9,"p",0)),2&t&&(f.xp6(2),f.Q6J("routerLink","./aboutus"),f.xp6(2),f.Q6J("routerLink","./contactus"),f.xp6(2),f.Q6J("routerLink","./shoppingcart"))},directives:[Zu],encapsulation:2,changeDetection:0}),n})(),Q1=(()=>{class n{constructor(){this.title="HACKATON"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"container-fluid","text-white","header","background"],[1,"display-6","fw-bold","mainheading"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"p",1),f._uU(2," E-COMMERCE by \u017byrafy "),f._UZ(3,"br")(4,"br")(5,"lib-button"),f.qZA()(),f._UZ(6,"router-outlet"))},directives:[Y1,Hl],styles:[""]}),n})();const mN_firebase={projectId:"hakaton-2939c",appId:"1:328501125806:web:f4fdbfdcfbd55095c0433f",storageBucket:"hakaton-2939c.appspot.com",locationId:"europe-west",apiKey:"AIzaSyBBe-onwqZKv-FSmDwnyRRflXyYmm_SleI",authDomain:"hakaton-2939c.firebaseapp.com",messagingSenderId:"328501125806"};class EA{constructor(e){return e}}const yN="firestore",wA=new f.OlP("angularfire2.firestore-instances"),tk={provide:class J1{constructor(){return(0,dr.vb)(yN)}},deps:[[new f.FiY,wA]]},nk={provide:EA,useFactory:function X1(n,e){const t=(0,dr.JM)(yN,n,e);return t&&new EA(t)},deps:[[new f.FiY,wA],class xE{constructor(e){return e}}]};let _N=(()=>{class n{constructor(){(0,AT.KN)("angularfire",dr.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[nk,tk]}),n})();class vN{}const zc="*";function EN(n,e=null){return{type:2,steps:n,options:e}}function wN(n){return{type:6,styles:n,offset:null}}function bN(n){Promise.resolve(null).then(n)}class BE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){bN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class IN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,s=0;const u=this.players.length;0==u?bN(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++s==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,g)=>Math.max(c,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const s=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(s)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Kt=!1;function DN(n){return new f.vHH(3e3,Kt)}function Lk(){return"undefined"!=typeof window&&void 0!==window.document}function IA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Uh(n){switch(n.length){case 0:return new BE;case 1:return n[0];default:return new IN(n)}}function CN(n,e,t,r,s={},u={}){const c=[],g=[];let v=-1,I=null;if(r.forEach(S=>{const x=S.offset,L=x==v,q=L&&I||{};Object.keys(S).forEach(Z=>{let ye=Z,Pe=S[Z];if("offset"!==Z)switch(ye=e.normalizePropertyName(ye,c),Pe){case"!":Pe=s[Z];break;case zc:Pe=u[Z];break;default:Pe=e.normalizeStyleValue(Z,ye,Pe,c)}q[ye]=Pe}),L||g.push(q),I=q,v=x}),c.length)throw function Tk(n){return new f.vHH(3502,Kt)}();return g}function DA(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&CA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&CA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&CA(t,"destroy",n)))}}function CA(n,e,t){const r=t.totalTime,u=TA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function TA(n,e,t,r,s="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:s,totalTime:u,disabled:!!c}}function Do(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function TN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let AA=(n,e)=>!1,AN=(n,e,t)=>[],SN=null;function SA(n){const e=n.parentNode||n.host;return e===SN?null:e}(IA()||"undefined"!=typeof Element)&&(Lk()?(SN=(()=>document.documentElement)(),AA=(n,e)=>{for(;e;){if(e===n)return!0;e=SA(e)}return!1}):AA=(n,e)=>n.contains(e),AN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let qp=null,MN=!1;function xN(n){qp||(qp=function Uk(){return"undefined"!=typeof document?document.body:null}()||{},MN=!!qp.style&&"WebkitAppearance"in qp.style);let e=!0;return qp.style&&!function Vk(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in qp.style,!e&&MN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in qp.style)),e}const NN=AA,RN=AN;let ON=(()=>{class n{validateStyleProperty(t){return xN(t)}matchesElement(t,r){return!1}containsElement(t,r){return NN(t,r)}getParentElement(t){return SA(t)}query(t,r,s){return RN(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,u,c,g=[],v){return new BE(s,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),MA=(()=>{class n{}return n.NOOP=new ON,n})();const xA="ng-enter",YI="ng-leave",QI="ng-trigger",JI=".ng-trigger",kN="ng-animating",NA=".ng-animating";function Wp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:RA(parseFloat(e[1]),e[2])}function RA(n,e){return"s"===e?1e3*n:n}function XI(n,e,t){return n.hasOwnProperty("duration")?n:function $k(n,e,t){let s,u=0,c="";if("string"==typeof n){const g=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return e.push(DN()),{duration:0,delay:0,easing:""};s=RA(parseFloat(g[1]),g[2]);const v=g[3];null!=v&&(u=RA(parseFloat(v),g[4]));const I=g[5];I&&(c=I)}else s=n;if(!t){let g=!1,v=e.length;s<0&&(e.push(function ik(){return new f.vHH(3100,Kt)}()),g=!0),u<0&&(e.push(function sk(){return new f.vHH(3101,Kt)}()),g=!0),g&&e.splice(v,0,DN())}return{duration:s,delay:u,easing:c}}(n,e,t)}function wy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Bh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else wy(n,t);return t}function LN(n,e,t){return t?e+":"+t+";":""}function VN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=LN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=LN(0,zk(t),n.style[t]));n.setAttribute("style",e)}function gl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const s=PA(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[s]),n.style[s]=e[r]}),IA()&&VN(n))}function Kp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=PA(t);n.style[r]=""}),IA()&&VN(n))}function jE(n){return Array.isArray(n)?1==n.length?n[0]:EN(n):n}const OA=new RegExp("{{\\s*(.+?)\\s*}}","g");function UN(n){let e=[];if("string"==typeof n){let t;for(;t=OA.exec(n);)e.push(t[1]);OA.lastIndex=0}return e}function eD(n,e,t){const r=n.toString(),s=r.replace(OA,(u,c)=>{let g=e[c];return e.hasOwnProperty(c)||(t.push(function ak(n){return new f.vHH(3003,Kt)}()),g=""),g.toString()});return s==r?n:s}function tD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Gk=/-+([a-z0-9])/g;function PA(n){return n.replace(Gk,(...e)=>e[1].toUpperCase())}function zk(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Co(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function uk(n){return new f.vHH(3004,Kt)}()}}function BN(n,e){return window.getComputedStyle(n)[e]}function Qk(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Jk(n,e,t){if(":"==n[0]){const v=function Xk(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function bk(n){return new f.vHH(3016,Kt)}()),"* => *"}}(n,t);if("function"==typeof v)return void e.push(v);n=v}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function wk(n){return new f.vHH(3015,Kt)}()),e;const s=r[1],u=r[2],c=r[3];e.push(jN(s,c));"<"==u[0]&&!("*"==s&&"*"==c)&&e.push(jN(c,s))}(r,t,e)):t.push(n),t}const sD=new Set(["true","1"]),oD=new Set(["false","0"]);function jN(n,e){const t=sD.has(n)||oD.has(n),r=sD.has(e)||oD.has(e);return(s,u)=>{let c="*"==n||n==s,g="*"==e||e==u;return!c&&t&&"boolean"==typeof s&&(c=s?sD.has(n):oD.has(n)),!g&&r&&"boolean"==typeof u&&(g=u?sD.has(e):oD.has(e)),c&&g}}const eF=new RegExp("s*:selfs*,?","g");function kA(n,e,t,r){return new tF(n).build(e,t,r)}class tF{constructor(e){this._driver=e}build(e,t,r){const s=new iF(t);this._resetContextStyleTimingState(s);const u=Co(this,jE(e),s);return s.unsupportedCSSPropertiesFound.size&&s.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,s=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function ck(){return new f.vHH(3006,Kt)}()),e.definitions.forEach(g=>{if(this._resetContextStyleTimingState(t),0==g.type){const v=g,I=v.name;I.toString().split(/\s*,\s*/).forEach(S=>{v.name=S,u.push(this.visitState(v,t))}),v.name=I}else if(1==g.type){const v=this.visitTransition(g,t);r+=v.queryCount,s+=v.depCount,c.push(v)}else t.errors.push(function dk(){return new f.vHH(3007,Kt)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:s,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),s=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=s||{};r.styles.forEach(g=>{if(aD(g)){const v=g;Object.keys(v).forEach(I=>{UN(v[I]).forEach(S=>{c.hasOwnProperty(S)||u.add(S)})})}}),u.size&&(tD(u.values()),t.errors.push(function hk(n,e){return new f.vHH(3008,Kt)}()))}return{type:0,name:e.name,style:r,options:s?{params:s}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Co(this,jE(e.animation),t);return{type:1,matchers:Qk(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Zp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Co(this,r,t)),options:Zp(e.options)}}visitGroup(e,t){const r=t.currentTime;let s=0;const u=e.steps.map(c=>{t.currentTime=r;const g=Co(this,c,t);return s=Math.max(s,t.currentTime),g});return t.currentTime=s,{type:3,steps:u,options:Zp(e.options)}}visitAnimate(e,t){const r=function oF(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return FA(XI(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=FA(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||XI(r,e),FA(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let s,u=e.styles?e.styles:wN({});if(5==u.type)s=this.visitKeyframes(u,t);else{let c=e.styles,g=!1;if(!c){g=!0;const I={};r.easing&&(I.easing=r.easing),c=wN(I)}t.currentTime+=r.duration+r.delay;const v=this.visitStyle(c,t);v.isEmptyStep=g,s=v}return t.currentAnimateTimings=null,{type:4,timings:r,style:s,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==zc?r.push(c):t.errors.push(function fk(n){return new f.vHH(3002,Kt)}()):r.push(c)}):r.push(e.styles);let s=!1,u=null;return r.forEach(c=>{if(aD(c)){const g=c,v=g.easing;if(v&&(u=v,delete g.easing),!s)for(let I in g)if(g[I].toString().indexOf("{{")>=0){s=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let s=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(g=>{if(!this._driver.validateStyleProperty(g))return delete c[g],void t.unsupportedCSSPropertiesFound.add(g);const v=t.collectedStyles[t.currentQuerySelector],I=v[g];let S=!0;I&&(u!=s&&u>=I.startTime&&s<=I.endTime&&(t.errors.push(function pk(n,e,t,r,s){return new f.vHH(3010,Kt)}()),S=!1),u=I.startTime),S&&(v[g]={startTime:u,endTime:s}),t.options&&function Hk(n,e,t){const r=e.params||{},s=UN(n);s.length&&s.forEach(u=>{r.hasOwnProperty(u)||t.push(function ok(n){return new f.vHH(3001,Kt)}())})}(c[g],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function gk(){return new f.vHH(3011,Kt)}()),r;let u=0;const c=[];let g=!1,v=!1,I=0;const S=e.steps.map(pt=>{const mt=this._makeStyleAst(pt,t);let It=null!=mt.offset?mt.offset:function sF(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(aD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(aD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(mt.styles),ut=0;return null!=It&&(u++,ut=mt.offset=It),v=v||ut<0||ut>1,g=g||ut<I,I=ut,c.push(ut),mt});v&&t.errors.push(function mk(){return new f.vHH(3012,Kt)}()),g&&t.errors.push(function yk(){return new f.vHH(3200,Kt)}());const x=e.steps.length;let L=0;u>0&&u<x?t.errors.push(function _k(){return new f.vHH(3202,Kt)}()):0==u&&(L=1/(x-1));const q=x-1,Z=t.currentTime,ye=t.currentAnimateTimings,Pe=ye.duration;return S.forEach((pt,mt)=>{const It=L>0?mt==q?1:L*mt:c[mt],ut=It*Pe;t.currentTime=Z+ye.delay+ut,ye.duration=ut,this._validateStyleAst(pt,t),pt.offset=It,r.styles.push(pt)}),r}visitReference(e,t){return{type:8,animation:Co(this,jE(e.animation),t),options:Zp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Zp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Zp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,s=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function nF(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(eF,"")),n=n.replace(/@\*/g,JI).replace(/@\w+/g,t=>JI+"-"+t.substr(1)).replace(/:animating/g,NA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Do(t.collectedStyles,t.currentQuerySelector,{});const g=Co(this,jE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:s.limit||0,optional:!!s.optional,includeSelf:c,animation:g,originalSelector:e.selector,options:Zp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function vk(){return new f.vHH(3013,Kt)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:XI(e.timings,t.errors,!0);return{type:12,animation:Co(this,jE(e.animation),t),timings:r,options:null}}}class iF{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function aD(n){return!Array.isArray(n)&&"object"==typeof n}function Zp(n){return n?(n=wy(n)).params&&(n.params=function rF(n){return n?wy(n):null}(n.params)):n={},n}function FA(n,e,t){return{duration:n,delay:e,easing:t}}function LA(n,e,t,r,s,u,c=null,g=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:s,delay:u,totalTime:s+u,easing:c,subTimeline:g}}class uD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const lF=new RegExp(":enter","g"),dF=new RegExp(":leave","g");function VA(n,e,t,r,s,u={},c={},g,v,I=[]){return(new hF).buildKeyframes(n,e,t,r,s,u,c,g,v,I)}class hF{buildKeyframes(e,t,r,s,u,c,g,v,I,S=[]){I=I||new uD;const x=new UA(e,t,I,s,u,S,[]);x.options=v,x.currentTimeline.setStyles([c],null,x.errors,v),Co(this,r,x);const L=x.timelines.filter(q=>q.containsAnimation());if(Object.keys(g).length){let q;for(let Z=L.length-1;Z>=0;Z--){const ye=L[Z];if(ye.element===t){q=ye;break}}q&&!q.allowOnlyTimelineStyles()&&q.setStyles([g],null,x.errors,v)}return L.length?L.map(q=>q.buildKeyframes()):[LA(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const s=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,s,s.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?Wp(r.duration):null,g=null!=r.delay?Wp(r.delay):null;return 0!==c&&e.forEach(v=>{const I=t.appendInstructionToTimeline(v,c,g);u=Math.max(u,I.duration+I.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Co(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let s=t;const u=e.options;if(u&&(u.params||u.delay)&&(s=t.createSubContext(u),s.transformIntoNewTimeline(),null!=u.delay)){6==s.previousNode.type&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=lD);const c=Wp(u.delay);s.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Co(this,c,s)),s.currentTimeline.applyStylesToKeyframe(),s.subContextCount>r&&s.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let s=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?Wp(e.options.delay):0;e.steps.forEach(c=>{const g=t.createSubContext(e.options);u&&g.delayNextStep(u),Co(this,c,g),s=Math.max(s,g.currentTimeline.currentTime),r.push(g.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(s),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return XI(t.params?eD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),s=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),s.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),s.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,s=t.currentAnimateTimings;!s&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=s&&s.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,s=t.currentTimeline.duration,u=r.duration,g=t.createSubContext().currentTimeline;g.easing=r.easing,e.styles.forEach(v=>{g.forwardTime((v.offset||0)*u),g.setStyles(v.styles,v.easing,t.errors,t.options),g.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(g),t.transformIntoNewTimeline(s+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,s=e.options||{},u=s.delay?Wp(s.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=lD);let c=r;const g=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!s.optional,t.errors);t.currentQueryTotal=g.length;let v=null;g.forEach((I,S)=>{t.currentQueryIndex=S;const x=t.createSubContext(e.options,I);u&&x.delayNextStep(u),I===t.element&&(v=x.currentTimeline),Co(this,e.animation,x),x.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,x.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),v&&(t.currentTimeline.mergeTimelineCollectedStyles(v),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,s=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),g=c*(t.currentQueryTotal-1);let v=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":v=g-v;break;case"full":v=r.currentStaggerTime}const S=t.currentTimeline;v&&S.delayNextStep(v);const x=S.currentTime;Co(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=s.currentTime-x+(s.startTime-r.currentTimeline.startTime)}}const lD={};class UA{constructor(e,t,r,s,u,c,g,v){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=s,this._leaveClassName=u,this.errors=c,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=lD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=v||new cD(this._driver,t,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let s=this.options;null!=r.duration&&(s.duration=Wp(r.duration)),null!=r.delay&&(s.delay=Wp(r.delay));const u=r.params;if(u){let c=s.params;c||(c=this.options.params={}),Object.keys(u).forEach(g=>{(!t||!c.hasOwnProperty(g))&&(c[g]=eD(u[g],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(s=>{r[s]=t[s]})}}return e}createSubContext(e=null,t,r){const s=t||this.element,u=new UA(this._driver,s,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(s,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=lD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const s={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new fF(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,s,e.stretchStartingKeyframe);return this.timelines.push(u),s}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,s,u,c){let g=[];if(s&&g.push(this.element),e.length>0){e=(e=e.replace(lF,"."+this._enterClassName)).replace(dF,"."+this._leaveClassName);let I=this._driver.query(this.element,e,1!=r);0!==r&&(I=r<0?I.slice(I.length+r,I.length):I.slice(0,r)),g.push(...I)}return!u&&0==g.length&&c.push(function Ek(n){return new f.vHH(3014,Kt)}()),g}}class cD{constructor(e,t,r,s){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=s,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new cD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||zc,this._currentKeyframe[t]=zc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,s){t&&(this._previousKeyframe.easing=t);const u=s&&s.params||{},c=function pF(n,e){const t={};let r;return n.forEach(s=>{"*"===s?(r=r||Object.keys(e),r.forEach(u=>{t[u]=zc})):Bh(s,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(g=>{const v=eD(c[g],u,r);this._pendingStyles[g]=v,this._localTimelineStyles.hasOwnProperty(g)||(this._backFill[g]=this._globalTimelineStyles.hasOwnProperty(g)?this._globalTimelineStyles[g]:zc),this._updateStyle(g,v)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],s=e._styleSummary[t];(!r||s.time>r.time)&&this._updateStyle(t,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let s=[];this._keyframes.forEach((g,v)=>{const I=Bh(g,!0);Object.keys(I).forEach(S=>{const x=I[S];"!"==x?e.add(S):x==zc&&t.add(S)}),r||(I.offset=v/this.duration),s.push(I)});const u=e.size?tD(e.values()):[],c=t.size?tD(t.values()):[];if(r){const g=s[0],v=wy(g);g.offset=0,v.offset=1,s=[g,v]}return LA(this.element,s,u,c,this.duration,this.startTime,this.easing,!1)}}class fF extends cD{constructor(e,t,r,s,u,c,g=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=s,this.postStyleProps=u,this._stretchStartingKeyframe=g,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:s}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,g=t/c,v=Bh(e[0],!1);v.offset=0,u.push(v);const I=Bh(e[0],!1);I.offset=GN(g),u.push(I);const S=e.length-1;for(let x=1;x<=S;x++){let L=Bh(e[x],!1);L.offset=GN((t+L.offset*r)/c),u.push(L)}r=c,t=0,s="",e=u}return LA(this.element,e,this.preStyleProps,this.postStyleProps,r,t,s,!0)}}function GN(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class BA{}class gF extends BA{normalizePropertyName(e,t){return PA(e)}normalizeStyleValue(e,t,r,s){let u="";const c=r.toString().trim();if(mF[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const g=r.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&s.push(function lk(n,e){return new f.vHH(3005,Kt)}())}return c+u}}const mF=(()=>function yF(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function zN(n,e,t,r,s,u,c,g,v,I,S,x,L){return{type:0,element:n,triggerName:e,isRemovalTransition:s,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:g,queriedElements:v,preStyleProps:I,postStyleProps:S,totalTime:x,errors:L}}const jA={};class qN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,s){return function _F(n,e,t,r,s){return n.some(u=>u(e,t,r,s))}(this.ast.matchers,e,t,r,s)}buildStyles(e,t,r){const s=this._stateStyles["*"],u=this._stateStyles[e],c=s?s.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,s,u,c,g,v,I,S){const x=[],L=this.ast.options&&this.ast.options.params||jA,Z=this.buildStyles(r,g&&g.params||jA,x),ye=v&&v.params||jA,Pe=this.buildStyles(s,ye,x),pt=new Set,mt=new Map,It=new Map,ut="void"===s,kt={params:Object.assign(Object.assign({},L),ye)},Ut=S?[]:VA(e,t,this.ast.animation,u,c,Z,Pe,kt,I,x);let sn=0;if(Ut.forEach(qc=>{sn=Math.max(qc.duration+qc.delay,sn)}),x.length)return zN(t,this._triggerName,r,s,ut,Z,Pe,[],[],mt,It,sn,x);Ut.forEach(qc=>{const Wc=qc.element,uR=Do(mt,Wc,{});qc.preStyleProps.forEach(Yp=>uR[Yp]=!0);const HE=Do(It,Wc,{});qc.postStyleProps.forEach(Yp=>HE[Yp]=!0),Wc!==t&&pt.add(Wc)});const gs=tD(pt.values());return zN(t,this._triggerName,r,s,ut,Z,Pe,Ut,gs,mt,It,sn)}}class vF{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},s=wy(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(s[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(g=>{let v=c[g];v.length>1&&(v=eD(v,s,t));const I=this.normalizer.normalizePropertyName(g,t);v=this.normalizer.normalizeStyleValue(g,I,v,t),r[I]=v})}}),r}}class wF{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(s=>{this.states[s.name]=new vF(s.style,s.options&&s.options.params||{},r)}),WN(this.states,"true","1"),WN(this.states,"false","0"),t.transitions.forEach(s=>{this.transitionFactories.push(new qN(e,s,this.states))}),this.fallbackTransition=function bF(n,e,t){return new qN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,g)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,s){return this.transitionFactories.find(c=>c.match(e,t,r,s))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function WN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const IF=new uD;class DF{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=kA(this._driver,t,r,[]);if(r.length)throw function Ak(n){return new f.vHH(3503,Kt)}();this._animations[e]=u}_buildPlayer(e,t,r){const s=e.element,u=CN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(s,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const s=[],u=this._animations[e];let c;const g=new Map;if(u?(c=VA(this._driver,t,u,xA,YI,{},{},r,IF,s),c.forEach(S=>{const x=Do(g,S.element,{});S.postStyleProps.forEach(L=>x[L]=null)})):(s.push(function Sk(){return new f.vHH(3300,Kt)}()),c=[]),s.length)throw function Mk(n){return new f.vHH(3504,Kt)}();g.forEach((S,x)=>{Object.keys(S).forEach(L=>{S[L]=this._driver.computeStyle(x,L,zc)})});const I=Uh(c.map(S=>{const x=g.get(S.element);return this._buildPlayer(S,{},x)}));return this._playersById[e]=I,I.onDestroy(()=>this.destroy(e)),this.players.push(I),I}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function xk(n){return new f.vHH(3301,Kt)}();return t}listen(e,t,r,s){const u=TA(t,"","","");return DA(this._getPlayer(e),r,u,s),()=>{}}command(e,t,r,s){if("register"==r)return void this.register(e,s[0]);if("create"==r)return void this.create(e,t,s[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(s[0]));break;case"destroy":this.destroy(e)}}}const KN="ng-animate-queued",$A="ng-animate-disabled",MF=[],ZN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},xF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ma="__ng_removed";class HA{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function PF(n){return null!=n?n:null}(r?e.value:e),r){const u=wy(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(s=>{null==r[s]&&(r[s]=t[s])})}}}const $E="void",GA=new HA($E);class NF{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ya(t,this._hostClassName)}listen(e,t,r,s){if(!this._triggers.hasOwnProperty(t))throw function Nk(n,e){return new f.vHH(3302,Kt)}();if(null==r||0==r.length)throw function Rk(n){return new f.vHH(3303,Kt)}();if(!function kF(n){return"start"==n||"done"==n}(r))throw function Ok(n,e){return new f.vHH(3400,Kt)}();const u=Do(this._elementListeners,e,[]),c={name:t,phase:r,callback:s};u.push(c);const g=Do(this._engine.statesByElement,e,{});return g.hasOwnProperty(t)||(ya(e,QI),ya(e,QI+"-"+t),g[t]=GA),()=>{this._engine.afterFlush(()=>{const v=u.indexOf(c);v>=0&&u.splice(v,1),this._triggers[t]||delete g[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function Pk(n){return new f.vHH(3401,Kt)}();return t}trigger(e,t,r,s=!0){const u=this._getTrigger(t),c=new zA(this.id,t,e);let g=this._engine.statesByElement.get(e);g||(ya(e,QI),ya(e,QI+"-"+t),this._engine.statesByElement.set(e,g={}));let v=g[t];const I=new HA(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&v&&I.absorbOptions(v.options),g[t]=I,v||(v=GA),I.value!==$E&&v.value===I.value){if(!function VF(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let s=0;s<t.length;s++){const u=t[s];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(v.params,I.params)){const ye=[],Pe=u.matchStyles(v.value,v.params,ye),pt=u.matchStyles(I.value,I.params,ye);ye.length?this._engine.reportError(ye):this._engine.afterFlush(()=>{Kp(e,Pe),gl(e,pt)})}return}const L=Do(this._engine.playersByElement,e,[]);L.forEach(ye=>{ye.namespaceId==this.id&&ye.triggerName==t&&ye.queued&&ye.destroy()});let q=u.matchTransition(v.value,I.value,e,I.params),Z=!1;if(!q){if(!s)return;q=u.fallbackTransition,Z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:q,fromState:v,toState:I,player:c,isFallbackTransition:Z}),Z||(ya(e,KN),c.onStart(()=>{by(e,KN)})),c.onDone(()=>{let ye=this.players.indexOf(c);ye>=0&&this.players.splice(ye,1);const Pe=this._engine.playersByElement.get(e);if(Pe){let pt=Pe.indexOf(c);pt>=0&&Pe.splice(pt,1)}}),this.players.push(c),L.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(s=>s.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,JI,!0);r.forEach(s=>{if(s[ma])return;const u=this._engine.fetchNamespacesByElement(s);u.size?u.forEach(c=>c.triggerLeaveAnimation(s,t,!1,!0)):this.clearElementCache(s)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(s=>this.clearElementCache(s)))}triggerLeaveAnimation(e,t,r,s){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const g=[];if(Object.keys(u).forEach(v=>{if(c.set(v,u[v].value),this._triggers[v]){const I=this.trigger(e,v,$E,s);I&&g.push(I)}}),g.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Uh(g).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const s=new Set;t.forEach(u=>{const c=u.name;if(s.has(c))return;s.add(c);const v=this._triggers[c].fallbackTransition,I=r[c]||GA,S=new HA($E),x=new zA(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:v,fromState:I,toState:S,player:x,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let s=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)s=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){s=!0;break}}}if(this.prepareLeaveAnimationListeners(e),s)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[ma];(!u||u===ZN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ya(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const s=r.player;if(s.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(g=>{if(g.name==r.triggerName){const v=TA(u,r.triggerName,r.fromState.value,r.toState.value);v._data=e,DA(r.player,g.phase,v,g.callback)}}),s.markedForDestroy?this._engine.afterFlush(()=>{s.destroy()}):t.push(r)}),this._queue=[],t.sort((r,s)=>{const u=r.transition.ast.depCount,c=s.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,s.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class RF{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(s,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new NF(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,s=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let g=this.driver.getParentElement(t);for(;g;){const v=s.get(g);if(v){const I=r.indexOf(v);r.splice(I+1,0,e),c=!0;break}g=this.driver.getParentElement(g)}}else for(let g=u;g>=0;g--)if(this.driver.containsElement(r[g].hostElement,t)){r.splice(g+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return s.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let s=this._namespaceLookup[e];s&&s.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const s=this._namespaceList.indexOf(r);s>=0&&this._namespaceList.splice(s,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const s=Object.keys(r);for(let u=0;u<s.length;u++){const c=r[s[u]].namespaceId;if(c){const g=this._fetchNamespace(c);g&&t.add(g)}}}return t}trigger(e,t,r,s){if(dD(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,s),!0}return!1}insertNode(e,t,r,s){if(!dD(t))return;const u=t[ma];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}s&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ya(e,$A)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),by(e,$A))}removeNode(e,t,r,s){if(dD(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,s):this.markElementAsRemoved(e,t,!1,s),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,s)}}else this._onRemovalComplete(t,s)}markElementAsRemoved(e,t,r,s,u){this.collectedLeaveElements.push(t),t[ma]={namespaceId:e,setForRemoval:s,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,s,u){return dD(t)?this._fetchNamespace(e).listen(t,r,s,u):()=>{}}_buildInstruction(e,t,r,s,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,s,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,JI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,NA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Uh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[ma];if(r&&r.setForRemoval){if(e[ma]=ZN,r.namespaceId){this.destroyInnerAnimations(e);const s=this._fetchNamespace(r.namespaceId);s&&s.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains($A))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(s=>{this.markElementAsDisabled(s,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,s)=>this._balanceNamespaceList(r,s)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ya(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let s=0;s<r.length;s++)r[s]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Uh(t).onDone(()=>{r.forEach(s=>s())}):r.forEach(s=>s())}}reportError(e){throw function kk(n){return new f.vHH(3402,Kt)}()}_flushAnimations(e,t){const r=new uD,s=[],u=new Map,c=[],g=new Map,v=new Map,I=new Map,S=new Set;this.disabledNodes.forEach(ot=>{S.add(ot);const Dt=this.driver.query(ot,".ng-animate-queued",!0);for(let Nt=0;Nt<Dt.length;Nt++)S.add(Dt[Nt])});const x=this.bodyNode,L=Array.from(this.statesByElement.keys()),q=JN(L,this.collectedEnterElements),Z=new Map;let ye=0;q.forEach((ot,Dt)=>{const Nt=xA+ye++;Z.set(Dt,Nt),ot.forEach(Xt=>ya(Xt,Nt))});const Pe=[],pt=new Set,mt=new Set;for(let ot=0;ot<this.collectedLeaveElements.length;ot++){const Dt=this.collectedLeaveElements[ot],Nt=Dt[ma];Nt&&Nt.setForRemoval&&(Pe.push(Dt),pt.add(Dt),Nt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(Xt=>pt.add(Xt)):mt.add(Dt))}const It=new Map,ut=JN(L,Array.from(pt));ut.forEach((ot,Dt)=>{const Nt=YI+ye++;It.set(Dt,Nt),ot.forEach(Xt=>ya(Xt,Nt))}),e.push(()=>{q.forEach((ot,Dt)=>{const Nt=Z.get(Dt);ot.forEach(Xt=>by(Xt,Nt))}),ut.forEach((ot,Dt)=>{const Nt=It.get(Dt);ot.forEach(Xt=>by(Xt,Nt))}),Pe.forEach(ot=>{this.processLeaveNode(ot)})});const kt=[],Ut=[];for(let ot=this._namespaceList.length-1;ot>=0;ot--)this._namespaceList[ot].drainQueuedTransitions(t).forEach(Nt=>{const Xt=Nt.player,yi=Nt.element;if(kt.push(Xt),this.collectedEnterElements.length){const ms=yi[ma];if(ms&&ms.setForMove){if(ms.previousTriggersValues&&ms.previousTriggersValues.has(Nt.triggerName)){const Qp=ms.previousTriggersValues.get(Nt.triggerName),$h=this.statesByElement.get(Nt.element);$h&&$h[Nt.triggerName]&&($h[Nt.triggerName].value=Qp)}return void Xt.destroy()}}const ml=!x||!this.driver.containsElement(x,yi),To=It.get(yi),jh=Z.get(yi),nr=this._buildInstruction(Nt,r,jh,To,ml);if(nr.errors&&nr.errors.length)return void Ut.push(nr);if(ml)return Xt.onStart(()=>Kp(yi,nr.fromStyles)),Xt.onDestroy(()=>gl(yi,nr.toStyles)),void s.push(Xt);if(Nt.isFallbackTransition)return Xt.onStart(()=>Kp(yi,nr.fromStyles)),Xt.onDestroy(()=>gl(yi,nr.toStyles)),void s.push(Xt);const dR=[];nr.timelines.forEach(ms=>{ms.stretchStartingKeyframe=!0,this.disabledNodes.has(ms.element)||dR.push(ms)}),nr.timelines=dR,r.append(yi,nr.timelines),c.push({instruction:nr,player:Xt,element:yi}),nr.queriedElements.forEach(ms=>Do(g,ms,[]).push(Xt)),nr.preStyleProps.forEach((ms,Qp)=>{const $h=Object.keys(ms);if($h.length){let Jp=v.get(Qp);Jp||v.set(Qp,Jp=new Set),$h.forEach(WA=>Jp.add(WA))}}),nr.postStyleProps.forEach((ms,Qp)=>{const $h=Object.keys(ms);let Jp=I.get(Qp);Jp||I.set(Qp,Jp=new Set),$h.forEach(WA=>Jp.add(WA))})});if(Ut.length){const ot=[];Ut.forEach(Dt=>{ot.push(function Fk(n,e){return new f.vHH(3505,Kt)}())}),kt.forEach(Dt=>Dt.destroy()),this.reportError(ot)}const sn=new Map,gs=new Map;c.forEach(ot=>{const Dt=ot.element;r.has(Dt)&&(gs.set(Dt,Dt),this._beforeAnimationBuild(ot.player.namespaceId,ot.instruction,sn))}),s.forEach(ot=>{const Dt=ot.element;this._getPreviousPlayers(Dt,!1,ot.namespaceId,ot.triggerName,null).forEach(Xt=>{Do(sn,Dt,[]).push(Xt),Xt.destroy()})});const qc=Pe.filter(ot=>eR(ot,v,I)),Wc=new Map;QN(Wc,this.driver,mt,I,zc).forEach(ot=>{eR(ot,v,I)&&qc.push(ot)});const HE=new Map;q.forEach((ot,Dt)=>{QN(HE,this.driver,new Set(ot),v,"!")}),qc.forEach(ot=>{const Dt=Wc.get(ot),Nt=HE.get(ot);Wc.set(ot,Object.assign(Object.assign({},Dt),Nt))});const Yp=[],lR=[],cR={};c.forEach(ot=>{const{element:Dt,player:Nt,instruction:Xt}=ot;if(r.has(Dt)){if(S.has(Dt))return Nt.onDestroy(()=>gl(Dt,Xt.toStyles)),Nt.disabled=!0,Nt.overrideTotalTime(Xt.totalTime),void s.push(Nt);let yi=cR;if(gs.size>1){let To=Dt;const jh=[];for(;To=To.parentNode;){const nr=gs.get(To);if(nr){yi=nr;break}jh.push(To)}jh.forEach(nr=>gs.set(nr,yi))}const ml=this._buildAnimation(Nt.namespaceId,Xt,sn,u,HE,Wc);if(Nt.setRealPlayer(ml),yi===cR)Yp.push(Nt);else{const To=this.playersByElement.get(yi);To&&To.length&&(Nt.parentPlayer=Uh(To)),s.push(Nt)}}else Kp(Dt,Xt.fromStyles),Nt.onDestroy(()=>gl(Dt,Xt.toStyles)),lR.push(Nt),S.has(Dt)&&s.push(Nt)}),lR.forEach(ot=>{const Dt=u.get(ot.element);if(Dt&&Dt.length){const Nt=Uh(Dt);ot.setRealPlayer(Nt)}}),s.forEach(ot=>{ot.parentPlayer?ot.syncPlayerEvents(ot.parentPlayer):ot.destroy()});for(let ot=0;ot<Pe.length;ot++){const Dt=Pe[ot],Nt=Dt[ma];if(by(Dt,YI),Nt&&Nt.hasAnimation)continue;let Xt=[];if(g.size){let ml=g.get(Dt);ml&&ml.length&&Xt.push(...ml);let To=this.driver.query(Dt,NA,!0);for(let jh=0;jh<To.length;jh++){let nr=g.get(To[jh]);nr&&nr.length&&Xt.push(...nr)}}const yi=Xt.filter(ml=>!ml.destroyed);yi.length?FF(this,Dt,yi):this.processLeaveNode(Dt)}return Pe.length=0,Yp.forEach(ot=>{this.players.push(ot),ot.onDone(()=>{ot.destroy();const Dt=this.players.indexOf(ot);this.players.splice(Dt,1)}),ot.play()}),Yp}elementContainsData(e,t){let r=!1;const s=t[ma];return s&&s.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,s,u){let c=[];if(t){const g=this.playersByQueriedElement.get(e);g&&(c=g)}else{const g=this.playersByElement.get(e);if(g){const v=!u||u==$E;g.forEach(I=>{I.queued||!v&&I.triggerName!=s||c.push(I)})}}return(r||s)&&(c=c.filter(g=>!(r&&r!=g.namespaceId||s&&s!=g.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,g=t.isRemovalTransition?void 0:t.triggerName;for(const v of t.timelines){const I=v.element,S=I!==u,x=Do(r,I,[]);this._getPreviousPlayers(I,S,c,g,t.toState).forEach(q=>{const Z=q.getRealPlayer();Z.beforeDestroy&&Z.beforeDestroy(),q.destroy(),x.push(q)})}Kp(u,t.fromStyles)}_buildAnimation(e,t,r,s,u,c){const g=t.triggerName,v=t.element,I=[],S=new Set,x=new Set,L=t.timelines.map(Z=>{const ye=Z.element;S.add(ye);const Pe=ye[ma];if(Pe&&Pe.removedBeforeQueried)return new BE(Z.duration,Z.delay);const pt=ye!==v,mt=function LF(n){const e=[];return XN(n,e),e}((r.get(ye)||MF).map(sn=>sn.getRealPlayer())).filter(sn=>!!sn.element&&sn.element===ye),It=u.get(ye),ut=c.get(ye),kt=CN(0,this._normalizer,0,Z.keyframes,It,ut),Ut=this._buildPlayer(Z,kt,mt);if(Z.subTimeline&&s&&x.add(ye),pt){const sn=new zA(e,g,ye);sn.setRealPlayer(Ut),I.push(sn)}return Ut});I.forEach(Z=>{Do(this.playersByQueriedElement,Z.element,[]).push(Z),Z.onDone(()=>function OF(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const s=r.indexOf(t);r.splice(s,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,Z.element,Z))}),S.forEach(Z=>ya(Z,kN));const q=Uh(L);return q.onDestroy(()=>{S.forEach(Z=>by(Z,kN)),gl(v,t.toStyles)}),x.forEach(Z=>{Do(s,Z,[]).push(q)}),q}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new BE(e.duration,e.delay)}}class zA{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new BE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>DA(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Do(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function dD(n){return n&&1===n.nodeType}function YN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function QN(n,e,t,r,s){const u=[];t.forEach(v=>u.push(YN(v)));const c=[];r.forEach((v,I)=>{const S={};v.forEach(x=>{const L=S[x]=e.computeStyle(I,x,s);(!L||0==L.length)&&(I[ma]=xF,c.push(I))}),n.set(I,S)});let g=0;return t.forEach(v=>YN(v,u[g++])),c}function JN(n,e){const t=new Map;if(n.forEach(g=>t.set(g,[])),0==e.length)return t;const s=new Set(e),u=new Map;function c(g){if(!g)return 1;let v=u.get(g);if(v)return v;const I=g.parentNode;return v=t.has(I)?I:s.has(I)?1:c(I),u.set(g,v),v}return e.forEach(g=>{const v=c(g);1!==v&&t.get(v).push(g)}),t}function ya(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function by(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function FF(n,e,t){Uh(t).onDone(()=>n.processLeaveNode(e))}function XN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof IN?XN(r.players,e):e.push(r)}}function eR(n,e,t){const r=t.get(n);if(!r)return!1;let s=e.get(n);return s?r.forEach(u=>s.add(u)):e.set(n,r),t.delete(n),!0}class hD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(s,u)=>{},this._transitionEngine=new RF(e,t,r),this._timelineEngine=new DF(e,t,r),this._transitionEngine.onRemovalComplete=(s,u)=>this.onRemovalComplete(s,u)}registerTrigger(e,t,r,s,u){const c=e+"-"+s;let g=this._triggerCache[c];if(!g){const v=[],S=kA(this._driver,u,v,[]);if(v.length)throw function Ck(n,e){return new f.vHH(3404,Kt)}();g=function EF(n,e,t){return new wF(n,e,t)}(s,S,this._normalizer),this._triggerCache[c]=g}this._transitionEngine.registerTrigger(t,s,g)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,s){this._transitionEngine.insertNode(e,t,r,s)}onRemove(e,t,r,s){this._transitionEngine.removeNode(e,t,s||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,s){if("@"==r.charAt(0)){const[u,c]=TN(r);this._timelineEngine.command(u,t,c,s)}else this._transitionEngine.trigger(e,t,r,s)}listen(e,t,r,s,u){if("@"==r.charAt(0)){const[c,g]=TN(r);return this._timelineEngine.listen(c,t,g,u)}return this._transitionEngine.listen(e,t,r,s,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let BF=(()=>{class n{constructor(t,r,s){this._element=t,this._startStyles=r,this._endStyles=s,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&gl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gl(this._element,this._initialStyles),this._endStyles&&(gl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Kp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Kp(this._element,this._endStyles),this._endStyles=null),gl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function qA(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const s=t[r];jF(s)&&(e=e||{},e[s]=n[s])}return e}function jF(n){return"display"===n||"position"===n}class tR{constructor(e,t,r,s){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=s,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:BN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class $F{validateStyleProperty(e){return xN(e)}matchesElement(e,t){return!1}containsElement(e,t){return NN(e,t)}getParentElement(e){return SA(e)}query(e,t,r){return RN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,s,u,c=[]){const v={duration:r,delay:s,fill:0==s?"both":"forwards"};u&&(v.easing=u);const I={},S=c.filter(L=>L instanceof tR);(function qk(n,e){return 0===n||0===e})(r,s)&&S.forEach(L=>{let q=L.currentSnapshot;Object.keys(q).forEach(Z=>I[Z]=q[Z])}),t=function Wk(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(g=>{u.hasOwnProperty(g)||c.push(g),u[g]=t[g]}),c.length)for(var s=1;s<e.length;s++){let g=e[s];c.forEach(function(v){g[v]=BN(n,v)})}}return e}(e,t=t.map(L=>Bh(L,!1)),I);const x=function UF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=qA(e[0]),e.length>1&&(r=qA(e[e.length-1]))):e&&(t=qA(e)),t||r?new BF(n,t,r):null}(e,t);return new tR(e,t,v,x)}}let HF=(()=>{class n extends vN{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?EN(t):t;return nR(this._renderer,null,r,"register",[s]),new GF(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(ue))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class GF extends class rk{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new zF(this._id,e,t||{},this._renderer)}}class zF{constructor(e,t,r,s){this.id=e,this.element=t,this._renderer=s,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return nR(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function nR(n,e,t,r,s){return n.setProperty(e,`@@${t}:${r}`,s)}const rR="@.disabled";let qF=(()=>{class n{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const g=null==c?void 0:c.parentNode(u);g&&c.removeChild(g,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let S=this._rendererCache.get(u);return S||(S=new iR("",u,this.engine),this._rendererCache.set(u,S)),S}const c=r.id,g=r.id+"-"+this._currentId;this._currentId++,this.engine.register(g,t);const v=S=>{Array.isArray(S)?S.forEach(v):this.engine.registerTrigger(c,g,t,S.name,S)};return r.data.animation.forEach(v),new WF(this,g,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,g]=u;c(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(hD),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class iR{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,s=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,s)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==rR?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class WF extends iR{constructor(e,t,r,s){super(t,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==rR?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const s=function KF(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function ZF(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,s,u,c,g=>{this.factory.scheduleListenerCallback(g._data||-1,r,g)})}return this.delegate.listen(e,t,r)}}let YF=(()=>{class n extends hD{constructor(t,r,s){super(t.body,r,s)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ue),f.LFG(MA),f.LFG(BA))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const sR=new f.OlP("AnimationModuleType"),oR=[{provide:vN,useClass:HF},{provide:BA,useFactory:function QF(){return new gF}},{provide:hD,useClass:YF},{provide:f.FYo,useFactory:function JF(n,e,t){return new qF(n,e,t)},deps:[dn,hD,f.R0b]}],aR=[{provide:MA,useFactory:()=>new $F},{provide:sR,useValue:"BrowserAnimations"},...oR],XF=[{provide:MA,useClass:ON},{provide:sR,useValue:"NoopAnimations"},...oR];let eL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?XF:aR}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:aR,imports:[Lo]}),n})(),tL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[],imports:[[Gn,Di]]}),n})(),nL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[Q1]}),n.\u0275inj=f.cJS({providers:[],imports:[[Lo,Di,gN,Z1,tL,_N,WM,ss.hO.initializeApp(mN_firebase),eL]]}),n})();(0,f.G48)(),Au().bootstrapModule(nL).catch(n=>console.error(n))},5867:(Xe,we,O)=>{O.d(we,{Mq:()=>f.getApp,C6:()=>f.getApps,KN:()=>f.registerVersion});var f=O(9681);(0,f.registerVersion)("firebase","9.8.1","app")},127:(Xe,we,O)=>{O.d(we,{Z:()=>f.Z});var f=O(3942);f.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(Xe,we,O)=>{O.r(we);var f=O(5861),X=O(3942),P=O(2090),ae=O(9681),re=O(655),pe=O(1877),ue=O(4859);const Re=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new pe.Yd("@firebase/auth");function Ye(y,...h){qe.logLevel<=pe.in.ERROR&&qe.error(`Auth (${ae.SDK_VERSION}): ${y}`,...h)}function Te(y,...h){throw je(y,...h)}function Ee(y,...h){return je(y,...h)}function Ie(y,h,m){const E=Object.assign(Object.assign({},Ue()),{[h]:m});return new P.LL("auth","Firebase",E).create(h,{appName:y.name})}function $e(y,h,m){if(!(h instanceof m))throw m.name!==h.constructor.name&&Te(y,"argument-error"),Ie(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...h){if("string"!=typeof y){const m=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(m,...E)}return he.create(y,...h)}function j(y,h,...m){if(!y)throw je(h,...m)}function ve(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ye(h),new Error(h)}function K(y,h){y||ve(h)}const ie=new Map;function ee(y){K(y instanceof Function,"Expected a class definition");let h=ie.get(y);return h?(K(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ie.set(y,h),h)}function Oe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function lt(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Qt{constructor(h,m){this.shortDelay=h,this.longDelay=m,K(m>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Bt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Sn(y,h){K(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return h?`${m}${h.startsWith("/")?h.slice(1):h}`:m}class en{static initialize(h,m,E){this.fetchImpl=h,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},br=new Qt(3e4,6e4);function qt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Vt(y,h,m,E){return qi.apply(this,arguments)}function qi(){return(qi=(0,f.Z)(function*(y,h,m,E,A={}){return Kr(y,A,(0,f.Z)(function*(){let R={},W={};E&&("GET"===h?W=E:R={body:JSON.stringify(E)});const fe=(0,P.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),en.fetch()(ys(y,y.config.apiHost,m,fe),Object.assign({method:h,headers:Le,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Kr(y,h,m){return fr.apply(this,arguments)}function fr(){return(fr=(0,f.Z)(function*(y,h,m){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Zt),h);try{const A=new Zr(y),R=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const W=yield R.json();if("needConfirmation"in W)throw Ai(y,"account-exists-with-different-credential",W);if(R.ok&&!("errorMessage"in W))return W;{const fe=R.ok?W.errorMessage:W.error.message,[Le,Ke]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Ai(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===Le)throw Ai(y,"email-already-in-use",W);const _t=E[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw Ie(y,_t,Ke);Te(y,_t)}}catch(A){if(A instanceof P.ZR)throw A;Te(y,"network-request-failed")}})).apply(this,arguments)}function Ir(y,h,m,E){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,f.Z)(function*(y,h,m,E,A={}){const R=yield Vt(y,h,m,E,A);return"mfaPendingCredential"in R&&Te(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function ys(y,h,m,E){const A=`${h}${m}?${E}`;return y.config.emulator?Sn(y.config,A):`${y.config.apiScheme}://${A}`}class Zr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),br.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ai(y,h,m){const E={appName:y.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const A=Ee(y,h,E);return A.customData._tokenResponse=m,A}function Yr(){return(Yr=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function bn(y,h){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Gs(y,h){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function qn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Ao(){return(Ao=(0,f.Z)(function*(y,h=!1){const m=(0,P.m9)(y),E=yield m.getIdToken(h),A=it(E);j(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,W=null==R?void 0:R.sign_in_provider;return{claims:A,token:E,authTime:qn(Gt(A.auth_time)),issuedAtTime:qn(Gt(A.iat)),expirationTime:qn(Gt(A.exp)),signInProvider:W||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Gt(y){return 1e3*Number(y)}function it(y){const[h,m,E]=y.split(".");if(void 0===h||void 0===m||void 0===E)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,P.tV)(m);return A?JSON.parse(A):(Ye("Failed to decode base64 JWT payload"),null)}catch(A){return Ye("Caught error parsing JWT payload as JSON",A),null}}function pr(y,h){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,f.Z)(function*(y,h,m=!1){if(m)return h;try{return yield h}catch(E){throw E instanceof P.ZR&&jt(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function jt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class zs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var m;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield m.iteration()}),E)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&h.schedule(!0))}h.schedule()})()}}class gr{constructor(h,m){this.createdAt=h,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=qn(this.lastLoginAt),this.creationTime=qn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mr(y){return V.apply(this,arguments)}function V(){return(V=(0,f.Z)(function*(y){var h;const m=y.auth,E=yield y.getIdToken(),A=yield pr(y,Gs(m,{idToken:E}));j(null==A?void 0:A.users.length,m,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const W=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?H(R.providerUserInfo):[],fe=De(y.providerData,W),_t=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==fe?void 0:fe.length)),ct={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:fe,metadata:new gr(R.createdAt,R.lastLoginAt),isAnonymous:_t};Object.assign(y,ct)})).apply(this,arguments)}function z(){return(z=(0,f.Z)(function*(y){const h=(0,P.m9)(y);yield mr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function De(y,h){return[...y.filter(E=>!h.some(A=>A.providerId===E.providerId)),...h]}function H(y){return y.map(h=>{var{providerId:m}=h,E=(0,re._T)(h,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ne(){return(Ne=(0,f.Z)(function*(y,h){const m=yield Kr(y,{},(0,f.Z)(function*(){const E=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,W=ys(y,A,"/v1/token",`key=${R}`),fe=yield y._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",en.fetch()(W,{method:"POST",headers:fe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Je{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){j(h.idToken,"internal-error"),j(void 0!==h.idToken,"internal-error"),j(void 0!==h.refreshToken,"internal-error");const m="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function vt(y){const h=it(y);return j(h,"internal-error"),j(void 0!==h.exp,"internal-error"),j(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,m)}getToken(h,m=!1){var E=this;return(0,f.Z)(function*(){return j(!E.accessToken||E.refreshToken,h,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,m){var E=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:W}=yield function J(y,h){return Ne.apply(this,arguments)}(h,m);E.updateTokensAndExpiration(A,R,Number(W))})()}updateTokensAndExpiration(h,m,E){this.refreshToken=m||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,m){const{refreshToken:E,accessToken:A,expirationTime:R}=m,W=new Je;return E&&(j("string"==typeof E,"internal-error",{appName:h}),W.refreshToken=E),A&&(j("string"==typeof A,"internal-error",{appName:h}),W.accessToken=A),R&&(j("number"==typeof R,"internal-error",{appName:h}),W.expirationTime=R),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Je,this.toJSON())}_performRefresh(){return ve("not implemented")}}function ht(y,h){j("string"==typeof y||void 0===y,"internal-error",{appName:h})}class Ct{constructor(h){var{uid:m,auth:E,stsTokenManager:A}=h,R=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new gr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var m=this;return(0,f.Z)(function*(){const E=yield pr(m,m.stsTokenManager.getToken(m.auth,h));return j(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(h){return function _i(y){return Ao.apply(this,arguments)}(this,h)}reload(){return function G(y){return z.apply(this,arguments)}(this)}_assign(h){this!==h&&(j(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(m=>Object.assign({},m)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Ct(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,m=!1){var E=this;return(0,f.Z)(function*(){let A=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),A=!0),m&&(yield mr(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,f.Z)(function*(){const m=yield h.getIdToken();return yield pr(h,function yt(y,h){return Yr.apply(this,arguments)}(h.auth,{idToken:m})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,m){var E,A,R,W,fe,Le,Ke,_t;const ct=null!==(E=m.displayName)&&void 0!==E?E:void 0,Tn=null!==(A=m.email)&&void 0!==A?A:void 0,di=null!==(R=m.phoneNumber)&&void 0!==R?R:void 0,ql=null!==(W=m.photoURL)&&void 0!==W?W:void 0,Ky=null!==(fe=m.tenantId)&&void 0!==fe?fe:void 0,ra=null!==(Le=m._redirectEventId)&&void 0!==Le?Le:void 0,Nd=null!==(Ke=m.createdAt)&&void 0!==Ke?Ke:void 0,Rd=null!==(_t=m.lastLoginAt)&&void 0!==_t?_t:void 0,{uid:pf,emailVerified:Od,isAnonymous:hi,providerData:gf,stsTokenManager:mf}=m;j(pf&&mf,h,"internal-error");const Zu=Je.fromJSON(this.name,mf);j("string"==typeof pf,h,"internal-error"),ht(ct,h.name),ht(Tn,h.name),j("boolean"==typeof Od,h,"internal-error"),j("boolean"==typeof hi,h,"internal-error"),ht(di,h.name),ht(ql,h.name),ht(Ky,h.name),ht(ra,h.name),ht(Nd,h.name),ht(Rd,h.name);const Wl=new Ct({uid:pf,auth:h,email:Tn,emailVerified:Od,displayName:ct,isAnonymous:hi,photoURL:ql,phoneNumber:di,tenantId:Ky,stsTokenManager:Zu,createdAt:Nd,lastLoginAt:Rd});return gf&&Array.isArray(gf)&&(Wl.providerData=gf.map(Yu=>Object.assign({},Yu))),ra&&(Wl._redirectEventId=ra),Wl}static _fromIdTokenResponse(h,m,E=!1){return(0,f.Z)(function*(){const A=new Je;A.updateFromServerResponse(m);const R=new Ct({uid:m.localId,auth:h,stsTokenManager:A,isAnonymous:E});return yield mr(R),R})()}}const Et=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(m,E){var A=this;return(0,f.Z)(function*(){A.storage[m]=E})()}_get(m){var E=this;return(0,f.Z)(function*(){const A=E.storage[m];return void 0===A?null:A})()}_remove(m){var E=this;return(0,f.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return y.type="NONE",y})();function jn(y,h,m){return`firebase:${y}:${h}:${m}`}class Dr{constructor(h,m,E){this.persistence=h,this.auth=m,this.userKey=E;const{config:A,name:R}=this.auth;this.fullUserKey=jn(this.userKey,A.apiKey,R),this.fullPersistenceKey=jn("persistence",A.apiKey,R),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const m=yield h.persistence._get(h.fullUserKey);return m?Ct._fromJSON(h.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var m=this;return(0,f.Z)(function*(){if(m.persistence===h)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=h,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,m,E="authUser"){return(0,f.Z)(function*(){if(!m.length)return new Dr(ee(Et),h,E);const A=(yield Promise.all(m.map(function(){var Ke=(0,f.Z)(function*(_t){if(yield _t._isAvailable())return _t});return function(_t){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let R=A[0]||ee(Et);const W=jn(E,h.config.apiKey,h.name);let fe=null;for(const Ke of m)try{const _t=yield Ke._get(W);if(_t){const ct=Ct._fromJSON(h,_t);Ke!==R&&(fe=ct),R=Ke;break}}catch(_t){}const Le=A.filter(Ke=>Ke._shouldAllowMigration);return R._shouldAllowMigration&&Le.length?(R=Le[0],fe&&(yield R._set(W,fe.toJSON())),yield Promise.all(m.map(function(){var Ke=(0,f.Z)(function*(_t){if(_t!==R)try{yield _t._remove(W)}catch(ct){}});return function(_t){return Ke.apply(this,arguments)}}())),new Dr(R,h,E)):new Dr(R,h,E)})()}}function gu(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if($n(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(_a(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Wi(h))return"Blackberry";if(Hn(h))return"Webos";if(mu(h))return"Safari";if((h.includes("chrome/")||va(h))&&!h.includes("edge/"))return"Chrome";if(Cr(h))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function _a(y=(0,P.z$)()){return/firefox\//i.test(y)}function mu(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function va(y=(0,P.z$)()){return/crios\//i.test(y)}function $n(y=(0,P.z$)()){return/iemobile/i.test(y)}function Cr(y=(0,P.z$)()){return/android/i.test(y)}function Wi(y=(0,P.z$)()){return/blackberry/i.test(y)}function Hn(y=(0,P.z$)()){return/webos/i.test(y)}function Fr(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function _s(y=(0,P.z$)()){return Fr(y)||Cr(y)||Hn(y)||Wi(y)||/windows phone/i.test(y)||$n(y)}function So(y,h=[]){let m;switch(y){case"Browser":m=gu((0,P.z$)());break;case"Worker":m=`${gu((0,P.z$)())}-${y}`;break;default:m=y}const E=h.length?h.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${E}`}class Lr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,m){const E=R=>new Promise((W,fe)=>{try{W(h(R))}catch(Le){fe(Le)}});E.onAbort=m,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var m=this;return(0,f.Z)(function*(){if(m.auth.currentUser===h)return;const E=[];try{for(const A of m.queue)yield A(h),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const R of E)try{R()}catch(W){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A.message})}})()}}class We{constructor(h,m,E){this.app=h,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jt(this),this.idTokenSubscription=new Jt(this),this.beforeStateQueue=new Lr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,m){var E=this;return m&&(this._popupRedirectResolver=ee(m)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,R;if(!E._deleted&&(E.persistenceManager=yield Dr.create(E,h),!E._deleted)){if(null===(A=E._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(W){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const m=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||m){if(h.currentUser&&m&&h.currentUser.uid===m.uid)return h._currentUser._assign(m),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(m,!0)}})()}initializeCurrentUser(h){var m=this;return(0,f.Z)(function*(){var E;const A=yield m.assertedPersistence.getCurrentUser();let R=A,W=!1;if(h&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const fe=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Le=null==R?void 0:R._redirectEventId,Ke=yield m.tryRedirectSignIn(h);(!fe||fe===Le)&&(null==Ke?void 0:Ke.user)&&(R=Ke.user,W=!0)}if(!R)return m.directlySetCurrentUser(null);if(!R._redirectEventId){if(W)try{yield m.beforeStateQueue.runMiddleware(R)}catch(fe){R=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(fe))}return R?m.reloadAndSetCurrentUserOrClear(R):m.directlySetCurrentUser(null)}return j(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===R._redirectEventId?m.directlySetCurrentUser(R):m.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var m=this;return(0,f.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,h,!0)}catch(A){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var m=this;return(0,f.Z)(function*(){try{yield mr(h)}catch(E){if("auth/network-request-failed"!==E.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Qe(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var m=this;return(0,f.Z)(function*(){const E=h?(0,P.m9)(h):null;return E&&j(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(h,m=!1){var E=this;return(0,f.Z)(function*(){if(!E._deleted)return h&&j(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,f.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var m=this;return this.queue((0,f.Z)(function*(){yield m.assertedPersistence.setPersistence(ee(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,m,E){return this.registerStateListener(this.authStateSubscription,h,m,E)}beforeAuthStateChanged(h,m){return this.beforeStateQueue.pushCallback(h,m)}onIdTokenChanged(h,m,E){return this.registerStateListener(this.idTokenSubscription,h,m,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,m){var E=this;return(0,f.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(m);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var m=this;return(0,f.Z)(function*(){if(!m.redirectPersistenceManager){const E=h&&ee(h)||m._popupRedirectResolver;j(E,m,"argument-error"),m.redirectPersistenceManager=yield Dr.create(m,[ee(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(h){var m=this;return(0,f.Z)(function*(){var E,A;return m._isInitialized&&(yield m.queue((0,f.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===h?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?m.redirectUser:null})()}_persistUserIfCurrent(h){var m=this;return(0,f.Z)(function*(){if(h===m.currentUser)return m.queue((0,f.Z)(function*(){return m.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,m,E,A){if(this._deleted)return()=>{};const R="function"==typeof m?m:m.next.bind(m),W=this._isInitialized?Promise.resolve():this._initializationPromise;return j(W,this,"internal-error"),W.then(()=>R(this.currentUser)),"function"==typeof m?h.addObserver(m,E,A):h.addObserver(m)}directlySetCurrentUser(h){var m=this;return(0,f.Z)(function*(){m.currentUser&&m.currentUser!==h&&(m._currentUser._stopProactiveRefresh(),h&&m.isProactiveRefreshEnabled&&h._startProactiveRefresh()),m.currentUser=h,h?yield m.assertedPersistence.setCurrentUser(h):yield m.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=So(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var m;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(m=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function at(y){return(0,P.m9)(y)}class Jt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(m=>this.observer=m)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Si(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Mi(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class vi{constructor(h,m){this.providerId=h,this.signInMethod=m}toJSON(){return ve("not implemented")}_getIdTokenResponse(h){return ve("not implemented")}_linkToIdToken(h,m){return ve("not implemented")}_getReauthenticationResolver(h){return ve("not implemented")}}function xn(y,h){return St.apply(this,arguments)}function St(){return(St=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:resetPassword",qt(y,h))})).apply(this,arguments)}function wa(y,h){return vs.apply(this,arguments)}function vs(){return(vs=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function yu(y,h){return Es.apply(this,arguments)}function Es(){return(Es=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",qt(y,h))})).apply(this,arguments)}function Ws(){return(Ws=(0,f.Z)(function*(y,h){return Ir(y,"POST","/v1/accounts:signInWithPassword",qt(y,h))})).apply(this,arguments)}function ws(y,h){return ir.apply(this,arguments)}function ir(){return(ir=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:sendOobCode",qt(y,h))})).apply(this,arguments)}function tn(y,h){return _u.apply(this,arguments)}function _u(){return(_u=(0,f.Z)(function*(y,h){return ws(y,h)})).apply(this,arguments)}function ba(y,h){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,f.Z)(function*(y,h){return ws(y,h)})).apply(this,arguments)}function xi(y,h){return vu.apply(this,arguments)}function vu(){return(vu=(0,f.Z)(function*(y,h){return ws(y,h)})).apply(this,arguments)}function Zc(y,h){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(y,h){return ws(y,h)})).apply(this,arguments)}function yl(){return(yl=(0,f.Z)(function*(y,h){return Ir(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,h))})).apply(this,arguments)}function Yc(){return(Yc=(0,f.Z)(function*(y,h){return Ir(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,h))})).apply(this,arguments)}class yr extends vi{constructor(h,m,E,A=null){super("password",E),this._email=h,this._password=m,this._tenantId=A}static _fromEmailAndPassword(h,m){return new yr(h,m,"password")}static _fromEmailAndCode(h,m,E=null){return new yr(h,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(h){var m=this;return(0,f.Z)(function*(){switch(m.signInMethod){case"password":return function Ln(y,h){return Ws.apply(this,arguments)}(h,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Ri(y,h){return yl.apply(this,arguments)}(h,{email:m._email,oobCode:m._password});default:Te(h,"internal-error")}})()}_linkToIdToken(h,m){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return wa(h,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Xp(y,h){return Yc.apply(this,arguments)}(h,{idToken:m,email:E._email,oobCode:E._password});default:Te(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function bs(y,h){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,f.Z)(function*(y,h){return Ir(y,"POST","/v1/accounts:signInWithIdp",qt(y,h))})).apply(this,arguments)}class Ki extends vi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const m=new Ki(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(m.idToken=h.idToken),h.accessToken&&(m.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(m.nonce=h.nonce),h.pendingToken&&(m.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(m.accessToken=h.oauthToken,m.secret=h.oauthTokenSecret):Te("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A}=m,R=(0,re._T)(m,["providerId","signInMethod"]);if(!E||!A)return null;const W=new Ki(E,A);return W.idToken=R.idToken||void 0,W.accessToken=R.accessToken||void 0,W.secret=R.secret,W.nonce=R.nonce,W.pendingToken=R.pendingToken||null,W}_getIdTokenResponse(h){return bs(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,bs(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,bs(h,m)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),h.postBody=(0,P.xO)(m)}return h}}function Eu(y,h){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:sendVerificationCode",qt(y,h))})).apply(this,arguments)}function Is(){return(Is=(0,f.Z)(function*(y,h){return Ir(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,h))})).apply(this,arguments)}function Xc(){return(Xc=(0,f.Z)(function*(y,h){const m=yield Ir(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,h));if(m.temporaryProof)throw Ai(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ng={USER_NOT_FOUND:"user-not-found"};function ed(){return(ed=(0,f.Z)(function*(y,h){return Ir(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),ng)})).apply(this,arguments)}class Mo extends vi{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,m){return new Mo({verificationId:h,verificationCode:m})}static _fromTokenResponse(h,m){return new Mo({phoneNumber:h,temporaryProof:m})}_getIdTokenResponse(h){return function _l(y,h){return Is.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,m){return function tg(y,h){return Xc.apply(this,arguments)}(h,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function rg(y,h){return ed.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:m,verificationId:E,verificationCode:A}=this.params;return h&&m?{temporaryProof:h,phoneNumber:m}:{sessionInfo:E,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:R}=h;return E||m||A||R?new Mo({verificationId:m,verificationCode:E,phoneNumber:A,temporaryProof:R}):null}}class wu{constructor(h){var m,E,A,R,W,fe;const Le=(0,P.zd)((0,P.pd)(h)),Ke=null!==(m=Le.apiKey)&&void 0!==m?m:null,_t=null!==(E=Le.oobCode)&&void 0!==E?E:null,ct=function Hh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);j(Ke&&_t&&ct,"argument-error"),this.apiKey=Ke,this.operation=ct,this.code=_t,this.continueUrl=null!==(R=Le.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(W=Le.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(fe=Le.tenantId)&&void 0!==fe?fe:null}static parseLink(h){const m=function Ia(y){const h=(0,P.zd)((0,P.pd)(y)).link,m=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,E=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(E?(0,P.zd)((0,P.pd)(E)).link:null)||E||m||h||y}(h);try{return new wu(m)}catch(E){return null}}}let nd=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,E){return yr._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const A=wu.parseLink(E);return j(A,"argument-error"),yr._fromEmailAndCode(m,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class _r{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ks extends _r{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Oi extends Ks{static credentialFromJSON(h){const m="string"==typeof h?JSON.parse(h):h;return j("providerId"in m&&"signInMethod"in m,"argument-error"),Ki._fromParams(m)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return j(h.idToken||h.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Oi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Oi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:R,nonce:W,providerId:fe}=h;if(!E&&!A&&!m&&!R||!fe)return null;try{return new Oi(fe)._credential({idToken:m,accessToken:E,nonce:W,pendingToken:R})}catch(Le){return null}}}let xo=(()=>{class y extends Ks{constructor(){super("facebook.com")}static credential(m){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),rd=(()=>{class y extends Ks{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:A}=m;if(!E&&!A)return null;try{return y.credential(E,A)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Gh=(()=>{class y extends Ks{constructor(){super("github.com")}static credential(m){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Zs extends vi{constructor(h,m){super(h,h),this.pendingToken=m}_getIdTokenResponse(h){return bs(h,this.buildRequest())}_linkToIdToken(h,m){const E=this.buildRequest();return E.idToken=m,bs(h,E)}_getReauthenticationResolver(h){const m=this.buildRequest();return m.autoCreate=!1,bs(h,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const m="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A,pendingToken:R}=m;return E&&A&&R&&E===A?new Zs(E,R):null}static _create(h,m){return new Zs(h,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Tr extends _r{constructor(h){j(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Tr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Tr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const m=Zs.fromJSON(h);return j(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:m,providerId:E}=h;if(!m||!E)return null;try{return Zs._create(E,m)}catch(A){return null}}}let id=(()=>{class y extends Ks{constructor(){super("twitter.com")}static credential(m,E){return Ki._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=m;if(!E||!A)return null;try{return y.credential(E,A)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ar(y,h){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,f.Z)(function*(y,h){return Ir(y,"POST","/v1/accounts:signUp",qt(y,h))})).apply(this,arguments)}class Xr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,m,E,A=!1){return(0,f.Z)(function*(){const R=yield Ct._fromIdTokenResponse(h,E,A),W=vl(E);return new Xr({user:R,providerId:W,_tokenResponse:E,operationType:m})})()}static _forOperation(h,m,E){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const A=vl(E);return new Xr({user:h,providerId:A,_tokenResponse:E,operationType:m})})()}}function vl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function El(){return(El=(0,f.Z)(function*(y){var h;const m=at(y);if(yield m._initializationPromise,null===(h=m.currentUser)||void 0===h?void 0:h.isAnonymous)return new Xr({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Ar(m,{returnSecureToken:!0}),A=yield Xr._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Oo extends P.ZR{constructor(h,m,E,A){var R;super(m.code,m.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Oo.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,m,E,A){return new Oo(h,m,E,A)}}function wl(y,h,m,E){return("reauthenticate"===h?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Oo._fromErrorAndOperation(y,R,h,E):R})}function Pi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function nn(){return(nn=(0,f.Z)(function*(y,h){const m=(0,P.m9)(y);yield Yt(!0,m,h);const{providerUserInfo:E}=yield bn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[h]}),A=Pi(E||[]);return m.providerData=m.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Da(y,h){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(y,h,m=!1){const E=yield pr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),m);return Xr._forOperation(y,"link",E)})).apply(this,arguments)}function Yt(y,h,m){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,f.Z)(function*(y,h,m){yield mr(h);const A=!1===y?"provider-already-linked":"no-such-provider";j(Pi(h.providerData).has(m)===y,h.auth,A)})).apply(this,arguments)}function bu(y,h){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,f.Z)(function*(y,h,m=!1){const{auth:E}=y,A="reauthenticate";try{const R=yield pr(y,wl(E,A,h,y),m);j(R.idToken,E,"internal-error");const W=it(R.idToken);j(W,E,"internal-error");const{sub:fe}=W;return j(y.uid===fe,E,"user-mismatch"),Xr._forOperation(y,A,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Te(E,"user-mismatch"),R}})).apply(this,arguments)}function sr(y,h){return bl.apply(this,arguments)}function bl(){return(bl=(0,f.Z)(function*(y,h,m=!1){const E="signIn",A=yield wl(y,E,h),R=yield Xr._fromIdTokenResponse(y,E,A);return m||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function gn(y,h){return ki.apply(this,arguments)}function ki(){return(ki=(0,f.Z)(function*(y,h){return sr(at(y),h)})).apply(this,arguments)}function or(y,h){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,f.Z)(function*(y,h){const m=(0,P.m9)(y);return yield Yt(!1,m,h.providerId),Da(m,h)})).apply(this,arguments)}function Zi(y,h){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,f.Z)(function*(y,h){return bu((0,P.m9)(y),h)})).apply(this,arguments)}function Ei(y,h){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,f.Z)(function*(y,h){return Ir(y,"POST","/v1/accounts:signInWithCustomToken",qt(y,h))})).apply(this,arguments)}function ft(){return(ft=(0,f.Z)(function*(y,h){const m=at(y),E=yield Ei(m,{token:h,returnSecureToken:!0}),A=yield Xr._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class ko{constructor(h,m){this.factorId=h,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(h,m){return"phoneInfo"in m?Iu._fromServerResponse(h,m):Te(h,"internal-error")}}class Iu extends ko{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,m){return new Iu(m)}}function Aa(y,h,m){var E;j((null===(E=m.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),j(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=m.url,h.dynamicLinkDomain=m.dynamicLinkDomain,h.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(j(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=m.iOS.bundleId),m.android&&(j(m.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=m.android.installApp,h.androidMinimumVersionCode=m.android.minimumVersion,h.androidPackageName=m.android.packageName)}function Sa(){return(Sa=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y),A={requestType:"PASSWORD_RESET",email:h};m&&Aa(E,A,m),yield ba(E,A)})).apply(this,arguments)}function Cl(){return(Cl=(0,f.Z)(function*(y,h,m){yield xn((0,P.m9)(y),{oobCode:h,newPassword:m})})).apply(this,arguments)}function Ft(){return(Ft=(0,f.Z)(function*(y,h){yield yu((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function Tl(y,h){return dn.apply(this,arguments)}function dn(){return(dn=(0,f.Z)(function*(y,h){const m=(0,P.m9)(y),E=yield xn(m,{oobCode:h}),A=E.requestType;switch(j(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(E.mfaInfo,m,"internal-error");default:j(E.email,m,"internal-error")}let R=null;return E.mfaInfo&&(R=ko._fromServerResponse(at(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Js(){return(Js=(0,f.Z)(function*(y,h){const{data:m}=yield Tl((0,P.m9)(y),h);return m.email})).apply(this,arguments)}function Ma(){return(Ma=(0,f.Z)(function*(y,h,m){const E=at(y),A=yield Ar(E,{returnSecureToken:!0,email:h,password:m}),R=yield Xr._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function Du(){return(Du=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};j(m.handleCodeInApp,E,"argument-error"),m&&Aa(E,A,m),yield xi(E,A)})).apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y),A=nd.credentialWithLink(h,m||Oe());return j(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),gn(E,A)})).apply(this,arguments)}function Yi(y,h){return Na.apply(this,arguments)}function Na(){return(Na=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:createAuthUri",qt(y,h))})).apply(this,arguments)}function wi(){return(wi=(0,f.Z)(function*(y,h){const E={identifier:h,continueUri:lt()?Oe():"http://localhost"},{signinMethods:A}=yield Yi((0,P.m9)(y),E);return A||[]})).apply(this,arguments)}function Tu(){return(Tu=(0,f.Z)(function*(y,h){const m=(0,P.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Aa(m.auth,A,h);const{email:R}=yield tn(m.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Au(){return(Au=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};m&&Aa(E.auth,R,m);const{email:W}=yield Zc(E.auth,R);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ra(y,h){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Oa(){return(Oa=(0,f.Z)(function*(y,{displayName:h,photoURL:m}){if(void 0===h&&void 0===m)return;const E=(0,P.m9)(y),R={idToken:yield E.getIdToken(),displayName:h,photoUrl:m,returnSecureToken:!0},W=yield pr(E,Ra(E.auth,R));E.displayName=W.displayName||null,E.photoURL=W.photoUrl||null;const fe=E.providerData.find(({providerId:Le})=>"password"===Le);fe&&(fe.displayName=E.displayName,fe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(W)})).apply(this,arguments)}function Vo(y,h,m){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,f.Z)(function*(y,h,m){const{auth:E}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),m&&(R.password=m);const W=yield pr(y,wa(E,R));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Uo{constructor(h,m,E={}){this.isNewUser=h,this.providerId=m,this.profile=E}}class ad extends Uo{constructor(h,m,E,A){super(h,m,E),this.username=A}}class Bo extends Uo{constructor(h,m){super(h,"facebook.com",m)}}class Li extends ad{constructor(h,m){super(h,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class qh extends Uo{constructor(h,m){super(h,"google.com",m)}}class Wn extends ad{constructor(h,m,E){super(h,"twitter.com",m,E)}}function Vi(y){const{user:h,_tokenResponse:m}=y;return h.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function od(y){var h,m;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const W=null===(m=null===(h=it(y.idToken))||void 0===h?void 0:h.firebase)||void 0===m?void 0:m.sign_in_provider;if(W)return new Uo(R,"anonymous"!==W&&"custom"!==W?W:null)}if(!E)return null;switch(E){case"facebook.com":return new Bo(R,A);case"github.com":return new Li(R,A);case"google.com":return new qh(R,A);case"twitter.com":return new Wn(R,A,y.screenName||null);case"custom":case"anonymous":return new Uo(R,null);default:return new Uo(R,E,A)}}(m)}class Qi{constructor(h,m){this.type=h,this.credential=m}static _fromIdtoken(h){return new Qi("enroll",h)}static _fromMfaPendingCredential(h){return new Qi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var m,E;if(null==h?void 0:h.multiFactorSession){if(null===(m=h.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Qi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return Qi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class jo{constructor(h,m,E){this.session=h,this.hints=m,this.signInResolver=E}static _fromError(h,m){const E=at(h),A=m.customData._serverResponse,R=(A.mfaInfo||[]).map(fe=>ko._fromServerResponse(E,fe));j(A.mfaPendingCredential,E,"internal-error");const W=Qi._fromMfaPendingCredential(A.mfaPendingCredential);return new jo(W,R,function(){var fe=(0,f.Z)(function*(Le){const Ke=yield Le._process(E,W);delete A.mfaInfo,delete A.mfaPendingCredential;const _t=Object.assign(Object.assign({},A),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(m.operationType){case"signIn":const ct=yield Xr._fromIdTokenResponse(E,m.operationType,_t);return yield E._updateCurrentUser(ct.user),ct;case"reauthenticate":return j(m.user,E,"internal-error"),Xr._forOperation(m.user,m.operationType,_t);default:Te(E,"internal-error")}});return function(Le){return fe.apply(this,arguments)}}())}resolveSignIn(h){var m=this;return(0,f.Z)(function*(){return m.signInResolver(h)})()}}function Kh(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:start",qt(y,h))}class cd{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>ko._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new cd(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Qi._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,m){var E=this;return(0,f.Z)(function*(){const A=h,R=yield E.getSession(),W=yield pr(E.user,A._process(E.user.auth,R,m));return yield E.user._updateTokensIfNecessary(W),E.user.reload()})()}unenroll(h){var m=this;return(0,f.Z)(function*(){const E="string"==typeof h?h:h.uid,A=yield m.user.getIdToken(),R=yield pr(m.user,function Su(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(y,h))}(m.user.auth,{idToken:A,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:W})=>W!==E),yield m.user._updateTokensIfNecessary(R);try{yield m.user.reload()}catch(W){if("auth/user-token-expired"!==W.code)throw W}})()}}const Mu=new WeakMap,eo="__sak";class dd{constructor(h,m){this.storageRetriever=h,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(eo,"1"),this.storage.removeItem(eo),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,m){return this.storage.setItem(h,JSON.stringify(m)),Promise.resolve()}_get(h){const m=this.storage.getItem(h);return Promise.resolve(m?JSON.parse(m):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const ti=(()=>{class y extends dd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ag(){const y=(0,P.z$)();return mu(y)||Fr(y)}()&&function rr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=_s(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),R=this.localCache[E];A!==R&&m(E,R,A)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((fe,Le,Ke)=>{this.notifyListeners(fe,Ke)});const A=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(A);if(m.newValue!==fe)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!E)return}const R=()=>{const fe=this.storage.getItem(A);!E&&this.localCache[A]===fe||this.notifyListeners(A,fe)},W=this.storage.getItem(A);!function Ea(){return(0,P.w1)()&&10===document.documentMode}()||W===m.newValue||m.newValue===m.oldValue?R():setTimeout(R,10)}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const R of Array.from(A))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var A=()=>super._set,R=this;return(0,f.Z)(function*(){yield A().call(R,m,E),R.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,A=this;return(0,f.Z)(function*(){const R=yield E().call(A,m);return A.localCache[m]=JSON.stringify(R),R})()}_remove(m){var E=()=>super._remove,A=this;return(0,f.Z)(function*(){yield E().call(A,m),delete A.localCache[m]})()}}return y.type="LOCAL",y})(),Vn=(()=>{class y extends dd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return y.type="SESSION",y})();let hd=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(R=>R.isListeningto(m));if(E)return E;const A=new y(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,f.Z)(function*(){const A=m,{eventId:R,eventType:W,data:fe}=A.data,Le=E.handlersMap[W];if(!(null==Le?void 0:Le.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:W});const Ke=Array.from(Le).map(function(){var ct=(0,f.Z)(function*(Tn){return Tn(A.origin,fe)});return function(Tn){return ct.apply(this,arguments)}}()),_t=yield function Rl(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return h.apply(this,arguments)}}()))}(Ke);A.ports[0].postMessage({status:"done",eventId:R,eventType:W,response:_t})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ui(y="",h=10){let m="";for(let E=0;E<h;E++)m+=Math.floor(10*Math.random());return y+m}class Ol{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,m,E=50){var A=this;return(0,f.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let W,fe;return new Promise((Le,Ke)=>{const _t=Ui("",20);R.port1.start();const ct=setTimeout(()=>{Ke(new Error("unsupported_event"))},E);fe={messageChannel:R,onMessage(Tn){const di=Tn;if(di.data.eventId===_t)switch(di.data.status){case"ack":clearTimeout(ct),W=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Le(di.data.response);break;default:clearTimeout(ct),clearTimeout(W),Ke(new Error("invalid_response"))}}},A.handlers.add(fe),R.port1.addEventListener("message",fe.onMessage),A.target.postMessage({eventType:h,eventId:_t,data:m},[R.port2])}).finally(()=>{fe&&A.removeMessageHandler(fe)})})()}}function on(){return window}function bi(){return void 0!==on().WorkerGlobalScope&&"function"==typeof on().importScripts}function Nu(){return(Nu=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Pl="firebaseLocalStorageDb",$o="firebaseLocalStorage",Ho="fbase_key";class Ts{constructor(h){this.request=h}toPromise(){return new Promise((h,m)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ar(y,h){return y.transaction([$o],h?"readwrite":"readonly").objectStore($o)}function Ji(){const y=indexedDB.open(Pl,1);return new Promise((h,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore($o,{keyPath:Ho})}catch(A){m(A)}}),y.addEventListener("success",(0,f.Z)(function*(){const E=y.result;E.objectStoreNames.contains($o)?h(E):(E.close(),yield function Ru(){const y=indexedDB.deleteDatabase(Pl);return new Ts(y).toPromise()}(),h(yield Ji()))}))})}function Go(y,h,m){return As.apply(this,arguments)}function As(){return(As=(0,f.Z)(function*(y,h,m){const E=ar(y,!0).put({[Ho]:h,value:m});return new Ts(E).toPromise()})).apply(this,arguments)}function to(){return(to=(0,f.Z)(function*(y,h){const m=ar(y,!1).get(h),E=yield new Ts(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function qo(y,h){const m=ar(y,!0).delete(h);return new Ts(m).toPromise()}const Ss=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,f.Z)(function*(){return m.db||(m.db=yield Ji()),m.db})()}_withRetries(m){var E=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const R=yield E._openDb();return yield m(R)}catch(R){if(A++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,f.Z)(function*(){return bi()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,f.Z)(function*(){m.receiver=hd._getInstance(function pd(){return bi()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,f.Z)(function*(A,R){return{keyProcessed:(yield m._poll()).includes(R.key)}});return function(A,R){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,f.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,f.Z)(function*(){var E,A;if(m.activeServiceWorker=yield function Mt(){return Nu.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ol(m.activeServiceWorker);const R=yield m.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,f.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function fd(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Ji();return yield Go(m,eo,"1"),yield qo(m,eo),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,f.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(R=>Go(R,m,E)),A.localCache[m]=E,A.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,f.Z)(function*(){const A=yield E._withRetries(R=>function zo(y,h){return to.apply(this,arguments)}(R,m));return E.localCache[m]=A,A})()}_remove(m){var E=this;return(0,f.Z)(function*(){return E._withPendingWrite((0,f.Z)(function*(){return yield E._withRetries(A=>qo(A,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,f.Z)(function*(){const E=yield m._withRetries(W=>{const fe=ar(W,!1).getAll();return new Ts(fe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:W,value:fe}of E)R.add(W),JSON.stringify(m.localCache[W])!==JSON.stringify(fe)&&(m.notifyListeners(W,fe),A.push(W));for(const W of Object.keys(m.localCache))m.localCache[W]&&!R.has(W)&&(m.notifyListeners(W,null),A.push(W));return A})()}notifyListeners(m,E){this.localCache[m]=E;const A=this.listeners[m];if(A)for(const R of Array.from(A))R(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function ur(y,h){return Vt(y,"POST","/v2/accounts/mfaSignIn:start",qt(y,h))}function Dn(){return(Dn=(0,f.Z)(function*(y){return(yield Vt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Bi(y){return new Promise((h,m)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=h,E.onerror=A=>{const R=Ee("internal-error");R.customData=A,m(R)},E.type="text/javascript",E.charset="UTF-8",function ro(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(E)})}function Xi(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ni=1e12;class Cn{constructor(h){this.auth=h,this.counter=ni,this._widgets=new Map}render(h,m){const E=this.counter;return this._widgets.set(E,new Pu(h,this.auth.name,m||{})),this.counter++,E}reset(h){var m;const E=h||ni;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(h){var m;return(null===(m=this._widgets.get(h||ni))||void 0===m?void 0:m.getResponse())||""}execute(h){var m=this;return(0,f.Z)(function*(){var E;return null===(E=m._widgets.get(h||ni))||void 0===E||E.execute(),""})()}}class Pu{constructor(h,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;j(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Ua(y){const h=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)h.push(m.charAt(Math.floor(Math.random()*m.length)));return h.join("")}(50);const{callback:h,"expired-callback":m}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const hn=Xi("rcb"),ug=new Qt(3e4,6e4);class Ty{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!on().grecaptcha}load(h,m=""){return j(function Zo(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),h,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(on().grecaptcha):new Promise((E,A)=>{const R=on().setTimeout(()=>{A(Ee(h,"network-request-failed"))},ug.get());on()[hn]=()=>{on().clearTimeout(R),delete on()[hn];const fe=on().grecaptcha;if(!fe)return void A(Ee(h,"internal-error"));const Le=fe.render;fe.render=(Ke,_t)=>{const ct=Le(Ke,_t);return this.counter++,ct},this.hostLanguage=m,E(fe)},Bi(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:hn,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(R),A(Ee(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!on().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class $r{load(h){return(0,f.Z)(function*(){return new Cn(h)})()}clearedOneInstance(){}}const gd="recaptcha",Ms={theme:"light",type:"image"};class io{constructor(h,m=Object.assign({},Ms),E){this.parameters=m,this.type=gd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=at(E),this.isInvisible="invisible"===this.parameters.size,j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;j(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $r:new Ty,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const m=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(m)||new Promise(R=>{const W=fe=>{!fe||(h.tokenChangeListeners.delete(W),R(fe))};h.tokenChangeListeners.add(W),h.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof h)h(m);else if("string"==typeof h){const E=on()[h];"function"==typeof E&&E(m)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let m=h.container;if(!h.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}h.widgetId=h.getAssertedRecaptcha().render(m,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){j(lt()&&!bi(),h.auth,"internal-error"),yield function ku(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const m=yield function Ou(y){return Dn.apply(this,arguments)}(h.auth);j(m,h.auth,"internal-error"),h.parameters.sitekey=m})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yn{constructor(h,m){this.verificationId=h,this.onConfirmation=m}confirm(h){const m=Mo._fromVerification(this.verificationId,h);return this.onConfirmation(m)}}function so(){return(so=(0,f.Z)(function*(y,h,m){const E=at(y),A=yield Yo(E,h,(0,P.m9)(m));return new yn(A,R=>gn(E,R))})).apply(this,arguments)}function Fl(){return(Fl=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y);yield Yt(!1,E,"phone");const A=yield Yo(E.auth,h,(0,P.m9)(m));return new yn(A,R=>or(E,R))})).apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y),A=yield Yo(E.auth,h,(0,P.m9)(m));return new yn(A,R=>Zi(E,R))})).apply(this,arguments)}function Yo(y,h,m){return oo.apply(this,arguments)}function oo(){return(oo=(0,f.Z)(function*(y,h,m){var E;const A=yield m.verify();try{let R;if(j("string"==typeof A,y,"argument-error"),j(m.type===gd,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const W=R.session;if("phoneNumber"in R)return j("enroll"===W.type,y,"internal-error"),(yield Kh(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{j("signin"===W.type,y,"internal-error");const fe=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return j(fe,y,"missing-multi-factor-info"),(yield ur(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield Eu(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return W}}finally{m._reset()}})).apply(this,arguments)}function Qo(){return(Qo=(0,f.Z)(function*(y,h){yield Da((0,P.m9)(y),h)})).apply(this,arguments)}let uo=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=at(m)}verifyPhoneNumber(m,E){return Yo(this.auth,m,(0,P.m9)(E))}static credential(m,E){return Mo._fromVerification(m,E)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:A}=m;return E&&A?Mo._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function es(y,h){return h?ee(h):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ba extends vi{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return bs(h,this._buildIdpRequest())}_linkToIdToken(h,m){return bs(h,this._buildIdpRequest(m))}_getReauthenticationResolver(h){return bs(h,this._buildIdpRequest())}_buildIdpRequest(h){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(m.idToken=h),m}}function Pt(y){return sr(y.auth,new Ba(y),y.bypassAuthState)}function Fu(y){const{auth:h,user:m}=y;return j(m,h,"internal-error"),bu(m,new Ba(y),y.bypassAuthState)}function Zn(y){return ja.apply(this,arguments)}function ja(){return(ja=(0,f.Z)(function*(y){const{auth:h,user:m}=y;return j(m,h,"internal-error"),Da(m,new Ba(y),y.bypassAuthState)})).apply(this,arguments)}class xs{constructor(h,m,E,A,R=!1){this.auth=h,this.resolver=E,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var h=this;return new Promise(function(){var m=(0,f.Z)(function*(E,A){h.pendingPromise={resolve:E,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(E,A){return m.apply(this,arguments)}}())}onAuthEvent(h){var m=this;return(0,f.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:R,tenantId:W,error:fe,type:Le}=h;if(fe)return void m.reject(fe);const Ke={auth:m.auth,requestUri:E,sessionId:A,tenantId:W||void 0,postBody:R||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Le)(Ke))}catch(_t){m.reject(_t)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Pt;case"linkViaPopup":case"linkViaRedirect":return Zn;case"reauthViaPopup":case"reauthViaRedirect":return Fu;default:Te(this.auth,"internal-error")}}resolve(h){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){K(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const cg=new Qt(2e3,1e4);function Ns(){return(Ns=(0,f.Z)(function*(y,h,m){const E=at(y);$e(y,h,_r);const A=es(E,m);return new Ll(E,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function Lu(){return(Lu=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y);$e(E.auth,h,_r);const A=es(E.auth,m);return new Ll(E.auth,"reauthViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y);$e(E.auth,h,_r);const A=es(E.auth,m);return new Ll(E.auth,"linkViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}let Ll=(()=>{class y extends xs{constructor(m,E,A,R,W){super(m,E,R,W),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,f.Z)(function*(){const E=yield m.execute();return j(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,f.Z)(function*(){K(1===m.filter.length,"Popup operations only handle one event");const E=Ui();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Ee(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,A;this.pollId=(null===(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,cg.get())};m()}}return y.currentPopupAction=null,y})();const lr=new Map;class Sy extends xs{constructor(h,m,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,m=this;return(0,f.Z)(function*(){let E=lr.get(m.auth._key());if(!E){try{const R=(yield function Jo(y,h){return Xo.apply(this,arguments)}(m.resolver,m.auth))?yield h().call(m):null;E=()=>Promise.resolve(R)}catch(A){E=()=>Promise.reject(A)}lr.set(m.auth._key(),E)}return m.bypassAuthState||lr.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var m=()=>super.onAuthEvent,E=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return m().call(E,h);if("unknown"!==h.type){if(h.eventId){const A=yield E.auth._redirectUserForId(h.eventId);if(A)return E.user=A,m().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Xo(){return(Xo=(0,f.Z)(function*(y,h){const m=F(h),E=N(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(m));return yield E._remove(m),A})).apply(this,arguments)}function lo(y,h){return _d.apply(this,arguments)}function _d(){return(_d=(0,f.Z)(function*(y,h){return N(y)._set(F(h),"true")})).apply(this,arguments)}function C(y,h){lr.set(y._key(),h)}function N(y){return ee(y._redirectPersistence)}function F(y){return jn("pendingRedirect",y.config.apiKey,y.name)}function ge(){return(ge=(0,f.Z)(function*(y,h,m){const E=at(y);$e(y,h,_r);const A=es(E,m);return yield lo(A,E),A._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function dt(){return(dt=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y);$e(E.auth,h,_r);const A=es(E.auth,m);yield lo(A,E.auth);const R=yield oi(E);return A._openRedirect(E.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function vr(){return(vr=(0,f.Z)(function*(y,h,m){const E=(0,P.m9)(y);$e(E.auth,h,_r);const A=es(E.auth,m);yield Yt(!1,E,h.providerId),yield lo(A,E.auth);const R=yield oi(E);return A._openRedirect(E.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function ts(){return(ts=(0,f.Z)(function*(y,h){return yield at(y)._initializationPromise,Hr(y,h,!1)})).apply(this,arguments)}function Hr(y,h){return si.apply(this,arguments)}function si(){return(si=(0,f.Z)(function*(y,h,m=!1){const E=at(y),A=es(E,h),W=yield new Sy(E,A,m).execute();return W&&!m&&(delete W.user._redirectEventId,yield E._persistUserIfCurrent(W.user),yield E._setRedirectUser(null,h)),W})).apply(this,arguments)}function oi(y){return ai.apply(this,arguments)}function ai(){return(ai=(0,f.Z)(function*(y){const h=Ui(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Uu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(m=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function dg(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bu(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=h,m=!0)),m}sendToConsumer(h,m){var E;if(h.error&&!Bu(h)){const A=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ee(this.auth,A))}else m.onAuthEvent(h)}isEventForConsumer(h,m){const E=null===m.eventId||!!h.eventId&&h.eventId===m.eventId;return m.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vl(h))}saveEventToCache(h){this.cachedEventUids.add(Vl(h)),this.lastProcessedEventTime=Date.now()}}function Vl(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Bu({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function hg(y){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,f.Z)(function*(y,h={}){return Vt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const co=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ul=/^https?/;function fg(){return(fg=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield hg(y);for(const m of h)try{if(pg(m))return}catch(E){}Te(y,"unauthorized-domain")})).apply(this,arguments)}function pg(y){const h=Oe(),{protocol:m,hostname:E}=new URL(h);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===E?"chrome-extension:"===m&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===m&&W.hostname===E}if(!Ul.test(m))return!1;if(co.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const xy=new Qt(3e4,6e4);function gg(){const y=on().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let ju=null;function ho(y){return ju=ju||function Yh(y){return new Promise((h,m)=>{var E,A,R;function W(){gg(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{gg(),m(Ee(y,"network-request-failed"))},timeout:xy.get()})}if(null===(A=null===(E=on().gapi)||void 0===E?void 0:E.iframes)||void 0===A?void 0:A.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=on().gapi)||void 0===R?void 0:R.load)){const fe=Xi("iframefcb");return on()[fe]=()=>{gapi.load?W():m(Ee(y,"network-request-failed"))},Bi(`https://apis.google.com/js/api.js?onload=${fe}`).catch(Le=>m(Le))}W()}}).catch(h=>{throw ju=null,h})}(y),ju}const fo=new Qt(5e3,15e3),Ny={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$u=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ry(y){const h=y.config;j(h.authDomain,y,"auth-domain-config-required");const m=h.emulator?Sn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:y.name,v:ae.SDK_VERSION},A=$u.get(y.config.apiHost);A&&(E.eid=A);const R=y._getFrameworks();return R.length&&(E.fw=R.join(",")),`${m}?${(0,P.xO)(E).slice(1)}`}function ea(){return ea=(0,f.Z)(function*(y){const h=yield ho(y),m=on().gapi;return j(m,y,"internal-error"),h.open({where:document.body,url:Ry(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ny,dontclear:!0},E=>new Promise(function(){var A=(0,f.Z)(function*(R,W){yield E.restyle({setHideOnLeave:!1});const fe=Ee(y,"network-request-failed"),Le=on().setTimeout(()=>{W(fe)},fo.get());function Ke(){on().clearTimeout(Le),R(E)}E.ping(Ke).then(Ke,()=>{W(fe)})});return function(R,W){return A.apply(this,arguments)}}()))}),ea.apply(this,arguments)}const Qh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class mg{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Rs(y,h,m,E,A,R){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:E,v:ae.SDK_VERSION,eventId:A};if(h instanceof _r){h.setDefaultLanguage(y.languageCode),W.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(W.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Le,Ke]of Object.entries(R||{}))W[Le]=Ke}if(h instanceof Ks){const Le=h.getScopes().filter(Ke=>""!==Ke);Le.length>0&&(W.scopes=Le.join(","))}y.tenantId&&(W.tid=y.tenantId);const fe=W;for(const Le of Object.keys(fe))void 0===fe[Le]&&delete fe[Le];return`${function jl({config:y}){return y.emulator?Sn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(fe).slice(1)}`}const Id="webStorageSupport";class Dd extends class GE{constructor(h){this.factorId=h}_process(h,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(h,m.credential,E);case"signin":return this._finalizeSignIn(h,m.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Dd(h)}_finalizeEnroll(h,m,E){return function Xs(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:finalize",qt(y,h))}(h,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,m){return function no(y,h){return Vt(y,"POST","/v2/accounts/mfaSignIn:finalize",qt(y,h))}(h,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let _g=(()=>{class y{constructor(){}static assertion(m){return Dd._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var vg="@firebase/auth";class wg{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var m=this;return(0,f.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const m=this.auth.onIdTokenChanged(E=>{var A;h((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,m),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const m=this.internalListeners.get(h);!m||(this.internalListeners.delete(h),m(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Os(){return window}function Ha(){return(Ha=(0,f.Z)(function*(y,h,m){var E;const{BuildInfo:A}=Os();K(h.sessionId,"AuthEvent did not contain a session ID");const R=yield tf(h.sessionId),W={};return Fr()?W.ibi=A.packageName:Cr()?W.apn=A.packageName:Te(y,"operation-not-supported-in-this-environment"),A.displayName&&(W.appDisplayName=A.displayName),W.sessionId=R,Rs(y,m,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,W)})).apply(this,arguments)}function Td(){return(Td=(0,f.Z)(function*(y){const{BuildInfo:h}=Os(),m={};Fr()?m.iosBundleId=h.packageName:Cr()?m.androidPackageName=h.packageName:Te(y,"operation-not-supported-in-this-environment"),yield hg(y,m)})).apply(this,arguments)}function Dg(){return(Dg=(0,f.Z)(function*(y,h,m){const{cordova:E}=Os();let A=()=>{};try{yield new Promise((R,W)=>{let fe=null;function Le(){var ct;R();const Tn=null===(ct=E.plugins.browsertab)||void 0===ct?void 0:ct.close;"function"==typeof Tn&&Tn(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Ke(){fe||(fe=window.setTimeout(()=>{W(Ee(y,"redirect-cancelled-by-user"))},2e3))}function _t(){"visible"===(null==document?void 0:document.visibilityState)&&Ke()}h.addPassiveListener(Le),document.addEventListener("resume",Ke,!1),Cr()&&document.addEventListener("visibilitychange",_t,!1),A=()=>{h.removePassiveListener(Le),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",_t,!1),fe&&window.clearTimeout(fe)}})}finally{A()}})).apply(this,arguments)}function tf(y){return $l.apply(this,arguments)}function $l(){return($l=(0,f.Z)(function*(y){const h=nf(y),m=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function nf(y){if(K(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),m=new Uint8Array(h);for(let E=0;E<y.length;E++)m[E]=y.charCodeAt(E);return m}!function zE(y){(0,ae._registerComponent)(new ue.wA("auth",(h,{options:m})=>{const E=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:R,authDomain:W}=E.options;return((fe,Le)=>{j(R&&!R.includes(":"),"invalid-api-key",{appName:fe.name}),j(!(null==W?void 0:W.includes(":")),"argument-error",{appName:fe.name});const Ke={apiKey:R,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:So(y)},_t=new We(fe,Le,Ke);return function oe(y,h){const m=(null==h?void 0:h.persistence)||[],E=(Array.isArray(m)?m:[m]).map(ee);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(_t,m),_t})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,m,E)=>{h.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new ue.wA("auth-internal",h=>{const m=at(h.getProvider("auth").getImmediate());return new wg(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(vg,"0.20.1",function Cd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(vg,"0.20.1","esm2017")}("Browser");class Sd extends Uu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function zu(y){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,f.Z)(function*(y){const h=yield za()._get(sf(y));return h&&(yield za()._remove(sf(y))),h})).apply(this,arguments)}function rf(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*h.length);y.push(h.charAt(E))}return y.join("")}function za(){return ee(ti)}function sf(y){return jn("authEvent",y.config.apiKey,y.name)}function zt(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...m]=y.split("?");return(0,P.zd)(m.join("?"))}function Wu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function qa(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Ag(y=(0,P.z$)()){return!("file:"!==qa()&&"ionic:"!==qa()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function lf(){try{const y=self.localStorage,h=Ui();if(y)return y.setItem(h,"1"),y.removeItem(h),!function uf(y=(0,P.z$)()){return function Sr(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Wa(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return cr()&&(0,P.hl)()}return!1}function cr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ka(){return(function $y(){return"http:"===qa()||"https:"===qa()}()||(0,P.ru)()||Ag())&&!function na(){return(0,P.b$)()||(0,P.UG)()}()&&lf()&&!cr()}function Md(){return Ag()&&"undefined"!=typeof document}function Gl(){return(Gl=(0,f.Z)(function*(){return!!Md()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const ui={LOCAL:"local",NONE:"none",SESSION:"session"},po=j,Mg="persistence";function Ku(y){return cf.apply(this,arguments)}function cf(){return(cf=(0,f.Z)(function*(y){yield y._initializationPromise;const h=Ng(),m=jn(Mg,y.config.apiKey,y.name);h&&h.setItem(m,y._getPersistence())})).apply(this,arguments)}function Ng(){var y;try{return(null===(y=function Sg(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Gy=j;class li{constructor(){this.browserResolver=ee(class ky{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vn,this._completeRedirectFn=Hr,this._overrideRedirectResult=C}_openPopup(h,m,E,A){var R=this;return(0,f.Z)(function*(){var W;K(null===(W=R.eventManagers[h._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const fe=Rs(h,m,E,Oe(),A);return function Bl(y,h,m,E=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),W=Math.max((window.screen.availWidth-E)/2,0).toString();let fe="";const Le=Object.assign(Object.assign({},Qh),{width:E.toString(),height:A.toString(),top:R,left:W}),Ke=(0,P.z$)().toLowerCase();m&&(fe=va(Ke)?"_blank":m),_a(Ke)&&(h=h||"http://localhost",Le.scrollbars="yes");const _t=Object.entries(Le).reduce((Tn,[di,ql])=>`${Tn}${di}=${ql},`,"");if(function qs(y=(0,P.z$)()){var h;return Fr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ke)&&"_self"!==fe)return function Oy(y,h){const m=document.createElement("a");m.href=y,m.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(h||"",fe),new mg(null);const ct=window.open(h||"",fe,_t);j(ct,y,"popup-blocked");try{ct.focus()}catch(Tn){}return new mg(ct)}(h,fe,Ui())})()}_openRedirect(h,m,E,A){var R=this;return(0,f.Z)(function*(){return yield R._originValidation(h),function La(y){on().location.href=y}(Rs(h,m,E,Oe(),A)),new Promise(()=>{})})()}_initialize(h){const m=h._key();if(this.eventManagers[m]){const{manager:A,promise:R}=this.eventManagers[m];return A?Promise.resolve(A):(K(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(h);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(h){var m=this;return(0,f.Z)(function*(){const E=yield function Ed(y){return ea.apply(this,arguments)}(h),A=new Uu(h);return E.register("authEvent",R=>(j(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[h._key()]={manager:A},m.iframes[h._key()]=E,A})()}_isIframeWebStorageSupported(h,m){this.iframes[h._key()].send(Id,{type:Id},A=>{var R;const W=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[Id];void 0!==W&&m(!!W),Te(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function My(y){return fg.apply(this,arguments)}(h)),this.originValidationPromises[m]}get _shouldInitProactively(){return _s()||mu()||Fr()}}),this.cordovaResolver=ee(class Tg{constructor(){this._redirectPersistence=Vn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Hr,this._overrideRedirectResult=C}_initialize(h){var m=this;return(0,f.Z)(function*(){const E=h._key();let A=m.eventManagers.get(E);return A||(A=new Sd(h),m.eventManagers.set(E,A),m.attachCallbackListeners(h,A)),A})()}_openPopup(h){Te(h,"operation-not-supported-in-this-environment")}_openRedirect(h,m,E,A){var R=this;return(0,f.Z)(function*(){!function Hu(y){var h,m,E,A,R,W,fe,Le,Ke,_t;const ct=Os();j("function"==typeof(null===(h=null==ct?void 0:ct.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(void 0!==(null===(m=null==ct?void 0:ct.BuildInfo)||void 0===m?void 0:m.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(R=null===(A=null===(E=null==ct?void 0:ct.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Le=null===(fe=null===(W=null==ct?void 0:ct.cordova)||void 0===W?void 0:W.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(_t=null===(Ke=null==ct?void 0:ct.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===_t?void 0:_t.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const W=yield R._initialize(h);yield W.initialized(),W.resetRedirect(),function D(){lr.clear()}(),yield R._originValidation(h);const fe=function Gu(y,h,m=null){return{type:h,eventId:m,urlResponse:null,sessionId:rf(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(h,E,A);yield function Fy(y,h){return za()._set(sf(y),h)}(h,fe);const Le=yield function ns(y,h,m){return Ha.apply(this,arguments)}(h,fe,m),Ke=yield function Ad(y){const{cordova:h}=Os();return new Promise(m=>{h.plugins.browsertab.isAvailable(E=>{let A=null;E?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function Kc(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(A)})})}(Le);return function Ga(y,h,m){return Dg.apply(this,arguments)}(h,W,Ke)})()}_isIframeWebStorageSupported(h,m){throw new Error("Method not implemented.")}_originValidation(h){const m=h._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ig(y){return Td.apply(this,arguments)}(h)),this.originValidationPromises[m]}attachCallbackListeners(h,m){const{universalLinks:E,handleOpenURL:A,BuildInfo:R}=Os(),W=setTimeout((0,f.Z)(function*(){yield zu(h),m.onEvent(Wu())}),500),fe=function(){var _t=(0,f.Z)(function*(ct){clearTimeout(W);const Tn=yield zu(h);let di=null;Tn&&(null==ct?void 0:ct.url)&&(di=function Ly(y,h){var m,E;const A=function af(y){const h=zt(y),m=h.link?decodeURIComponent(h.link):void 0,E=zt(m).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return zt(A).link||A||E||m||y}(h);if(A.includes("/__/auth/callback")){const R=zt(A),W=R.firebaseError?function of(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,fe=null===(E=null===(m=null==W?void 0:W.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Le=fe?Ee(fe):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Tn,ct.url)),m.onEvent(di||Wu())});return function(Tn){return _t.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,fe);const Le=A,Ke=`${R.packageName.toLowerCase()}://`;Os().handleOpenURL=function(){var _t=(0,f.Z)(function*(ct){if(ct.toLowerCase().startsWith(Ke)&&fe({url:ct}),"function"==typeof Le)try{Le(ct)}catch(Tn){console.error(Tn)}});return function(ct){return _t.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Vn,this._completeRedirectFn=Hr,this._overrideRedirectResult=C}_initialize(h){var m=this;return(0,f.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,m,E,A){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,m,E,A)})()}_openRedirect(h,m,E,A){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,m,E,A)})()}_isIframeWebStorageSupported(h,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,m)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Md()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const m=yield function Hy(){return Gl.apply(this,arguments)}();h.underlyingResolver=m?h.cordovaResolver:h.browserResolver})()}}function Rg(y){return y.unwrap()}function xd(y){return Og(y)}function Og(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return uo.credentialFromResult(y);const m=h.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=rd;break;case"facebook.com":E=xo;break;case"github.com":E=Gh;break;case"twitter.com":E=id;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:W,pendingToken:fe,nonce:Le}=h;return R||W||A||fe?fe?m.startsWith("saml.")?Zs._create(m,fe):Ki._fromParams({providerId:m,signInMethod:m,pendingToken:fe,idToken:A,accessToken:R}):new Oi(m).credential({idToken:A,accessToken:R,rawNonce:Le}):null}return y instanceof P.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function ci(y,h){return h.catch(m=>{throw m instanceof P.ZR&&function qy(y,h){var m;const E=null===(m=h.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Pg(y,function Kn(y,h){var m;const E=(0,P.m9)(y),A=h;return j(h.customData.operationType,E,"argument-error"),j(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),jo._fromError(E,A)}(y,h));else if(E){const A=Og(h),R=h;A&&(R.credential=A,R.tenantId=E.tenantId||void 0,R.email=E.email||void 0,R.phoneNumber=E.phoneNumber||void 0)}}(y,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:xd(m),additionalUserInfo:Vi(m),user:Ps.getOrCreate(A)}})}function df(y,h){return hf.apply(this,arguments)}function hf(){return(hf=(0,f.Z)(function*(y,h){const m=yield h;return{verificationId:m.verificationId,confirm:E=>ci(y,m.confirm(E))}})).apply(this,arguments)}class Pg{constructor(h,m){this.resolver=m,this.auth=function zy(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ci(Rg(this.auth),this.resolver.resolveSignIn(h))}}class Ps{constructor(h){this._delegate=h,this.multiFactor=function xu(y){const h=(0,P.m9)(y);return Mu.has(h)||Mu.set(h,cd._fromUser(h)),Mu.get(h)}(h)}static getOrCreate(h){return Ps.USER_MAP.has(h)||Ps.USER_MAP.set(h,new Ps(h)),Ps.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var m=this;return(0,f.Z)(function*(){return ci(m.auth,or(m._delegate,h))})()}linkWithPhoneNumber(h,m){var E=this;return(0,f.Z)(function*(){return df(E.auth,function Ay(y,h,m){return Fl.apply(this,arguments)}(E._delegate,h,m))})()}linkWithPopup(h){var m=this;return(0,f.Z)(function*(){return ci(m.auth,function yd(y,h,m){return $i.apply(this,arguments)}(m._delegate,h,li))})()}linkWithRedirect(h){var m=this;return(0,f.Z)(function*(){return yield Ku(at(m.auth)),function $t(y,h,m){return function wt(y,h,m){return vr.apply(this,arguments)}(y,h,m)}(m._delegate,h,li)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var m=this;return(0,f.Z)(function*(){return ci(m.auth,Zi(m._delegate,h))})()}reauthenticateWithPhoneNumber(h,m){return df(this.auth,function ri(y,h,m){return ii.apply(this,arguments)}(this._delegate,h,m))}reauthenticateWithPopup(h){return ci(this.auth,function Ii(y,h,m){return Lu.apply(this,arguments)}(this._delegate,h,li))}reauthenticateWithRedirect(h){var m=this;return(0,f.Z)(function*(){return yield Ku(at(m.auth)),function Ve(y,h,m){return function Tt(y,h,m){return dt.apply(this,arguments)}(y,h,m)}(m._delegate,h,li)})()}sendEmailVerification(h){return function Sl(y,h){return Tu.apply(this,arguments)}(this._delegate,h)}unlink(h){var m=this;return(0,f.Z)(function*(){return yield function zh(y,h){return nn.apply(this,arguments)}(m._delegate,h),m})()}updateEmail(h){return function sg(y,h){return Vo((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Nl(y,h){return Vo((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ao(y,h){return Qo.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function xl(y,h){return Oa.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,m){return function Ml(y,h,m){return Au.apply(this,arguments)}(this._delegate,h,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ps.USER_MAP=new WeakMap;const zl=j;let kg=(()=>{class y{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;zl(A,"invalid-api-key",{appName:m.name}),zl(A,"invalid-api-key",{appName:m.name});const R="undefined"!=typeof window?li:void 0;this._delegate=E.initialize({options:{persistence:Wy(A,m.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function Vr(y,h,m){const E=at(y);j(E._canInitEmulator,E,"emulator-config-failed"),j(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const A=!!(null==m?void 0:m.disableWarnings),R=Si(h),{host:W,port:fe}=function Fn(y){const h=Si(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const R=A[1];return{host:R,port:Mi(E.substr(R.length+1))}}{const[R,W]=E.split(":");return{host:R,port:Mi(W)}}}(h);E.config.emulator={url:`${R}//${W}${null===fe?"":`:${fe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:W,port:fe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function cn(){function y(){const h=document.createElement("p"),m=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,E)}applyActionCode(m){return function Ae(y,h){return Ft.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Tl(this._delegate,m)}confirmPasswordReset(m,E){return function Dl(y,h,m){return Cl.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var A=this;return(0,f.Z)(function*(){return ci(A._delegate,function ei(y,h,m){return Ma.apply(this,arguments)}(A._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Cs(y,h){return wi.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function xa(y,h){const m=wu.parseLink(h);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,f.Z)(function*(){zl(Ka(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Yn(y,h){return ts.apply(this,arguments)}(m._delegate,li);return E?ci(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Vy(y,h){at(y)._logFramework(h)}(this._delegate,m)}onAuthStateChanged(m,E,A){const{next:R,error:W,complete:fe}=Fg(m,E,A);return this._delegate.onAuthStateChanged(R,W,fe)}onIdTokenChanged(m,E,A){const{next:R,error:W,complete:fe}=Fg(m,E,A);return this._delegate.onIdTokenChanged(R,W,fe)}sendSignInLinkToEmail(m,E){return function ig(y,h,m){return Du.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function Il(y,h,m){return Sa.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,f.Z)(function*(){let A;switch(function xg(y,h){po(Object.values(ui).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?po(h!==ui.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?po(h===ui.NONE,y,"unsupported-persistence-type"):cr()?po(h===ui.NONE||h===ui.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):po(h===ui.NONE||lf(),y,"unsupported-persistence-type")}(E._delegate,m),m){case ui.SESSION:A=Vn;break;case ui.LOCAL:A=(yield ee(Ss)._isAvailable())?Ss:ti;break;case ui.NONE:A=Et;break;default:return Te("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return ci(this._delegate,function sd(y){return El.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return ci(this._delegate,gn(this._delegate,m))}signInWithCustomToken(m){return ci(this._delegate,function Po(y,h){return ft.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return ci(this._delegate,function Al(y,h,m){return gn((0,P.m9)(y),nd.credential(h,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return ci(this._delegate,function Cu(y,h,m){return Nn.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return df(this._delegate,function kl(y,h,m){return so.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,f.Z)(function*(){return zl(Ka(),E._delegate,"operation-not-supported-in-this-environment"),ci(E._delegate,function md(y,h,m){return Ns.apply(this,arguments)}(E._delegate,m,li))})()}signInWithRedirect(m){var E=this;return(0,f.Z)(function*(){return zl(Ka(),E._delegate,"operation-not-supported-in-this-environment"),yield Ku(E._delegate),function Y(y,h,m){return function ne(y,h,m){return ge.apply(this,arguments)}(y,h,m)}(E._delegate,m,li)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Fo(y,h){return Js.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=ui,y})();function Fg(y,h,m){let E=y;"function"!=typeof y&&({next:E,error:h,complete:m}=y);const A=E;return{next:W=>A(W&&Ps.getOrCreate(W)),error:h,complete:m}}function Wy(y,h){const m=function Za(y,h){const m=Ng();if(!m)return[];const E=jn(Mg,y,h);switch(m.getItem(E)){case ui.NONE:return[Et];case ui.LOCAL:return[Ss,Vn];case ui.SESSION:return[Vn];default:return[]}}(y,h);if("undefined"!=typeof self&&!m.includes(Ss)&&m.push(Ss),"undefined"!=typeof window)for(const E of[ti,Vn])m.includes(E)||m.push(E);return m.includes(Et)||m.push(Et),m}class ff{constructor(){this.providerId="phone",this._delegate=new uo(Rg(X.Z.auth()))}static credential(h,m){return uo.credential(h,m)}verifyPhoneNumber(h,m){return this._delegate.verifyPhoneNumber(h,m)}unwrap(){return this._delegate}}ff.PHONE_SIGN_IN_METHOD=uo.PHONE_SIGN_IN_METHOD,ff.PROVIDER_ID=uo.PROVIDER_ID;const Lg=j;class WE{constructor(h,m,E=X.Z.app()){var A;Lg(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new io(h,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function rs(y){y.INTERNAL.registerComponent(new ue.wA("auth-compat",h=>{const m=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new kg(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:nd,FacebookAuthProvider:xo,GithubAuthProvider:Gh,GoogleAuthProvider:rd,OAuthProvider:Oi,SAMLAuthProvider:Tr,PhoneAuthProvider:ff,PhoneMultiFactorGenerator:_g,RecaptchaVerifier:WE,TwitterAuthProvider:id,Auth:kg,AuthCredential:vi,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.14")}(X.Z)},8306:(Xe,we,O)=>{O.d(we,{y:()=>$});var f=O(2961),X=O(727),P=O(8822),ae=O(4671);var ue=O(2416),se=O(576),ce=O(2806);let $=(()=>{class Me{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const he=new Me;return he.source=this,he.operator=Ue,he}subscribe(Ue,he,Ce){const qe=function ze(Me){return Me&&Me instanceof f.Lv||function te(Me){return Me&&(0,se.m)(Me.next)&&(0,se.m)(Me.error)&&(0,se.m)(Me.complete)}(Me)&&(0,X.Nn)(Me)}(Ue)?Ue:new f.Hp(Ue,he,Ce);return(0,ce.x)(()=>{const{operator:Ye,source:Te}=this;qe.add(Ye?Ye.call(qe,Te):Te?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(he){Ue.error(he)}}forEach(Ue,he){return new(he=B(he))((Ce,qe)=>{const Ye=new f.Hp({next:Te=>{try{Ue(Te)}catch(Ee){qe(Ee),Ye.unsubscribe()}},error:qe,complete:Ce});this.subscribe(Ye)})}_subscribe(Ue){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Ue)}[P.L](){return this}pipe(...Ue){return function pe(Me){return 0===Me.length?ae.y:1===Me.length?Me[0]:function(Ue){return Me.reduce((he,Ce)=>Ce(he),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=B(Ue))((he,Ce)=>{let qe;this.subscribe(Ye=>qe=Ye,Ye=>Ce(Ye),()=>he(qe))})}}return Me.create=Re=>new Me(Re),Me})();function B(Me){var Re;return null!==(Re=null!=Me?Me:ue.v.Promise)&&void 0!==Re?Re:Promise}},7579:(Xe,we,O)=>{O.d(we,{x:()=>ue});var f=O(8306),X=O(727);const ae=(0,O(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=O(8737),pe=O(2806);let ue=(()=>{class ce extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const te=new se(this,this);return te.operator=B,te}_throwIfClosed(){if(this.closed)throw new ae}next(B){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(B)}})}error(B){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:te}=this;for(;te.length;)te.shift().error(B)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:te,isStopped:ze,observers:Me}=this;return te||ze?X.Lc:(this.currentObservers=null,Me.push(B),new X.w0(()=>{this.currentObservers=null,(0,re.P)(Me,B)}))}_checkFinalizedStatuses(B){const{hasError:te,thrownError:ze,isStopped:Me}=this;te?B.error(ze):Me&&B.complete()}asObservable(){const B=new f.y;return B.source=this,B}}return ce.create=($,B)=>new se($,B),ce})();class se extends ue{constructor($,B){super(),this.destination=$,this.source=B}next($){var B,te;null===(te=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===te||te.call(B,$)}error($){var B,te;null===(te=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===te||te.call(B,$)}complete(){var $,B;null===(B=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===B||B.call($)}_subscribe($){var B,te;return null!==(te=null===(B=this.source)||void 0===B?void 0:B.subscribe($))&&void 0!==te?te:X.Lc}}},2961:(Xe,we,O)=>{O.d(we,{Hp:()=>Ue,Lv:()=>te});var f=O(576),X=O(727),P=O(2416),ae=O(7849);function re(){}const pe=ce("C",void 0,void 0);function ce(Te,Ee,Ie){return{kind:Te,value:Ee,error:Ie}}var $=O(3410),B=O(2806);class te extends X.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,X.Nn)(Ee)&&Ee.add(this)):this.destination=Ye}static create(Ee,Ie,$e){return new Ue(Ee,Ie,$e)}next(Ee){this.isStopped?qe(function se(Te){return ce("N",Te,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?qe(function ue(Te){return ce("E",void 0,Te)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?qe(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Me(Te,Ee){return ze.call(Te,Ee)}class Re{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Ee)}catch($e){he($e)}}error(Ee){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Ee)}catch($e){he($e)}else he(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ie){he(Ie)}}}class Ue extends te{constructor(Ee,Ie,$e){let je;if(super(),(0,f.m)(Ee)||!Ee)je={next:null!=Ee?Ee:void 0,error:null!=Ie?Ie:void 0,complete:null!=$e?$e:void 0};else{let j;this&&P.v.useDeprecatedNextContext?(j=Object.create(Ee),j.unsubscribe=()=>this.unsubscribe(),je={next:Ee.next&&Me(Ee.next,j),error:Ee.error&&Me(Ee.error,j),complete:Ee.complete&&Me(Ee.complete,j)}):je=Ee}this.destination=new Re(je)}}function he(Te){P.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Te):(0,ae.h)(Te)}function qe(Te,Ee){const{onStoppedNotification:Ie}=P.v;Ie&&$.z.setTimeout(()=>Ie(Te,Ee))}const Ye={closed:!0,next:re,error:function Ce(Te){throw Te},complete:re}},727:(Xe,we,O)=>{O.d(we,{Lc:()=>pe,w0:()=>re,Nn:()=>ue});var f=O(576);const P=(0,O(3888).d)(ce=>function(B){ce(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((te,ze)=>`${ze+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ae=O(8737);class re{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Me of B)Me.remove(this);else B.remove(this);const{initialTeardown:te}=this;if((0,f.m)(te))try{te()}catch(Me){$=Me instanceof P?Me.errors:[Me]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Me of ze)try{se(Me)}catch(Re){$=null!=$?$:[],Re instanceof P?$=[...$,...Re.errors]:$.push(Re)}}if($)throw new P($)}}add($){var B;if($&&$!==this)if(this.closed)se($);else{if($ instanceof re){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push($)}}_hasParent($){const{_parentage:B}=this;return B===$||Array.isArray(B)&&B.includes($)}_addParent($){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push($),B):B?[B,$]:$}_removeParent($){const{_parentage:B}=this;B===$?this._parentage=null:Array.isArray(B)&&(0,ae.P)(B,$)}remove($){const{_finalizers:B}=this;B&&(0,ae.P)(B,$),$ instanceof re&&$._removeParent(this)}}re.EMPTY=(()=>{const ce=new re;return ce.closed=!0,ce})();const pe=re.EMPTY;function ue(ce){return ce instanceof re||ce&&"closed"in ce&&(0,f.m)(ce.remove)&&(0,f.m)(ce.add)&&(0,f.m)(ce.unsubscribe)}function se(ce){(0,f.m)(ce)?ce():ce.unsubscribe()}},2416:(Xe,we,O)=>{O.d(we,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Xe,we,O)=>{O.d(we,{E:()=>X});const X=new(O(8306).y)(re=>re.complete())},8996:(Xe,we,O)=>{O.d(we,{D:()=>Ee});var f=O(8421),X=O(5363),P=O(9468),pe=O(8306),se=O(2202),ce=O(576),$=O(9672);function te(Ie,$e){if(!Ie)throw new Error("Iterable cannot be null");return new pe.y(je=>{(0,$.f)(je,$e,()=>{const j=Ie[Symbol.asyncIterator]();(0,$.f)(je,$e,()=>{j.next().then(ve=>{ve.done?je.complete():je.next(ve.value)})},0,!0)})})}var ze=O(3670),Me=O(8239),Re=O(1144),Ue=O(6495),he=O(2206),Ce=O(4532),qe=O(3260);function Ee(Ie,$e){return $e?function Te(Ie,$e){if(null!=Ie){if((0,ze.c)(Ie))return function ae(Ie,$e){return(0,f.Xf)(Ie).pipe((0,P.R)($e),(0,X.Q)($e))}(Ie,$e);if((0,Re.z)(Ie))return function ue(Ie,$e){return new pe.y(je=>{let j=0;return $e.schedule(function(){j===Ie.length?je.complete():(je.next(Ie[j++]),je.closed||this.schedule())})})}(Ie,$e);if((0,Me.t)(Ie))return function re(Ie,$e){return(0,f.Xf)(Ie).pipe((0,P.R)($e),(0,X.Q)($e))}(Ie,$e);if((0,he.D)(Ie))return te(Ie,$e);if((0,Ue.T)(Ie))return function B(Ie,$e){return new pe.y(je=>{let j;return(0,$.f)(je,$e,()=>{j=Ie[se.h](),(0,$.f)(je,$e,()=>{let ve,K;try{({value:ve,done:K}=j.next())}catch(ie){return void je.error(ie)}K?je.complete():je.next(ve)},0,!0)}),()=>(0,ce.m)(null==j?void 0:j.return)&&j.return()})}(Ie,$e);if((0,qe.L)(Ie))return function Ye(Ie,$e){return te((0,qe.Q)(Ie),$e)}(Ie,$e)}throw(0,Ce.z)(Ie)}(Ie,$e):(0,f.Xf)(Ie)}},8421:(Xe,we,O)=>{O.d(we,{Xf:()=>ze});var f=O(655),X=O(1144),P=O(8239),ae=O(8306),re=O(3670),pe=O(2206),ue=O(4532),se=O(6495),ce=O(3260),$=O(576),B=O(7849),te=O(8822);function ze(Te){if(Te instanceof ae.y)return Te;if(null!=Te){if((0,re.c)(Te))return function Me(Te){return new ae.y(Ee=>{const Ie=Te[te.L]();if((0,$.m)(Ie.subscribe))return Ie.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,X.z)(Te))return function Re(Te){return new ae.y(Ee=>{for(let Ie=0;Ie<Te.length&&!Ee.closed;Ie++)Ee.next(Te[Ie]);Ee.complete()})}(Te);if((0,P.t)(Te))return function Ue(Te){return new ae.y(Ee=>{Te.then(Ie=>{Ee.closed||(Ee.next(Ie),Ee.complete())},Ie=>Ee.error(Ie)).then(null,B.h)})}(Te);if((0,pe.D)(Te))return Ce(Te);if((0,se.T)(Te))return function he(Te){return new ae.y(Ee=>{for(const Ie of Te)if(Ee.next(Ie),Ee.closed)return;Ee.complete()})}(Te);if((0,ce.L)(Te))return function qe(Te){return Ce((0,ce.Q)(Te))}(Te)}throw(0,ue.z)(Te)}function Ce(Te){return new ae.y(Ee=>{(function Ye(Te,Ee){var Ie,$e,je,j;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,f.KL)(Te);!($e=yield Ie.next()).done;)if(Ee.next($e.value),Ee.closed)return}catch(ve){je={error:ve}}finally{try{$e&&!$e.done&&(j=Ie.return)&&(yield j.call(Ie))}finally{if(je)throw je.error}}Ee.complete()})})(Te,Ee).catch(Ie=>Ee.error(Ie))})}},6451:(Xe,we,O)=>{O.d(we,{T:()=>pe});var f=O(8189),X=O(8421),P=O(515),ae=O(7669),re=O(8996);function pe(...ue){const se=(0,ae.yG)(ue),ce=(0,ae._6)(ue,1/0),$=ue;return $.length?1===$.length?(0,X.Xf)($[0]):(0,f.J)(ce)((0,re.D)($,se)):P.E}},5403:(Xe,we,O)=>{O.d(we,{x:()=>X});var f=O(2961);function X(ae,re,pe,ue,se){return new P(ae,re,pe,ue,se)}class P extends f.Lv{constructor(re,pe,ue,se,ce,$){super(re),this.onFinalize=ce,this.shouldUnsubscribe=$,this._next=pe?function(B){try{pe(B)}catch(te){re.error(te)}}:super._next,this._error=se?function(B){try{se(B)}catch(te){re.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(B){re.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(Xe,we,O)=>{O.d(we,{U:()=>P});var f=O(4482),X=O(5403);function P(ae,re){return(0,f.e)((pe,ue)=>{let se=0;pe.subscribe((0,X.x)(ue,ce=>{ue.next(ae.call(re,ce,se++))}))})}},8189:(Xe,we,O)=>{O.d(we,{J:()=>P});var f=O(5577),X=O(4671);function P(ae=1/0){return(0,f.z)(X.y,ae)}},5577:(Xe,we,O)=>{O.d(we,{z:()=>se});var f=O(4004),X=O(8421),P=O(4482),ae=O(9672),re=O(5403),ue=O(576);function se(ce,$,B=1/0){return(0,ue.m)($)?se((te,ze)=>(0,f.U)((Me,Re)=>$(te,Me,ze,Re))((0,X.Xf)(ce(te,ze))),B):("number"==typeof $&&(B=$),(0,P.e)((te,ze)=>function pe(ce,$,B,te,ze,Me,Re,Ue){const he=[];let Ce=0,qe=0,Ye=!1;const Te=()=>{Ye&&!he.length&&!Ce&&$.complete()},Ee=$e=>Ce<te?Ie($e):he.push($e),Ie=$e=>{Me&&$.next($e),Ce++;let je=!1;(0,X.Xf)(B($e,qe++)).subscribe((0,re.x)($,j=>{null==ze||ze(j),Me?Ee(j):$.next(j)},()=>{je=!0},void 0,()=>{if(je)try{for(Ce--;he.length&&Ce<te;){const j=he.shift();Re?(0,ae.f)($,Re,()=>Ie(j)):Ie(j)}Te()}catch(j){$.error(j)}}))};return ce.subscribe((0,re.x)($,Ee,()=>{Ye=!0,Te()})),()=>{null==Ue||Ue()}}(te,ze,ce,B)))}},5363:(Xe,we,O)=>{O.d(we,{Q:()=>ae});var f=O(9672),X=O(4482),P=O(5403);function ae(re,pe=0){return(0,X.e)((ue,se)=>{ue.subscribe((0,P.x)(se,ce=>(0,f.f)(se,re,()=>se.next(ce),pe),()=>(0,f.f)(se,re,()=>se.complete(),pe),ce=>(0,f.f)(se,re,()=>se.error(ce),pe)))})}},3099:(Xe,we,O)=>{O.d(we,{B:()=>pe});var f=O(8996),X=O(5698),P=O(7579),ae=O(2961),re=O(4482);function pe(se={}){const{connector:ce=(()=>new P.x),resetOnError:$=!0,resetOnComplete:B=!0,resetOnRefCountZero:te=!0}=se;return ze=>{let Me=null,Re=null,Ue=null,he=0,Ce=!1,qe=!1;const Ye=()=>{null==Re||Re.unsubscribe(),Re=null},Te=()=>{Ye(),Me=Ue=null,Ce=qe=!1},Ee=()=>{const Ie=Me;Te(),null==Ie||Ie.unsubscribe()};return(0,re.e)((Ie,$e)=>{he++,!qe&&!Ce&&Ye();const je=Ue=null!=Ue?Ue:ce();$e.add(()=>{he--,0===he&&!qe&&!Ce&&(Re=ue(Ee,te))}),je.subscribe($e),Me||(Me=new ae.Hp({next:j=>je.next(j),error:j=>{qe=!0,Ye(),Re=ue(Te,$,j),je.error(j)},complete:()=>{Ce=!0,Ye(),Re=ue(Te,B),je.complete()}}),(0,f.D)(Ie).subscribe(Me))})(ze)}}function ue(se,ce,...$){return!0===ce?(se(),null):!1===ce?null:ce(...$).pipe((0,X.q)(1)).subscribe(()=>se())}},9468:(Xe,we,O)=>{O.d(we,{R:()=>X});var f=O(4482);function X(P,ae=0){return(0,f.e)((re,pe)=>{pe.add(P.schedule(()=>re.subscribe(pe),ae))})}},5698:(Xe,we,O)=>{O.d(we,{q:()=>ae});var f=O(515),X=O(4482),P=O(5403);function ae(re){return re<=0?()=>f.E:(0,X.e)((pe,ue)=>{let se=0;pe.subscribe((0,P.x)(ue,ce=>{++se<=re&&(ue.next(ce),re<=se&&ue.complete())}))})}},8505:(Xe,we,O)=>{O.d(we,{b:()=>re});var f=O(576),X=O(4482),P=O(5403),ae=O(4671);function re(pe,ue,se){const ce=(0,f.m)(pe)||ue||se?{next:pe,error:ue,complete:se}:pe;return ce?(0,X.e)(($,B)=>{var te;null===(te=ce.subscribe)||void 0===te||te.call(ce);let ze=!0;$.subscribe((0,P.x)(B,Me=>{var Re;null===(Re=ce.next)||void 0===Re||Re.call(ce,Me),B.next(Me)},()=>{var Me;ze=!1,null===(Me=ce.complete)||void 0===Me||Me.call(ce),B.complete()},Me=>{var Re;ze=!1,null===(Re=ce.error)||void 0===Re||Re.call(ce,Me),B.error(Me)},()=>{var Me,Re;ze&&(null===(Me=ce.unsubscribe)||void 0===Me||Me.call(ce)),null===(Re=ce.finalize)||void 0===Re||Re.call(ce)}))}):ae.y}},4408:(Xe,we,O)=>{O.d(we,{o:()=>re});var f=O(727);class X extends f.w0{constructor(ue,se){super()}schedule(ue,se=0){return this}}const P={setInterval(pe,ue,...se){const{delegate:ce}=P;return(null==ce?void 0:ce.setInterval)?ce.setInterval(pe,ue,...se):setInterval(pe,ue,...se)},clearInterval(pe){const{delegate:ue}=P;return((null==ue?void 0:ue.clearInterval)||clearInterval)(pe)},delegate:void 0};var ae=O(8737);class re extends X{constructor(ue,se){super(ue,se),this.scheduler=ue,this.work=se,this.pending=!1}schedule(ue,se=0){if(this.closed)return this;this.state=ue;const ce=this.id,$=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId($,ce,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId($,this.id,se),this}requestAsyncId(ue,se,ce=0){return P.setInterval(ue.flush.bind(ue,this),ce)}recycleAsyncId(ue,se,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return se;P.clearInterval(se)}execute(ue,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(ue,se);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,se){let $,ce=!1;try{this.work(ue)}catch(B){ce=!0,$=B||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ue,scheduler:se}=this,{actions:ce}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ce,this),null!=ue&&(this.id=this.recycleAsyncId(se,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(Xe,we,O)=>{O.d(we,{v:()=>P});var f=O(6063);class X{constructor(re,pe=X.now){this.schedulerActionCtor=re,this.now=pe}schedule(re,pe=0,ue){return new this.schedulerActionCtor(this,re).schedule(ue,pe)}}X.now=f.l.now;class P extends X{constructor(re,pe=X.now){super(re,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:pe}=this;if(this._active)return void pe.push(re);let ue;this._active=!0;do{if(ue=re.execute(re.state,re.delay))break}while(re=pe.shift());if(this._active=!1,ue){for(;re=pe.shift();)re.unsubscribe();throw ue}}}},4986:(Xe,we,O)=>{O.d(we,{z:()=>P});var f=O(4408);const P=new(O(7565).v)(f.o)},6063:(Xe,we,O)=>{O.d(we,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Xe,we,O)=>{O.d(we,{z:()=>f});const f={setTimeout(X,P,...ae){const{delegate:re}=f;return(null==re?void 0:re.setTimeout)?re.setTimeout(X,P,...ae):setTimeout(X,P,...ae)},clearTimeout(X){const{delegate:P}=f;return((null==P?void 0:P.clearTimeout)||clearTimeout)(X)},delegate:void 0}},2202:(Xe,we,O)=>{O.d(we,{h:()=>X});const X=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Xe,we,O)=>{O.d(we,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Xe,we,O)=>{O.d(we,{_6:()=>pe,jO:()=>ae,yG:()=>re});var f=O(576);function P(ue){return ue[ue.length-1]}function ae(ue){return(0,f.m)(P(ue))?ue.pop():void 0}function re(ue){return function X(ue){return ue&&(0,f.m)(ue.schedule)}(P(ue))?ue.pop():void 0}function pe(ue,se){return"number"==typeof P(ue)?ue.pop():se}},8737:(Xe,we,O)=>{function f(X,P){if(X){const ae=X.indexOf(P);0<=ae&&X.splice(ae,1)}}O.d(we,{P:()=>f})},3888:(Xe,we,O)=>{function f(X){const ae=X(re=>{Error.call(re),re.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}O.d(we,{d:()=>f})},2806:(Xe,we,O)=>{O.d(we,{x:()=>P,O:()=>ae});var f=O(2416);let X=null;function P(re){if(f.v.useDeprecatedSynchronousErrorHandling){const pe=!X;if(pe&&(X={errorThrown:!1,error:null}),re(),pe){const{errorThrown:ue,error:se}=X;if(X=null,ue)throw se}}else re()}function ae(re){f.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=re)}},9672:(Xe,we,O)=>{function f(X,P,ae,re=0,pe=!1){const ue=P.schedule(function(){ae(),pe?X.add(this.schedule(null,re)):this.unsubscribe()},re);if(X.add(ue),!pe)return ue}O.d(we,{f:()=>f})},4671:(Xe,we,O)=>{function f(X){return X}O.d(we,{y:()=>f})},1144:(Xe,we,O)=>{O.d(we,{z:()=>f});const f=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(Xe,we,O)=>{O.d(we,{D:()=>X});var f=O(576);function X(P){return Symbol.asyncIterator&&(0,f.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(Xe,we,O)=>{function f(X){return"function"==typeof X}O.d(we,{m:()=>f})},3670:(Xe,we,O)=>{O.d(we,{c:()=>P});var f=O(8822),X=O(576);function P(ae){return(0,X.m)(ae[f.L])}},6495:(Xe,we,O)=>{O.d(we,{T:()=>P});var f=O(2202),X=O(576);function P(ae){return(0,X.m)(null==ae?void 0:ae[f.h])}},8239:(Xe,we,O)=>{O.d(we,{t:()=>X});var f=O(576);function X(P){return(0,f.m)(null==P?void 0:P.then)}},3260:(Xe,we,O)=>{O.d(we,{Q:()=>P,L:()=>ae});var f=O(655),X=O(576);function P(re){return(0,f.FC)(this,arguments,function*(){const ue=re.getReader();try{for(;;){const{value:se,done:ce}=yield(0,f.qq)(ue.read());if(ce)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(se)}}finally{ue.releaseLock()}})}function ae(re){return(0,X.m)(null==re?void 0:re.getReader)}},4482:(Xe,we,O)=>{O.d(we,{A:()=>X,e:()=>P});var f=O(576);function X(ae){return(0,f.m)(null==ae?void 0:ae.lift)}function P(ae){return re=>{if(X(re))return re.lift(function(pe){try{return ae(pe,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Xe,we,O)=>{O.d(we,{h:()=>P});var f=O(2416),X=O(3410);function P(ae){X.z.setTimeout(()=>{const{onUnhandledError:re}=f.v;if(!re)throw ae;re(ae)})}},4532:(Xe,we,O)=>{function f(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(we,{z:()=>f})},655:(Xe,we,O)=>{function ae(K,ie){var ee={};for(var me in K)Object.prototype.hasOwnProperty.call(K,me)&&ie.indexOf(me)<0&&(ee[me]=K[me]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var oe=0;for(me=Object.getOwnPropertySymbols(K);oe<me.length;oe++)ie.indexOf(me[oe])<0&&Object.prototype.propertyIsEnumerable.call(K,me[oe])&&(ee[me[oe]]=K[me[oe]])}return ee}function se(K,ie,ee,me){return new(ee||(ee=Promise))(function(Oe,lt){function Ht(Qt){try{Qe(me.next(Qt))}catch(Sn){lt(Sn)}}function Bt(Qt){try{Qe(me.throw(Qt))}catch(Sn){lt(Sn)}}function Qe(Qt){Qt.done?Oe(Qt.value):function oe(Oe){return Oe instanceof ee?Oe:new ee(function(lt){lt(Oe)})}(Qt.value).then(Ht,Bt)}Qe((me=me.apply(K,ie||[])).next())})}function he(K){return this instanceof he?(this.v=K,this):new he(K)}function Ce(K,ie,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,me=ee.apply(K,ie||[]),Oe=[];return oe={},lt("next"),lt("throw"),lt("return"),oe[Symbol.asyncIterator]=function(){return this},oe;function lt(en){me[en]&&(oe[en]=function(Zt){return new Promise(function(br,qt){Oe.push([en,Zt,br,qt])>1||Ht(en,Zt)})})}function Ht(en,Zt){try{!function Bt(en){en.value instanceof he?Promise.resolve(en.value.v).then(Qe,Qt):Sn(Oe[0][2],en)}(me[en](Zt))}catch(br){Sn(Oe[0][3],br)}}function Qe(en){Ht("next",en)}function Qt(en){Ht("throw",en)}function Sn(en,Zt){en(Zt),Oe.shift(),Oe.length&&Ht(Oe[0][0],Oe[0][1])}}function Ye(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,ie=K[Symbol.asyncIterator];return ie?ie.call(K):(K=function te(K){var ie="function"==typeof Symbol&&Symbol.iterator,ee=ie&&K[ie],me=0;if(ee)return ee.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&me>=K.length&&(K=void 0),{value:K&&K[me++],done:!K}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ee={},me("next"),me("throw"),me("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function me(Oe){ee[Oe]=K[Oe]&&function(lt){return new Promise(function(Ht,Bt){!function oe(Oe,lt,Ht,Bt){Promise.resolve(Bt).then(function(Qe){Oe({value:Qe,done:Ht})},lt)}(Ht,Bt,(lt=K[Oe](lt)).done,lt.value)})}}}O.d(we,{_T:()=>ae,mG:()=>se,qq:()=>he,FC:()=>Ce,KL:()=>Ye})},5e3:(Xe,we,O)=>{O.d(we,{deG:()=>ug,tb:()=>hu,AFp:()=>iy,ip1:()=>ry,CZH:()=>$v,hGG:()=>lT,z2F:()=>Ap,sBO:()=>eT,Sil:()=>zv,_Vd:()=>cu,EJc:()=>Nh,SBq:()=>Ac,qLn:()=>xd,vpe:()=>$s,tBr:()=>Hr,XFs:()=>yt,OlP:()=>hn,zs3:()=>ks,ZZ4:()=>Rh,aQg:()=>Pp,soG:()=>oy,YKP:()=>bh,h0i:()=>Mc,PXZ:()=>tE,R0b:()=>bo,FiY:()=>si,Lbi:()=>Uc,g9A:()=>sy,Qsj:()=>lb,FYo:()=>ub,JOm:()=>A,tp0:()=>ai,Rgc:()=>Oc,dDg:()=>tI,q4F:()=>db,GfV:()=>ul,s_b:()=>yp,ifc:()=>Gt,eFA:()=>iI,G48:()=>fu,Gpc:()=>B,X6Q:()=>iE,_c5:()=>uT,VLi:()=>Qv,c2e:()=>Bc,zSh:()=>T_,wAp:()=>Be,vHH:()=>Re,cg1:()=>Sm,kL8:()=>xm,dqk:()=>jt,sIi:()=>ec,CqO:()=>He,QGY:()=>hc,F4k:()=>$_,RDi:()=>wl,AaK:()=>se,qOj:()=>O_,TTD:()=>Oi,_Bn:()=>lu,xp6:()=>o0,uIk:()=>kf,ekj:()=>su,Suo:()=>Mb,Xpm:()=>ht,lG2:()=>mu,Yz7:()=>Zt,cJS:()=>qt,oAB:()=>Dr,Yjl:()=>va,Y36:()=>Bn,_UZ:()=>iu,qZA:()=>An,TgZ:()=>_o,n5z:()=>Ou,LFG:()=>Ve,$8M:()=>ro,$Z:()=>cc,NdJ:()=>ca,CRH:()=>xb,kcU:()=>Dy,O4$:()=>Iy,ALo:()=>wb,lcZ:()=>Dv,Q6J:()=>B_,s9C:()=>$f,iGM:()=>qm,LSH:()=>qu,YNc:()=>tw,_uU:()=>yc,Oqu:()=>ev,hij:()=>ah});var f=O(7579),X=O(727),P=O(8306),ae=O(6451),re=O(3099);function pe(i){for(let o in i)if(i[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function ue(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function se(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(se).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ce(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const $=pe({__forward_ref__:pe});function B(i){return i.__forward_ref__=B,i.toString=function(){return se(this())},i}function te(i){return ze(i)?i():i}function ze(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===B}class Re extends Error{constructor(o,a){super(function Ue(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function Ce(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function Ee(i,o){const a=o?` in ${o}`:"";throw new Re(-201,`No provider for ${Ce(i)} found${a}`)}function Bt(i,o){null==i&&function Qe(i,o,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,i,null,"!=")}function Zt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function qt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Vt(i){return qi(i,Ti)||qi(i,Zr)}function qi(i,o){return i.hasOwnProperty(o)?i[o]:null}function Ir(i){return i&&(i.hasOwnProperty(ys)||i.hasOwnProperty(Ai))?i[ys]:null}const Ti=pe({\u0275prov:pe}),ys=pe({\u0275inj:pe}),Zr=pe({ngInjectableDef:pe}),Ai=pe({ngInjectorDef:pe});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let Yr;function Mn(i){const o=Yr;return Yr=i,o}function Gs(i,o,a){const l=Vt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&yt.Optional?null:void 0!==o?o:void Ee(se(i),"Injector")}function qn(i){return{toString:i}.toString()}var kn=(()=>((kn=kn||{})[kn.OnPush=0]="OnPush",kn[kn.Default=1]="Default",kn))(),Gt=(()=>{return(i=Gt||(Gt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Gt;var i})();const it="undefined"!=typeof globalThis&&globalThis,vt="undefined"!=typeof window&&window,pr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,jt=it||"undefined"!=typeof global&&global||vt||pr,mr={},V=[],G=pe({\u0275cmp:pe}),z=pe({\u0275dir:pe}),De=pe({\u0275pipe:pe}),H=pe({\u0275mod:pe}),J=pe({\u0275fac:pe}),Ne=pe({__NG_ELEMENT_ID__:pe});let Je=0;function ht(i){return qn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===kn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||V,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Gt.Emulated,id:"c",styles:i.styles||V,_:null,setInput:null,schemas:i.schemas||null,tView:null},d=i.directives,p=i.features,_=i.pipes;return l.id+=Je++,l.inputs=_a(i.inputs,a),l.outputs=_a(i.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(ln):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(Et):null,l})}function ln(i){return $n(i)||function Cr(i){return i[z]||null}(i)}function Et(i){return function Wi(i){return i[De]||null}(i)}const jn={};function Dr(i){return qn(()=>{const o={type:i.type,bootstrap:i.bootstrap||V,declarations:i.declarations||V,imports:i.imports||V,exports:i.exports||V,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(jn[i.id]=i.type),o})}function _a(i,o){if(null==i)return mr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const mu=ht;function va(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function $n(i){return i[G]||null}function Hn(i,o){const a=i[H]||null;if(!a&&!0===o)throw new Error(`Type ${se(i)} does not have '\u0275mod' property.`);return a}function Ur(i){return Array.isArray(i)&&"object"==typeof i[1]}function xi(i){return Array.isArray(i)&&!0===i[1]}function vu(i){return 0!=(8&i.flags)}function Zc(i){return 2==(2&i.flags)}function Ni(i){return 1==(1&i.flags)}function Ri(i){return null!==i.template}function yl(i){return 0!=(512&i[2])}function _r(i,o){return i.hasOwnProperty(J)?i[J]:null}class Ks{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Oi(){return xo}function xo(i){return i.type.prototype.ngOnChanges&&(i.setInput=Gh),rd}function rd(){const i=Zs(this),o=null==i?void 0:i.current;if(o){const a=i.previous;if(a===mr)i.previous=o;else for(let l in o)a[l]=o[l];i.current=null,this.ngOnChanges(o)}}function Gh(i,o,a,l){const d=Zs(i)||function No(i,o){return i[Gn]=o}(i,{previous:mr,current:null}),p=d.current||(d.current={}),_=d.previous,w=this.declaredInputs[a],b=_[w];p[w]=new Ks(b&&b.currentValue,o,_===mr),i[l]=o}Oi.ngInherit=!0;const Gn="__ngSimpleChanges__";function Zs(i){return i[Gn]||null}let Oo;function wl(i){Oo=i}function nn(i){return!!i.listen}const Da={createRenderer:(i,o)=>function Pi(){return void 0!==Oo?Oo:"undefined"!=typeof document?document:void 0}()};function Yt(i){for(;Array.isArray(i);)i=i[0];return i}function Ds(i,o){return Yt(o[i])}function sr(i,o){return Yt(o[i.index])}function gn(i,o){return i.data[o]}function or(i,o){const a=o[i];return Ur(a)?a:a[0]}function Qs(i){return 4==(4&i[2])}function Zi(i){return 128==(128&i[2])}function Ei(i,o){return null==o?null:i[o]}function Fi(i){i[18]=0}function Po(i,o){i[5]+=o;let a=i,l=i[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const ft={lFrame:od(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Sa(){return ft.bindingsEnabled}function Ae(){return ft.lFrame.lView}function Ft(){return ft.lFrame.tView}function dn(){let i=Fo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Fo(){return ft.lFrame.currentTNode}function ei(i,o){const a=ft.lFrame;a.currentTNode=i,a.isParent=o}function Ma(){return ft.lFrame.isParent}function xa(){return ft.isInCheckNoChangesMode}function Cu(i){ft.isInCheckNoChangesMode=i}function Cs(){return ft.lFrame.bindingIndex++}function Ml(i,o){const a=ft.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ra(o)}function Ra(i){ft.lFrame.currentDirectiveIndex=i}function xl(){return ft.lFrame.currentQueryIndex}function Oa(i){ft.lFrame.currentQueryIndex=i}function sg(i){const o=i[1];return 2===o.type?o.declTNode:1===o.type?i[6]:null}function Nl(i,o,a){if(a&yt.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&yt.Host||(d=sg(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,i=p}const l=ft.lFrame=Pa();return l.currentTNode=o,l.lView=i,!0}function Vo(i){const o=Pa(),a=i[1];ft.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Pa(){const i=ft.lFrame,o=null===i?null:i.child;return null===o?od(i):o}function od(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Uo(){const i=ft.lFrame;return ft.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ad=Uo;function Bo(){const i=Uo();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Wn(){return ft.lFrame.selectedIndex}function Vi(i){ft.lFrame.selectedIndex=i}function In(){const i=ft.lFrame;return gn(i.tView,i.selectedIndex)}function Iy(){ft.lFrame.currentNamespace="svg"}function Dy(){!function Cy(){ft.lFrame.currentNamespace=null}()}function ld(i,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:M}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function ka(i,o,a){Kn(i,o,3,a)}function Qi(i,o,a,l){(3&i[2])===a&&Kn(i,o,a,l)}function jo(i,o){let a=i[2];(3&a)===o&&(a&=2047,a+=1,i[2]=a)}function Kn(i,o,a,l){const p=null!=l?l:-1,_=o.length-1;let w=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof o[b+1]){if(w=o[b],null!=l&&w>=l)break}else o[b]<0&&(i[18]+=65536),(w<p||-1==p)&&(Kh(i,a,o,b),i[18]=(4294901760&i[18])+b+2),b++}function Kh(i,o,a,l){const d=a[l]<0,p=a[l+1],w=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===o){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Su{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function tt(i,o,a){const l=nn(i);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const _=a[d++],w=a[d++],b=a[d++];l?i.setAttribute(o,w,b,_):o.setAttributeNS(_,w,b)}else{const _=p,w=a[++d];Br(_)?l&&i.setProperty(o,_,w):l?i.setAttribute(o,_,w):o.setAttribute(_,w),d++}}return d}function ti(i){return 3===i||4===i||6===i}function Br(i){return 64===i.charCodeAt(0)}function Vn(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Rl(i,a,d,null,-1===a||2===a?o[++l]:null)}}return i}function Rl(i,o,a,l,d){let p=0,_=i.length;if(-1===o)_=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===o){_=-1;break}if(w>o){_=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(i[p+1]=d));if(l===i[p+1])return void(i[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==_&&(i.splice(_,0,o),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==d&&i.splice(p++,0,d)}function hd(i){return-1!==i}function Ui(i){return 32767&i}function on(i,o){let a=function Ol(i){return i>>16}(i),l=o;for(;a>0;)l=l[15],a--;return l}let La=!0;function bi(i){const o=La;return La=i,o}let pd=0;function Rn(i,o){const a=Ho(i,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(i.injectorIndex=o.length,$o(l.data,i),$o(o,null),$o(l.blueprint,null));const d=Ts(i,o),p=i.injectorIndex;if(hd(d)){const _=Ui(d),w=on(d,o),b=w[1].data;for(let T=0;T<8;T++)o[p+T]=w[_+T]|b[_+T]}return o[p+8]=d,p}function $o(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Ho(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Ts(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const p=d[1],_=p.type;if(l=2===_?p.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ar(i,o,a){!function Pl(i,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Ne)&&(l=a[Ne]),null==l&&(l=a[Ne]=pd++);const d=255&l;o.data[i+(d>>5)]|=1<<d}(i,o,a)}function Ji(i,o,a){if(a&yt.Optional)return i;Ee(o,"NodeInjector")}function Go(i,o,a,l){if(a&yt.Optional&&void 0===l&&(l=null),0==(a&(yt.Self|yt.Host))){const d=i[9],p=Mn(void 0);try{return d?d.get(o,l,a&yt.Optional):Gs(o,l,a&yt.Optional)}finally{Mn(p)}}return Ji(l,o,a)}function As(i,o,a,l=yt.Default,d){if(null!==i){const p=function Va(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(Ne)?i[Ne]:void 0;return"number"==typeof o?o>=0?255&o:to:o}(a);if("function"==typeof p){if(!Nl(o,i,l))return l&yt.Host?Ji(d,a,l):Go(o,a,l,d);try{const _=p(l);if(null!=_||l&yt.Optional)return _;Ee(a)}finally{ad()}}else if("number"==typeof p){let _=null,w=Ho(i,o),b=-1,T=l&yt.Host?o[16][6]:null;for((-1===w||l&yt.SkipSelf)&&(b=-1===w?Ts(i,o):o[w+8],-1!==b&&ur(l,!1)?(_=o[1],w=Ui(b),o=on(b,o)):w=-1);-1!==w;){const M=o[1];if(Ss(p,w,M.data)){const k=qo(w,o,a,_,l,T);if(k!==zo)return k}b=o[w+8],-1!==b&&ur(l,o[1].data[w+8]===T)&&Ss(p,w,o)?(_=M,w=Ui(b),o=on(b,o)):w=-1}}}return Go(o,a,l,d)}const zo={};function to(){return new no(dn(),Ae())}function qo(i,o,a,l,d,p){const _=o[1],w=_.data[i+8],M=Wo(w,_,a,null==l?Zc(w)&&La:l!=_&&0!=(3&w.type),d&yt.Host&&p===w);return null!==M?Ko(o,_,M,w):zo}function Wo(i,o,a,l,d){const p=i.providerIndexes,_=o.data,w=1048575&p,b=i.directiveStart,M=p>>20,U=d?w+M:i.directiveEnd;for(let Q=l?w:w+M;Q<U;Q++){const _e=_[Q];if(Q<b&&a===_e||Q>=b&&_e.type===a)return Q}if(d){const Q=_[b];if(Q&&Ri(Q)&&Q.type===a)return b}return null}function Ko(i,o,a,l){let d=i[a];const p=o.data;if(function cd(i){return i instanceof Su}(d)){const _=d;_.resolving&&function qe(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ce(p[a]));const w=bi(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Mn(_.injectImpl):null;Nl(i,l,yt.Default);try{d=i[a]=_.factory(void 0,p,i,l),o.firstCreatePass&&a>=l.directiveStart&&function og(i,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const _=xo(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==b&&Mn(b),bi(w),_.resolving=!1,ad()}}return d}function Ss(i,o,a){return!!(a[o+(i>>5)]&1<<i)}function ur(i,o){return!(i&yt.Self||i&yt.Host&&o)}class no{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return As(this._tNode,this._lView,o,l,a)}}function Ou(i){return qn(()=>{const o=i.prototype.constructor,a=o[J]||Dn(o),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const p=d[J]||Dn(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Dn(i){return ze(i)?()=>{const o=Dn(te(i));return o&&o()}:_r(i)}function ro(i){return function Ru(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(ti(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(dn(),i)}const Xi="__parameters__";function Cn(i,o,a){return qn(()=>{const l=function ni(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const _=new d(...p);return w.annotation=_,w;function w(b,T,M){const k=b.hasOwnProperty(Xi)?b[Xi]:Object.defineProperty(b,Xi,{value:[]})[Xi];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(_),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class hn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Zt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ug=new hn("AnalyzeForEntryComponents");function ri(i,o){void 0===o&&(o=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(o===i&&(o=i.slice(0,a)),ri(l,o)):o!==i&&o.push(l)}return o}function ii(i,o){i.forEach(a=>Array.isArray(a)?ii(a,o):o(a))}function Yo(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function oo(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Zn(i,o,a){let l=xs(i,o);return l>=0?i[1|l]=a:(l=~l,function es(i,o,a,l){let d=i.length;if(d==o)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=l}}(i,l,o,a)),l}function ja(i,o){const a=xs(i,o);if(a>=0)return i[1|a]}function xs(i,o){return function md(i,o,a){let l=0,d=i.length>>a;for(;d!==l;){const p=l+(d-l>>1),_=i[p<<a];if(o===_)return p<<a;_>o?d=p:l=p+1}return~(d<<a)}(i,o,1)}const Jo={},Xo="__NG_DI_FLAG__",lo="ngTempTokenPath",D=/\n/gm,N="__source",F=pe({provide:String,useValue:pe});let Y;function ne(i){const o=Y;return Y=i,o}function ge(i,o=yt.Default){if(void 0===Y)throw new Re(203,"");return null===Y?Gs(i,void 0,o):Y.get(i,o&yt.Optional?null:void 0,o)}function Ve(i,o=yt.Default){return(function bn(){return Yr}()||ge)(te(i),o)}const dt=Ve;function $t(i){const o=[];for(let a=0;a<i.length;a++){const l=te(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let d,p=yt.Default;for(let _=0;_<l.length;_++){const w=l[_],b=vr(w);"number"==typeof b?-1===b?d=w.token:p|=b:d=w}o.push(Ve(d,p))}else o.push(Ve(l))}return o}function wt(i,o){return i[Xo]=o,i.prototype[Xo]=o,i}function vr(i){return i[Xo]}const Hr=wt(Cn("Inject",i=>({token:i})),-1),si=wt(Cn("Optional"),8),ai=wt(Cn("SkipSelf"),4);class bd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ta(i){return i instanceof bd?i.changingThisBreaksApplicationSecurity:i}const Cd=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var zt=(()=>((zt=zt||{})[zt.NONE=0]="NONE",zt[zt.HTML=1]="HTML",zt[zt.STYLE=2]="STYLE",zt[zt.SCRIPT=3]="SCRIPT",zt[zt.URL=4]="URL",zt[zt.RESOURCE_URL=5]="RESOURCE_URL",zt))();function qu(i){const o=function na(){const i=Ae();return i&&i[12]}();return o?o.sanitize(zt.URL,i)||"":function Rs(i,o){const a=function jl(i){return i instanceof bd&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(i,"URL")?ta(i):function Os(i){return(i=String(i)).match(Cd)||i.match(bg)?i:"unsafe:"+i}(he(i))}const lf="__ngContext__";function cr(i,o){i[lf]=o}function Md(i){const o=function Ka(i){return i[lf]||null}(i);return o?Array.isArray(o)?o:o.lView:null}function li(i){return i.ngOriginalError}function zy(i,...o){i.error(...o)}class xd{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function Rg(i){return i&&i.ngErrorLogger||zy}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&li(o);for(;a&&li(a);)a=li(a);return a||null}}const Wy=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(jt))();function rs(i){return i instanceof Function?i():i}var A=(()=>((A=A||{})[A.Important=1]="Important",A[A.DashCase=2]="DashCase",A))();function W(i,o){return undefined(i,o)}function Ke(i){const o=i[3];return xi(o)?o[3]:o}function Tn(i){return ql(i[13])}function di(i){return ql(i[4])}function ql(i){for(;null!==i&&!xi(i);)i=i[4];return i}function ra(i,o,a,l,d){if(null!=l){let p,_=!1;xi(l)?p=l:Ur(l)&&(_=!0,l=l[0]);const w=Yt(l);0===i&&null!==a?null==d?Jy(o,a,w):is(o,a,w,d||null,!0):1===i&&null!==a?is(o,a,w,d||null,!0):2===i?function n_(i,o,a){const l=Di(i,o);l&&function gD(i,o,a,l){nn(i)?i.removeChild(o,a,l):o.removeChild(a)}(i,l,o,a)}(o,w,_):3===i&&o.destroyNode(w),null!=p&&function dr(i,o,a,l,d){const p=a[7];p!==Yt(a)&&ra(o,i,l,p,d);for(let w=10;w<a.length;w++){const b=a[w];Bg(b[1],b,i,o,l,p)}}(o,i,p,a,d)}}function Od(i,o,a){if(nn(i))return i.createElement(o,a);{const l=null!==a?function El(i){const o=i.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(o):i.createElementNS(l,o)}}function KE(i,o){const a=i[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Po(d,-1)),a.splice(l,1)}function Zy(i,o){if(i.length<=10)return;const a=10+o,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&KE(d,l),o>0&&(i[a-1][4]=l[4]);const p=oo(i,10+o);!function hi(i,o){Bg(i,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Yy(i,o){if(!(256&o[2])){const a=o[11];nn(a)&&a.destroyNode&&Bg(i,o,a,3,null,null),function Zu(i){let o=i[13];if(!o)return Qy(i[1],i);for(;o;){let a=null;if(Ur(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==i;)Ur(o)&&Qy(o[1],o),o=o[3];null===o&&(o=i),Ur(o)&&Qy(o[1],o),a=o&&o[4]}o=a}}(o)}}function Qy(i,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function YE(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Su)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=d[p[_]],b=p[_+1];try{b.call(w)}finally{}}else try{p.call(d)}finally{}}}}(i,o),function ZE(i,o){const a=i.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],w="function"==typeof _?_(o):Yt(o[_]),b=l[d=a[p+2]],T=a[p+3];"boolean"==typeof T?w.removeEventListener(a[p],b,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),p+=2}else{const _=l[d=a[p+1]];a[p].call(_)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();o[7]=null}}(i,o),1===o[1].type&&nn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&xi(o[3])){a!==o[3]&&KE(a,o);const l=o[19];null!==l&&l.detachView(i)}}}function Vg(i,o,a){return function pD(i,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===Gt.None||d===Gt.Emulated)return null}return sr(l,a)}(i,o.parent,a)}function is(i,o,a,l,d){nn(i)?i.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function Jy(i,o,a){nn(i)?i.appendChild(o,a):o.appendChild(a)}function QE(i,o,a,l,d){null!==l?is(i,o,a,l,d):Jy(i,o,a)}function Di(i,o){return nn(i)?i.parentNode(o):o.parentNode}let Xy=function XE(i,o,a){return 40&i.type?sr(i,a):null};function Ug(i,o,a,l){const d=Vg(i,l,o),p=o[11],w=function JE(i,o,a){return Xy(i,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)QE(p,d,a[b],w,!1);else QE(p,d,a,w,!1)}function Pd(i,o){if(null!==o){const a=o.type;if(3&a)return sr(o,i);if(4&a)return t_(-1,i[o.index]);if(8&a){const l=o.child;if(null!==l)return Pd(i,l);{const d=i[o.index];return xi(d)?t_(-1,d):Yt(d)}}if(32&a)return W(o,i)()||Yt(i[o.index]);{const l=t0(i,o);return null!==l?Array.isArray(l)?l[0]:Pd(Ke(i[16]),l):Pd(i,o.next)}}return null}function t0(i,o){return null!==o?i[16][6].projection[o.projection]:null}function t_(i,o){const a=10+i+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return Pd(l,d)}return o[7]}function r_(i,o,a,l,d,p,_){for(;null!=a;){const w=l[a.index],b=a.type;if(_&&0===o&&(w&&cr(Yt(w),l),a.flags|=4),64!=(64&a.flags))if(8&b)r_(i,o,a.child,l,d,p,!1),ra(o,i,d,w,p);else if(32&b){const T=W(a,l);let M;for(;M=T();)ra(o,i,d,M,p);ra(o,i,d,w,p)}else 16&b?n0(i,o,l,a,d,p):ra(o,i,d,w,p);a=_?a.projectionNext:a.next}}function Bg(i,o,a,l,d,p){r_(a,l,i.firstChild,o,d,p,!1)}function n0(i,o,a,l,d,p){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)ra(o,i,d,b[T],p);else r_(i,o,b,_[3],d,p,!0)}function r0(i,o,a){nn(i)?i.setAttribute(o,"style",a):o.style.cssText=a}function s_(i,o,a){nn(i)?""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a):o.className=a}function ss(i,o,a){let l=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||i.charCodeAt(d+p)<=32)return d}a=d+1}}const s0="ng-template";function be(i,o,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==ss(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Qu(i){return 4===i.type&&i.value!==s0}function jg(i,o,a){return o===(4!==i.type||a?i.value:s0)}function Ju(i,o,a){let l=4;const d=i.attrs||[],p=function o_(i){for(let o=0;o<i.length;o++)if(ti(i[o]))return o;return i.length}(d);let _=!1;for(let w=0;w<o.length;w++){const b=o[w];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!jg(i,b,a)||""===b&&1===o.length){if(At(l))return!1;_=!0}}else{const T=8&l?b:o[++w];if(8&l&&null!==i.attrs){if(!be(i.attrs,T,a)){if(At(l))return!1;_=!0}continue}const k=_D(8&l?"class":b,d,Qu(i),a);if(-1===k){if(At(l))return!1;_=!0;continue}if(""!==T){let U;U=k>p?"":d[k+1].toLowerCase();const Q=8&l?U:null;if(Q&&-1!==ss(Q,T,0)||2&l&&T!==U){if(At(l))return!1;_=!0}}}}else{if(!_&&!At(l)&&!At(b))return!1;if(_&&At(b))continue;_=!1,l=b|1&l}}return At(l)||_}function At(i){return 0==(1&i)}function _D(i,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const _=o[d];if(_===i)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function Rt(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,i)}function ia(i,o,a=!1){for(let l=0;l<o.length;l++)if(Ju(i,o[l],a))return!0;return!1}function Hg(i,o){return i?":not("+o.trim()+")":o}function yf(i){let o=i[0],a=1,l=2,d="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];d+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!At(_)&&(o+=Hg(p,d),d=""),l=_,p=p||!At(l);a++}return""!==d&&(o+=Hg(p,d)),o}const Ot={};function o0(i){a0(Ft(),Ae(),Wn()+i,xa())}function a0(i,o,a,l){if(!l)if(3==(3&o[2])){const p=i.preOrderCheckHooks;null!==p&&ka(o,p,a)}else{const p=i.preOrderHooks;null!==p&&Qi(o,p,0,a)}Vi(a)}function Kl(i,o){return i<<17|o<<2}function fn(i){return i>>17&32767}function u_(i){return 2|i}function sa(i){return(131068&i)>>2}function Gg(i,o){return-131069&i|o<<2}function zg(i){return 1|i}function p_(i,o){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];Oa(d),_.contentQueries(2,o[p],p)}}}function Ud(i,o,a,l,d,p,_,w,b,T){const M=o.blueprint.slice();return M[0]=d,M[2]=140|l,Fi(M),M[3]=M[15]=i,M[8]=a,M[10]=_||i&&i[10],M[11]=w||i&&i[11],M[12]=b||i&&i[12]||null,M[9]=T||i&&i[9]||null,M[6]=p,M[16]=2==o.type?i[16]:M,M}function Xu(i,o,a,l,d){let p=i.data[o];if(null===p)p=function Jg(i,o,a,l,d){const p=Fo(),_=Ma(),b=i.data[o]=function AD(i,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,l,d);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,o,a,l,d),function Sl(){return ft.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const _=function Js(){const i=ft.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return ei(p,!0),p}function Bd(i,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),i.blueprint.push(l),i.data.push(null);return d}function Yl(i,o,a){Vo(o);try{const l=i.viewQuery;null!==l&&um(1,l,a);const d=i.template;null!==d&&Er(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&p_(i,o),i.staticViewQueries&&um(2,i.viewQuery,a);const p=i.components;null!==p&&function w0(i,o){for(let a=0;a<o.length;a++)v_(i,o[a])}(o,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{o[2]&=-5,Bo()}}function el(i,o,a,l){const d=o[2];if(256==(256&d))return;Vo(o);const p=xa();try{Fi(o),function Na(i){return ft.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Er(i,o,a,2,l);const _=3==(3&d);if(!p)if(_){const T=i.preOrderCheckHooks;null!==T&&ka(o,T,null)}else{const T=i.preOrderHooks;null!==T&&Qi(o,T,0,null),jo(o,0)}if(function N0(i){for(let o=Tn(i);null!==o;o=di(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&Po(p,1),d[2]|=1024}}}(o),function x0(i){for(let o=Tn(i);null!==o;o=di(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];Zi(l)&&el(d,l,d.template,l[8])}}(o),null!==i.contentQueries&&p_(i,o),!p)if(_){const T=i.contentCheckHooks;null!==T&&ka(o,T)}else{const T=i.contentHooks;null!==T&&Qi(o,T,1),jo(o,1)}!function E0(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Vi(~d);else{const p=d,_=a[++l],w=a[++l];Ml(_,p),w(2,o[p])}}}finally{Vi(-1)}}(i,o);const w=i.components;null!==w&&function TD(i,o){for(let a=0;a<o.length;a++)If(i,o[a])}(o,w);const b=i.viewQuery;if(null!==b&&um(2,b,l),!p)if(_){const T=i.viewCheckHooks;null!==T&&ka(o,T)}else{const T=i.viewHooks;null!==T&&Qi(o,T,2),jo(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Po(o[3],-1))}finally{Bo()}}function g_(i,o,a,l){const d=o[10],p=!xa(),_=Qs(o);try{p&&!_&&d.begin&&d.begin(),_&&Yl(i,o,l),el(i,o,a,l)}finally{p&&!_&&d.end&&d.end()}}function Er(i,o,a,l,d){const p=Wn(),_=2&l;try{Vi(-1),_&&o.length>20&&a0(i,o,20,xa()),a(l,d)}finally{Vi(p)}}function jd(i,o,a){!Sa()||(function RD(i,o,a,l){const d=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Rn(a,o),cr(l,o);const _=a.initialInputs;for(let w=d;w<p;w++){const b=i.data[w],T=Ri(b);T&&M0(o,a,b);const M=Ko(o,i,w,a);cr(M,o),null!==_&&bf(0,w-d,M,b,0,_),T&&(or(a.index,o)[8]=M)}}(i,o,a,sr(a,o)),128==(128&a.flags)&&function Hd(i,o,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,w=function Au(){return ft.lFrame.currentDirectiveIndex}();try{Vi(_);for(let b=l;b<d;b++){const T=i.data[b],M=o[b];Ra(b),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&A0(T,M)}}finally{Vi(-1),Ra(w)}}(i,o,a))}function Ef(i,o,a=sr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],w=-1===_?a(o,i):i[_];i[d++]=w}}}function b0(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Xg(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Xg(i,o,a,l,d,p,_,w,b,T){const M=20+l,k=M+d,U=function I0(i,o){const a=[];for(let l=0;l<o;l++)a.push(l<i?null:Ot);return a}(M,k),Q="function"==typeof T?T():T;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:w,declTNode:o,data:U.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:Q,incompleteFirstPass:!1}}function tm(i,o,a,l){const d=zd(o);null===a?d.push(l):(d.push(a),i.firstCreatePass&&I_(i).push(l,d.length-1))}function nm(i,o,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function fi(i,o,a,l,d,p,_,w){const b=sr(o,a);let M,T=o.inputs;!w&&null!=T&&(M=T[l])?(nl(i,a,M,l,d),Zc(o)&&function m_(i,o){const a=or(o,i);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function SD(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=_?_(d,o.value||"",l):d,nn(p)?p.setProperty(b,l,d):Br(l)||(b.setProperty?b.setProperty(l,d):b[l]=d))}function rm(i,o,a,l){let d=!1;if(Sa()){const p=function OD(i,o,a){const l=i.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];ia(a,_.selectors,!1)&&(d||(d=[]),ar(Rn(a,o),i,_.type),Ri(_)?(tl(i,a),d.unshift(_)):d.push(_))}return d}(i,o,a),_=null===l?null:{"":-1};if(null!==p){d=!0,__(a,i.data.length,p.length);for(let M=0;M<p.length;M++){const k=p[M];k.providersResolver&&k.providersResolver(k)}let w=!1,b=!1,T=Bd(i,o,p.length,null);for(let M=0;M<p.length;M++){const k=p[M];a.mergedAttrs=Vn(a.mergedAttrs,k.hostAttrs),Gd(i,a,o,T,k),im(T,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const U=k.type.prototype;!w&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!b&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),T++}!function C0(i,o){const l=o.directiveEnd,d=i.data,p=o.attrs,_=[];let w=null,b=null;for(let T=o.directiveStart;T<l;T++){const M=d[T],k=M.inputs,U=null===p||Qu(o)?null:om(k,p);_.push(U),w=nm(k,T,w),b=nm(M.outputs,T,b)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=w,o.outputs=b}(i,a)}_&&function S0(i,o,a){if(o){const l=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new Re(-301,!1);l.push(o[d],p)}}}(a,l,_)}return a.mergedAttrs=Vn(a.mergedAttrs,a.attrs),d}function wf(i,o,a,l,d,p){const _=p.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const b=~o.index;(function ND(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=b&&w.push(b),w.push(l,d,_)}}function A0(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function tl(i,o){o.flags|=2,(i.components||(i.components=[])).push(o.index)}function im(i,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=i;Ri(o)&&(a[""]=i)}}function __(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}function Gd(i,o,a,l,d){i.data[l]=d;const p=d.factory||(d.factory=_r(d.type)),_=new Su(p,Ri(d),null);i.blueprint[l]=_,a[l]=_,wf(i,o,0,l,Bd(i,a,d.hostVars,Ot),d)}function M0(i,o,a){const l=sr(o,i),d=b0(a),p=i[10],_=Ql(i,Ud(i,d,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));i[o.index]=_}function On(i,o,a,l,d,p){const _=sr(i,o);!function sm(i,o,a,l,d,p,_){if(null==p)nn(i)?i.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==_?he(p):_(p,l||"",d);nn(i)?i.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],_,p,i.value,a,l,d)}function bf(i,o,a,l,d,p){const _=p[o];if(null!==_){const w=l.setInput;for(let b=0;b<_.length;){const T=_[b++],M=_[b++],k=_[b++];null!==w?l.setInput(a,k,T,M):a[M]=k}}}function om(i,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function am(i,o,a,l){return new Array(i,!0,!1,o,null,0,l,a,null,null)}function If(i,o){const a=or(o,i);if(Zi(a)){const l=a[1];80&a[2]?el(l,a,l.template,a[8]):a[5]>0&&Df(a)}}function Df(i){for(let l=Tn(i);null!==l;l=di(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const _=p[1];el(_,p,_.template,p[8])}else p[5]>0&&Df(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=or(a[l],i);Zi(d)&&d[5]>0&&Df(d)}}function v_(i,o){const a=or(o,i),l=a[1];(function E_(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(l,a),Yl(l,a,a[8])}function Ql(i,o){return i[13]?i[14][4]=o:i[13]=o,i[14]=o,o}function Jl(i){for(;i;){i[2]|=64;const o=Ke(i);if(yl(i)&&!o)return i;i=o}return null}function Cf(i,o,a){const l=o[10];l.begin&&l.begin();try{el(i,o,i.template,a)}catch(d){throw qd(o,d),d}finally{l.end&&l.end()}}function Tf(i){!function w_(i){for(let o=0;o<i.components.length;o++){const a=i.components[o],l=Md(a),d=l[1];g_(d,l,d.template,a)}}(i[8])}function um(i,o,a){Oa(0),o(i,a)}const FD=(()=>Promise.resolve(null))();function zd(i){return i[7]||(i[7]=[])}function I_(i){return i.cleanup||(i.cleanup=[])}function qd(i,o){const a=i[9],l=a?a.get(xd,null):null;l&&l.handleError(o)}function nl(i,o,a,l,d){for(let p=0;p<a.length;){const _=a[p++],w=a[p++],b=o[_],T=i.data[_];null!==T.setInput?T.setInput(b,d,l,w):b[w]=d}}function go(i,o,a){const l=Ds(o,i);!function Rd(i,o,a){nn(i)?i.setValue(o,a):o.textContent=a}(i[11],l,a)}function lm(i,o,a){let l=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const w=o[_];"number"==typeof w?p=w:1==p?d=ce(d,w):2==p&&(l=ce(l,w+": "+o[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}const Ja=new hn("INJECTOR",-1);class C_{get(o,a=Jo){if(a===Jo){const l=new Error(`NullInjectorError: No provider for ${se(o)}!`);throw l.name="NullInjectorError",l}return a}}const T_=new hn("Set Injector scope."),mo={},Xa={};let Kd;function Sf(){return void 0===Kd&&(Kd=new C_),Kd}function Mf(i,o=null,a=null,l){const d=A_(i,o,a,l);return d._resolveInjectorDefTypes(),d}function A_(i,o=null,a=null,l){return new Pn(i,a,o||Sf(),l)}class Pn{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&ii(a,w=>this.processProvider(w,o,a)),ii([o],w=>this.processInjectorType(w,[],p)),this.records.set(Ja,aa(void 0,this));const _=this.records.get(T_);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof o?null:se(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Jo,l=yt.Default){this.assertNotDestroyed();const d=ne(this),p=Mn(void 0);try{if(!(l&yt.SkipSelf)){let w=this.records.get(o);if(void 0===w){const b=function rl(i){return"function"==typeof i||"object"==typeof i&&i instanceof hn}(o)&&Vt(o);w=b&&this.injectableDefInScope(b)?aa(Zd(o),mo):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&yt.Self?Sf():this.parent).get(o,a=l&yt.Optional&&a===Jo?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[lo]=_[lo]||[]).unshift(se(o)),d)throw _;return function Yn(i,o,a,l){const d=i[lo];throw o[N]&&d.unshift(o[N]),i.message=function ts(i,o,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let d=se(o);if(Array.isArray(o))d=o.map(se).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let w=o[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):se(w)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[lo]=null,i}(_,o,"R3InjectorError",this.source)}throw _}finally{Mn(p),ne(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(se(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(o,a,l){if(!(o=te(o)))return!1;let d=Ir(o);const p=null==d&&o.ngModule||void 0,_=void 0===p?o:p,w=-1!==l.indexOf(_);if(void 0!==p&&(d=Ir(p)),null==d)return!1;if(null!=d.imports&&!w){let M;l.push(_);try{ii(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===M&&(M=[]),M.push(k))})}finally{}if(void 0!==M)for(let k=0;k<M.length;k++){const{ngModule:U,providers:Q}=M[k];ii(Q,_e=>this.processProvider(_e,U,Q||V))}}this.injectorDefTypes.add(_);const b=_r(_)||(()=>new _);this.records.set(_,aa(b,mo));const T=d.providers;if(null!=T&&!w){const M=o;ii(T,k=>this.processProvider(k,M,T))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let d=Qd(o=te(o))?o:te(o&&o.provide);const p=function VD(i,o,a){return k0(i)?aa(void 0,i.useValue):aa(Yd(i),mo)}(o);if(Qd(o)||!0!==o.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=aa(void 0,mo,!0),_.factory=()=>$t(_.multi),this.records.set(d,_)),d=o,_.multi.push(o)}this.records.set(d,p)}hydrate(o,a){return a.value===mo&&(a.value=Xa,a.value=a.factory()),"object"==typeof a.value&&a.value&&function xf(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=te(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Zd(i){const o=Vt(i),a=null!==o?o.factory:_r(i);if(null!==a)return a;if(i instanceof hn)throw new Re(204,!1);if(i instanceof Function)return function LD(i){const o=i.length;if(o>0)throw function ao(i,o){const a=[];for(let l=0;l<i;l++)a.push(o);return a}(o,"?"),new Re(204,!1);const a=function Kr(i){const o=i&&(i[Ti]||i[Zr]);if(o){const a=function fr(i){if(i.hasOwnProperty("name"))return i.name;const o=(""+i).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function Yd(i,o,a){let l;if(Qd(i)){const d=te(i);return _r(d)||Zd(d)}if(k0(i))l=()=>te(i.useValue);else if(function UD(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...$t(i.deps||[]));else if(function F0(i){return!(!i||!i.useExisting)}(i))l=()=>Ve(te(i.useExisting));else{const d=te(i&&(i.useClass||i.provide));if(!function jD(i){return!!i.deps}(i))return _r(d)||Zd(d);l=()=>new d(...$t(i.deps))}return l}function aa(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function k0(i){return null!==i&&"object"==typeof i&&F in i}function Qd(i){return"function"==typeof i}let ks=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return Mf({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return Mf({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Jo,i.NULL=new C_,i.\u0275prov=Zt({token:i,providedIn:"any",factory:()=>Ve(Ja)}),i.__NG_ELEMENT_ID__=-1,i})();function HD(i,o){ld(Md(i)[1],dn())}function O_(i){let o=function q0(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;o;){let d;if(Ri(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Re(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const _=i;_.inputs=gm(i.inputs),_.declaredInputs=gm(i.declaredInputs),_.outputs=gm(i.outputs);const w=d.hostBindings;w&&Z0(i,w);const b=d.viewQuery,T=d.contentQueries;if(b&&K0(i,b),T&&mm(i,T),ue(i.inputs,d.inputs),ue(i.declaredInputs,d.declaredInputs),ue(i.outputs,d.outputs),Ri(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(i),w===O_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function W0(i){let o=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Vn(d.hostAttrs,a=Vn(a,d.hostAttrs))}}(l)}function gm(i){return i===mr?{}:i===V?[]:i}function K0(i,o){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function mm(i,o){const a=i.contentQueries;i.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function Z0(i,o){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let Xd=null;function ua(){if(!Xd){const i=jt.Symbol;if(i&&i.iterator)Xd=i.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Xd=l)}}}return Xd}function ec(i){return!!Rf(i)&&(Array.isArray(i)||!(i instanceof Map)&&ua()in i)}function Rf(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function zr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function kf(i,o,a,l){const d=Ae();return zr(d,Cs(),o)&&(Ft(),On(In(),d,i,o,a,l)),kf}function tc(i,o,a,l){return zr(i,Cs(),a)?o+he(a)+l:Ot}function tw(i,o,a,l,d,p,_,w){const b=Ae(),T=Ft(),M=i+20,k=T.firstCreatePass?function zD(i,o,a,l,d,p,_,w,b){const T=o.consts,M=Xu(o,i,4,_||null,Ei(T,w));rm(o,a,M,Ei(T,b)),ld(o,M);const k=M.tViews=Xg(2,M,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,M),k.queries=o.queries.embeddedTView(M)),M}(M,T,b,o,a,l,d,p,_):T.data[M];ei(k,!1);const U=b[11].createComment("");Ug(T,b,U,k),cr(U,b),Ql(b,b[M]=am(U,b,U,k)),Ni(k)&&jd(T,b,k),null!=_&&Ef(b,k,w)}function Bn(i,o=yt.Default){const a=Ae();return null===a?Ve(i,o):As(dn(),a,te(i),o)}function cc(){throw new Error("invalid")}function B_(i,o,a){const l=Ae();return zr(l,Cs(),o)&&fi(Ft(),In(),l,i,o,l[11],a,!1),B_}function Xn(i,o,a,l,d){const _=d?"class":"style";nl(i,a,o.inputs[_],_,l)}function _o(i,o,a,l){const d=Ae(),p=Ft(),_=20+i,w=d[11],b=d[_]=Od(w,o,function ud(){return ft.lFrame.currentNamespace}()),T=p.firstCreatePass?function tC(i,o,a,l,d,p,_){const w=o.consts,T=Xu(o,i,2,d,Ei(w,p));return rm(o,a,T,Ei(w,_)),null!==T.attrs&&lm(T,T.attrs,!1),null!==T.mergedAttrs&&lm(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,p,d,0,o,a,l):p.data[_];ei(T,!0);const M=T.mergedAttrs;null!==M&&tt(w,b,M);const k=T.classes;null!==k&&s_(w,b,k);const U=T.styles;return null!==U&&r0(w,b,U),64!=(64&T.flags)&&Ug(p,d,b,T),0===function Iu(){return ft.lFrame.elementDepthCount}()&&cr(b,d),function Aa(){ft.lFrame.elementDepthCount++}(),Ni(T)&&(jd(p,d,T),function Nr(i,o,a){if(vu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,T,d)),null!==l&&Ef(d,T),_o}function An(){let i=dn();Ma()?function Al(){ft.lFrame.isParent=!1}():(i=i.parent,ei(i,!1));const o=i;!function Il(){ft.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(ld(a,i),vu(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function dd(i){return 0!=(16&i.flags)}(o)&&Xn(a,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ag(i){return 0!=(32&i.flags)}(o)&&Xn(a,o,Ae(),o.stylesWithoutHost,!1),An}function iu(i,o,a,l){return _o(i,o,a,l),An(),iu}function hc(i){return!!i&&"function"==typeof i.then}function $_(i){return!!i&&"function"==typeof i.subscribe}const He=$_;function ca(i,o,a,l){const d=Ae(),p=Ft(),_=dn();return function vo(i,o,a,l,d,p,_,w){const b=Ni(l),M=i.firstCreatePass&&I_(i),k=o[8],U=zd(o);let Q=!0;if(3&l.type||w){const Ge=sr(l,o),et=w?w(Ge):Ge,Se=U.length,gt=w?st=>w(Yt(st[l.index])):l.index;if(nn(a)){let st=null;if(!w&&b&&(st=function fc(i,o,a,l){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===l){const w=o[7],b=d[p+2];return w.length>b?w[b]:null}"string"==typeof _&&(p+=2)}return null}(i,o,d,l.index)),null!==st)(st.__ngLastListenerFn__||st).__ngNextListenerFn__=p,st.__ngLastListenerFn__=p,Q=!1;else{p=da(l,o,k,p,!1);const un=a.listen(et,d,p);U.push(p,un),M&&M.push(d,gt,Se,Se+1)}}else p=da(l,o,k,p,!0),et.addEventListener(d,p,_),U.push(p),M&&M.push(d,gt,Se,_)}else p=da(l,o,k,p,!1);const _e=l.outputs;let ke;if(Q&&null!==_e&&(ke=_e[d])){const Ge=ke.length;if(Ge)for(let et=0;et<Ge;et+=2){const Hs=o[ke[et]][ke[et+1]].subscribe(p),wn=U.length;U.push(p,Hs),M&&M.push(d,l.index,wn,-(wn+1))}}}(p,d,d[11],_,i,o,!!a,l),ca}function rh(i,o,a,l){try{return!1!==a(l)}catch(d){return qd(i,d),!1}}function da(i,o,a,l,d){return function p(_){if(_===Function)return l;const w=2&i.flags?or(i.index,o):o;0==(32&o[2])&&Jl(w);let b=rh(o,0,l,_),T=p.__ngNextListenerFn__;for(;T;)b=rh(o,0,T,_)&&b,T=T.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function $f(i,o,a){return gc(i,"",o,"",a),$f}function gc(i,o,a,l,d){const p=Ae(),_=tc(p,o,a,l);return _!==Ot&&fi(Ft(),In(),p,i,_,p[11],d,!1),gc}function _n(i,o,a,l,d){const p=i[a+1],_=null===o;let w=l?fn(p):sa(p),b=!1;for(;0!==w&&(!1===b||_);){const M=i[w+1];vm(i[w],o)&&(b=!0,i[w+1]=l?zg(M):u_(M)),w=l?fn(M):sa(M)}b&&(i[a+1]=l?u_(p):zg(p))}function vm(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&xs(i,o)>=0}function su(i,o){return function Us(i,o,a,l){const d=Ae(),p=Ft(),_=function wi(i){const o=ft.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);p.firstUpdatePass&&function gw(i,o,a,l){const d=i.data;if(null===d[a+1]){const p=d[Wn()],_=function Or(i,o){return o>=i.expandoStartIndex}(i,a);(function X_(i,o){return 0!=(i.flags&(o?16:32))})(p,l)&&null===o&&!_&&(o=!1),o=function iC(i,o,a,l){const d=function Lo(i){const o=ft.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=qf(a=Q_(null,i,o,a,l),o.attrs,l),p=null);else{const _=o.directiveStylingLast;if(-1===_||i[_]!==d)if(a=Q_(d,i,o,a,l),null===p){let b=function sC(i,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==sa(l))return i[fn(l)]}(i,o,l);void 0!==b&&Array.isArray(b)&&(b=Q_(null,i,o,b[1],l),b=qf(b,o.attrs,l),function mw(i,o,a,l){i[fn(a?o.classBindings:o.styleBindings)]=l}(i,o,l,b))}else p=function oC(i,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=qf(l,i[p].hostAttrs,a);return qf(l,o.attrs,a)}(i,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function pi(i,o,a,l,d,p){let _=p?o.classBindings:o.styleBindings,w=fn(_),b=sa(_);i[l]=a;let M,T=!1;if(Array.isArray(a)){const k=a;M=k[1],(null===M||xs(k,M)>0)&&(T=!0)}else M=a;if(d)if(0!==b){const U=fn(i[w+1]);i[l+1]=Kl(U,w),0!==U&&(i[U+1]=Gg(i[U+1],l)),i[w+1]=function ED(i,o){return 131071&i|o<<17}(i[w+1],l)}else i[l+1]=Kl(w,0),0!==w&&(i[w+1]=Gg(i[w+1],l)),w=l;else i[l+1]=Kl(b,0),0===w?w=l:i[b+1]=Gg(i[b+1],l),b=l;T&&(i[l+1]=u_(i[l+1])),_n(i,M,l,!0),_n(i,M,l,!1),function fw(i,o,a,l,d){const p=d?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof o&&xs(p,o)>=0&&(a[l+1]=zg(a[l+1]))}(o,M,i,l,p),_=Kl(w,b),p?o.classBindings=_:o.styleBindings=_}(d,p,o,a,_,l)}}(p,i,_,l),o!==Ot&&zr(d,_,o)&&function yw(i,o,a,l,d,p,_,w){if(!(3&o.type))return;const b=i.data,T=b[w+1];Wf(function u0(i){return 1==(1&i)}(T)?J_(b,o,a,d,sa(T),_):void 0)||(Wf(p)||function Qa(i){return 2==(2&i)}(T)&&(p=J_(b,null,a,d,w,_)),function i_(i,o,a,l,d){const p=nn(i);if(o)d?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:A.DashCase;if(null==d)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),_|=A.Important),p?i.setStyle(a,l,d,_):a.style.setProperty(l,d,w?"important":"")}}}(l,_,Ds(Wn(),a),d,p))}(p,p.data[Wn()],d,d[11],i,d[_+1]=function au(i,o){return null==i||("string"==typeof o?i+=o:"object"==typeof i&&(i=se(ta(i)))),i}(o,a),l,_)}(i,o,null,!0),su}function Q_(i,o,a,l,d){let p=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(p=o[w],l=qf(l,p.hostAttrs,d),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function qf(i,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Zn(i,_,!!a||o[++p]))}return void 0===i?null:i}function J_(i,o,a,l,d,p){const _=null===o;let w;for(;d>0;){const b=i[d],T=Array.isArray(b),M=T?b[1]:b,k=null===M;let U=a[d+1];U===Ot&&(U=k?V:void 0);let Q=k?ja(U,l):M===l?U:void 0;if(T&&!Wf(Q)&&(Q=ja(b,l)),Wf(Q)&&(w=Q,_))return w;const _e=i[d+1];d=_?fn(_e):sa(_e)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(w=ja(b,l))}return w}function Wf(i){return void 0!==i}function yc(i,o=""){const a=Ae(),l=Ft(),d=i+20,p=l.firstCreatePass?Xu(l,d,1,o,null):l.data[d],_=a[d]=function Nd(i,o){return nn(i)?i.createText(o):i.createTextNode(o)}(a[11],o);Ug(l,a,_,p),ei(p,!1)}function ev(i){return ah("",i,""),ev}function ah(i,o,a){const l=Ae(),d=tc(l,i,o,a);return d!==Ot&&go(l,Wn(),d),ah}const ol=void 0;var wc=["en",[["a","p"],["AM","PM"],ol],[["AM","PM"],ol,ol],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ol,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ol,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ol,"{1} 'at' {0}",ol],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Yf(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let bc={};function Sm(i){const o=function Rw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Nw(o);if(a)return a;const l=o.split("-")[0];if(a=Nw(l),a)return a;if("en"===l)return wc;throw new Error(`Missing locale data for the locale "${i}".`)}function xm(i){return Sm(i)[Be.PluralCase]}function Nw(i){return i in bc||(bc[i]=jt.ng&&jt.ng.common&&jt.ng.common.locales&&jt.ng.common.locales[i]),bc[i]}var Be=(()=>((Be=Be||{})[Be.LocaleId=0]="LocaleId",Be[Be.DayPeriodsFormat=1]="DayPeriodsFormat",Be[Be.DayPeriodsStandalone=2]="DayPeriodsStandalone",Be[Be.DaysFormat=3]="DaysFormat",Be[Be.DaysStandalone=4]="DaysStandalone",Be[Be.MonthsFormat=5]="MonthsFormat",Be[Be.MonthsStandalone=6]="MonthsStandalone",Be[Be.Eras=7]="Eras",Be[Be.FirstDayOfWeek=8]="FirstDayOfWeek",Be[Be.WeekendRange=9]="WeekendRange",Be[Be.DateFormat=10]="DateFormat",Be[Be.TimeFormat=11]="TimeFormat",Be[Be.DateTimeFormat=12]="DateTimeFormat",Be[Be.NumberSymbols=13]="NumberSymbols",Be[Be.NumberFormats=14]="NumberFormats",Be[Be.CurrencyCode=15]="CurrencyCode",Be[Be.CurrencySymbol=16]="CurrencySymbol",Be[Be.CurrencyName=17]="CurrencyName",Be[Be.Currencies=18]="Currencies",Be[Be.Directionality=19]="Directionality",Be[Be.PluralCase=20]="PluralCase",Be[Be.ExtraData=21]="ExtraData",Be))();const Nm="en-US";let Pw=Nm;function uu(i,o,a,l,d){if(i=te(i),Array.isArray(i))for(let p=0;p<i.length;p++)uu(i[p],o,a,l,d);else{const p=Ft(),_=Ae();let w=Qd(i)?i:te(i.provide),b=Yd(i);const T=dn(),M=1048575&T.providerIndexes,k=T.directiveStart,U=T.providerIndexes>>20;if(Qd(i)||!i.multi){const Q=new Su(b,d,Bn),_e=Um(w,o,d?M:M+U,k);-1===_e?(ar(Rn(T,_),p,w),Lm(p,i,o.length),o.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Q),_.push(Q)):(a[_e]=Q,_[_e]=Q)}else{const Q=Um(w,o,M+U,k),_e=Um(w,o,M,M+U),ke=Q>=0&&a[Q],Ge=_e>=0&&a[_e];if(d&&!Ge||!d&&!ke){ar(Rn(T,_),p,w);const et=function gv(i,o,a,l,d){const p=new Su(i,a,Bn);return p.multi=[],p.index=o,p.componentProviders=0,Vm(p,d,l&&!a),p}(d?pv:Pr,a.length,d,l,b);!d&&Ge&&(a[_e].providerFactory=et),Lm(p,i,o.length,0),o.push(w),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(et),_.push(et)}else Lm(p,i,Q>-1?Q:_e,Vm(a[d?_e:Q],b,!d&&l));!d&&l&&Ge&&a[_e].componentProviders++}}}function Lm(i,o,a,l){const d=Qd(o),p=function BD(i){return!!i.useClass}(o);if(d||p){const b=(p?te(o.useClass):o).prototype.ngOnDestroy;if(b){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const M=T.indexOf(a);-1===M?T.push(a,[l,b]):T[M+1].push(l,b)}else T.push(a,b)}}}function Vm(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Um(i,o,a,l){for(let d=a;d<l;d++)if(o[d]===i)return d;return-1}function Pr(i,o,a,l){return sp(this.multi,[])}function pv(i,o,a,l){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=Ko(a,a[1],this.providerFactory.index,l);p=w.slice(0,_),sp(d,p);for(let b=_;b<w.length;b++)p.push(w[b])}else p=[],sp(d,p);return p}function sp(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function lu(i,o=[]){return a=>{a.providersResolver=(l,d)=>function NC(i,o,a){const l=Ft();if(l.firstCreatePass){const d=Ri(i);uu(a,l.data,l.blueprint,d,!0),uu(o,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,o)}}class ob{}class Cc{resolveComponentFactory(o){throw function ab(i){const o=Error(`No component factory found for ${se(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let cu=(()=>{class i{}return i.NULL=new Cc,i})();function ap(){return Tc(dn(),Ae())}function Tc(i,o){return new Ac(sr(i,o))}let Ac=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=ap,i})();function mv(i){return i instanceof Ac?i.nativeElement:i}class ub{}let lb=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function yv(){const i=Ae(),a=or(dn().index,i);return function cb(i){return i[11]}(Ur(a)?a:i)}(),i})(),up=(()=>{class i{}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:()=>null}),i})();class ul{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const db=new ul("13.2.7"),Bm={};function jm(i,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(Yt(p)),xi(p))for(let w=10;w<p.length;w++){const b=p[w],T=b[1].firstChild;null!==T&&jm(b[1],b,T,l)}const _=a.type;if(8&_)jm(i,o,a.child,l);else if(32&_){const w=W(a,o);let b;for(;b=w();)l.push(b)}else if(16&_){const w=t0(o,a);if(Array.isArray(w))l.push(...w);else{const b=Ke(o[16]);jm(b[1],b,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class lp{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return jm(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(xi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Zy(o,l),oo(a,l))}this._attachedToViewContainer=!1}Yy(this._lView[1],this._lView)}onDestroy(o){tm(this._lView[1],this._lView,null,o)}markForCheck(){Jl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Cf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function b_(i,o,a){Cu(!0);try{Cf(i,o,a)}finally{Cu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mf(i,o){Bg(i,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=o}}class OC extends lp{constructor(o){super(o),this._view=o}detectChanges(){Tf(this._view)}checkNoChanges(){!function O0(i){Cu(!0);try{Tf(i)}finally{Cu(!1)}}(this._view)}get context(){return null}}class wh extends cu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=$n(o);return new _v(a,this.ngModule)}}function ll(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class _v extends ob{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function vD(i){return i.map(yf).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return ll(this.componentDef.inputs)}get outputs(){return ll(this.componentDef.outputs)}create(o,a,l,d){const p=(d=d||this.ngModule)?function hb(i,o){return{get:(a,l,d)=>{const p=i.get(a,Bm,d);return p!==Bm||l===Bm?p:o.get(a,l,d)}}}(o,d.injector):o,_=p.get(ub,Da),w=p.get(up,null),b=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",M=l?function em(i,o,a){if(nn(i))return i.selectRootElement(o,a===Gt.ShadowDom);let l="string"==typeof o?i.querySelector(o):o;return l.textContent="",l}(b,l,this.componentDef.encapsulation):Od(_.createRenderer(null,this.componentDef),T,function Sc(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(T)),k=this.componentDef.onPush?576:528,U=function R_(i,o){return{components:[],scheduler:i||Wy,clean:FD,playerHandler:o||null,flags:0}}(),Q=Xg(0,null,null,1,0,null,null,null,null,null),_e=Ud(null,Q,U,k,null,null,_,b,w,p);let ke,Ge;Vo(_e);try{const et=function z0(i,o,a,l,d,p){const _=a[1];a[20]=i;const b=Xu(_,20,2,"#host",null),T=b.mergedAttrs=o.hostAttrs;null!==T&&(lm(b,T,!0),null!==i&&(tt(d,i,T),null!==b.classes&&s_(d,i,b.classes),null!==b.styles&&r0(d,i,b.styles)));const M=l.createRenderer(i,o),k=Ud(a,b0(o),null,o.onPush?64:16,a[20],b,l,M,p||null,null);return _.firstCreatePass&&(ar(Rn(b,a),_,o.type),tl(_,b),__(b,a.length,1)),Ql(a,k),a[20]=k}(M,this.componentDef,_e,_,b);if(M)if(l)tt(b,M,["ng-version",db.full]);else{const{attrs:Se,classes:gt}=function a_(i){const o=[],a=[];let l=1,d=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++l]):8===d&&a.push(p);else{if(!At(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Se&&tt(b,M,Se),gt&&gt.length>0&&s_(b,M,gt.join(" "))}if(Ge=gn(Q,20),void 0!==a){const Se=Ge.projection=[];for(let gt=0;gt<this.ngContentSelectors.length;gt++){const st=a[gt];Se.push(null!=st?Array.from(st):null)}}ke=function Qn(i,o,a,l,d){const p=a[1],_=function T0(i,o,a){const l=dn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Gd(i,l,o,Bd(i,o,1,null),a));const d=Ko(o,i,l.directiveStart,l);cr(d,o);const p=sr(l,o);return p&&cr(p,o),d}(p,a,o);if(l.components.push(_),i[8]=_,d&&d.forEach(b=>b(_,o)),o.contentQueries){const b=dn();o.contentQueries(1,_,b.directiveStart)}const w=dn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Vi(w.index),wf(a[1],w,0,w.directiveStart,w.directiveEnd,o),A0(o,_)),_}(et,this.componentDef,_e,U,[HD]),Yl(Q,_e,null)}finally{Bo()}return new $m(this.componentType,ke,Tc(Ge,_e),_e,Ge)}}class $m extends class sb{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new OC(d),this.componentType=o}get injector(){return new no(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Mc{}class bh{}const du=new Map;class wv extends Mc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new wh(this);const l=Hn(o);this._bootstrapComponents=rs(l.bootstrap),this._r3Injector=A_(o,a,[{provide:Mc,useValue:this},{provide:cu,useValue:this.componentFactoryResolver}],se(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=ks.THROW_IF_NOT_FOUND,l=yt.Default){return o===ks||o===Mc||o===Ja?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class pa extends bh{constructor(o){super(),this.moduleType=o,null!==Hn(o)&&function Gi(i){const o=new Set;!function a(l){const d=Hn(l,!0),p=d.id;null!==p&&(function Ev(i,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${i} - ${se(o)} vs ${se(o.name)}`)}(p,du.get(p),l),du.set(p,l));const _=rs(d.imports);for(const w of _)o.has(w)||(o.add(w),a(w))}(i)}(o)}create(o){return new wv(this.moduleType,o)}}function _b(i,o,a,l,d,p){const _=o+a;return zr(i,_,d)?function os(i,o,a){return i[o]=a}(i,_+1,p?l.call(p,d):l(d)):function dp(i,o){const a=i[o];return a===Ot?void 0:a}(i,_+1)}function wb(i,o){const a=Ft();let l;const d=i+20;a.firstCreatePass?(l=function VC(i,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(i===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const p=l.factory||(l.factory=_r(l.type)),_=Mn(Bn);try{const w=bi(!1),b=p();return bi(w),function nw(i,o,a,l){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=l}(a,Ae(),d,b),b}finally{Mn(_)}}function Dv(i,o,a){const l=i+20,d=Ae(),p=function ki(i,o){return i[o]}(d,l);return function pp(i,o){return i[1].data[o].pure}(d,l)?_b(d,function Nn(){const i=ft.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}(),o,p.transform,a,p):p.transform(a)}function gp(i){return o=>{setTimeout(i,void 0,o)}}const $s=class Db extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,p,_;let w=o,b=a||(()=>null),T=l;if(o&&"object"==typeof o){const k=o;w=null===(d=k.next)||void 0===d?void 0:d.bind(k),b=null===(p=k.error)||void 0===p?void 0:p.bind(k),T=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(b=gp(b),w&&(w=gp(w)),T&&(T=gp(T)));const M=super.subscribe({next:w,error:b,complete:T});return o instanceof X.w0&&o.add(M),M}};function mp(){return this._results[ua()]()}class Ch{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ua(),l=Ch.prototype;l[a]||(l[a]=mp)}get changes(){return this._changes||(this._changes=new $s)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=ri(o);(this._changesDetected=!function Fl(i,o,a){if(i.length!==o.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Oc=(()=>{class i{}return i.__NG_ELEMENT_ID__=Cb,i})();const UC=Oc,Cv=class extends UC{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Ud(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Yl(a,l,o),new lp(l)}};function Cb(){return Hm(dn(),Ae())}function Hm(i,o){return 4&i.type?new Cv(o,i,Tc(i,o)):null}let yp=(()=>{class i{}return i.__NG_ELEMENT_ID__=Tb,i})();function Tb(){return Mv(dn(),Ae())}const Tv=yp,Ab=class extends Tv{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Tc(this._hostTNode,this._hostLView)}get injector(){return new no(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ts(this._hostTNode,this._hostLView);if(hd(o)){const a=on(o,this._hostLView),l=Ui(o);return new no(a[1].data[l+8],a)}return new no(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Av(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,p){const _=o&&!function so(i){return"function"==typeof i}(o);let w;if(_)w=a;else{const k=a||{};w=k.index,l=k.injector,d=k.projectableNodes,p=k.ngModuleRef}const b=_?o:new _v($n(o)),T=l||this.parentInjector;if(!p&&null==b.ngModule){const U=(_?T:this.parentInjector).get(Mc,null);U&&(p=U)}const M=b.create(T,d,void 0,p);return this.insert(M.hostView,w),M}insert(o,a){const l=o._lView,d=l[1];if(function Ta(i){return xi(i[3])}(l)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const k=l[3],U=new Ab(k,k[6],k[3]);U.detach(U.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function Wl(i,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],Yo(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function Yu(i,o){const a=i[9];o[16]!==o[3][3][16]&&(i[2]=!0),null===a?i[9]=[o]:a.push(o)}(_,o);const w=o[19];null!==w&&w.insertView(i),o[2]|=128}(d,l,_,p);const w=t_(p,_),b=l[11],T=Di(b,_[7]);return null!==T&&function gf(i,o,a,l,d,p){l[0]=d,l[6]=o,Bg(i,l,a,1,d,p)}(d,_[6],b,l,T,w),o.attachToViewContainerRef(),Yo(Sv(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Av(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Zy(this._lContainer,a);l&&(oo(Sv(this._lContainer),a),Yy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Zy(this._lContainer,a);return l&&null!=oo(Sv(this._lContainer),a)?new lp(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function Av(i){return i[8]}function Sv(i){return i[8]||(i[8]=[])}function Mv(i,o){let a;const l=o[i.index];if(xi(l))a=l;else{let d;if(8&i.type)d=Yt(l);else{const p=o[11];d=p.createComment("");const _=sr(i,o);is(p,Di(p,_),d,function mD(i,o){return nn(i)?i.nextSibling(o):o.nextSibling}(p,_),!1)}o[i.index]=a=am(l,o,d,i),Ql(o,a)}return new Ab(a,i,o)}class vp{constructor(o){this.queryList=o,this.matches=null}clone(){return new vp(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ah{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new Ah(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Wm(o,a).matches&&this.queries[a].setDirty()}}class xv{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Gm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Gm(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class zm{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new zm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,jC(a,p)),this.matchTNodeWithReadOption(o,a,Wo(a,o,p,!1,!1))}else l===Oc?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Wo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Ac||d===yp||d===Oc&&4&a.type)this.addMatch(a.index,-2);else{const p=Wo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function jC(i,o){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function $C(i,o,a,l){return-1===a?function Nv(i,o){return 11&i.type?Tc(i,o):4&i.type?Hm(i,o):null}(o,i):-2===a?function Rv(i,o,a){return a===Ac?Tc(o,i):a===Oc?Hm(o,i):a===yp?Mv(o,i):void 0}(i,o,l):Ko(i,i[1],a,o)}function Sb(i,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=i.data,_=a.matches,w=[];for(let b=0;b<_.length;b+=2){const T=_[b];w.push(T<0?null:$C(o,p[T],_[b+1],a.metadata.read))}d.matches=w}return d.matches}function Ov(i,o,a,l){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const _=Sb(i,o,d,a);for(let w=0;w<p.length;w+=2){const b=p[w];if(b>0)l.push(_[w/2]);else{const T=p[w+1],M=o[-b];for(let k=10;k<M.length;k++){const U=M[k];U[17]===U[3]&&Ov(U[1],U,T,l)}if(null!==M[9]){const k=M[9];for(let U=0;U<k.length;U++){const Q=k[U];Ov(Q[1],Q,T,l)}}}}}return l}function qm(i){const o=Ae(),a=Ft(),l=xl();Oa(l+1);const d=Wm(a,l);if(i.dirty&&Qs(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Ov(a,o,l,[]):Sb(a,o,d,l);i.reset(p,mv),i.notifyOnChanges()}return!0}return!1}function Mb(i,o,a,l){const d=Ft();if(d.firstCreatePass){const p=dn();(function Rb(i,o,a){null===i.queries&&(i.queries=new Gm),i.queries.track(new zm(o,a))})(d,new xv(o,a,l),p.index),function GC(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Nb(i,o,a){const l=new Ch(4==(4&a));tm(i,o,l,l.destroy),null===o[19]&&(o[19]=new Ah),o[19].queries.push(new vp(l))}(d,Ae(),a)}function xb(){return function HC(i,o){return i[19].queries[o].queryList}(Ae(),xl())}function Wm(i,o){return i.queries.getByIndex(o)}function Mh(...i){}const ry=new hn("Application Initializer");let $v=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Mh,this.reject=Mh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(hc(p))a.push(p);else if(He(p)){const _=new Promise((w,b)=>{p.subscribe({complete:w,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Ve(ry,8))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const iy=new hn("AppId",{providedIn:"root",factory:function Hv(){return`${Dp()}${Dp()}${Dp()}`}});function Dp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sy=new hn("Platform Initializer"),Uc=new hn("Platform ID"),hu=new hn("appBootstrapListener");let Bc=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})();const oy=new hn("LocaleId",{providedIn:"root",factory:()=>dt(oy,yt.Optional|yt.SkipSelf)||function xh(){return"undefined"!=typeof $localize&&$localize.locale||Nm}()}),Nh=new hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Gv{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let zv=(()=>{class i{compileModuleSync(a){return new pa(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=rs(Hn(a).declarations).reduce((_,w)=>{const b=$n(w);return b&&_.push(new _v(b)),_},[]);return new Gv(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const QC=(()=>Promise.resolve(0))();function Cp(i){"undefined"==typeof Zone?QC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class bo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $s(!1),this.onMicrotaskEmpty=new $s(!1),this.onStable=new $s(!1),this.onError=new $s(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Wv(){let i=jt.requestAnimationFrame,o=jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Xb(i){const o=()=>{!function Jb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(jt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,ay(i),i.isCheckStableRunning=!0,Kv(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),ay(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,_,w)=>{try{return Zv(i),a.invokeTask(d,p,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),eI(i)}},onInvoke:(a,l,d,p,_,w,b)=>{try{return Zv(i),a.invoke(d,p,_,w,b)}finally{i.shouldCoalesceRunChangeDetection&&o(),eI(i)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,ay(i),Kv(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,Qb,Mh,Mh);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Qb={};function Kv(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function ay(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Zv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function eI(i){i._nesting--,Kv(i)}class JC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $s,this.onMicrotaskEmpty=new $s,this.onStable=new $s,this.onError=new $s}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let tI=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bo.assertNotInAngularZone(),Cp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Cp(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Ve(bo))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})(),nI=(()=>{class i{constructor(){this._applications=new Map,Tp.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Tp.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})();class Yv{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function Qv(i){Tp=i}let Io,Tp=new Yv;const eE=new hn("AllowMultipleToken");class tE{constructor(o,a){this.name=o,this.token=a}}function iI(i,o,a=[]){const l=`Platform: ${o}`,d=new hn(l);return(p=[])=>{let _=uy();if(!_||_.injector.get(eE,!1))if(i)i(a.concat(p).concat({provide:d,useValue:!0}));else{const w=a.concat(p).concat({provide:d,useValue:!0},{provide:T_,useValue:"platform"});!function rI(i){if(Io&&!Io.destroyed&&!Io.injector.get(eE,!1))throw new Re(400,"");Io=i.get(sI);const o=i.get(sy,null);o&&o.forEach(a=>a())}(ks.create({providers:w,name:l}))}return function nE(i){const o=uy();if(!o)throw new Re(401,"");return o}()}}function uy(){return Io&&!Io.destroyed?Io:null}let sI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function rE(i,o){let a;return a="noop"===i?new JC:("zone.js"===i?void 0:i)||new bo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:bo,useValue:w}];return w.run(()=>{const T=ks.create({providers:b,parent:this.injector,name:a.moduleType.name}),M=a.create(T),k=M.injector.get(xd,null);if(!k)throw new Re(402,"");return w.runOutsideAngular(()=>{const U=w.onError.subscribe({next:Q=>{k.handleError(Q)}});M.onDestroy(()=>{Sp(this._modules,M),U.unsubscribe()})}),function XC(i,o,a){try{const l=a();return hc(l)?l.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>i.handleError(l)),l}}(k,w,()=>{const U=M.injector.get($v);return U.runInitializers(),U.donePromise.then(()=>(function rn(i){Bt(i,"Expected localeId to be defined"),"string"==typeof i&&(Pw=i.toLowerCase().replace(/_/g,"-"))}(M.injector.get(oy,Nm)||Nm),this._moduleDoBootstrap(M),M))})})}bootstrapModule(a,l=[]){const d=ly({},l);return function Jv(i,o,a){const l=new pa(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(Ap);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Ve(ks))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac}),i})();function ly(i,o){return Array.isArray(o)?o.reduce(ly,i):Object.assign(Object.assign({},i),o)}let Ap=(()=>{class i{constructor(a,l,d,p,_){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new P.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new P.y(T=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{bo.assertNotInAngularZone(),Cp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{bo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{M.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ae.T)(w,b.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let d;d=a instanceof ob?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function Xv(i){return i.isBoundToModule}(d)?void 0:this._injector.get(Mc),w=d.create(ks.NULL,[],l||d.selector,p),b=w.location.nativeElement,T=w.injector.get(tI,null),M=T&&w.injector.get(nI);return T&&M&&M.registerApplication(b,T),w.onDestroy(()=>{this.detachView(w.hostView),Sp(this.components,w),M&&M.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Sp(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(hu,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Ve(bo),Ve(ks),Ve(xd),Ve(cu),Ve($v))},i.\u0275prov=Zt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Sp(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}let cy=!0,aI=!1;function iE(){return aI=!0,cy}function fu(){if(aI)throw new Error("Cannot enable prod mode after platform setup.");cy=!1}let eT=(()=>{class i{}return i.__NG_ELEMENT_ID__=tT,i})();function tT(i){return function sE(i,o,a){if(Zc(i)&&!a){const l=or(i.index,o);return new lp(l,l)}return 47&i.type?new lp(o[16],o):null}(dn(),Ae(),16==(16&i))}class Op{constructor(){}supports(o){return ec(o)}create(o){return new sT(o)}}const iT=(i,o)=>o;class sT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||iT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<fy(l,d,p)?a:l,w=fy(_,d,p),b=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const T=w-d,M=b-d;if(T!=M){for(let U=0;U<T;U++){const Q=U<p.length?p[U]:p[U]=0,_e=Q+U;M<=_e&&_e<T&&(p[U]=Q+1)}p[_.previousIndex]=M-T}}w!==b&&o(_,w,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!ec(o))throw new Re(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)p=o[w],_=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,w),l=!0),a=a._next}else d=0,function J0(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[ua()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{_=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new oT(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new dE),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new dE),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class oT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class aT{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class dE{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new aT,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fy(i,o,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class hE{constructor(){}supports(o){return o instanceof Map||Rf(o)}create(){return new fE}}class fE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Rf(o)))throw new Re(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const l=new pE(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class pE{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function py(){return new Rh([new Op])}let Rh=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||py()),deps:[[i,new ai,new si]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:py}),i})();function gE(){return new Pp([new hE])}let Pp=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||gE()),deps:[[i,new ai,new si]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=Zt({token:i,providedIn:"root",factory:gE}),i})();const uT=iI(null,"core",[{provide:Uc,useValue:"unknown"},{provide:sI,deps:[ks]},{provide:nI,deps:[]},{provide:Bc,deps:[]}]);let lT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Ve(Ap))},i.\u0275mod=Dr({type:i}),i.\u0275inj=qt({}),i})()},3942:(Xe,we,O)=>{O.d(we,{Z:()=>Re});var f=O(2090),X=O(4859),P=O(9681),ae=O(1877);class re{constructor(he,Ce){this._delegate=he,this.firebase=Ce,(0,P._addComponent)(he,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(he,Ce=P._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(he);return!Ye.isInitialized()&&"EXPLICIT"===(null===(qe=Ye.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:Ce})}_removeServiceInstance(he,Ce=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ce)}_addComponent(he){(0,P._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,P._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ce(){const Ue=function se(Ue){const he={},Ce={__esModule:!0,initializeApp:function Te(je,j={}){const ve=P.initializeApp(je,j);if((0,f.r3)(he,ve.name))return he[ve.name];const K=new Ue(ve,Ce);return he[ve.name]=K,K},app:Ye,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ie(je){const j=je.name,ve=j.replace("-compat","");if(P._registerComponent(je)&&"PUBLIC"===je.type){const K=(ie=Ye())=>{if("function"!=typeof ie[ve])throw ue.create("invalid-app-argument",{appName:j});return ie[ve]()};void 0!==je.serviceProps&&(0,f.ZB)(K,je.serviceProps),Ce[ve]=K,Ue.prototype[ve]=function(...ie){return this._getService.bind(this,j).apply(this,je.multipleInstances?ie:[])}}return"PUBLIC"===je.type?Ce[ve]:null},removeApp:function qe(je){delete he[je]},useAsService:function $e(je,j){return"serverAuth"===j?null:j},modularAPIs:P}};function Ye(je){if(!(0,f.r3)(he,je=je||P._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:je});return he[je]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function Ee(){return Object.keys(he).map(je=>he[je])}}),Ye.App=Ue,Ce}(re);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function he(Ce){(0,f.ZB)(Ue,Ce)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Ue}(),B=new ae.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=$;!function Me(Ue){(0,P.registerVersion)("@firebase/app-compat","0.1.25",Ue)}()},9681:(Xe,we,O)=>{O.r(we),O.d(we,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Ti,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>en,_addOrOverwriteComponent:()=>Zt,_apps:()=>Qt,_clearComponents:()=>qi,_components:()=>Sn,_getProvider:()=>qt,_registerComponent:()=>br,_removeServiceInstance:()=>Vt,deleteApp:()=>yt,getApp:()=>Zr,getApps:()=>Ai,initializeApp:()=>ys,onLog:()=>Mn,registerVersion:()=>bn,setLogLevel:()=>Gs});var f=O(5861),X=O(4859),P=O(1877),ae=O(2090),re=O(8766);class pe{constructor(J){this.container=J}getPlatformInfoString(){return this.container.getProviders().map(Ne=>{if(function ue(H){const J=H.getComponent();return"VERSION"===(null==J?void 0:J.type)}(Ne)){const Je=Ne.getImmediate();return`${Je.library}/${Je.version}`}return null}).filter(Ne=>Ne).join(" ")}}const se="@firebase/app",$=new P.Yd("@firebase/app"),Bt="[DEFAULT]",Qe={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qt=new Map,Sn=new Map;function en(H,J){try{H.container.addComponent(J)}catch(Ne){$.debug(`Component ${J.name} failed to register with FirebaseApp ${H.name}`,Ne)}}function Zt(H,J){H.container.addOrOverwriteComponent(J)}function br(H){const J=H.name;if(Sn.has(J))return $.debug(`There were multiple attempts to register component ${J}.`),!1;Sn.set(J,H);for(const Ne of Qt.values())en(Ne,H);return!0}function qt(H,J){const Ne=H.container.getProvider("heartbeat").getImmediate({optional:!0});return Ne&&Ne.triggerHeartbeat(),H.container.getProvider(J)}function Vt(H,J,Ne=Bt){qt(H,J).clearInstance(Ne)}function qi(){Sn.clear()}const fr=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ir{constructor(J,Ne,Je){this._isDeleted=!1,this._options=Object.assign({},J),this._config=Object.assign({},Ne),this._name=Ne.name,this._automaticDataCollectionEnabled=Ne.automaticDataCollectionEnabled,this._container=Je,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(J){this.checkDestroyed(),this._automaticDataCollectionEnabled=J}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(J){this._isDeleted=J}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}const Ti="9.8.1";function ys(H,J={}){"object"!=typeof J&&(J={name:J});const Ne=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},J),Je=Ne.name;if("string"!=typeof Je||!Je)throw fr.create("bad-app-name",{appName:String(Je)});const ht=Qt.get(Je);if(ht){if((0,ae.vZ)(H,ht.options)&&(0,ae.vZ)(Ne,ht.config))return ht;throw fr.create("duplicate-app",{appName:Je})}const Ct=new X.H0(Je);for(const Et of Sn.values())Ct.addComponent(Et);const ln=new Ir(H,Ne,Ct);return Qt.set(Je,ln),ln}function Zr(H=Bt){const J=Qt.get(H);if(!J)throw fr.create("no-app",{appName:H});return J}function Ai(){return Array.from(Qt.values())}function yt(H){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,f.Z)(function*(H){const J=H.name;Qt.has(J)&&(Qt.delete(J),yield Promise.all(H.container.getProviders().map(Ne=>Ne.delete())),H.isDeleted=!0)})).apply(this,arguments)}function bn(H,J,Ne){var Je;let ht=null!==(Je=Qe[H])&&void 0!==Je?Je:H;Ne&&(ht+=`-${Ne}`);const Ct=ht.match(/\s|\//),ln=J.match(/\s|\//);if(Ct||ln){const Et=[`Unable to register library "${ht}" with version "${J}":`];return Ct&&Et.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),Ct&&ln&&Et.push("and"),ln&&Et.push(`version name "${J}" contains illegal characters (whitespace or "/")`),void $.warn(Et.join(" "))}br(new X.wA(`${ht}-version`,()=>({library:ht,version:J}),"VERSION"))}function Mn(H,J){if(null!==H&&"function"!=typeof H)throw fr.create("invalid-log-argument");(0,P.Am)(H,J)}function Gs(H){(0,P.Ub)(H)}const kn="firebase-heartbeat-store";let _i=null;function Ao(){return _i||(_i=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(H,J)=>{0===J&&H.createObjectStore(kn)}}).catch(H=>{throw fr.create("storage-open",{originalErrorMessage:H.message})})),_i}function it(){return(it=(0,f.Z)(function*(H){try{return(yield Ao()).transaction(kn).objectStore(kn).get(Jr(H))}catch(J){throw fr.create("storage-get",{originalErrorMessage:J.message})}})).apply(this,arguments)}function vt(H,J){return pr.apply(this,arguments)}function pr(){return(pr=(0,f.Z)(function*(H,J){try{const Je=(yield Ao()).transaction(kn,"readwrite");return yield Je.objectStore(kn).put(J,Jr(H)),Je.done}catch(Ne){throw fr.create("storage-set",{originalErrorMessage:Ne.message})}})).apply(this,arguments)}function Jr(H){return`${H.name}!${H.options.appId}`}class gr{constructor(J){this.container=J,this._heartbeatsCache=null;const Ne=this.container.getProvider("app").getImmediate();this._storage=new G(Ne),this._heartbeatsCachePromise=this._storage.read().then(Je=>(this._heartbeatsCache=Je,Je))}triggerHeartbeat(){var J=this;return(0,f.Z)(function*(){const Je=J.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=mr();if(null===J._heartbeatsCache&&(J._heartbeatsCache=yield J._heartbeatsCachePromise),J._heartbeatsCache.lastSentHeartbeatDate!==ht&&!J._heartbeatsCache.heartbeats.some(Ct=>Ct.date===ht))return J._heartbeatsCache.heartbeats.push({date:ht,agent:Je}),J._heartbeatsCache.heartbeats=J._heartbeatsCache.heartbeats.filter(Ct=>{const ln=new Date(Ct.date).valueOf();return Date.now()-ln<=2592e6}),J._storage.overwrite(J._heartbeatsCache)})()}getHeartbeatsHeader(){var J=this;return(0,f.Z)(function*(){if(null===J._heartbeatsCache&&(yield J._heartbeatsCachePromise),null===J._heartbeatsCache||0===J._heartbeatsCache.heartbeats.length)return"";const Ne=mr(),{heartbeatsToSend:Je,unsentEntries:ht}=function V(H,J=1024){const Ne=[];let Je=H.slice();for(const ht of H){const Ct=Ne.find(ln=>ln.agent===ht.agent);if(Ct){if(Ct.dates.push(ht.date),z(Ne)>J){Ct.dates.pop();break}}else if(Ne.push({agent:ht.agent,dates:[ht.date]}),z(Ne)>J){Ne.pop();break}Je=Je.slice(1)}return{heartbeatsToSend:Ne,unsentEntries:Je}}(J._heartbeatsCache.heartbeats),Ct=(0,ae.L)(JSON.stringify({version:2,heartbeats:Je}));return J._heartbeatsCache.lastSentHeartbeatDate=Ne,ht.length>0?(J._heartbeatsCache.heartbeats=ht,yield J._storage.overwrite(J._heartbeatsCache)):(J._heartbeatsCache.heartbeats=[],J._storage.overwrite(J._heartbeatsCache)),Ct})()}}function mr(){return(new Date).toISOString().substring(0,10)}class G{constructor(J){this.app=J,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var J=this;return(0,f.Z)(function*(){return(yield J._canUseIndexedDBPromise)&&(yield function Gt(H){return it.apply(this,arguments)}(J.app))||{heartbeats:[]}})()}overwrite(J){var Ne=this;return(0,f.Z)(function*(){var Je;if(yield Ne._canUseIndexedDBPromise){const Ct=yield Ne.read();return vt(Ne.app,{lastSentHeartbeatDate:null!==(Je=J.lastSentHeartbeatDate)&&void 0!==Je?Je:Ct.lastSentHeartbeatDate,heartbeats:J.heartbeats})}})()}add(J){var Ne=this;return(0,f.Z)(function*(){var Je;if(yield Ne._canUseIndexedDBPromise){const Ct=yield Ne.read();return vt(Ne.app,{lastSentHeartbeatDate:null!==(Je=J.lastSentHeartbeatDate)&&void 0!==Je?Je:Ct.lastSentHeartbeatDate,heartbeats:[...Ct.heartbeats,...J.heartbeats]})}})()}}function z(H){return(0,ae.L)(JSON.stringify({version:2,heartbeats:H})).length}!function De(H){br(new X.wA("platform-logger",J=>new pe(J),"PRIVATE")),br(new X.wA("heartbeat",J=>new gr(J),"PRIVATE")),bn(se,"0.7.24",H),bn(se,"0.7.24","esm2017"),bn("fire-js","")}("")},4859:(Xe,we,O)=>{O.d(we,{wA:()=>P,H0:()=>se});var f=O(5861),X=O(2090);class P{constructor($,B,te){this.name=$,this.instanceFactory=B,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class re{constructor($,B){this.name=$,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const B=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(B)){const te=new X.BH;if(this.instancesDeferred.set(B,te),this.isInitialized(B)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:B});ze&&te.resolve(ze)}catch(ze){}}return this.instancesDeferred.get(B).promise}getImmediate($){var B;const te=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),ze=null!==(B=null==$?void 0:$.optional)&&void 0!==B&&B;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Me){if(ze)return null;throw Me}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ue(ce){return"EAGER"===ce.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(B){}for(const[B,te]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(B);try{const Me=this.getOrInitializeService({instanceIdentifier:ze});te.resolve(Me)}catch(Me){}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const B=Array.from($.instances.values());yield Promise.all([...B.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...B.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:B={}}=$,te=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:te,options:B});for(const[Me,Re]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Me)&&Re.resolve(ze);return ze}onInit($,B){var te;const ze=this.normalizeInstanceIdentifier(B),Me=null!==(te=this.onInitCallbacks.get(ze))&&void 0!==te?te:new Set;Me.add($),this.onInitCallbacks.set(ze,Me);const Re=this.instances.get(ze);return Re&&$(Re,ze),()=>{Me.delete($)}}invokeOnInitCallbacks($,B){const te=this.onInitCallbacks.get(B);if(te)for(const ze of te)try{ze($,B)}catch(Me){}}getOrInitializeService({instanceIdentifier:$,options:B={}}){let te=this.instances.get($);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=$,ce===ae?void 0:ce),options:B}),this.instances.set($,te),this.instancesOptions.set($,B),this.invokeOnInitCallbacks(te,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,te)}catch(ze){}var ce;return te||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor($){this.name=$,this.providers=new Map}addComponent($){const B=this.getProvider($.name);if(B.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);B.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const B=new re($,this);return this.providers.set($,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(Xe,we,O)=>{O.d(we,{in:()=>X,Yd:()=>ue,Ub:()=>se,Am:()=>ce});const f=[];var X=(()=>{return($=X||(X={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",X;var $})();const P={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,re={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},pe=($,B,...te)=>{if(B<$.logLevel)return;const ze=(new Date).toISOString(),Me=re[B];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Me](`[${ze}]  ${$.name}:`,...te)};class ue{constructor(B){this.name=B,this._logLevel=ae,this._logHandler=pe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in X))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?P[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...B),this._logHandler(this,X.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...B),this._logHandler(this,X.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,X.INFO,...B),this._logHandler(this,X.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,X.WARN,...B),this._logHandler(this,X.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...B),this._logHandler(this,X.ERROR,...B)}}function se($){f.forEach(B=>{B.setLogLevel($)})}function ce($,B){for(const te of f){let ze=null;B&&B.level&&(ze=P[B.level]),te.userLogHandler=null===$?null:(Me,Re,...Ue)=>{const he=Ue.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(qe){return null}}).filter(Ce=>Ce).join(" ");Re>=(null!=ze?ze:Me.logLevel)&&$({level:X[Re].toLowerCase(),message:he,args:Ue,type:Me.name})}}}},8766:(Xe,we,O)=>{O.d(we,{Lj:()=>Te,X3:()=>Ye});var f=O(5861);let P,ae;const ue=new WeakMap,se=new WeakMap,ce=new WeakMap,$=new WeakMap,B=new WeakMap;let Me={get(j,ve,K){if(j instanceof IDBTransaction){if("done"===ve)return se.get(j);if("objectStoreNames"===ve)return j.objectStoreNames||ce.get(j);if("store"===ve)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Ce(j[ve])},set:(j,ve,K)=>(j[ve]=K,!0),has:(j,ve)=>j instanceof IDBTransaction&&("done"===ve||"store"===ve)||ve in j};function he(j){return"function"==typeof j?function Ue(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...ve){return j.apply(qe(this),ve),Ce(ue.get(this))}:function(...ve){return Ce(j.apply(qe(this),ve))}:function(ve,...K){const ie=j.call(qe(this),ve,...K);return ce.set(ie,ve.sort?ve.sort():[ve]),Ce(ie)}}(j):(j instanceof IDBTransaction&&function ze(j){if(se.has(j))return;const ve=new Promise((K,ie)=>{const ee=()=>{j.removeEventListener("complete",me),j.removeEventListener("error",oe),j.removeEventListener("abort",oe)},me=()=>{K(),ee()},oe=()=>{ie(j.error||new DOMException("AbortError","AbortError")),ee()};j.addEventListener("complete",me),j.addEventListener("error",oe),j.addEventListener("abort",oe)});se.set(j,ve)}(j),((j,ve)=>ve.some(K=>j instanceof K))(j,function re(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Me):j)}function Ce(j){if(j instanceof IDBRequest)return function te(j){const ve=new Promise((K,ie)=>{const ee=()=>{j.removeEventListener("success",me),j.removeEventListener("error",oe)},me=()=>{K(Ce(j.result)),ee()},oe=()=>{ie(j.error),ee()};j.addEventListener("success",me),j.addEventListener("error",oe)});return ve.then(K=>{K instanceof IDBCursor&&ue.set(K,j)}).catch(()=>{}),B.set(ve,j),ve}(j);if($.has(j))return $.get(j);const ve=he(j);return ve!==j&&($.set(j,ve),B.set(ve,j)),ve}const qe=j=>B.get(j);function Ye(j,ve,{blocked:K,upgrade:ie,blocking:ee,terminated:me}={}){const oe=indexedDB.open(j,ve),Oe=Ce(oe);return ie&&oe.addEventListener("upgradeneeded",lt=>{ie(Ce(oe.result),lt.oldVersion,lt.newVersion,Ce(oe.transaction))}),K&&oe.addEventListener("blocked",()=>K()),Oe.then(lt=>{me&&lt.addEventListener("close",()=>me()),ee&&lt.addEventListener("versionchange",()=>ee())}).catch(()=>{}),Oe}function Te(j,{blocked:ve}={}){const K=indexedDB.deleteDatabase(j);return ve&&K.addEventListener("blocked",()=>ve()),Ce(K).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],$e=new Map;function je(j,ve){if(!(j instanceof IDBDatabase)||ve in j||"string"!=typeof ve)return;if($e.get(ve))return $e.get(ve);const K=ve.replace(/FromIndex$/,""),ie=ve!==K,ee=Ie.includes(K);if(!(K in(ie?IDBIndex:IDBObjectStore).prototype)||!ee&&!Ee.includes(K))return;const me=function(){var oe=(0,f.Z)(function*(Oe,...lt){const Ht=this.transaction(Oe,ee?"readwrite":"readonly");let Bt=Ht.store;return ie&&(Bt=Bt.index(lt.shift())),(yield Promise.all([Bt[K](...lt),ee&&Ht.done]))[0]});return function(lt){return oe.apply(this,arguments)}}();return $e.set(ve,me),me}!function Re(j){Me=j(Me)}(j=>gR(pR({},j),{get:(ve,K,ie)=>je(ve,K)||j.get(ve,K,ie),has:(ve,K)=>!!je(ve,K)||j.has(ve,K)}))},5861:(Xe,we,O)=>{function f(P,ae,re,pe,ue,se,ce){try{var $=P[se](ce),B=$.value}catch(te){return void re(te)}$.done?ae(B):Promise.resolve(B).then(pe,ue)}function X(P){return function(){var ae=this,re=arguments;return new Promise(function(pe,ue){var se=P.apply(ae,re);function ce(B){f(se,pe,ue,ce,$,"next",B)}function $(B){f(se,pe,ue,ce,$,"throw",B)}ce(void 0)})}}O.d(we,{Z:()=>X})}},Xe=>{Xe(Xe.s=7468)}]);